/* Generated on:Tue Feb 02 2021 12:49:00 GMT-0800 (Pacific Standard Time) || version: 6.7.4 - Altanai (@altanai)  , License : MIT  */ 
var webrtcdevlogs=[];function isJSON(A){if("string"!=typeof A)return!1;try{var t=JSON.parse(A);return"object"==typeof t}catch(A){return!1}}function toStr(A){try{return JSON.stringify(A,function(A,t){return t&&t.sdp?(log(t.sdp.type,"\t",t.sdp.sdp),""):t},"\t")}catch(t){return A}}function getArgsJson(A){var t="";for(i in A)A[i]&&(t+=toStr(A[i]));return t}var webrtcdevlogger={log:function(){let A="";var t=Date(Date.now()).toString();isJSON(arguments)?(A=JSON.stringify(arguments,void 0,2),webrtcdevlogs.push(t+"<pre style='color:grey'>[LOG]"+A+"</pre>")):(A=getArgsJson(arguments),webrtcdevlogs.push(t+"<p style='color:grey'>[LOG]"+A+"</p>"))},info:function(){let A="";var t=Date(Date.now()).toString();isJSON(arguments)?(A=JSON.stringify(arguments,void 0,2),webrtcdevlogs.push(t+"<pre style='color:blue'>[INFO]"+A+"</pre>")):(A=getArgsJson(arguments),webrtcdevlogs.push(t+"<p style='color:blue'>[INFO]"+A+"</p>"))},debug:function(){let A="";var t=Date(Date.now()).toString();isJSON(arguments)?(A=JSON.stringify(arguments,void 0,2),webrtcdevlogs.push(t+"<pre style='color:green'>[DEBUG]"+A+"</pre>")):(A=getArgsJson(arguments),webrtcdevlogs.push(t+"<p style='color:green'>[DEBUG]"+A+"</p>"))},warn:function(){let A="";var t=Date(Date.now()).toString();isJSON(arguments)?(A=JSON.stringify(arguments,void 0,2),webrtcdevlogs.push(t+"<pre style='color:orange'>[WARN]"+A+"</pre>")):(A=getArgsJson(arguments),webrtcdevlogs.push(t+"<p style='color:orange'>[WARN]"+A+"</p>"))},error:function(){let A="";var t=Date(Date.now()).toString();isJSON(arguments)?(A=JSON.stringify(arguments,void 0,2),webrtcdevlogs.push(t+"<pre style='color:red'>[ERROR]"+A+"</pre>")):(A=getArgsJson(arguments),webrtcdevlogs.push(t+"<p style='color:red'>[ERROR]"+A+"</p>"))}},webrtcdev=webrtcdevlogger,RTCMultiConnection=function(A,t){function n(A,t){function n(A){return!A.audio&&!A.video&&!A.screen&&A.data}function r(t,n){A.peersBackup[t]||(A.peersBackup[t]={userid:t,extra:{}}),A.peersBackup[t].extra=n}function a(t){if(t.remoteUserId==A.userid){if(A.peers[t.sender]&&A.peers[t.sender].extra!=t.message.extra&&(A.peers[t.sender].extra=t.extra,A.onExtraDataUpdated({userid:t.sender,extra:t.extra}),r(t.sender,t.extra)),t.message.streamSyncNeeded&&A.peers[t.sender]){var s=A.streamEvents[t.message.streamid];if(!s||!s.stream)return;var l=t.message.action;if("ended"===l||"inactive"===l||"stream-removed"===l)return A.peersBackup[s.userid]&&(s.extra=A.peersBackup[s.userid].extra),void A.onstreamended(s);var c="both"==t.message.type?null:t.message.type;return void("function"==typeof s.stream[l]&&s.stream[l](c))}if("dropPeerConnection"===t.message)return void A.deletePeer(t.sender);if(t.message.allParticipants)return-1===t.message.allParticipants.indexOf(t.sender)&&t.message.allParticipants.push(t.sender),void t.message.allParticipants.forEach(function(t){d[A.peers[t]?"renegotiatePeer":"createNewPeer"](t,{localPeerSdpConstraints:{OfferToReceiveAudio:A.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:A.sdpConstraints.mandatory.OfferToReceiveVideo},remotePeerSdpConstraints:{OfferToReceiveAudio:A.session.oneway?!!A.session.audio:A.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:A.session.oneway?!!A.session.video||!!A.session.screen:A.sdpConstraints.mandatory.OfferToReceiveVideo},isOneWay:!!A.session.oneway||"one-way"===A.direction,isDataOnly:n(A.session)})});if(t.message.newParticipant)return t.message.newParticipant==A.userid?void 0:A.peers[t.message.newParticipant]?void 0:void d.createNewPeer(t.message.newParticipant,t.message.userPreferences||{localPeerSdpConstraints:{OfferToReceiveAudio:A.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:A.sdpConstraints.mandatory.OfferToReceiveVideo},remotePeerSdpConstraints:{OfferToReceiveAudio:A.session.oneway?!!A.session.audio:A.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:A.session.oneway?!!A.session.video||!!A.session.screen:A.sdpConstraints.mandatory.OfferToReceiveVideo},isOneWay:!!A.session.oneway||"one-way"===A.direction,isDataOnly:n(A.session)});if(t.message.readyForOffer&&(A.attachStreams.length&&(A.waitingForLocalMedia=!1),A.waitingForLocalMedia))return void setTimeout(function(){a(t)},1);if(t.message.newParticipationRequest&&t.sender!==A.userid){A.peers[t.sender]&&A.deletePeer(t.sender);var B={extra:t.extra||{},localPeerSdpConstraints:t.message.remotePeerSdpConstraints||{OfferToReceiveAudio:A.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:A.sdpConstraints.mandatory.OfferToReceiveVideo},remotePeerSdpConstraints:t.message.localPeerSdpConstraints||{OfferToReceiveAudio:A.session.oneway?!!A.session.audio:A.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:A.session.oneway?!!A.session.video||!!A.session.screen:A.sdpConstraints.mandatory.OfferToReceiveVideo},isOneWay:"undefined"==typeof t.message.isOneWay?!!A.session.oneway||"one-way"===A.direction:t.message.isOneWay,isDataOnly:"undefined"==typeof t.message.isDataOnly?n(A.session):t.message.isDataOnly,dontGetRemoteStream:"undefined"==typeof t.message.isOneWay?!!A.session.oneway||"one-way"===A.direction:t.message.isOneWay,dontAttachLocalStream:!!t.message.dontGetRemoteStream,connectionDescription:t,successCallback:function(){}};return void A.onNewParticipant(t.sender,B)}return t.message.changedUUID&&A.peers[t.message.oldUUID]&&(A.peers[t.message.newUUID]=A.peers[t.message.oldUUID],delete A.peers[t.message.oldUUID]),t.message.userLeft?(d.onUserLeft(t.sender),void(!t.message.autoCloseEntireSession||A.leave())):void d.addNegotiatedMessage(t.message,t.sender)}}webrtcdev.log(" >>>>  SocketConnection ",A);var s="";s+="?userid="+A.userid,s+="&sessionid="+A.sessionid,s+="&msgEvent="+A.socketMessageEvent,s+="&socketCustomEvent="+A.socketCustomEvent,s+="&autoCloseEntireSession="+!!A.autoCloseEntireSession,!0===A.session.broadcast&&(s+="&oneToMany=true"),s+="&maxParticipantsAllowed="+A.maxParticipantsAllowed,A.enableScalableBroadcast&&(s+="&enableScalableBroadcast=true",s+="&maxRelayLimitPerUser="+(A.maxRelayLimitPerUser||2)),s+="&extra="+JSON.stringify(A.extra||{}),A.socketCustomParameters&&(s+=A.socketCustomParameters);try{io.sockets={}}catch(A){}if(A.socketURL||(webrtcdev.log(" >>>>s  socket.io url is missing , using / "),A.socketURL="/"),"/"!=A.socketURL.substr(A.socketURL.length-1,1))throw"\"socketURL\" MUST end with a slash.";A.enableLogs&&("/"==A.socketURL?webrtcdev.info("socket.io url is: ",location.origin+"/"):webrtcdev.info("socket.io url is: ",A.socketURL));try{A.socket=io(A.socketURL+s,{transports:["websocket"],upgrade:!1})}catch(t){webrtcdev.error("socket.io signaller connection error ",t),A.socket=io.connect(A.socketURL+s,A.socketOptions)}var d=A.multiPeersHandler;A.socket.on("extra-data-updated",function(t,n){A.peers[t]&&(A.peers[t].extra=n,A.onExtraDataUpdated({userid:t,extra:n}),r(t,n))}),A.socket.on(A.socketMessageEvent,a);var l=!1;A.socket.resetProps=function(){l=!1},A.socket.on("connect",function(){l||(l=!0,A.enableLogs&&webrtcdev.info("[RTC header] socket.io connection is opened."),setTimeout(function(){A.socket.emit("extra-data-updated",A.extra)},1e3),t&&t(A.socket))}),A.socket.on("disconnect",function(t){webrtcdev.error("[RTC header] socket.io connection is disconneted ."),A.onSocketDisconnect(t)}),A.socket.on("error",function(t){webrtcdev.error("[RTC header] socket.io connection errorred."),A.onSocketError(t)}),A.socket.on("user-disconnected",function(t){webrtcdev.log("[RTC header] user-disconnected"),t===A.userid||(A.onUserStatusChanged({userid:t,status:"offline",extra:A.peers[t]?A.peers[t].extra||{}:{}}),A.deletePeer(t))}),A.socket.on("user-connected",function(t){webrtcdev.log("[RTC header] A user-connected connected to the session "),t===A.userid||A.onUserStatusChanged({userid:t,status:"online",extra:A.peers[t]?A.peers[t].extra||{}:{}})}),A.socket.on("closed-entire-session",function(t,n){A.leave(),A.onEntireSessionClosed({sessionid:t,userid:t,extra:n})}),A.socket.on("userid-already-taken",function(t,n){A.onUserIdAlreadyTaken(t,n)}),A.socket.on("logs",function(t){A.enableLogs&&webrtcdev.debug("server-logs",t)}),A.socket.on("number-of-broadcast-viewers-updated",function(t){A.onNumberOfBroadcastViewersUpdated(t)}),A.socket.on("set-isInitiator-true",function(t){t!=A.sessionid||(A.isInitiator=!0)})}function r(A){function t(){A.fbr=new FileBufferReader,A.fbr.onProgress=function(t){A.onFileProgress(t)},A.fbr.onBegin=function(t){A.onFileStart(t)},A.fbr.onEnd=function(t){A.onFileEnd(t)}}var n=this,r=["getAllParticipants","getLength","selectFirst","streams","send","forEach"];A.peers={getLength:function(){var A=0;for(var t in this)-1==r.indexOf(t)&&A++;return A},selectFirst:function(){var A;for(var t in this)-1==r.indexOf(t)&&(A=this[t]);return A},getAllParticipants:function(A){var t=[];for(var n in this)-1==r.indexOf(n)&&n!=A&&t.push(n);return t},forEach:function(t){this.getAllParticipants().forEach(function(n){t(A.peers[n])})},send:function(t,r){var a=this;if(!g(t.size)&&!g(t.type)){if(A.enableFileSharing)return void n.shareFile(t,r);"string"!=typeof t&&(t=JSON.stringify(t))}if("text"!==t.type&&!(t instanceof ArrayBuffer)&&!(t instanceof DataView))return void D.send({text:t,channel:this,connection:A,remoteUserId:r});if("text"===t.type&&(t=JSON.stringify(t)),r){var s=A.peers[r];if(s)return s.channels.length?void s.channels.forEach(function(A){A.send(t)}):(A.peers[r].createDataChannel(),A.renegotiate(r),void setTimeout(function(){a.send(t,r)},3e3))}this.getAllParticipants().forEach(function(n){return a[n].channels.length?void a[n].channels.forEach(function(A){A.send(t)}):(A.peers[n].createDataChannel(),A.renegotiate(n),void setTimeout(function(){a[n].channels.forEach(function(A){A.send(t)})},3e3))})}},this.uuid=A.userid,this.getLocalConfig=function(r,a,s){return s||(s={}),{streamsToShare:s.streamsToShare||{},rtcMultiConnection:A,connectionDescription:s.connectionDescription,userid:a,localPeerSdpConstraints:s.localPeerSdpConstraints,remotePeerSdpConstraints:s.remotePeerSdpConstraints,dontGetRemoteStream:!!s.dontGetRemoteStream,dontAttachLocalStream:!!s.dontAttachLocalStream,renegotiatingPeer:!!s.renegotiatingPeer,peerRef:s.peerRef,channels:s.channels||[],onLocalSdp:function(A){n.onNegotiationNeeded(A,a)},onLocalCandidate:function(t){t=R.processCandidates(A,t),t&&n.onNegotiationNeeded(t,a)},remoteSdp:r,onDataChannelMessage:function(r){if(!A.fbr&&A.enableFileSharing&&t(),"string"==typeof r||!A.enableFileSharing)return void n.onDataChannelMessage(r,a);var s=this;return r instanceof ArrayBuffer||r instanceof DataView?void A.fbr.convertToObject(r,function(A){s.onDataChannelMessage(A)}):r.readyForNextChunk?void A.fbr.getNextChunk(r,function(t){A.peers[a].channels.forEach(function(A){A.send(t)})},a):r.chunkMissing?void A.fbr.chunkMissing(r):void A.fbr.addChunk(r,function(t){A.peers[a].peer.channel.send(t)})},onDataChannelError:function(A){n.onDataChannelError(A,a)},onDataChannelOpened:function(A){n.onDataChannelOpened(A,a)},onDataChannelClosed:function(A){n.onDataChannelClosed(A,a)},onRemoteStream:function(t){A.peers[a]&&A.peers[a].streams.push(t),n.onGettingRemoteMedia(t,a)},onRemoteStreamRemoved:function(A){n.onRemovingRemoteMedia(A,a)},onPeerStateChanged:function(A){n.onPeerStateChanged(A),"new"===A.iceConnectionState&&n.onNegotiationStarted(a,A),"connected"===A.iceConnectionState&&n.onNegotiationCompleted(a,A),-1!==A.iceConnectionState.search(/closed|failed/gi)&&(n.onUserLeft(a),n.disconnectWith(a))}}},this.createNewPeer=function(t,n){if(!(A.maxParticipantsAllowed<=A.getAllParticipants().length)){if(n=n||{},!A.isInitiator||!A.session.audio||"two-way"!==A.session.audio||n.streamsToShare||(n.isOneWay=!1,n.isDataOnly=!1,n.session=A.session),!n.isOneWay&&!n.isDataOnly)return n.isOneWay=!0,void this.onNegotiationNeeded({enableMedia:!0,userPreferences:n},t);n=A.setUserPreferences(n,t);var r=this.getLocalConfig(null,t,n);A.peers[t]=new Q(r)}},this.createAnsweringPeer=function(t,n,r){r=A.setUserPreferences(r||{},n);var a=this.getLocalConfig(t,n,r);A.peers[n]=new Q(a)},this.renegotiatePeer=function(t,n,r){if(!A.peers[t])return void(A.enableLogs&&webrtcdev.error("Peer ("+t+") does not exist. Renegotiation skipped."));n||(n={}),n.renegotiatingPeer=!0,n.peerRef=A.peers[t].peer,n.channels=A.peers[t].channels;var a=this.getLocalConfig(r,t,n);A.peers[t]=new Q(a)},this.replaceTrack=function(t,n,r){if(!A.peers[n])throw"This peer ("+n+") does not exist.";var a=A.peers[n].peer;return!!a.getSenders&&"function"==typeof a.getSenders&&a.getSenders().length?void a.getSenders().forEach(function(a){r&&"video"===a.track.kind&&(A.peers[n].peer.lastVideoTrack=a.track,a.replaceTrack(t)),r||"audio"!==a.track.kind||(A.peers[n].peer.lastAudioTrack=a.track,a.replaceTrack(t))}):void(webrtcdev.warn("RTPSender.replaceTrack is NOT supported."),this.renegotiatePeer(n))},this.onNegotiationStarted=function(){},this.onNegotiationCompleted=function(){},this.onNegotiationNeeded=function(){},this.addNegotiatedMessage=function(t,r){if(webrtcdev.log("[RTC Header] addNegotiatedMessage",t),t.type&&t.sdp)return"answer"==t.type&&A.peers[r]&&A.peers[r].addRemoteSdp(t),"offer"==t.type&&(t.renegotiatingPeer?this.renegotiatePeer(r,null,t):this.createAnsweringPeer(t,r)),void webrtcdev.log("Remote peer's sdp:",t.sdp);if(t.candidate)return A.peers[r]&&A.peers[r].addRemoteCandidate(t),void webrtcdev.log("Remote peer's candidate pairs:",t.candidate);if(t.enableMedia){A.session=t.userPreferences.session||A.session,A.session.oneway&&A.attachStreams.length&&(A.attachStreams=[]),t.userPreferences.isDataOnly&&A.attachStreams.length&&(A.attachStreams.length=[]);var a={};A.attachStreams.forEach(function(A){a[A.streamid]={isAudio:!!A.isAudio,isVideo:!!A.isVideo,isScreen:!!A.isScreen}}),t.userPreferences.streamsToShare=a,n.onNegotiationNeeded({readyForOffer:!0,userPreferences:t.userPreferences},r)}t.readyForOffer&&A.onReadyForOffer(r,t.userPreferences)},this.onGettingRemoteMedia=function(){},this.onRemovingRemoteMedia=function(){},this.onGettingLocalMedia=function(){},this.onLocalMediaError=function(t,n){A.onMediaError(t,n)},this.shareFile=function(n,r){t(),A.fbr.readAsArrayBuffer(n,function(t){var n=A.getAllParticipants();r&&(n=[r]),n.forEach(function(n){A.fbr.getNextChunk(t,function(t){A.peers[n].channels.forEach(function(A){A.send(t)})},n)})},{userid:A.userid,chunkSize:"Firefox"===DetectRTC.browser.name?15000:A.chunkSize||0})};var a;a=new F(A),this.onDataChannelMessage=function(t,n){a.receive(JSON.parse(t),n,A.peers[n]?A.peers[n].extra:{})},this.onDataChannelClosed=function(t,n){t.userid=n,t.extra=A.peers[n]?A.peers[n].extra:{},A.onclose(t)},this.onDataChannelError=function(t,n){t.userid=n,event.extra=A.peers[n]?A.peers[n].extra:{},A.onerror(t)},this.onDataChannelOpened=function(t,n){return A.peers[n].channels.length?void(A.peers[n].channels=[t]):void(A.peers[n].channels.push(t),A.onopen({userid:n,extra:A.peers[n]?A.peers[n].extra:{},channel:t}))},this.onPeerStateChanged=function(t){A.onPeerStateChanged(t)},this.getRemoteStreams=function(t){return t=t||A.peers.getAllParticipants()[0],A.peers[t]?A.peers[t].streams:[]}}function a(A,t,n){if("undefined"!=typeof CustomEvent){var r=new CustomEvent(t,{arguments:n,__exposedProps__:n});A.dispatchEvent(r)}}function s(){if(window.crypto&&window.crypto.getRandomValues&&-1===navigator.userAgent.indexOf("Safari")){for(var A=window.crypto.getRandomValues(new Uint32Array(3)),t="",n=0,r=A.length;n<r;n++)t+=A[n].toString(36);return t}return(Math.random()*new Date().getTime()).toString(36).replace(/\./g,"")}function d(A,t,n){if(webrtcdev.log("[RTC global] getRMCMediaElement"),!n.autoCreateMediaElement)return webrtcdev.log("[RTC global] getRMCMediaElement - not autoCreateMediaElement"),void t({});var r=!1;p(A,"video").length||A.isVideo||A.isScreen||(r=!0),"Firefox"===DetectRTC.browser.name&&(n.session.video||n.session.screen)&&(r=!1);var a=document.createElement(r?"audio":"video");if(a.srcObject=A,a.setAttribute("autoplay",!0),a.setAttribute("playsinline",!0),a.setAttribute("controls",!0),a.setAttribute("muted",!1),a.setAttribute("volume",1),"Firefox"===DetectRTC.browser.name){var s="ended";"oninactive"in a&&(s="inactive"),a.addEventListener(s,function(){if(currentUserMediaRequest.remove(A.idInstance),"local"===A.type){s="ended","oninactive"in A&&(s="inactive"),M.onSyncNeeded(A.streamid,s),n.attachStreams.forEach(function(t,r){A.streamid===t.streamid&&delete n.attachStreams[r]});var t=[];n.attachStreams.forEach(function(A){A&&t.push(A)}),n.attachStreams=t;var r=n.streamEvents[A.streamid];if(r)return void n.onstreamended(r);this.parentNode&&this.parentNode.removeChild(this)}},!1)}var d=a.play();if("undefined"!=typeof d){var l=!1;setTimeout(function(){l||(l=!0,t(a))},1e3),d.then(function(){l||(l=!0,t(a))}).catch(function(){l||(l=!0,t(a))})}else t(a)}function l(A,t){window.removeEventListener(A,t),window.addEventListener(A,t,!1)}function c(A){var t=[];return A.forEach(function(A){A&&t.push(A)}),t}function B(A){return!A.audio&&!A.video&&!A.screen&&A.data}function g(A){return"undefined"==typeof A}function u(A){return"string"==typeof A}function m(A,t){return!(A.session.audio&&"two-way"===A.session.audio)&&(!("Firefox"!==DetectRTC.browser.name||!1===t)||!("Chrome"!==DetectRTC.browser.name||50>DetectRTC.browser.version)&&(!(!0!==typeof t)||!!("undefined"==typeof t&&A.session.audio&&A.session.screen&&!A.session.video)&&(t=!0,!0)))}function p(A,n){return A&&A.getTracks?A.getTracks().filter(function(A){return A.kind===(n||"audio")}):[]}function w(){var A=!1;try{if("undefined"==typeof RTCRtpTransceiver)return webrtcdev.error("[RTC global] RTCRtpTransceiver  not supported  "),!1;if(!("currentDirection"in RTCRtpTransceiver.prototype))return webrtcdev.error("[RTC global] RTCRtpTransceiver currentDirection not present  "),!1;var t=new RTCPeerConnection;try{t.addTransceiver("audio"),A=!0}catch(A){webrtcdev.error("[RTC global] RTCRtpTransceiver addTransceiver error ",A)}t.close()}catch(t){A=!1,webrtcdev.error("[RTC global] RTCRtpTransceiver error ",t)}return A&&h()}function h(){var A=!1;try{var t=new RTCPeerConnection({sdpSemantics:"unified-plan"});try{var n=t.getConfiguration();A=!("unified-plan"!=n.sdpSemantics)||"plan-b"!=n.sdpSemantics&&!1}catch(t){A=!1}}catch(t){A=!1}return A}function C(A){var t={OfferToReceiveAudio:!!A.OfferToReceiveAudio,OfferToReceiveVideo:!!A.OfferToReceiveVideo};return t}function Q(A){function t(t){t.binaryType="arraybuffer",t.onmessage=function(t){A.onDataChannelMessage(t.data)},t.onopen=function(){A.onDataChannelOpened(t)},t.onerror=function(t){A.onDataChannelError(t)},t.onclose=function(t){A.onDataChannelClosed(t)},t.internalSend=t.send,t.send=function(A){"open"!==t.readyState||t.internalSend(A)},l.channel=t}function n(t){webrtcdev.log("[RTC PC] createOfferOrAnswer ",t," , defaults.sdpConstraints ",H.sdpConstraints),l[t](H.sdpConstraints).then(function(t){"Safari"!==DetectRTC.browser.name&&(t.sdp=r.processSdp(t.sdp)),l.setLocalDescription(t).then(function(){return webrtcdev.log("[RTC PC] createOfferOrAnswer - connection ",r),webrtcdev.log("[RTC PC] createOfferOrAnswer - localSDP ",t.type,t.sdp),r.trickleIce?void(A.onLocalSdp({type:t.type,sdp:t.sdp,remotePeerSdpConstraints:A.remotePeerSdpConstraints||!1,renegotiatingPeer:!!A.renegotiatingPeer||!1,connectionDescription:a.connectionDescription,dontGetRemoteStream:!!A.dontGetRemoteStream,extra:r?r.extra:{},streamsToShare:h}),r.onSettingLocalDescription(a)):void webrtcdev.error("[RTC PC] not trickleICE ")},function(A){webrtcdev.error("[RTC PC] setLocalDescription error",A)})},function(A){webrtcdev.error("[RTC PC] setLocalDescription sdp-error",A)})}if(!RTCPeerConnection)throw"WebRTC 1.0 (RTCPeerConnection) API are NOT available in this browser.";webrtcdev.log(" [PeerInitiator] RTCPeerConnection - ",RTCPeerConnection);var r=A.rtcMultiConnection;this.extra=A.remoteSdp?A.remoteSdp.extra:r.extra,this.userid=A.userid,this.streams=[],this.channels=A.channels||[],this.connectionDescription=A.connectionDescription,this.addStream=function(A){r.addStream(A,a.userid)},this.removeStream=function(A){r.removeStream(A,a.userid)};var a=this;A.remoteSdp&&(this.connectionDescription=A.remoteSdp.connectionDescription);var s={};H.sdpConstraints=C({OfferToReceiveAudio:!0,OfferToReceiveVideo:!0});var d=!!A.renegotiatingPeer,l;A.remoteSdp&&(d=!!A.remoteSdp.renegotiatingPeer);var c=[];if(r.attachStreams.forEach(function(A){!A||c.push(A)}),!d){var B="all";!r.candidates.turn&&!r.candidates.relay||r.candidates.stun||r.candidates.reflexive||r.candidates.host||(B="relay");try{var g={iceServers:r.iceServers,iceTransportPolicy:r.iceTransportPolicy||B};"undefined"!=typeof r.iceCandidatePoolSize&&(g.iceCandidatePoolSize=r.iceCandidatePoolSize),"undefined"!=typeof r.bundlePolicy&&(g.bundlePolicy=r.bundlePolicy),"undefined"!=typeof r.rtcpMuxPolicy&&(g.rtcpMuxPolicy=r.rtcpMuxPolicy),!r.sdpSemantics||(g.sdpSemantics=r.sdpSemantics||"unified-plan"),r.iceServers&&r.iceServers.length||(g=null,r.optionalArgument=null),webrtcdev.log("[PeerInitiator] RTCPeerConnection params - ",g," connection.optionalArgument ",r.optionalArgument),l=new RTCPeerConnection(g,r.optionalArgument)}catch(A){webrtcdev.error("[RTC PC ] PeerInitiator -  error ",A," try making peerconnection without optional arguments , just with params like iceservers");try{var g={iceServers:r.iceServers};l=new RTCPeerConnection(g)}catch(A){l=new RTCPeerConnection,webrtcdev.error("[RTC PC ] PeerInitiator - error again ",A," create empty RTC Peerconnection without params or optional arguments  ")}}}else l=A.peerRef;!l.getRemoteStreams&&l.getReceivers&&(l.getRemoteStreams=function(){var A=new b;return l.getReceivers().forEach(function(t){A.addTrack(t.track),webrtcdev.log("[PeerInitiator] RTCPeerConnection - getReceivers and addTrack ")}),[A]}),webrtcdev.log("[PeerInitiator ] peer.getSenders ",l.getSenders()),!l.getLocalStreams&&l.getSenders&&(l.getLocalStreams=function(){var A=new b;return l.getSenders().forEach(function(t){A.addTrack(t.track),webrtcdev.log("[PeerInitiator] RTCPeerConnection - getSenders and addTrack ")}),[A]}),l.onicecandidate=function(t){if(webrtcdev.log("[PeerInitiator ] peer.onicecandidate  ",t),!t.candidate){if(!r.trickleIce){var n=l.localDescription;A.onLocalSdp({type:n.type,sdp:n.sdp,remotePeerSdpConstraints:A.remotePeerSdpConstraints||!1,renegotiatingPeer:!!A.renegotiatingPeer||!1,connectionDescription:a.connectionDescription,dontGetRemoteStream:!!A.dontGetRemoteStream,extra:r?r.extra:{},streamsToShare:h})}return void webrtcdev.log("[PeerInitiator ] peer.onicecandidate - end-of-candidate , return with local description ")}return r.trickleIce?void(A.onLocalCandidate({candidate:t.candidate.candidate,sdpMid:t.candidate.sdpMid,sdpMLineIndex:t.candidate.sdpMLineIndex}),webrtcdev.log("[PeerInitiator] onicecandidate - update local SDP with ",t.candidate.candidate)):void webrtcdev.error("[PeerInitiator] onicecandidate - trickleIce not set ")},c.forEach(function(t){return A.remoteSdp&&A.remoteSdp.remotePeerSdpConstraints&&A.remoteSdp.remotePeerSdpConstraints.dontGetRemoteStream?void webrtcdev.warn("[RTC PC ] PeerInitiator - localStreams remotePeerSdpConstraints.dontGetRemoteStream ",A.remoteSdp.remotePeerSdpConstraints.dontGetRemoteStream):A.dontAttachLocalStream?void webrtcdev.warn("[RTC PC ] PeerInitiator - localStreams dontAttachLocalStream",A.dontAttachLocalStream):void(t=r.beforeAddingStream(t,a),t&&(l.getLocalStreams().forEach(function(A){t&&A.id==t.id&&(t=null)}),t&&t.getTracks&&t.getTracks().forEach(function(A){try{l.addTrack(A,t)}catch(A){}})))}),l.oniceconnectionstatechange=l.onsignalingstatechange=function(){var t=a.extra;r.peers[a.userid]&&(t=r.peers[a.userid].extra||t),l&&(("failed"===l.iceConnectionState||"disconnected"===l.iceConnectionState||"closed"===l.iceConnectionState)&&webrtcdev.log("[RTC PC] ontrack event - oniceconnectionstatechange ",l.iceConnectionState),A.onPeerStateChanged({iceConnectionState:l.iceConnectionState,iceGatheringState:l.iceGatheringState,signalingState:l.signalingState,extra:t,userid:a.userid}),l&&l.iceConnectionState&&-1!==l.iceConnectionState.search(/closed|failed/gi)&&a.streams instanceof Array&&a.streams.forEach(function(A){var t=r.streamEvents[A.id]||{streamid:A.id,stream:A,type:"remote"};r.onstreamended(t)}))};var u={OfferToReceiveAudio:!!c.length,OfferToReceiveVideo:!!c.length};A.localPeerSdpConstraints&&(u=A.localPeerSdpConstraints),H.sdpConstraints=C(u);var m={};l.ontrack=function(t){if(webrtcdev.log("[RTC PC] ontrack event - ",t),t&&"track"===t.type){if(t.stream=t.streams[t.streams.length-1],t.stream.id||(t.stream.id=t.track.id),m[t.stream.id]&&"Safari"!==DetectRTC.browser.name)return void(t.track&&(t.track.onended=function(){l&&l.onremovestream(t)}));m[t.stream.id]=t.stream.id;var n={};A.remoteSdp&&A.remoteSdp.streamsToShare?n=A.remoteSdp.streamsToShare:A.streamsToShare&&(n=A.streamsToShare);var r=n[t.stream.id];r?(t.stream.isAudio=r.isAudio,t.stream.isVideo=r.isVideo,t.stream.isScreen=r.isScreen):(t.stream.isVideo=!!p(t.stream,"video").length,t.stream.isAudio=!t.stream.isVideo,t.stream.isScreen=!1),t.stream.streamid=t.stream.id,s[t.stream.id]=t.stream,A.onRemoteStream(t.stream),t.stream.getTracks().forEach(function(A){A.onended=function(){l&&l.onremovestream(t)}}),t.stream.onremovetrack=function(){l&&l.onremovestream(t)}}},l.onremovestream=function(t){t.stream.streamid=t.stream.id,s[t.stream.id]&&delete s[t.stream.id],A.onRemoteStreamRemoved(t.stream)},"function"!=typeof l.removeStream&&(l.removeStream=function(A){A.getTracks().forEach(function(t){l.removeTrack(t,A)})}),this.addRemoteCandidate=function(A){webrtcdev.log("[RTC PC] addRemoteCandidate - remoteCandidate ",A);let t=new T(A);webrtcdev.log("[RTC PC] addRemoteCandidate - RTCIceCandidate ",t),l.addIceCandidate(t)},this.addRemoteSdp=function(A,t){t=t||function(){},"Safari"!==DetectRTC.browser.name&&(webrtcdev.log("[RTC PC] addRemoteSdp - modify the SDP before setting remote Description"),A.sdp=r.processSdp(A.sdp)),l.setRemoteDescription(new S(A)).then(t,function(n){webrtcdev.error("[RTC PC] setRemoteDescription failed","\n",n,"\n",A.sdp),t()}).catch(function(n){webrtcdev.error("[RTC PC] setRemoteDescription failed","\n",n,"\n",A.sdp),t()})};var w=!0;A.remoteSdp&&(w=!1),this.createDataChannel=function(){var A=l.createDataChannel("sctp",{});t(A)},!0!==r.session.data||d||(w?this.createDataChannel():l.ondatachannel=function(A){var n=A.channel;t(n)}),this.enableDisableVideoEncoding=function(A){var t;if(l.getSenders().forEach(function(A){t||"video"!==A.track.kind||(t=A)}),t&&t.getParameters){var n=t.getParameters();n.encodings[1]&&(n.encodings[1].active=!!A),n.encodings[2]&&(n.encodings[2].active=!!A),t.setParameters(n)}},A.remoteSdp&&(A.remoteSdp.remotePeerSdpConstraints&&(u=A.remoteSdp.remotePeerSdpConstraints),H.sdpConstraints=C(u),this.addRemoteSdp(A.remoteSdp,function(){n("createAnswer")})),("two-way"==r.session.audio||"two-way"==r.session.video||"two-way"==r.session.screen)&&(H.sdpConstraints=C({OfferToReceiveAudio:"two-way"==r.session.audio||A.remoteSdp&&A.remoteSdp.remotePeerSdpConstraints&&A.remoteSdp.remotePeerSdpConstraints.OfferToReceiveAudio,OfferToReceiveVideo:"two-way"==r.session.video||"two-way"==r.session.screen||A.remoteSdp&&A.remoteSdp.remotePeerSdpConstraints&&A.remoteSdp.remotePeerSdpConstraints.OfferToReceiveAudio}));var h={};l.getLocalStreams().forEach(function(A){h[A.streamid]={isAudio:!!A.isAudio,isVideo:!!A.isVideo,isScreen:!!A.isScreen}}),w&&n("createOffer"),l.nativeClose=l.close,l.close=function(){if(l){try{l.nativeClose!==l.close&&l.nativeClose()}catch(A){webrtcdev.error("[RTCPeerocnnection ] peer onclose error ",A)}l=null,a.peer=null}},this.peer=l}function U(A,t){A.mandatory&&A.mandatory.chromeMediaSource?t.isScreen=!0:A.mozMediaSource||A.mediaSource?t.isScreen=!0:A.video?t.isVideo=!0:A.audio&&(t.isAudio=!0)}function E(A){function t(t,r){U(A.localMediaConstraints,t);var a="ended";"oninactive"in t&&(a="inactive"),t.addEventListener(a,function(){delete currentUserMediaRequest.streams[n],currentUserMediaRequest.mutex=!1,currentUserMediaRequest.queueRequests.indexOf(A)&&(delete currentUserMediaRequest.queueRequests[currentUserMediaRequest.queueRequests.indexOf(A)],currentUserMediaRequest.queueRequests=c(currentUserMediaRequest.queueRequests))},!1),currentUserMediaRequest.streams[n]={stream:t},currentUserMediaRequest.mutex=!1,currentUserMediaRequest.queueRequests.length&&E(currentUserMediaRequest.queueRequests.shift()),A.onGettingLocalMedia(t,r)}if(!0===currentUserMediaRequest.mutex)return void currentUserMediaRequest.queueRequests.push(A);currentUserMediaRequest.mutex=!0;var n=JSON.stringify(A.localMediaConstraints);if(currentUserMediaRequest.streams[n])t(currentUserMediaRequest.streams[n].stream,!0);else{if("undefined"==typeof navigator.mediaDevices){webrtcdev.log("[ getusermediahandler ] Capture undefined - localMediaConstraints : ",A.localMediaConstraints),navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia;var r=function(){},a=function(){},d,l;navigator.mediaDevices={getUserMedia:function(A){return navigator.getUserMedia(A,function(A){A(stream),d=stream},function(A){a(A),l=A}),{then:function(A){return d?void A(d):(r=A,{then:function(A){return l?void A(l):void(a=A)}})}}}}}if(!0===A.localMediaConstraints.isScreen){if(webrtcdev.log("[ getusermediahandler ] Capture screen  - localMediaConstraints : ",A.localMediaConstraints),navigator.mediaDevices.getDisplayMedia)navigator.mediaDevices.getDisplayMedia(A.localMediaConstraints).then(function(A){A.streamid=A.streamid||A.id||s(),A.idInstance=n,t(A)}).catch(function(t){A.onLocalMediaError(t,A.localMediaConstraints)});else if(navigator.getDisplayMedia)navigator.getDisplayMedia(A.localMediaConstraints).then(function(A){A.streamid=A.streamid||A.id||s(),A.idInstance=n,t(A)}).catch(function(t){A.onLocalMediaError(t,A.localMediaConstraints)});else throw new Error("getDisplayMedia API is not availabe in this browser.");return}webrtcdev.log("[ getusermediahandler ] Capture Video camera  - localMediaConstraints : ",A.localMediaConstraints),navigator.mediaDevices.getUserMedia(A.localMediaConstraints).then(function(A){A.streamid=A.streamid||A.id||s(),A.idInstance=n,webrtcdev.log("[ getusermediahandler ] Local stream obtained with stream id ",A.streamid),t(A)}).catch(function(t){webrtcdev.error("[ getusermediahandler ] error in getting Local stream ",t),A.onLocalMediaError(t,A.localMediaConstraints)})}}function F(A){var t={};return{receive:function(n,r,a){var s=n.uuid;if(t[s]||(t[s]=[]),t[s].push(n.message),n.last){var d=t[s].join("");n.isobject&&(d=JSON.parse(d));var l=new Date().getTime(),c=l-n.sendingTime,B={data:d,userid:r,extra:a,latency:c};A.autoTranslateText?(B.original=B.data,A.Translator.TranslateText(B.data,function(t){B.data=t,A.onmessage(B)})):A.onmessage(B),delete t[s]}}}}(function(A){A&&"undefined"==typeof window&&"undefined"!=typeof global&&(global.navigator={userAgent:"Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",getUserMedia:function(){}},!global.webrtcdev&&(global.webrtcdev={}),"undefined"==typeof global.webrtcdev.debug&&(global.webrtcdev.debug=global.webrtcdev.info=global.webrtcdev.error=global.webrtcdev.log=global.webrtcdev.log||function(){webrtcdev.log(arguments)}),"undefined"==typeof document&&(A.document={},document.createElement=document.captureStream=document.mozCaptureStream=function(){var A={getContext:function(){return A},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""}};return A},document.addEventListener=document.removeEventListener=A.addEventListener=A.removeEventListener=function(){},A.HTMLVideoElement=A.HTMLMediaElement=function(){}),"undefined"==typeof io&&(A.io=function(){return{on:function(A,t){t=t||function(){},"connect"===A&&t()},emit:function(A,t,n){n=n||function(){},("open-room"===A||"join-room"===A)&&n(!0,t.sessionid,null)}}}),"undefined"==typeof location&&(A.location={protocol:"file:",href:"",hash:"",origin:"self"}),"undefined"==typeof screen&&(A.screen={width:0,height:0}),"undefined"==typeof URL&&(A.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),A.window=global)})("undefined"==typeof global?null:global),"",function(){function A(){var A=g.appVersion,t=g.userAgent,n=g.appName,r=""+parseFloat(g.appVersion),a=parseInt(g.appVersion,10),s,d,l;if(h&&!C&&-1!==t.indexOf("CriOS")&&(h=!1,C=!0),p){n="Opera";try{r=g.userAgent.split("OPR/")[1].split(" ")[0],a=r.split(".")[0]}catch(A){r="0.0.0.0",a=0}}else Q?(d=t.indexOf("rv:"),0<d?r=t.substring(d+3):(d=t.indexOf("MSIE"),r=t.substring(d+5)),n="IE"):C?(d=t.indexOf("Chrome"),n="Chrome",r=t.substring(d+7)):h?(d=t.indexOf("Safari"),n="Safari",r=t.substring(d+7),-1!==(d=t.indexOf("Version"))&&(r=t.substring(d+8)),-1!==g.userAgent.indexOf("Version/")&&(r=g.userAgent.split("Version/")[1].split(" ")[0])):w?(d=t.indexOf("Firefox"),n="Firefox",r=t.substring(d+8)):(s=t.lastIndexOf(" ")+1)<(d=t.lastIndexOf("/"))&&(n=t.substring(s,d),r=t.substring(d+1),n.toLowerCase()===n.toUpperCase()&&(n=g.appName));return m&&(n="Edge",r=g.userAgent.split("Edge/")[1]),-1!==(l=r.search(/[; \)]/))&&(r=r.substring(0,l)),a=parseInt(""+r,10),isNaN(a)&&(r=""+parseFloat(g.appVersion),a=parseInt(g.appVersion,10)),{fullVersion:r,version:a,name:n,isPrivateBrowsing:!1}}function t(A,t){var n=0,r=!1,a=window.setInterval(function(){A()&&(window.clearInterval(a),t(r)),50<n++&&(window.clearInterval(a),r=!0,t(r))},10)}function n(A){var t=A.toLowerCase();if(0===t.indexOf("msie")&&0===t.indexOf("trident"))return!1;var n=/(?:msie|rv:)\s?([\d\.]+)/.exec(t);return!!(n&&10<=parseInt(n[1],10))}function r(){for(var A="-",t=g.appVersion,n=g.userAgent,r=A,a=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}],s=0,d;d=a[s];s++)if(d.r.test(n)){r=d.s;break}var l=A;return /Windows/.test(r)&&(/Windows (.*)/.test(r)&&(l=/Windows (.*)/.exec(r)[1]),r="Windows"),"Mac OS X"===r?/Mac OS X (10[\.\_\d]+)/.test(n)&&(l=/Mac OS X (10[\.\_\d]+)/.exec(n)[1]):"Android"===r?/Android ([\.\_\d]+)/.test(n)&&(l=/Android ([\.\_\d]+)/.exec(n)[1]):"iOS"===r?/OS (\d+)_(\d+)_?(\d+)?/.test(n)&&(l=/OS (\d+)_(\d+)_?(\d+)?/.exec(t),l=l[1]+"."+l[2]+"."+(0|l[3])):void 0,{osName:r,osVersion:l}}function a(A){A=(A||g.userAgent).toLowerCase();var t=A.match(/android\s([0-9\.]*)/);return!!t&&t[1]}function s(A,t){function n(t){if(!t)return void A();var n=N.exec(t);if(n){var r=n[1],s=t.match(T);void 0===a[r]&&A(r,s,!0),a[r]=!0}}function r(){var A=B.localDescription.sdp.split("\n");A.forEach(function(A){A&&0===A.indexOf("a=candidate:")&&n(A)})}if("undefined"!=typeof document&&"function"==typeof document.getElementById){var a={},s=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;if(!s){var d=document.getElementById("iframe");if(!d)return;var l=d.contentWindow;s=l.RTCPeerConnection||l.mozRTCPeerConnection||l.webkitRTCPeerConnection}if(s){var c=null;"Chrome"===z.browser&&58>z.browser.version&&(c={optional:[{RtpDataChannels:!0}]});var B=new s({iceServers:[{urls:"stun:stun.l.google.com:19302"}]},c);if(t&&(B.addStream?B.addStream(t):B.addTrack&&t.getTracks()[0]&&B.addTrack(t.getTracks()[0],t)),B.onicecandidate=function(A){A.candidate&&A.candidate.candidate?n(A.candidate.candidate):n()},!t)try{B.createDataChannel("sctp",{})}catch(A){}z.isPromisesSupported?B.createOffer().then(function(A){B.setLocalDescription(A).then(r)}):B.createOffer(function(A){B.setLocalDescription(A,r,function(){})},function(){})}}}function d(A){if(!O)return void(A&&A());if(!g.enumerateDevices&&window.MediaStreamTrack&&window.MediaStreamTrack.getSources&&(g.enumerateDevices=window.MediaStreamTrack.getSources.bind(window.MediaStreamTrack)),!g.enumerateDevices&&g.enumerateDevices&&(g.enumerateDevices=g.enumerateDevices.bind(g)),!g.enumerateDevices)return void(A&&A());R=[],L=[],M=[],D=[],k=!1,K=!1,_=!1,P=!1,V=!1;var t={};g.enumerateDevices(function(n){n.forEach(function(A){var n={};for(var r in A)try{"function"!=typeof A[r]&&(n[r]=A[r])}catch(A){}t[n.deviceId+n.label+n.kind]||("audio"===n.kind&&(n.kind="audioinput"),"video"===n.kind&&(n.kind="videoinput"),!n.deviceId&&(n.deviceId=n.id),!n.id&&(n.id=n.deviceId),n.label?("videoinput"===n.kind&&!V&&(V=!0),"audioinput"===n.kind&&!P&&(P=!0)):(n.isCustomLabel=!0,n.label="videoinput"===n.kind?"Camera "+(D.length+1):"audioinput"===n.kind?"Microphone "+(L.length+1):"audiooutput"===n.kind?"Speaker "+(M.length+1):"Please invoke getUserMedia once.","undefined"!=typeof z&&z.browser.isChrome&&46<=z.browser.version&&!/^(https:|chrome-extension:)$/g.test(location.protocol||"")&&"undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(n.label="HTTPs is required to get label of this "+n.kind+" device.")),"audioinput"===n.kind&&(k=!0,-1===L.indexOf(n)&&L.push(n)),"audiooutput"===n.kind&&(K=!0,-1===M.indexOf(n)&&M.push(n)),"videoinput"===n.kind&&(_=!0,-1===D.indexOf(n)&&D.push(n)),R.push(n),t[n.deviceId+n.label+n.kind]=n)}),"undefined"!=typeof z&&(z.MediaDevices=R,z.hasMicrophone=k,z.hasSpeakers=K,z.hasWebcam=_,z.isWebsiteHasWebcamPermissions=V,z.isWebsiteHasMicrophonePermissions=P,z.audioInputDevices=L,z.audioOutputDevices=M,z.videoInputDevices=D),A&&A()})}var l="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",c="object"==typeof process&&"object"==typeof process.versions&&process.versions.node&&!process.browser;if(c){var B=process.versions.node.toString().replace("v","");l="Nodejs/"+B+" (NodeOS) AppleWebKit/"+B+" (KHTML, like Gecko) Nodejs/"+B+" Nodejs/"+B}(function(A){"undefined"!=typeof window||("undefined"==typeof window&&"undefined"!=typeof global?(global.navigator={userAgent:l,getUserMedia:function(){}},A.window=global):"undefined"==typeof window,"undefined"==typeof location&&(A.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(A.screen={width:0,height:0}))})("undefined"==typeof global?window:global);var g=window.navigator;"undefined"==typeof g?g={getUserMedia:function(){},userAgent:l}:("undefined"!=typeof g.webkitGetUserMedia&&(g.getUserMedia=g.webkitGetUserMedia),"undefined"!=typeof g.mozGetUserMedia&&(g.getUserMedia=g.mozGetUserMedia));var u=!!/Android|webOS|iPhone|iPad|iPod|BB10|BlackBerry|IEMobile|Opera Mini|Mobile|mobile/i.test(g.userAgent||""),m=-1!==g.userAgent.indexOf("Edge")&&(!!g.msSaveOrOpenBlob||!!g.msSaveBlob),p=!!window.opera||0<=g.userAgent.indexOf(" OPR/"),w="undefined"!=typeof window.InstallTrigger,h=/^((?!chrome|android).)*safari/i.test(g.userAgent),C=!!window.chrome&&!p,Q="undefined"!=typeof document&&!!document.documentMode&&!m,U={Android:function(){return g.userAgent.match(/Android/i)},BlackBerry:function(){return g.userAgent.match(/BlackBerry|BB10/i)},iOS:function(){return g.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return g.userAgent.match(/Opera Mini/i)},Windows:function(){return g.userAgent.match(/IEMobile/i)},any:function(){return U.Android()||U.BlackBerry()||U.iOS()||U.Opera()||U.Windows()},getOsName:function(){var A="Unknown OS";return U.Android()&&(A="Android"),U.BlackBerry()&&(A="BlackBerry"),U.iOS()&&(A="iOS"),U.Opera()&&(A="Opera Mini"),U.Windows()&&(A="Windows"),A}},E="Unknown OS",F="Unknown OS Version",b=r();b&&b.osName&&"-"!=b.osName?(E=b.osName,F=b.osVersion):U.any()&&(E=U.getOsName(),"Android"==E&&(F=a()));var c="object"==typeof process&&"object"==typeof process.versions&&process.versions.node;"Unknown OS"===E&&c&&(E="Nodejs",F=process.versions.node.toString().replace("v",""));var H=!1,S=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach(function(A){"undefined"==typeof document||"function"!=typeof document.createElement||(!H&&A in document.createElement("canvas")&&(H=!0),!S&&A in document.createElement("video")&&(S=!0))});var T=/^(192\.168\.|169\.254\.|10\.|172\.(1[6-9]|2\d|3[01]))/,N=/([0-9]{1,3}(\.[0-9]{1,3}){3})/,R=[],L=[],M=[],D=[];g.mediaDevices&&g.mediaDevices.enumerateDevices&&(g.enumerateDevices=function(A){var t=g.mediaDevices.enumerateDevices();t&&t.then?g.mediaDevices.enumerateDevices().then(A).catch(function(){A([])}):A([])});var O=!1;"undefined"!=typeof I&&"getSources"in I?O=!0:g.mediaDevices&&!!g.mediaDevices.enumerateDevices&&(O=!0);var k=!1,K=!1,_=!1,P=!1,V=!1,z=window.DetectRTC||{};z.browser=A(),function(A){var r;try{if(window.webkitRequestFileSystem)window.webkitRequestFileSystem(window.TEMPORARY,1,function(){r=!1},function(){r=!0});else if(window.indexedDB&&/Firefox/.test(window.navigator.userAgent)){var a;try{a=window.indexedDB.open("test"),a.onerror=function(){return!0}}catch(A){r=!0}"undefined"==typeof r&&t(function(){return"done"===a.readyState},function(A){A||(r=!a.result)})}else if(n(window.navigator.userAgent)){r=!1;try{window.indexedDB||(r=!0)}catch(A){r=!0}}else if(window.localStorage&&/Safari/.test(window.navigator.userAgent)){try{window.localStorage.setItem("test",1)}catch(A){r=!0}"undefined"==typeof r&&(r=!1,window.localStorage.removeItem("test"))}}catch(A){r=!1}t(function(){return"undefined"!=typeof r},function(){A(r)})}(function(A){z.browser.isPrivateBrowsing=!!A}),z.browser["is"+z.browser.name]=!0,z.osName=E,z.osVersion=F;var G="object"==typeof process&&"object"==typeof process.versions&&process.versions["node-webkit"],X=!1;["RTCPeerConnection","webkitRTCPeerConnection","mozRTCPeerConnection","RTCIceGatherer"].forEach(function(A){X||A in window&&(X=!0)}),z.isWebRTCSupported=X,z.isORTCSupported="undefined"!=typeof RTCIceGatherer;var J=!1;if(z.browser.isChrome&&35<=z.browser.version?J=!0:z.browser.isFirefox&&34<=z.browser.version?J=!0:z.browser.isEdge&&17<=z.browser.version?J=!0:"Android"===z.osName&&z.browser.isChrome&&(J=!0),!/^(https:|chrome-extension:)$/g.test(location.protocol||"")){var Y="undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g);Y&&(z.browser.isChrome||z.browser.isEdge||z.browser.isOpera)?J=!1:z.browser.isFirefox&&(J=!1)}z.isScreenCapturingSupported=J;var W={isSupported:!1,isCreateMediaStreamSourceSupported:!1};["AudioContext","webkitAudioContext","mozAudioContext","msAudioContext"].forEach(function(A){W.isSupported||A in window&&(W.isSupported=!0,window[A]&&"createMediaStreamSource"in window[A].prototype&&(W.isCreateMediaStreamSourceSupported=!0))}),z.isAudioContextSupported=W.isSupported,z.isCreateMediaStreamSourceSupported=W.isCreateMediaStreamSourceSupported;var q=!1;z.browser.isChrome&&31<z.browser.version&&(q=!0),z.isRtpDataChannelsSupported=q;var Z=!1;z.browser.isFirefox&&28<z.browser.version?Z=!0:z.browser.isChrome&&25<z.browser.version?Z=!0:z.browser.isOpera&&11<=z.browser.version&&(Z=!0),z.isSctpDataChannelsSupported=Z,z.isMobileDevice=u;var ee=!1;g.getUserMedia?ee=!0:g.mediaDevices&&g.mediaDevices.getUserMedia&&(ee=!0),z.browser.isChrome&&46<=z.browser.version&&!/^(https:|chrome-extension:)$/g.test(location.protocol||"")&&"undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(ee="Requires HTTPs"),"Nodejs"===z.osName&&(ee=!1),z.isGetUserMediaSupported=ee,z.isCanvasSupportsStreamCapturing=H,z.isVideoSupportsStreamCapturing=S,"Chrome"==z.browser.name&&53<=z.browser.version&&(!z.isCanvasSupportsStreamCapturing&&(z.isCanvasSupportsStreamCapturing="Requires chrome flag: enable-experimental-web-platform-features"),!z.isVideoSupportsStreamCapturing&&(z.isVideoSupportsStreamCapturing="Requires chrome flag: enable-experimental-web-platform-features")),z.DetectLocalIPAddress=function(A,t){if(z.isWebRTCSupported){var n=!0,r=!0;s(function(t){t?t.match(T)?(n=!1,A("Local: "+t,n,r)):t.match(/[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7}/)?(r=!1,A("Public: "+t,n,r)):A("Public: "+t,n,r):A()},t)}},z.isWebSocketsSupported="WebSocket"in window&&2===window.WebSocket.CLOSING,z.isWebSocketsBlocked=!z.isWebSocketsSupported,"Nodejs"===z.osName&&(z.isWebSocketsSupported=!0,z.isWebSocketsBlocked=!1),z.checkWebSocketsSupport=function(A){A=A||function(){};try{var t=new WebSocket("wss://echo.websocket.org:443/"),n;t.onopen=function(){z.isWebSocketsBlocked=!1,n=new Date().getTime(),t.send("ping")},t.onmessage=function(){z.WebsocketLatency=new Date().getTime()-n+"ms",A(),t.close(),t=null},t.onerror=function(){z.isWebSocketsBlocked=!0,A()}}catch(t){z.isWebSocketsBlocked=!0,A()}},z.load=function(A){A=A||function(){},d(A)},"function"==typeof d,z.MediaDevices="undefined"==typeof R?[]:R,z.hasMicrophone=k,z.hasSpeakers=K,z.hasWebcam=_,z.isWebsiteHasWebcamPermissions=V,z.isWebsiteHasMicrophonePermissions=P,z.audioInputDevices=L,z.audioOutputDevices=M,z.videoInputDevices=D;var Ae=!1;"undefined"!=typeof document&&"function"==typeof document.createElement&&"setSinkId"in document.createElement("video")&&(Ae=!0),z.isSetSinkIdSupported=Ae;var te=!1;z.browser.isFirefox&&"undefined"!=typeof mozRTCPeerConnection?"getSenders"in mozRTCPeerConnection.prototype&&(te=!0):z.browser.isChrome&&"undefined"!=typeof webkitRTCPeerConnection&&"getSenders"in webkitRTCPeerConnection.prototype&&(te=!0),z.isRTPSenderReplaceTracksSupported=te;var ne=!1;z.browser.isFirefox&&38<z.browser.version&&(ne=!0),z.isRemoteStreamProcessingSupported=ne;var re=!1;"undefined"!=typeof I&&"applyConstraints"in I.prototype&&(re=!0),z.isApplyConstraintsSupported=re;var ae=!1;z.browser.isFirefox&&43<=z.browser.version&&(ae=!0),z.isMultiMonitorScreenCapturingSupported=ae,z.isPromisesSupported=!!("Promise"in window),z.version="1.3.9","undefined"==typeof z&&(window.DetectRTC={});var ie=window.MediaStream;"undefined"==typeof ie&&"undefined"!=typeof webkitMediaStream&&(ie=webkitMediaStream),z.MediaStream="undefined"!=typeof ie&&"function"==typeof ie&&Object.keys(ie.prototype),z.MediaStreamTrack="undefined"!=typeof I&&Object.keys(I.prototype);var oe=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;z.RTCPeerConnection="undefined"!=typeof oe&&Object.keys(oe.prototype),window.DetectRTC=z,"undefined"!=typeof module&&(module.exports=z),"function"==typeof define&&define.amd&&define("DetectRTC",[],function(){return z})}(),"undefined"!=typeof cordova&&(DetectRTC.isMobileDevice=!0,DetectRTC.browser.name="Chrome"),navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Crosswalk")&&(DetectRTC.isMobileDevice=!0,DetectRTC.browser.name="Chrome"),window.addEventListener||(window.addEventListener=function(A,t,n){A.attachEvent&&A.attachEvent("on"+t,n)}),window.attachEventListener=function(A,t,n,r){A.addEventListener(t,n,r)};var b=window.MediaStream;"undefined"==typeof b&&"undefined"!=typeof webkitMediaStream&&(b=webkitMediaStream),"undefined"==typeof b||"stop"in b.prototype||(b.prototype.stop=function(){this.getTracks().forEach(function(A){A.stop()})}),window.iOSDefaultAudioOutputDevice=window.iOSDefaultAudioOutputDevice||"speaker";var H={},S=window.RTCSessionDescription||window.mozRTCSessionDescription,T=window.RTCIceCandidate||window.mozRTCIceCandidate,I=window.MediaStreamTrack,N=function(){function A(A,r){webrtcev.log("[RTC codec ] codecs ",r);var a=n(A);return a.videoCodecNumbers?"vp8"===r&&a.vp8LineNumber===a.videoCodecNumbers[0]?A:"vp9"===r&&a.vp9LineNumber===a.videoCodecNumbers[0]?A:"h264"===r&&a.h264LineNumber===a.videoCodecNumbers[0]?A:(A=t(A,r,a),A):A}function t(A,t,n,r){var a="";if("vp8"===t){if(!n.vp8LineNumber)return A;a=n.vp8LineNumber}if("vp9"===t){if(!n.vp9LineNumber)return A;a=n.vp9LineNumber}if("h264"===t){if(!n.h264LineNumber)return A;a=n.h264LineNumber}var s=n.videoCodecNumbersOriginal.split("SAVPF")[0]+"SAVPF ",d=[a];return r&&(d=[]),n.videoCodecNumbers.forEach(function(A){A===a||d.push(A)}),s+=d.join(" "),A=A.replace(n.videoCodecNumbersOriginal,s),A}function n(A){var t={};return A.split("\n").forEach(function(A){0===A.indexOf("m=video")&&(t.videoCodecNumbers=[],A.split("SAVPF")[1].split(" ").forEach(function(n){n=n.trim(),n&&n.length&&(t.videoCodecNumbers.push(n),t.videoCodecNumbersOriginal=A)})),-1===A.indexOf("VP8/90000")||t.vp8LineNumber||(t.vp8LineNumber=A.replace("a=rtpmap:","").split(" ")[0]),-1===A.indexOf("VP9/90000")||t.vp9LineNumber||(t.vp9LineNumber=A.replace("a=rtpmap:","").split(" ")[0]),-1===A.indexOf("H264/90000")||t.h264LineNumber||(t.h264LineNumber=A.replace("a=rtpmap:","").split(" ")[0])}),webrtcdev.log("[RTC Codec ] splitLines - array SDP  ",t),t}function r(A,t,n){return(console.log("[RTC Codec ] setBAS - sdp before  ",A),!t)?A:"undefined"!=typeof isFirefox&&isFirefox?A:(n&&(t.screen?300>t.screen&&webrtcdev.warn("It seems that you are using wrong bandwidth value for screen. Screen sharing is expected to fail."):webrtcdev.warn("It seems that you are not using bandwidth for screen. Screen sharing is expected to fail.")),t.screen&&n&&(A=A.replace(/b=AS([^\r\n]+\r\n)/g,""),A=A.replace(/a=mid:video\r\n/g,"a=mid:video\r\nb=AS:"+t.screen+"\r\n")),(t.audio||t.video)&&(A=A.replace(/b=AS([^\r\n]+\r\n)/g,"")),t.audio&&(A=A.replace(/a=mid:audio\r\n/g,"a=mid:audio\r\nb=AS:"+t.audio+"\r\n")),t.screen?A=A.replace(/a=mid:video\r\n/g,"a=mid:video\r\nb=AS:"+t.screen+"\r\n"):t.video&&(A=A.replace(/a=mid:video\r\n/g,"a=mid:video\r\nb=AS:"+t.video+"\r\n")),webrtc.log("[RTC Codechandler] setBAS - sdp after  ",A),A)}function a(A,t,n){return s(A,0,-1,t,n)}function s(A,t,n,r,a){for(var s=-1===n?A.length:n,d=t;d<s;++d)if(0===A[d].indexOf(r)&&(!a||-1!==A[d].toLowerCase().indexOf(a.toLowerCase())))return d;return null}function d(A){var t=A.match(/a=rtpmap:(\d+) \w+\/\d+/);return t&&2===t.length?t[1]:null}function l(A,t){t=t||{};var n=t.min,r=t.max,s=A.split("\r\n"),l=a(s,"a=rtpmap","VP8/90000"),c;if(l&&(c=d(s[l])),!c)return A;var B=a(s,"a=rtpmap","rtx/90000"),g;if(B&&(g=d(s[B])),!B)return A;var u=a(s,"a=fmtp:"+g.toString());if(null!==u){var m="\r\n";m+="a=fmtp:"+c+" x-google-min-bitrate="+(n||"228")+"; x-google-max-bitrate="+(r||"228"),s[u]=s[u].concat(m),A=s.join("\r\n")}return A}function c(A,t){t=t||{};var n=A.split("\r\n"),r=a(n,"a=rtpmap","opus/48000"),s;if(r&&(s=d(n[r])),!s)return A;var l=a(n,"a=fmtp:"+s.toString());if(null===l)return A;var c="";return c+="; stereo="+("undefined"==typeof t.stereo?"1":t.stereo),c+="; sprop-stereo="+("undefined"==typeof t["sprop-stereo"]?"1":t["sprop-stereo"]),"undefined"!=typeof t.maxaveragebitrate&&(c+="; maxaveragebitrate="+(t.maxaveragebitrate||1048576)),"undefined"!=typeof t.maxplaybackrate&&(c+="; maxplaybackrate="+(t.maxplaybackrate||1048576)),"undefined"!=typeof t.cbr&&(c+="; cbr="+("undefined"==typeof t.cbr?"1":t.cbr)),"undefined"!=typeof t.useinbandfec&&(c+="; useinbandfec="+t.useinbandfec),"undefined"!=typeof t.usedtx&&(c+="; usedtx="+t.usedtx),"undefined"!=typeof t.maxptime&&(c+="\r\na=maxptime:"+t.maxptime),n[l]=n[l].concat(c),A=n.join("\r\n"),A}return{removeVPX:function(A){var r=n(A);return A=t(A,"vp9",r,!0),A=t(A,"vp8",r,!0),A},disableNACK:function(A){if(!A||"string"!=typeof A)throw"Invalid arguments.";return A=A.replace("a=rtcp-fb:126 nack\r\n",""),A=A.replace("a=rtcp-fb:126 nack pli\r\n","a=rtcp-fb:126 pli\r\n"),A=A.replace("a=rtcp-fb:97 nack\r\n",""),A=A.replace("a=rtcp-fb:97 nack pli\r\n","a=rtcp-fb:97 pli\r\n"),A},prioritize:function(A,t){if(t&&t.getSenders&&t.getSenders().length){if(!A||"string"!=typeof A)throw"Invalid arguments.";t.getSenders().forEach(function(t){for(var n=t.getParameters(),r=0;r<n.codecs.length;r++)if(n.codecs[r].mimeType==A){n.codecs.unshift(n.codecs.splice(r,1));break}t.setParameters(n)})}},removeNonG722:function(A){return A.replace(/m=audio ([0-9]+) RTP\/SAVPF ([0-9 ]*)/g,"m=audio $1 RTP/SAVPF 9")},setApplicationSpecificBandwidth:function(A,t,n){return r(A,t,n)},setVideoBitrates:function(A,t){return l(A,t)},setOpusAttributes:function(A,t){return c(A,t)},preferVP9:function(t){return A(t,"vp9")},preferCodec:A,forceStereoAudio:function(A){for(var t=A.split("\r\n"),n=null,r=0;r<t.length;r++)if(-1!==t[r].search("opus/48000")){var a=extractSdp(t[r],/:(\d+) opus\/48000/i);break}for(var r=0;r<t.length;r++)if(-1!==t[r].search("a=fmtp")){var s=extractSdp(t[r],/a=fmtp:(\d+)/);if(s===a){n=r;break}}return null===n?A:(t[n]=t[n].concat("; stereo=1; sprop-stereo=1"),A=t.join("\r\n"),A)}}}();window.BandwidthHandler=N;var R=function(){return{processCandidates:function(A,t){var n=t.candidate,r=A.candidates,a=r.stun,s=r.turn;if((g(r.reflexive)||(a=r.reflexive),g(r.relay)||(s=r.relay),r.host||!n.match(/typ host/g))&&(s||!n.match(/typ relay/g))&&(a||!n.match(/typ srflx/g))){var d=A.iceProtocols;if(d.udp||!n.match(/ udp /g))return d.tcp||!n.match(/ tcp /g)?(webrtcdev.debug("Your candidate pairs:",n),{candidate:n,sdpMid:t.sdpMid,sdpMLineIndex:t.sdpMLineIndex}):void 0}}}}(),L=function(){return{getIceServers:function(){return[{urls:["stun:stun.l.google.com:19302","stun:stun.l.google.com:19302?transport=udp"]}]}}}();window.currentUserMediaRequest={streams:[],mutex:!1,queueRequests:[],remove:function(A){this.mutex=!1;var t=this.streams[A];if(t){t=t.stream;var n=t.currentUserMediaRequestOptions;this.queueRequests.indexOf(n)&&(delete this.queueRequests[this.queueRequests.indexOf(n)],this.queueRequests=c(this.queueRequests)),this.streams[A].stream=null,delete this.streams[A]}}};var M=function(){function A(A){return A?"string"==typeof A||"undefined"==typeof A?A:A.audio&&A.video?null:A.audio?"audio":A.video?"video":void 0:void 0}function t(t,r,s){function d(){if(s.streamEvents[t.streamid].mediaElement){var A=s.streamEvents[t.streamid].mediaElement;A.volume=0,n(200,5,function(){try{A.volume+=.2}catch(t){A.volume=1}})}}if(t&&t.addEventListener){if("undefined"==typeof r||!0==r){var l="ended";"oninactive"in t&&(l="inactive"),t.addEventListener(l,function(){M.onSyncNeeded(this.streamid,l)},!1)}t.mute=function(n,d){n=A(n),"undefined"!=typeof d&&(r=d),("undefined"==typeof n||"audio"==n)&&p(t,"audio").forEach(function(A){A.enabled=!1,s.streamEvents[t.streamid].isAudioMuted=!0}),("undefined"==typeof n||"video"==n)&&p(t,"video").forEach(function(A){A.enabled=!1}),("undefined"==typeof r||!0==r)&&M.onSyncNeeded(t.streamid,"mute",n),s.streamEvents[t.streamid].muteType=n||"both",a(t,"mute",n)},t.unmute=function(n,l){n=A(n),"undefined"!=typeof l&&(r=l),d(),("undefined"==typeof n||"audio"==n)&&p(t,"audio").forEach(function(A){A.enabled=!0,s.streamEvents[t.streamid].isAudioMuted=!1}),("undefined"==typeof n||"video"==n)&&(p(t,"video").forEach(function(A){A.enabled=!0}),"undefined"!=typeof n&&"video"==n&&s.streamEvents[t.streamid].isAudioMuted&&function A(n){n||(n=0),n++,100>n&&s.streamEvents[t.streamid].isAudioMuted&&(t.mute("audio"),setTimeout(function(){A(n)},50))}()),("undefined"==typeof r||!0==r)&&M.onSyncNeeded(t.streamid,"unmute",n),s.streamEvents[t.streamid].unmuteType=n||"both",a(t,"unmute",n)}}}function n(A,t,r,a){a=(a||0)+1;a>=t||setTimeout(function(){r(),n(A,t,r,a)},A)}return{setHandlers:t,onSyncNeeded:function(){}}}(),D={send:function(A){function t(A,s){var d={type:"text",uuid:g,sendingTime:m};A&&(s=A,d.packets=parseInt(s.length/l)),s.length>l?d.message=s.slice(0,l):(d.message=s,d.last=!0,d.isobject=B),r.send(d,a),c=s.slice(d.message.length),c.length&&setTimeout(function(){t(null,c)},n.chunkInterval||100)}var n=A.connection,r=A.channel,a=A.remoteUserId,d=A.text,l=n.chunkSize||1e3,c="",B=!1;u(d)||(B=!0,d=JSON.stringify(d));var g=s(),m=new Date().getTime();t(d)}},O=function(){return{handle:function(A){function t(A,t){if(-1!==A.position){var n=+A.position.toFixed(2).split(".")[1]||100;t.innerHTML=n+"%"}}var n={};A.onFileStart=function(t){var r=document.createElement("div");return r.title=t.name,r.innerHTML="<label>0%</label> <progress></progress>",t.remoteUserId&&(r.innerHTML+=" (Sharing with:"+t.remoteUserId+")"),A.filesContainer||(A.filesContainer=document.body||document.documentElement),A.filesContainer.insertBefore(r,A.filesContainer.firstChild),t.remoteUserId?void(!n[t.uuid]&&(n[t.uuid]={}),n[t.uuid][t.remoteUserId]={div:r,progress:r.querySelector("progress"),label:r.querySelector("label")},n[t.uuid][t.remoteUserId].progress.max=t.maxChunks):(n[t.uuid]={div:r,progress:r.querySelector("progress"),label:r.querySelector("label")},void(n[t.uuid].progress.max=t.maxChunks))},A.onFileProgress=function(A){var r=n[A.uuid];!r||A.remoteUserId&&(r=n[A.uuid][A.remoteUserId],!r)||(r.progress.value=A.currentPosition||A.maxChunks||r.progress.max,t(r.progress,r.label))},A.onFileEnd=function(A){var t=n[A.uuid];if(!t)return void console.error("No such progress-helper element exist.",A);if(!(A.remoteUserId&&(t=n[A.uuid][A.remoteUserId],!t))){var r=t.div;r.innerHTML=-1==A.type.indexOf("image")?"<a href=\""+A.url+"\" download=\""+A.name+"\">Download <strong style=\"color:red;\">"+A.name+"</strong> </a><br /><iframe src=\""+A.url+"\" title=\""+A.name+"\" style=\"width: 80%;border: 0;height: inherit;margin-top:1em;\"></iframe>":"<a href=\""+A.url+"\" download=\""+A.name+"\">Download <strong style=\"color:red;\">"+A.name+"</strong> </a><br /><img src=\""+A.url+"\" title=\""+A.name+"\" style=\"max-width: 80%;\">"}}}}}();(function(a){function c(A){if(a.socketAutoReConnect=!0,a.socket)return void(A&&A(a.socket));if("undefined"==typeof n)if("undefined"!=typeof FirebaseConnection)window.SocketConnection=FirebaseConnection;else if("undefined"!=typeof PubNubConnection)window.SocketConnection=PubNubConnection;else throw"SocketConnection.js seems missed.";new n(a,function(){A&&A(a.socket)})}function g(A,t){a.socket.emit("join-room",{sessionid:a.sessionid,session:a.session,mediaConstraints:a.mediaConstraints,sdpConstraints:a.sdpConstraints,streams:h(),extra:a.extra,password:"undefined"!=typeof a.password&&"object"!=typeof a.password?a.password:""},function(n,r){if(!0===n){if(a.enableLogs&&webrtcdev.log("isRoomJoined: ",n," roomid: ",a.sessionid),!!a.peers[a.sessionid])return;F.onNegotiationNeeded(A)}!1===n&&(a.enableLogs&&webrtcdev.warn("isRoomJoined: ",r," roomid: ",a.sessionid),setTimeout(function(){g(A,t)},3e3)),t(n,a.sessionid,r)})}function u(A){webrtcdev.log("Sending open-room signal to Signaller"),a.waitingForLocalMedia=!1,a.socket.emit("open-room",{sessionid:a.sessionid,session:a.session,mediaConstraints:a.mediaConstraints,sdpConstraints:a.sdpConstraints,streams:h(),extra:a.extra,identifier:a.publicRoomIdentifier,password:"undefined"!=typeof a.password&&"object"!=typeof a.password?a.password:""},function(t,n){!0===t&&(webrtcdev.log("[RTCMultiConn] isRoomOpened: ",t," roomid: ",a.sessionid),A(t,a.sessionid)),!1===t&&(webrtcdev.error("[RTCMultiConn] isRoomOpened: ",n," roomid: ",a.sessionid),A(t,a.sessionid,n))})}function h(){try{return a.streamEvents.selectAll("local").map(function(A){return{streamid:A.streamid,tracks:A.stream.getTracks().length}})}catch(A){return[]}}function C(A,t){if(a.dontCaptureUserMedia)return webrtcdev.error(" Join with dontcapturemedia"),void t();if(A.isDataOnly)return webrtcdev.error(" Join with isDataOnly"),void t();var n={};A.localPeerSdpConstraints.OfferToReceiveAudio&&(n.audio=a.mediaConstraints.audio),A.localPeerSdpConstraints.OfferToReceiveVideo&&(n.video=a.mediaConstraints.video);var r=A.session||a.session;return r.oneway&&"two-way"!==r.audio&&"two-way"!==r.video&&"two-way"!==r.screen?void t():void(r.oneway&&r.audio&&"two-way"===r.audio&&(r={audio:!0}),(r.audio||r.video||r.screen)&&(r.screen?"Edge"===DetectRTC.browser.name?navigator.getDisplayMedia({video:!0,audio:m(a)}).then(function(A){A.isScreen=!0,F.onGettingLocalMedia(A),(r.audio||r.video)&&!m(a)?a.invokeGetUserMedia(null,t):t(A)},function(){webrtcdev.error("Unable to capture screen on Edge. HTTPs and version 17+ is required.")}):a.invokeGetUserMedia({audio:m(a),video:!0,isScreen:!0},(r.audio||r.video)&&!m(a)?a.invokeGetUserMedia(null,t):t):(r.audio||r.video)&&t()))}function Q(A,t){return A?void(t.audio&&p(A,"audio").forEach(function(A){A.applyConstraints(t.audio)}),t.video&&p(A,"video").forEach(function(A){A.applyConstraints(t.video)})):void(!a.enableLogs||webrtcdev.error("No stream to applyConstraints."))}function U(A,t,n){return t?void F.replaceTrack(A,t,n):void a.peers.getAllParticipants().forEach(function(t){F.replaceTrack(A,t,n)})}t=t||{useDefaultDevices:!0},a.channel=a.sessionid=(A||location.href.replace(/\/|:|#|\?|\$|\^|%|\.|`|~|!|\+|@|\[|\||]|\|*. /g,"").split("\n").join("").split("\r").join(""))+"",a.socketURL=a.socketURL||"/",webrtcdev.log("[RTCMultiConnection] connection channel ",a.channel);var F=new r(a),H={};F.onGettingLocalMedia=function(A,t){if(webrtcdev.log("[RTC ] onGettingLocalMedia"),t=t||function(){},H[A.streamid])return void t();H[A.streamid]=!0;try{A.type="local"}catch(A){webrtcdev.errro("[RTC] onGettingLocalMedia- eeror in setting Remote stream type ",A)}a.setStreamEndHandler(A),d(A,function(n){n.id=A.streamid,n.muted=!0,n.volume=0,-1===a.attachStreams.indexOf(A)&&a.attachStreams.push(A),"undefined"!=typeof M&&M.setHandlers(A,!0,a),a.streamEvents[A.streamid]={stream:A,type:"local",mediaElement:n,userid:a.userid,extra:a.extra,streamid:A.streamid,isAudioMuted:!0};try{a.onstream(a.streamEvents[A.streamid])}catch(A){webrtcdev.error("[RTC ]  onGettingLocalMedia ",A)}t()},a)},F.onGettingRemoteMedia=function(A,t){webrtcdev.log("[RTC] onGettingRemoteMedia");try{A.type="remote"}catch(A){webrtcdev.error("[RTC] onGettingRemoteMedia error in setting Remote stream type ",A)}a.setStreamEndHandler(A,"remote-stream"),d(A,function(n){n.id=A.streamid,"undefined"!=typeof M&&M.setHandlers(A,!1,a),a.streamEvents[A.streamid]={stream:A,type:"remote",userid:t,extra:a.peers[t]?a.peers[t].extra:{},mediaElement:n,streamid:A.streamid};try{a.onstream(a.streamEvents[A.streamid])}catch(A){webrtcdev.error("[RTC] onGettingRemoteMedia ",A)}},a)},F.onRemovingRemoteMedia=function(A,t){var n=a.streamEvents[A.streamid];n||(n={stream:A,type:"remote",userid:t,extra:a.peers[t]?a.peers[t].extra:{},streamid:A.streamid,mediaElement:a.streamEvents[A.streamid]?a.streamEvents[A.streamid].mediaElement:null}),a.peersBackup[n.userid]&&(n.extra=a.peersBackup[n.userid].extra),a.onstreamended(n),delete a.streamEvents[A.streamid]},F.onNegotiationNeeded=function(A,t,n){n=n||function(){},t=t||A.remoteUserId,A=A||"";var r={remoteUserId:t,message:A,sender:a.userid};A.remoteUserId&&A.message&&A.sender&&(r=A),c(function(){a.socket.emit(a.socketMessageEvent,r,n)})},F.onUserLeft=function(A){a.deletePeer(A)},F.disconnectWith=function(A,t){a.socket&&a.socket.emit("disconnect-with",A,t||function(){}),a.deletePeer(A)},a.socketOptions={transport:"websocket"},a.openOrJoin=function(A,t){t=t||function(){},a.checkPresence(A,function(A,n){if(A){a.sessionid=n;var r=!1,s=!1,d=!!a.session.oneway,l=B(a.session);s={OfferToReceiveAudio:a.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:a.sdpConstraints.mandatory.OfferToReceiveVideo},r={OfferToReceiveAudio:d?!!a.session.audio:a.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:d?!!a.session.video||!!a.session.screen:a.sdpConstraints.mandatory.OfferToReceiveVideo};var c={remoteUserId:a.sessionid,message:{newParticipationRequest:!0,isOneWay:d,isDataOnly:l,localPeerSdpConstraints:r,remotePeerSdpConstraints:s},sender:a.userid};return void C(c.message,function(){g(c,t)})}return a.waitingForLocalMedia=!0,a.isInitiator=!0,a.sessionid=n||a.sessionid,B(a.session)?void u(t):void u(t)})},a.waitingForLocalMedia=!1,a.open=function(A,t){t=t||function(){},a.waitingForLocalMedia=!0,a.isInitiator=!0,a.sessionid=A||a.sessionid,c(function(){return B(a.session)?void u(t):void(a.session.screen?a.captureUserMedia(function(){u(t)}):u(t))})},a.peersBackup={},a.deletePeer=function(A){if(A&&a.peers[A]){var t={userid:A,extra:a.peers[A]?a.peers[A].extra:{}};if(a.peersBackup[t.userid]&&(t.extra=a.peersBackup[t.userid].extra),a.onleave(t),!!a.peers[A]){a.peers[A].streams.forEach(function(A){A.stop()});var n=a.peers[A].peer;if(n&&"closed"!==n.iceConnectionState)try{n.close()}catch(A){}a.peers[A]&&(a.peers[A].peer=null,delete a.peers[A])}}},a.rejoin=function(A){if(!a.isInitiator&&A&&Object.keys(A).length){var t={};a.peers[A.remoteUserId]&&(t=a.peers[A.remoteUserId].extra,a.deletePeer(A.remoteUserId)),A&&A.remoteUserId&&(a.join(A.remoteUserId),a.onReConnecting({userid:A.remoteUserId,extra:t}))}},a.join=function(A,t){a.sessionid=!!A&&(A.sessionid||A.remoteUserId||A)||a.sessionid,a.sessionid+="";var n=!1,r=!1,s=!1,d=!1;if(A&&A.session||!A||"string"==typeof A){var l=A?A.session||a.session:a.session;s=!!l.oneway,d=B(l),r={OfferToReceiveAudio:a.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:a.sdpConstraints.mandatory.OfferToReceiveVideo},n={OfferToReceiveAudio:s?!!a.session.audio:a.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:s?!!a.session.video||!!a.session.screen:a.sdpConstraints.mandatory.OfferToReceiveVideo}}t=t||{};var u=function(){};"function"==typeof t&&(u=t,t={}),"undefined"!=typeof t.localPeerSdpConstraints&&(n=t.localPeerSdpConstraints),"undefined"!=typeof t.remotePeerSdpConstraints&&(r=t.remotePeerSdpConstraints),"undefined"!=typeof t.isOneWay&&(s=t.isOneWay),"undefined"!=typeof t.isDataOnly&&(d=t.isDataOnly);var m={remoteUserId:a.sessionid,message:{newParticipationRequest:!0,isOneWay:s,isDataOnly:d,localPeerSdpConstraints:n,remotePeerSdpConstraints:r},sender:a.userid};return C(m.message,function(){c(function(){g(m,u)})}),m},a.publicRoomIdentifier="",a.getUserMedia=a.captureUserMedia=function(A,t){A=A||function(){};var n=t||a.session;return a.dontCaptureUserMedia||B(n)?(webrtcdev.error("[RTCConn] dont capture media flag is on or connection is Data only "),void A()):void((n.audio||n.video||n.screen)&&(n.screen?"Edge"===DetectRTC.browser.name?navigator.getDisplayMedia({video:!0,audio:m(a)}).then(function(r){if(r.isScreen=!0,F.onGettingLocalMedia(r),(n.audio||n.video)&&!m(a)){var d={};for(var l in n)"screen"!=l&&(d[l]=n[l]);return void a.invokeGetUserMedia(t,A,d)}A(r)},function(){webrtcdev.error("Unable to capture screen on Edge. HTTPs and version 17+ is required.")}):a.invokeGetUserMedia({audio:m(a),video:!0,isScreen:!0},function(r){if((n.audio||n.video)&&!m(a)){var d={};for(var l in n)"screen"!=l&&(d[l]=n[l]);return void a.invokeGetUserMedia(t,A,d)}A(r)}):(n.audio||n.video)&&a.invokeGetUserMedia(t,A,n)))},a.onbeforeunload=function(A,t){a.closeBeforeUnload&&(a.peers.getAllParticipants().forEach(function(A){F.onNegotiationNeeded({userLeft:!0},A),a.peers[A]&&a.peers[A].peer&&a.peers[A].peer.close(),delete a.peers[A]}),!t&&a.closeSocket(),a.isInitiator=!1)},window.ignoreBeforeUnload?a.closeBeforeUnload=!1:(a.closeBeforeUnload=!0,window.addEventListener("beforeunload",a.onbeforeunload,!1)),a.userid=s(),a.changeUserId=function(A,t){t=t||function(){},a.userid=A||s(),a.socket.emit("changed-uuid",a.userid,t)},a.extra={},a.attachStreams=[],a.session={audio:!0,video:!0},a.enableFileSharing=!1,a.bandwidth={screen:!1,audio:!1,video:!1},a.codecs={audio:"opus",video:"vp9"},a.processSdp=function(A){return(webrtcdev.log("[RtcConn ] processSdp - connection.codecs.video ",a.codecs.video),w())?(webrtcdev.log("[RtcConn ] processSdp - As UnifiedPlanSupportedDefault is supported , avoid processing SDP "),A):"Safari"===DetectRTC.browser.name?A:("VP8"===a.codecs.video.toUpperCase()&&(A=N.preferCodec(A,"vp8")),"VP9"===a.codecs.video.toUpperCase()&&(A=N.preferCodec(A,"vp9")),"H264"===a.codecs.video.toUpperCase()&&(A=N.preferCodec(A,"h264")),"G722"===a.codecs.audio&&(A=N.removeNonG722(A)),"Firefox"===DetectRTC.browser.name)?A:((a.bandwidth.video||a.bandwidth.screen)&&(A=N.setApplicationSpecificBandwidth(A,a.bandwidth,!!a.session.screen)),a.bandwidth.video&&(A=N.setVideoBitrates(A,{min:1024*(8*a.bandwidth.video),max:1024*(8*a.bandwidth.video)})),a.bandwidth.audio&&(A=N.setOpusAttributes(A,{maxaveragebitrate:1024*(8*a.bandwidth.audio),maxplaybackrate:1024*(8*a.bandwidth.audio),stereo:1,maxptime:3})),webrtcdev.log("[RtcConn ] processSdp final - ",A),A)},"undefined"!=typeof N&&(a.BandwidthHandler=a.CodecsHandler=N),a.mediaConstraints={audio:{mandatory:{},optional:a.bandwidth.audio?[{bandwidth:1024*(8*a.bandwidth.audio)||1048576}]:[]},video:{mandatory:{},optional:a.bandwidth.video?[{bandwidth:1024*(8*a.bandwidth.video)||1048576},{facingMode:"user"}]:[{facingMode:"user"}]}},"Firefox"===DetectRTC.browser.name&&(a.mediaConstraints={audio:!0,video:!0}),t.useDefaultDevices||DetectRTC.isMobileDevice||DetectRTC.load(function(){var A,t;if(DetectRTC.MediaDevices.forEach(function(n){"audioinput"===n.kind&&!1!==a.mediaConstraints.audio&&(A=n),"videoinput"===n.kind&&!1!==a.mediaConstraints.video&&(t=n)}),A){if("Firefox"===DetectRTC.browser.name)return void(!0===a.mediaConstraints.audio?a.mediaConstraints.audio={deviceId:A.id}:a.mediaConstraints.audio.deviceId=A.id);!0==a.mediaConstraints.audio&&(a.mediaConstraints.audio={mandatory:{},optional:[]}),a.mediaConstraints.audio.optional||(a.mediaConstraints.audio.optional=[]);var n=[{sourceId:A.id}];a.mediaConstraints.audio.optional=n.concat(a.mediaConstraints.audio.optional)}if(t){if("Firefox"===DetectRTC.browser.name)return void(!0===a.mediaConstraints.video?a.mediaConstraints.video={deviceId:t.id}:a.mediaConstraints.video.deviceId=t.id);!0==a.mediaConstraints.video&&(a.mediaConstraints.video={mandatory:{},optional:[]}),a.mediaConstraints.video.optional||(a.mediaConstraints.video.optional=[]);var n=[{sourceId:t.id}];a.mediaConstraints.video.optional=n.concat(a.mediaConstraints.video.optional)}}),a.sdpConstraints={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0},optional:[{VoiceActivityDetection:!1}]},a.sdpSemantics=null,a.iceCandidatePoolSize=null,a.bundlePolicy=null,a.rtcpMuxPolicy=null,a.iceTransportPolicy=null,a.optionalArgument={optional:[{DtlsSrtpKeyAgreement:!0},{googImprovedWifiBwe:!0},{googScreencastMinBitrate:300},{googIPv6:!0},{googDscp:!0},{googCpuUnderuseThreshold:55},{googCpuOveruseThreshold:85},{googSuspendBelowMinBitrate:!0},{googCpuOveruseDetection:!0}],mandatory:{}},a.iceServers=L.getIceServers(a),a.candidates={host:!0,stun:!0,turn:!0},a.iceProtocols={tcp:!0,udp:!0},a.onopen=function(A){webrtcdev.info("Data connection has been opened between you & ",A.userid)},a.onclose=function(A){webrtcdev.warn("Data connection has been closed between you & ",A.userid)},a.onerror=function(A){webrtcdev.error(A.userid,"data-error",A)},a.onmessage=function(A){webrtcdev.debug("data-message",A.userid,A.data)},a.send=function(A,t){a.peers.send(A,t)},a.close=a.disconnect=a.leave=function(){a.onbeforeunload(!1,!0)},a.closeEntireSession=function(A){A=A||function(){},a.socket.emit("close-entire-session",function t(){return a.getAllParticipants().length?void setTimeout(t,100):void(a.onEntireSessionClosed({sessionid:a.sessionid,userid:a.userid,extra:a.extra}),a.changeUserId(null,function(){a.close(),A()}))})},a.onEntireSessionClosed=function(A){a.enableLogs&&webrtcdev.info("Entire session is closed: ",A.sessionid,A.extra)},a.onstream=function(){webrtcdev.warn("[RTC] onstream")},a.onstreamended=function(){webrtcdev.warn("[RTC] onstreamended")},a.direction="many-to-many",a.removeStream=function(A,t){var n;return a.attachStreams.forEach(function(t){t.id===A&&(n=t)}),n?void(a.peers.getAllParticipants().forEach(function(A){if(!(t&&A!==t)){var r=a.peers[A];try{r.peer.removeStream(n)}catch(A){}}}),a.renegotiate()):void webrtcdev.warn("No such stream exist.",A)},a.addStream=function(A,t){function n(n){A.streamCallback&&A.streamCallback(n),a.renegotiate(t)}return!A.getTracks?B(A)?void a.renegotiate(t):void((A.audio||A.video||A.screen)&&(A.screen?"Edge"===DetectRTC.browser.name?navigator.getDisplayMedia({video:!0,audio:m(a)}).then(function(t){t.isScreen=!0,F.onGettingLocalMedia(t),(A.audio||A.video)&&!m(a)?a.invokeGetUserMedia(null,function(A){n(A)}):n(t)},function(){webrtcdev.error("Unable to capture screen on Edge. HTTPs and version 17+ is required.")}):a.invokeGetUserMedia({audio:m(a),video:!0,isScreen:!0},function(t){(A.audio||A.video)&&!m(a)?a.invokeGetUserMedia(null,function(A){n(A)}):n(t)}):(A.audio||A.video)&&a.invokeGetUserMedia(null,n))):(-1===a.attachStreams.indexOf(A)&&(!A.streamid&&(A.streamid=A.id),a.attachStreams.push(A)),void a.renegotiate(t))},a.invokeGetUserMedia=function(A,t,n){n||(n=a.session),A||(A=a.mediaConstraints),webrtcdev.log(" [RTC MultiCon] invokeGetUserMedia ============= ",n.audio,n.video,A),A.isScreen?E({onGettingLocalMedia:function(n){var r=A.video;r&&(r.mediaSource||r.mozMediaSource?n.isScreen=!0:r.mandatory&&r.mandatory.chromeMediaSource&&(n.isScreen=!0)),n.isScreen||(n.isVideo=!!p(n,"video").length,n.isAudio=!n.isVideo&&p(n,"audio").length),F.onGettingLocalMedia(n,function(){"function"==typeof t&&t(n)})},onLocalMediaError:function(A,t){F.onLocalMediaError(A,t)},localMediaConstraints:A}):E({onGettingLocalMedia:function(n){var r=A.video;r&&(r.mediaSource||r.mozMediaSource?n.isScreen=!0:r.mandatory&&r.mandatory.chromeMediaSource&&(n.isScreen=!0)),n.isScreen||(n.isVideo=!!p(n,"video").length,n.isAudio=!n.isVideo&&p(n,"audio").length),F.onGettingLocalMedia(n,function(){"function"==typeof t&&t(n)})},onLocalMediaError:function(A,t){F.onLocalMediaError(A,t)},localMediaConstraints:{audio:!!n.audio&&A.audio,video:!!n.video&&A.video}})},a.applyConstraints=function(A,t){if(!I||!I.prototype.applyConstraints)return void alert("track.applyConstraints is NOT supported in your browser.");if(t){var n;return a.streamEvents[t]&&(n=a.streamEvents[t].stream),void Q(n,A)}a.attachStreams.forEach(function(t){Q(t,A)})},a.replaceTrack=function(A,t,n){function r(r){a.replaceTrack(r,t,n||A.video||A.screen)}if(A=A||{},!RTCPeerConnection.prototype.getSenders)return void a.addStream(A);if(A instanceof I)return void U(A,t,n);if(A instanceof b)return p(A,"video").length&&U(p(A,"video")[0],t,!0),void(p(A,"audio").length&&U(p(A,"audio")[0],t,!1));if(B(A)){throw"connection.replaceTrack requires audio and/or video and/or screen."}(A.audio||A.video||A.screen)&&(A.screen?"Edge"===DetectRTC.browser.name?navigator.getDisplayMedia({video:!0,audio:m(a)}).then(function(t){t.isScreen=!0,F.onGettingLocalMedia(t),(A.audio||A.video)&&!m(a)?a.invokeGetUserMedia(null,r):r(t)},function(){webrtcdev.error("Unable to capture screen on Edge. HTTPs and version 17+ is required.")}):a.invokeGetUserMedia({audio:m(a),video:!0,isScreen:!0},(A.audio||A.video)&&!m(a)?a.invokeGetUserMedia(null,r):r):(A.audio||A.video)&&a.invokeGetUserMedia(null,r))},a.resetTrack=function(A,t){A||(A=a.getAllParticipants()),"string"==typeof A&&(A=[A]),A.forEach(function(A){var n=a.peers[A].peer;("undefined"==typeof t||!0===t)&&n.lastVideoTrack&&a.replaceTrack(n.lastVideoTrack,A,!0),("undefined"==typeof t||!1===t)&&n.lastAudioTrack&&a.replaceTrack(n.lastAudioTrack,A,!1)})},a.renegotiate=function(A){return A?void F.renegotiatePeer(A):void a.peers.getAllParticipants().forEach(function(A){F.renegotiatePeer(A)})},a.setStreamEndHandler=function(A,t){if(A&&A.addEventListener&&(t=!!t,!A.alreadySetEndHandler)){A.alreadySetEndHandler=!0;var n="ended";"oninactive"in A&&(n="inactive"),A.addEventListener(n,function(){if(A.idInstance&&currentUserMediaRequest.remove(A.idInstance),!t){var n=[];a.attachStreams.forEach(function(t){t.id!=A.id&&n.push(t)}),a.attachStreams=n}var r=a.streamEvents[A.streamid];if(r||(r={stream:A,streamid:A.streamid,type:t?"remote":"local",userid:a.userid,extra:a.extra,mediaElement:a.streamEvents[A.streamid]?a.streamEvents[A.streamid].mediaElement:null}),t&&a.peers[r.userid]){var s=a.peers[r.userid].peer,n=[];s.getRemoteStreams().forEach(function(t){t.id!=A.id&&n.push(t)}),a.peers[r.userid].streams=n}r.userid===a.userid&&"remote"===r.type||(a.peersBackup[r.userid]&&(r.extra=a.peersBackup[r.userid].extra),a.onstreamended(r),delete a.streamEvents[A.streamid])},!1)}},a.onMediaError=function(A,t){!a.enableLogs||webrtcdev.error(A,t)},a.autoCloseEntireSession=!1,a.filesContainer=a.videosContainer=document.body||document.documentElement,a.isInitiator=!1,a.shareFile=F.shareFile,"undefined"!=typeof O&&O.handle(a),"undefined"!=typeof TranslationHandler&&TranslationHandler.handle(a),a.token=s,a.onNewParticipant=function(A,t){a.acceptParticipationRequest(A,t)},a.acceptParticipationRequest=function(A,t){t.successCallback&&(t.successCallback(),delete t.successCallback),F.createNewPeer(A,t)},"undefined"!=typeof M&&(a.StreamsHandler=M),a.onleave=function(){},a.invokeSelectFileDialog=function(A){var t=new FileSelector;t.accept="*.*",t.selectSingleFile(A)},a.onmute=function(A){if(A&&A.mediaElement){if("both"===A.muteType||"video"===A.muteType){A.mediaElement.src=null;var t=A.mediaElement.pause();"undefined"==typeof t?A.mediaElement.poster=A.snapshot||"muted.png":t.then(function(){A.mediaElement.poster=A.snapshot||"muted.png"})}else"audio"===A.muteType&&(A.mediaElement.muted=!0);webrtcdev.log("[RtcConn] onmute")}},a.onunmute=function(A){A&&A.mediaElement&&A.stream&&("both"===A.unmuteType||"video"===A.unmuteType?(A.mediaElement.poster=null,A.mediaElement.srcObject=A.stream,A.mediaElement.play()):"audio"===A.unmuteType&&(A.mediaElement.muted=!1),webrtcdev.log("[RtcConn] onunmute"))},a.onExtraDataUpdated=function(A){A.status="online",a.onUserStatusChanged(A,!0)},a.getAllParticipants=function(A){return a.peers.getAllParticipants(A)},"undefined"!=typeof M&&(M.onSyncNeeded=function(A,t,n){a.peers.getAllParticipants().forEach(function(r){F.onNegotiationNeeded({streamid:A,action:t,streamSyncNeeded:!0,type:n||"both"},r)})}),a.connectSocket=function(A){c(A)},a.closeSocket=function(){try{io.sockets={}}catch(A){}a.socket&&("function"==typeof a.socket.disconnect&&a.socket.disconnect(),"function"==typeof a.socket.resetProps&&a.socket.resetProps(),a.socket=null)},a.getSocket=function(A){return!A&&a.enableLogs&&webrtcdev.warn("getSocket.callback paramter is required."),A=A||function(){},a.socket?A(a.socket):c(function(){A(a.socket)}),a.socket},a.getRemoteStreams=F.getRemoteStreams;var S=["selectFirst","selectAll","forEach"];a.streamEvents={selectFirst:function(A){return a.streamEvents.selectAll(A)[0]},selectAll:function(A){A||(A={local:!0,remote:!0,isScreen:!0,isAudio:!0,isVideo:!0}),"local"==A&&(A={local:!0}),"remote"==A&&(A={remote:!0}),"screen"==A&&(A={isScreen:!0}),"audio"==A&&(A={isAudio:!0}),"video"==A&&(A={isVideo:!0});var t=[];return Object.keys(a.streamEvents).forEach(function(n){var r=a.streamEvents[n];if(-1===S.indexOf(n)){var s=!0;A.local&&"local"===r.type&&(s=!1),A.remote&&"remote"===r.type&&(s=!1),A.isScreen&&r.stream.isScreen&&(s=!1),A.isVideo&&r.stream.isVideo&&(s=!1),A.isAudio&&r.stream.isAudio&&(s=!1),A.userid&&r.userid===A.userid&&(s=!1),!1==s&&t.push(r)}}),t}},a.socketMessageEvent="@@socketMessageEvent",a.socketCustomEvent="@@socketCustomEvent",a.DetectRTC=DetectRTC,a.setCustomSocketEvent=function(A){A&&(a.socketCustomEvent=A);a.socket&&a.socket.emit("set-custom-socket-event-listener",a.socketCustomEvent)},a.getNumberOfBroadcastViewers=function(A,t){a.socket&&A&&t&&a.socket.emit("get-number-of-users-in-specific-broadcast",A,t)},a.onNumberOfBroadcastViewersUpdated=function(A){a.enableLogs&&a.isInitiator&&webrtcdev.info("Number of broadcast (",A.broadcastId,") viewers",A.numberOfBroadcastViewers)},a.onUserStatusChanged=function(A,t){!a.enableLogs||t||webrtcdev.info(A.userid,A.status)},a.getUserMediaHandler=E,a.multiPeersHandler=F,a.enableLogs=!0,a.setCustomSocketHandler=function(A){"undefined"!=typeof n&&(n=A)},a.chunkSize=40000,a.maxParticipantsAllowed=1e3,a.disconnectWith=F.disconnectWith,a.checkPresence=function(A,t){return A=A||a.sessionid,"SSEConnection"===n.name?void SSEConnection.checkPresence(A,function(A,n,r){return a.socket?void t(A,n):(A||(a.userid=n),void a.connectSocket(function(){t(A,n,r)}))}):a.socket?void a.socket.emit("check-presence",A+"",function(A,n,r){a.enableLogs&&webrtcdev.log("checkPresence.isRoomExist: ",A," roomid: ",n),t(A,n,r)}):void a.connectSocket(function(){a.checkPresence(A,t)})},a.onReadyForOffer=function(A,t){a.multiPeersHandler.createNewPeer(A,t)},a.setUserPreferences=function(A){return a.dontAttachStream&&(A.dontAttachLocalStream=!0),a.dontGetRemoteStream&&(A.dontGetRemoteStream=!0),A},a.updateExtraData=function(){a.socket.emit("extra-data-updated",a.extra)},a.enableScalableBroadcast=!1,a.maxRelayLimitPerUser=3,a.dontCaptureUserMedia=!1,a.dontAttachStream=!1,a.dontGetRemoteStream=!1,a.onReConnecting=function(A){a.enableLogs&&webrtcdev.info("ReConnecting with",A.userid,"...")},a.beforeAddingStream=function(A){return A},a.beforeRemovingStream=function(A){return A},a.modifyScreenConstraints=function(A){return A},a.onPeerStateChanged=function(A){a.enableLogs&&-1!==A.iceConnectionState.search(/closed|failed/gi)&&webrtcdev.error("Peer connection is closed between you & ",A.userid,A.extra,"state:",A.iceConnectionState)},a.isOnline=!0,l("online",function(){a.isOnline=!0}),l("offline",function(){a.isOnline=!1}),a.isLowBandwidth=!1,a.getExtraData=function(A,t){if(!A)throw"remoteUserId is required.";return"function"==typeof t?void a.socket.emit("get-remote-user-extra-data",A,function(A,n,r){t(A,n,r)}):a.peers[A]?a.peers[A].extra:a.peersBackup[A]?a.peersBackup[A].extra:{}},!t.autoOpenOrJoin||a.openOrJoin(a.sessionid),a.onUserIdAlreadyTaken=function(A){a.close(),a.closeSocket(),a.isInitiator=!1,a.userid=a.token(),a.join(a.sessionid),webrtcdev.warn("Userid already taken.",A,"Your new userid:",a.userid)},a.trickleIce=!0,a.version="6.7.4",a.onSettingLocalDescription=function(A){webrtcdev.info("Set local description for remote user",A.userid)},a.resetScreen=function(){sourceId=null,DetectRTC&&DetectRTC.screen&&delete DetectRTC.screen.sourceId,currentUserMediaRequest={streams:[],mutex:!1,queueRequests:[]}},a.autoCreateMediaElement=!1,a.password=null,a.setPassword=function(A,t){t=t||function(){},a.socket?a.socket.emit("set-password",A,t):(a.password=A,t(!0,a.sessionid,null))},a.onSocketDisconnect=function(){webrtcdev.warn("socket.io connection is closed")},a.onSocketError=function(){webrtcdev.warn("socket.io connection is failed")},a.errors={ROOM_NOT_AVAILABLE:"Session id not available",INVALID_PASSWORD:"Invalid password",USERID_NOT_AVAILABLE:"User ID does not exist",ROOM_PERMISSION_DENIED:"session permission denied",ROOM_FULL:"session capacity is full",DID_NOT_JOIN_ANY_ROOM:"Did not join any session yet",INVALID_SOCKET:"Invalid socket",PUBLIC_IDENTIFIER_MISSING:"publicRoomIdentifier is required",INVALID_ADMIN_CREDENTIAL:"Invalid username or password attempted"}})(this)};"undefined"!=typeof module&&(module.exports=exports=RTCMultiConnection),"function"==typeof define&&define.amd&&define("RTCMultiConnection",[],function(){return RTCMultiConnection}),function(A,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.html2canvas=t():A.html2canvas=t()}(this,function(){var A=Math.ceil,t=Math.PI,n=Math.floor,r=Math.abs,a=Math.round,s=Math.sqrt,d=Math.max,l=Math.min;return function(A){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return A[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=A,t.c=n,t.d=function(A,n,r){t.o(A,n)||Object.defineProperty(A,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(A){var n=A&&A.__esModule?function(){return A["default"]}:function(){return A};return t.d(n,"a",n),n},t.o=function(A,t){return Object.prototype.hasOwnProperty.call(A,t)},t.p="",t(t.s=27)}([function(A,t){"";function n(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function A(A,t){var n=[],r=!0,a=!1,s=void 0;try{for(var d=A[Symbol.iterator](),l;!(r=(l=d.next()).done)&&(n.push(l.value),!(t&&n.length===t));r=!0);}catch(A){a=!0,s=A}finally{try{!r&&d["return"]&&d["return"]()}finally{if(a)throw s}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return A(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(){function A(A,t){for(var n=0,r;n<t.length;n++)r=t[n],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(A,r.key,r)}return function(t,n,r){return n&&A(t.prototype,n),r&&A(t,r),t}}(),c=function(A){var t=A.match(/^#([a-f0-9]{3})$/i);return!!t&&[parseInt(t[1][0]+t[1][0],16),parseInt(t[1][1]+t[1][1],16),parseInt(t[1][2]+t[1][2],16),null]},B=function(A){var t=A.match(/^#([a-f0-9]{6})$/i);return!!t&&[parseInt(t[1].substring(0,2),16),parseInt(t[1].substring(2,4),16),parseInt(t[1].substring(4,6),16),null]},u=function(A){var t=A.match(/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/);return!!t&&[+t[1],+t[2],+t[3],null]},m=function(A){var t=A.match(/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/);return!!(t&&4<t.length)&&[+t[1],+t[2],+t[3],+t[4]]},p=function(A){return[l(A[0],255),l(A[1],255),l(A[2],255),3<A.length?A[3]:null]},w=function(A){var t=C[A.toLowerCase()];return!!t&&t},h=function(){function A(t){n(this,A);var d=Array.isArray(t)?p(t):c(t)||u(t)||m(t)||w(t)||B(t)||[0,0,0,null],l=s(d,4),h=l[0],r=l[1],g=l[2],C=l[3];this.r=h,this.g=r,this.b=g,this.a=C}return d(A,[{key:"isTransparent",value:function(){return 0===this.a}},{key:"toString",value:function(){return null!==this.a&&1!==this.a?"rgba("+this.r+","+this.g+","+this.b+","+this.a+")":"rgb("+this.r+","+this.g+","+this.b+")"}}]),A}();t.default=h;var C={transparent:[0,0,0,0],aliceblue:[240,248,255,null],antiquewhite:[250,235,215,null],aqua:[0,255,255,null],aquamarine:[127,255,212,null],azure:[240,255,255,null],beige:[245,245,220,null],bisque:[255,228,196,null],black:[0,0,0,null],blanchedalmond:[255,235,205,null],blue:[0,0,255,null],blueviolet:[138,43,226,null],brown:[165,42,42,null],burlywood:[222,184,135,null],cadetblue:[95,158,160,null],chartreuse:[127,255,0,null],chocolate:[210,105,30,null],coral:[255,127,80,null],cornflowerblue:[100,149,237,null],cornsilk:[255,248,220,null],crimson:[220,20,60,null],cyan:[0,255,255,null],darkblue:[0,0,139,null],darkcyan:[0,139,139,null],darkgoldenrod:[184,134,11,null],darkgray:[169,169,169,null],darkgreen:[0,100,0,null],darkgrey:[169,169,169,null],darkkhaki:[189,183,107,null],darkmagenta:[139,0,139,null],darkolivegreen:[85,107,47,null],darkorange:[255,140,0,null],darkorchid:[153,50,204,null],darkred:[139,0,0,null],darksalmon:[233,150,122,null],darkseagreen:[143,188,143,null],darkslateblue:[72,61,139,null],darkslategray:[47,79,79,null],darkslategrey:[47,79,79,null],darkturquoise:[0,206,209,null],darkviolet:[148,0,211,null],deeppink:[255,20,147,null],deepskyblue:[0,191,255,null],dimgray:[105,105,105,null],dimgrey:[105,105,105,null],dodgerblue:[30,144,255,null],firebrick:[178,34,34,null],floralwhite:[255,250,240,null],forestgreen:[34,139,34,null],fuchsia:[255,0,255,null],gainsboro:[220,220,220,null],ghostwhite:[248,248,255,null],gold:[255,215,0,null],goldenrod:[218,165,32,null],gray:[128,128,128,null],green:[0,128,0,null],greenyellow:[173,255,47,null],grey:[128,128,128,null],honeydew:[240,255,240,null],hotpink:[255,105,180,null],indianred:[205,92,92,null],indigo:[75,0,130,null],ivory:[255,255,240,null],khaki:[240,230,140,null],lavender:[230,230,250,null],lavenderblush:[255,240,245,null],lawngreen:[124,252,0,null],lemonchiffon:[255,250,205,null],lightblue:[173,216,230,null],lightcoral:[240,128,128,null],lightcyan:[224,255,255,null],lightgoldenrodyellow:[250,250,210,null],lightgray:[211,211,211,null],lightgreen:[144,238,144,null],lightgrey:[211,211,211,null],lightpink:[255,182,193,null],lightsalmon:[255,160,122,null],lightseagreen:[32,178,170,null],lightskyblue:[135,206,250,null],lightslategray:[119,136,153,null],lightslategrey:[119,136,153,null],lightsteelblue:[176,196,222,null],lightyellow:[255,255,224,null],lime:[0,255,0,null],limegreen:[50,205,50,null],linen:[250,240,230,null],magenta:[255,0,255,null],maroon:[128,0,0,null],mediumaquamarine:[102,205,170,null],mediumblue:[0,0,205,null],mediumorchid:[186,85,211,null],mediumpurple:[147,112,219,null],mediumseagreen:[60,179,113,null],mediumslateblue:[123,104,238,null],mediumspringgreen:[0,250,154,null],mediumturquoise:[72,209,204,null],mediumvioletred:[199,21,133,null],midnightblue:[25,25,112,null],mintcream:[245,255,250,null],mistyrose:[255,228,225,null],moccasin:[255,228,181,null],navajowhite:[255,222,173,null],navy:[0,0,128,null],oldlace:[253,245,230,null],olive:[128,128,0,null],olivedrab:[107,142,35,null],orange:[255,165,0,null],orangered:[255,69,0,null],orchid:[218,112,214,null],palegoldenrod:[238,232,170,null],palegreen:[152,251,152,null],paleturquoise:[175,238,238,null],palevioletred:[219,112,147,null],papayawhip:[255,239,213,null],peachpuff:[255,218,185,null],peru:[205,133,63,null],pink:[255,192,203,null],plum:[221,160,221,null],powderblue:[176,224,230,null],purple:[128,0,128,null],rebeccapurple:[102,51,153,null],red:[255,0,0,null],rosybrown:[188,143,143,null],royalblue:[65,105,225,null],saddlebrown:[139,69,19,null],salmon:[250,128,114,null],sandybrown:[244,164,96,null],seagreen:[46,139,87,null],seashell:[255,245,238,null],sienna:[160,82,45,null],silver:[192,192,192,null],skyblue:[135,206,235,null],slateblue:[106,90,205,null],slategray:[112,128,144,null],slategrey:[112,128,144,null],snow:[255,250,250,null],springgreen:[0,255,127,null],steelblue:[70,130,180,null],tan:[210,180,140,null],teal:[0,128,128,null],thistle:[216,191,216,null],tomato:[255,99,71,null],turquoise:[64,224,208,null],violet:[238,130,238,null],wheat:[245,222,179,null],white:[255,255,255,null],whitesmoke:[245,245,245,null],yellow:[255,255,0,null],yellowgreen:[154,205,50,null]},Q=t.TRANSPARENT=new h([0,0,0,0])},function(A,t){"";function n(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function A(A,t){for(var n=0,r;n<t.length;n++)r=t[n],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(A,r.key,r)}return function(t,n,r){return n&&A(t.prototype,n),r&&A(t,r),t}}(),a=t.LENGTH_TYPE={PX:0,PERCENTAGE:1},s=function(){function A(t){n(this,A),this.type="%"===t.substr(t.length-1)?a.PERCENTAGE:a.PX;var r=parseFloat(t);isNaN(r)&&console.error("Invalid value given for Length: \""+t+"\""),this.value=isNaN(r)?0:r}return r(A,[{key:"isPercentage",value:function(){return this.type===a.PERCENTAGE}},{key:"getAbsoluteValue",value:function(A){return this.isPercentage()?A*(this.value/100):this.value}}],[{key:"create",value:function(t){return new A(t)}}]),A}();t.default=s;var d=function A(t){var n=t.parent;return n?A(n):parseFloat(t.style.font.fontSize)},l=t.calculateLengthFromValueWithUnit=function(A,t,n){switch(n){case"px":case"%":return new s(t+n);case"em":case"rem":var r=new s(t);return r.value*="em"===n?parseFloat(A.style.font.fontSize):d(A),r;default:return new s("0");}}},function(A,t,n){"";function r(A){return A&&A.__esModule?A:{default:A}}function a(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.parseBoundCurves=t.calculatePaddingBoxPath=t.calculateBorderBoxPath=t.parsePathForBorder=t.parseDocumentSize=t.calculateContentBox=t.calculatePaddingBox=t.parseBounds=t.Bounds=void 0;var c=function(){function A(A,t){for(var n=0,r;n<t.length;n++)r=t[n],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(A,r.key,r)}return function(t,n,r){return n&&A(t.prototype,n),r&&A(t,r),t}}(),B=n(7),g=r(B),u=n(32),m=r(u),p=0,w=1,h=2,C=3,Q=0,U=1,E=t.Bounds=function(){function A(t,n,r,s){a(this,A),this.left=t,this.top=n,this.width=r,this.height=s}return c(A,null,[{key:"fromClientRect",value:function(t,n,r){return new A(t.left+n,t.top+r,t.width,t.height)}}]),A}(),F=t.parseBounds=function(A,t,n){return E.fromClientRect(A.getBoundingClientRect(),t,n)},b=t.calculatePaddingBox=function(A,t){return new E(A.left+t[C].borderWidth,A.top+t[p].borderWidth,A.width-(t[w].borderWidth+t[C].borderWidth),A.height-(t[p].borderWidth+t[h].borderWidth))},H=t.calculateContentBox=function(A,t,n){var r=t[p].value,a=t[w].value,s=t[h].value,d=t[C].value;return new E(A.left+d+n[C].borderWidth,A.top+r+n[p].borderWidth,A.width-(n[w].borderWidth+n[C].borderWidth+d+a),A.height-(n[p].borderWidth+n[h].borderWidth+r+s))},S=t.parseDocumentSize=function(A){var t=A.body,n=A.documentElement;if(!t||!n)throw new Error("Unable to get document size");var r=d(d(t.scrollWidth,n.scrollWidth),d(t.offsetWidth,n.offsetWidth),d(t.clientWidth,n.clientWidth)),a=d(d(t.scrollHeight,n.scrollHeight),d(t.offsetHeight,n.offsetHeight),d(t.clientHeight,n.clientHeight));return new E(0,0,r,a)},T=t.parsePathForBorder=function(A,t){switch(t){case p:return I(A.topLeftOuter,A.topLeftInner,A.topRightOuter,A.topRightInner);case w:return I(A.topRightOuter,A.topRightInner,A.bottomRightOuter,A.bottomRightInner);case h:return I(A.bottomRightOuter,A.bottomRightInner,A.bottomLeftOuter,A.bottomLeftInner);case C:default:return I(A.bottomLeftOuter,A.bottomLeftInner,A.topLeftOuter,A.topLeftInner);}},I=function(A,t,n,r){var a=[];return A instanceof m.default?a.push(A.subdivide(.5,!1)):a.push(A),n instanceof m.default?a.push(n.subdivide(.5,!0)):a.push(n),r instanceof m.default?a.push(r.subdivide(.5,!0).reverse()):a.push(r),t instanceof m.default?a.push(t.subdivide(.5,!1).reverse()):a.push(t),a},N=t.calculateBorderBoxPath=function(A){return[A.topLeftOuter,A.topRightOuter,A.bottomRightOuter,A.bottomLeftOuter]},R=t.calculatePaddingBoxPath=function(A){return[A.topLeftInner,A.topRightInner,A.bottomRightInner,A.bottomLeftInner]},L=t.parseBoundCurves=function(A,t,n){var r=n[M.TOP_LEFT][Q].getAbsoluteValue(A.width),a=n[M.TOP_LEFT][U].getAbsoluteValue(A.height),s=n[M.TOP_RIGHT][Q].getAbsoluteValue(A.width),c=n[M.TOP_RIGHT][U].getAbsoluteValue(A.height),B=n[M.BOTTOM_RIGHT][Q].getAbsoluteValue(A.width),u=n[M.BOTTOM_RIGHT][U].getAbsoluteValue(A.height),m=n[M.BOTTOM_LEFT][Q].getAbsoluteValue(A.width),E=n[M.BOTTOM_LEFT][U].getAbsoluteValue(A.height),F=[];F.push((r+s)/A.width),F.push((m+B)/A.width),F.push((a+E)/A.height),F.push((c+u)/A.height);var b=d.apply(Math,F);1<b&&(r/=b,a/=b,s/=b,c/=b,B/=b,u/=b,m/=b,E/=b);var H=A.width-s,S=A.height-u,T=A.width-B,I=A.height-E;return{topLeftOuter:0<r||0<a?D(A.left,A.top,r,a,M.TOP_LEFT):new g.default(A.left,A.top),topLeftInner:0<r||0<a?D(A.left+t[C].borderWidth,A.top+t[p].borderWidth,d(0,r-t[C].borderWidth),d(0,a-t[p].borderWidth),M.TOP_LEFT):new g.default(A.left+t[C].borderWidth,A.top+t[p].borderWidth),topRightOuter:0<s||0<c?D(A.left+H,A.top,s,c,M.TOP_RIGHT):new g.default(A.left+A.width,A.top),topRightInner:0<s||0<c?D(A.left+l(H,A.width+t[C].borderWidth),A.top+t[p].borderWidth,H>A.width+t[C].borderWidth?0:s-t[C].borderWidth,c-t[p].borderWidth,M.TOP_RIGHT):new g.default(A.left+A.width-t[w].borderWidth,A.top+t[p].borderWidth),bottomRightOuter:0<B||0<u?D(A.left+T,A.top+S,B,u,M.BOTTOM_RIGHT):new g.default(A.left+A.width,A.top+A.height),bottomRightInner:0<B||0<u?D(A.left+l(T,A.width-t[C].borderWidth),A.top+l(S,A.height+t[p].borderWidth),d(0,B-t[w].borderWidth),u-t[h].borderWidth,M.BOTTOM_RIGHT):new g.default(A.left+A.width-t[w].borderWidth,A.top+A.height-t[h].borderWidth),bottomLeftOuter:0<m||0<E?D(A.left,A.top+I,m,E,M.BOTTOM_LEFT):new g.default(A.left,A.top+A.height),bottomLeftInner:0<m||0<E?D(A.left+t[C].borderWidth,A.top+I,d(0,m-t[C].borderWidth),E-t[h].borderWidth,M.BOTTOM_LEFT):new g.default(A.left+t[C].borderWidth,A.top+A.height-t[h].borderWidth)}},M={TOP_LEFT:0,TOP_RIGHT:1,BOTTOM_RIGHT:2,BOTTOM_LEFT:3},D=function(A,t,n,r,a){var d=4*((s(2)-1)/3),l=n*d,c=r*d,B=A+n,u=t+r;switch(a){case M.TOP_LEFT:return new m.default(new g.default(A,u),new g.default(A,u-c),new g.default(B-l,t),new g.default(B,t));case M.TOP_RIGHT:return new m.default(new g.default(A,t),new g.default(A+l,t),new g.default(B,u-c),new g.default(B,u));case M.BOTTOM_RIGHT:return new m.default(new g.default(B,t),new g.default(B,t+c),new g.default(A+l,u),new g.default(A,u));case M.BOTTOM_LEFT:default:return new m.default(new g.default(B,u),new g.default(B-l,u),new g.default(A,t+c),new g.default(A,t));}}},function(A,t){"";Object.defineProperty(t,"__esModule",{value:!0});var n=t.contains=function(A,t){return 0!=(A&t)},r=t.distance=function(A,t){return s(A*A+t*t)},a=t.copyCSSStyles=function(A,t){for(var n=A.length-1,r;0<=n;n--)r=A.item(n),"content"!==r&&t.style.setProperty(r,A.getPropertyValue(r));return t},d=t.SMALL_IMAGE="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},function(A,t,n){"";function r(A){return A&&A.__esModule?A:{default:A}}function s(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.parseBackgroundImage=t.parseBackground=t.calculateBackgroundRepeatPath=t.calculateBackgroundPosition=t.calculateBackgroungPositioningArea=t.calculateBackgroungPaintingArea=t.calculateGradientBackgroundSize=t.calculateBackgroundSize=t.BACKGROUND_ORIGIN=t.BACKGROUND_CLIP=t.BACKGROUND_SIZE=t.BACKGROUND_REPEAT=void 0;var d=n(0),l=r(d),c=n(1),B=r(c),g=n(31),u=r(g),m=n(7),p=r(m),w=n(2),h=n(17),C=t.BACKGROUND_REPEAT={REPEAT:0,NO_REPEAT:1,REPEAT_X:2,REPEAT_Y:3},Q=t.BACKGROUND_SIZE={AUTO:0,CONTAIN:1,COVER:2,LENGTH:3},U=t.BACKGROUND_CLIP={BORDER_BOX:0,PADDING_BOX:1,CONTENT_BOX:2},E=t.BACKGROUND_ORIGIN=U,F="auto",b=function A(t){s(this,A);"contain"===t?this.size=Q.CONTAIN:"cover"===t?this.size=Q.COVER:"auto"===t?this.size=Q.AUTO:this.value=new B.default(t)},H=t.calculateBackgroundSize=function(A,t,n){var r=0,a=0,s=A.size;if(s[0].size===Q.CONTAIN||s[0].size===Q.COVER){var d=n.width/n.height,l=t.width/t.height;return d<l==(s[0].size===Q.COVER)?new u.default(n.height*l,n.height):new u.default(n.width,n.width/l)}return s[0].value&&(r=s[0].value.getAbsoluteValue(n.width)),s[0].size===Q.AUTO&&s[1].size===Q.AUTO?a=t.height:s[1].size===Q.AUTO?a=r/t.width*t.height:s[1].value&&(a=s[1].value.getAbsoluteValue(n.height)),s[0].size===Q.AUTO&&(r=a/t.height*t.width),new u.default(r,a)},S=t.calculateGradientBackgroundSize=function(A,t){var n=A.size,r=n[0].value?n[0].value.getAbsoluteValue(t.width):t.width,a=n[1].value?n[1].value.getAbsoluteValue(t.height):n[0].value?r:t.height;return new u.default(r,a)},T=new b(F),I=t.calculateBackgroungPaintingArea=function(A,t){switch(t){case U.BORDER_BOX:return(0,w.calculateBorderBoxPath)(A);case U.PADDING_BOX:default:return(0,w.calculatePaddingBoxPath)(A);}},N=t.calculateBackgroungPositioningArea=function(A,t,n,r){var a=(0,w.calculatePaddingBox)(t,r);switch(A){case E.BORDER_BOX:return t;case E.CONTENT_BOX:var s=n[h.PADDING_SIDES.LEFT].getAbsoluteValue(t.width),d=n[h.PADDING_SIDES.RIGHT].getAbsoluteValue(t.width),l=n[h.PADDING_SIDES.TOP].getAbsoluteValue(t.width),c=n[h.PADDING_SIDES.BOTTOM].getAbsoluteValue(t.width);return new w.Bounds(a.left+s,a.top+l,a.width-s-d,a.height-l-c);case E.PADDING_BOX:default:return a;}},R=t.calculateBackgroundPosition=function(A,t,n){return new p.default(A[0].getAbsoluteValue(n.width-t.width),A[1].getAbsoluteValue(n.height-t.height))},L=t.calculateBackgroundRepeatPath=function(A,t,n,r,s){var d=A.repeat;return d===C.REPEAT_X?[new p.default(a(s.left),a(r.top+t.y)),new p.default(a(s.left+s.width),a(r.top+t.y)),new p.default(a(s.left+s.width),a(n.height+r.top+t.y)),new p.default(a(s.left),a(n.height+r.top+t.y))]:d===C.REPEAT_Y?[new p.default(a(r.left+t.x),a(s.top)),new p.default(a(r.left+t.x+n.width),a(s.top)),new p.default(a(r.left+t.x+n.width),a(s.height+s.top)),new p.default(a(r.left+t.x),a(s.height+s.top))]:d===C.NO_REPEAT?[new p.default(a(r.left+t.x),a(r.top+t.y)),new p.default(a(r.left+t.x+n.width),a(r.top+t.y)),new p.default(a(r.left+t.x+n.width),a(r.top+t.y+n.height)),new p.default(a(r.left+t.x),a(r.top+t.y+n.height))]:[new p.default(a(s.left),a(s.top)),new p.default(a(s.left+s.width),a(s.top)),new p.default(a(s.left+s.width),a(s.height+s.top)),new p.default(a(s.left),a(s.height+s.top))]},M=t.parseBackground=function(A,t){return{backgroundColor:new l.default(A.backgroundColor),backgroundImage:K(A,t),backgroundClip:D(A.backgroundClip),backgroundOrigin:O(A.backgroundOrigin)}},D=function(A){return"padding-box"===A?U.PADDING_BOX:"content-box"===A?U.CONTENT_BOX:U.BORDER_BOX},O=function(A){return"padding-box"===A?E.PADDING_BOX:"content-box"===A?E.CONTENT_BOX:E.BORDER_BOX},k=function(A){switch(A.trim()){case"no-repeat":return C.NO_REPEAT;case"repeat-x":case"repeat no-repeat":return C.REPEAT_X;case"repeat-y":case"no-repeat repeat":return C.REPEAT_Y;case"repeat":return C.REPEAT;}return console.error("Invalid background-repeat value \""+A+"\""),C.REPEAT},K=function(A,t){var n=V(A.backgroundImage).map(function(A){if("url"===A.method){var n=t.loadImage(A.args[0]);A.args=n?[n]:[]}return A}),r=A.backgroundPosition.split(","),a=A.backgroundRepeat.split(","),s=A.backgroundSize.split(",");return n.map(function(A,t){var n=(s[t]||F).trim().split(" ").map(_),d=(r[t]||F).trim().split(" ").map(P);return{source:A,repeat:k("string"==typeof a[t]?a[t]:a[0]),size:2>n.length?[n[0],T]:[n[0],n[1]],position:2>d.length?[d[0],d[0]]:[d[0],d[1]]}})},_=function(A){return"auto"===A?T:new b(A)},P=function(A){return"bottom"===A||"right"===A?new B.default("100%"):"left"===A||"top"===A?new B.default("0%"):"auto"===A?new B.default("0"):new B.default(A)},V=t.parseBackgroundImage=function(A){var t=[],n=[],r="",a=null,s="",d=0,l=0,c=function(){var A="";if(r){"\""===s.substr(0,1)&&(s=s.substr(1,s.length-2)),s&&n.push(s.trim());var a=r.indexOf("-",1)+1;"-"===r.substr(0,1)&&0<a&&(A=r.substr(0,a).toLowerCase(),r=r.substr(a)),r=r.toLowerCase(),"none"!==r&&t.push({prefix:A,method:r,args:n})}n=[],r=s=""};return A.split("").forEach(function(A){if(!(0===d&&/^\s$/.test(A))){switch(A){case"\"":a?a===A&&(a=null):a=A;break;case"(":if(a)break;else{if(0===d)return void(d=1);l++}break;case")":if(a)break;else if(1===d){if(0===l)return d=0,void c();l--}break;case",":if(a)break;else{if(0===d)return void c();if(1===d&&0===l&&!r.match(/^url$/i))return n.push(s.trim()),void(s="")}}0===d?r+=A:s+=A}}),c(),t}},function(A,t){"";Object.defineProperty(t,"__esModule",{value:!0});t.PATH={VECTOR:0,BEZIER_CURVE:1,CIRCLE:2}},function(A,t,n){"";function r(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function A(A,t){for(var n=0,r;n<t.length;n++)r=t[n],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(A,r.key,r)}return function(t,n,r){return n&&A(t.prototype,n),r&&A(t,r),t}}(),s=n(0),d=function(A){return A&&A.__esModule?A:{default:A}}(s),l=n(3),c=n(4),B=n(12),g=n(33),u=n(34),m=n(35),p=n(36),w=n(37),h=n(38),C=n(8),Q=n(39),U=n(40),E=n(18),F=n(17),b=n(19),H=n(11),S=n(41),T=n(20),I=n(42),N=n(43),R=n(44),L=n(45),M=n(2),D=n(21),O=n(14),k=["INPUT","TEXTAREA","SELECT"],K=function(){function A(t,n,a,s){var l=this;r(this,A),this.parent=n,this.tagName=t.tagName,this.index=s,this.childNodes=[],this.listItems=[],"number"==typeof t.start&&(this.listStart=t.start);var K=t.ownerDocument.defaultView,P=K.pageXOffset,V=K.pageYOffset,z=K.getComputedStyle(t,null),G=(0,u.parseDisplay)(z.display),X="radio"===t.type||"checkbox"===t.type,J=(0,b.parsePosition)(z.position);if(this.style={background:X?D.INPUT_BACKGROUND:(0,c.parseBackground)(z,a),border:X?D.INPUT_BORDERS:(0,B.parseBorder)(z),borderRadius:(t instanceof K.HTMLInputElement||t instanceof HTMLInputElement)&&X?(0,D.getInputBorderRadius)(t):(0,g.parseBorderRadius)(z),color:X?D.INPUT_COLOR:new d.default(z.color),display:G,float:(0,m.parseCSSFloat)(z.float),font:(0,p.parseFont)(z),letterSpacing:(0,w.parseLetterSpacing)(z.letterSpacing),listStyle:G===u.DISPLAY.LIST_ITEM?(0,C.parseListStyle)(z):null,lineBreak:(0,h.parseLineBreak)(z.lineBreak),margin:(0,Q.parseMargin)(z),opacity:parseFloat(z.opacity),overflow:-1===k.indexOf(t.tagName)?(0,U.parseOverflow)(z.overflow):U.OVERFLOW.HIDDEN,overflowWrap:(0,E.parseOverflowWrap)(z.overflowWrap?z.overflowWrap:z.wordWrap),padding:(0,F.parsePadding)(z),position:J,textDecoration:(0,H.parseTextDecoration)(z),textShadow:(0,S.parseTextShadow)(z.textShadow),textTransform:(0,T.parseTextTransform)(z.textTransform),transform:(0,I.parseTransform)(z),visibility:(0,N.parseVisibility)(z.visibility),wordBreak:(0,R.parseWordBreak)(z.wordBreak),zIndex:(0,L.parseZIndex)(J===b.POSITION.STATIC?"auto":z.zIndex)},this.isTransformed()&&(t.style.transform="matrix(1,0,0,1,0,0)"),G===u.DISPLAY.LIST_ITEM){var Y=(0,O.getListOwner)(this);if(Y){var W=Y.listItems.length;Y.listItems.push(this),this.listIndex=t.hasAttribute("value")&&"number"==typeof t.value?t.value:0===W?"number"==typeof Y.listStart?Y.listStart:1:Y.listItems[W-1].listIndex+1}}"IMG"===t.tagName&&t.addEventListener("load",function(){l.bounds=(0,M.parseBounds)(t,P,V),l.curvedBounds=(0,M.parseBoundCurves)(l.bounds,l.style.border,l.style.borderRadius)}),this.image=_(t,a),this.bounds=X?(0,D.reformatInputBounds)((0,M.parseBounds)(t,P,V)):(0,M.parseBounds)(t,P,V),this.curvedBounds=(0,M.parseBoundCurves)(this.bounds,this.style.border,this.style.borderRadius),this.name=""+t.tagName.toLowerCase()+(t.id?"#"+t.id:"")+t.className.toString().split(" ").map(function(A){return A.length?"."+A:""}).join("")}return a(A,[{key:"getClipPaths",value:function(){var A=this.parent?this.parent.getClipPaths():[],t=this.style.overflow!==U.OVERFLOW.VISIBLE;return t?A.concat([(0,M.calculatePaddingBoxPath)(this.curvedBounds)]):A}},{key:"isInFlow",value:function(){return this.isRootElement()&&!this.isFloating()&&!this.isAbsolutelyPositioned()}},{key:"isVisible",value:function(){return!(0,l.contains)(this.style.display,u.DISPLAY.NONE)&&0<this.style.opacity&&this.style.visibility===N.VISIBILITY.VISIBLE}},{key:"isAbsolutelyPositioned",value:function(){return this.style.position!==b.POSITION.STATIC&&this.style.position!==b.POSITION.RELATIVE}},{key:"isPositioned",value:function(){return this.style.position!==b.POSITION.STATIC}},{key:"isFloating",value:function(){return this.style.float!==m.FLOAT.NONE}},{key:"isRootElement",value:function(){return null===this.parent}},{key:"isTransformed",value:function(){return null!==this.style.transform}},{key:"isPositionedWithZIndex",value:function(){return this.isPositioned()&&!this.style.zIndex.auto}},{key:"isInlineLevel",value:function(){return(0,l.contains)(this.style.display,u.DISPLAY.INLINE)||(0,l.contains)(this.style.display,u.DISPLAY.INLINE_BLOCK)||(0,l.contains)(this.style.display,u.DISPLAY.INLINE_FLEX)||(0,l.contains)(this.style.display,u.DISPLAY.INLINE_GRID)||(0,l.contains)(this.style.display,u.DISPLAY.INLINE_LIST_ITEM)||(0,l.contains)(this.style.display,u.DISPLAY.INLINE_TABLE)}},{key:"isInlineBlockOrInlineTable",value:function(){return(0,l.contains)(this.style.display,u.DISPLAY.INLINE_BLOCK)||(0,l.contains)(this.style.display,u.DISPLAY.INLINE_TABLE)}}]),A}();t.default=K;var _=function(A,t){if(A instanceof A.ownerDocument.defaultView.SVGSVGElement||A instanceof SVGSVGElement){var n=new XMLSerializer;return t.loadImage("data:image/svg+xml,"+encodeURIComponent(n.serializeToString(A)))}switch(A.tagName){case"IMG":var r=A;return t.loadImage(r.currentSrc||r.src);case"CANVAS":return t.loadCanvas(A);case"IFRAME":var a=A.getAttribute("data-html2canvas-internal-iframe-key");if(a)return a;}return null}},function(A,t,n){"";function r(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(5);t.default=function A(t,n){r(this,A),this.type=a.PATH.VECTOR,this.x=t,this.y=n,isNaN(t)&&console.error("Invalid x value given for Vector"),isNaN(n)&&console.error("Invalid y value given for Vector")}},function(A,t,n){"";Object.defineProperty(t,"__esModule",{value:!0}),t.parseListStyle=t.parseListStyleType=t.LIST_STYLE_TYPE=t.LIST_STYLE_POSITION=void 0;var r=n(4),a=t.LIST_STYLE_POSITION={INSIDE:0,OUTSIDE:1},s=t.LIST_STYLE_TYPE={NONE:-1,DISC:0,CIRCLE:1,SQUARE:2,DECIMAL:3,CJK_DECIMAL:4,DECIMAL_LEADING_ZERO:5,LOWER_ROMAN:6,UPPER_ROMAN:7,LOWER_GREEK:8,LOWER_ALPHA:9,UPPER_ALPHA:10,ARABIC_INDIC:11,ARMENIAN:12,BENGALI:13,CAMBODIAN:14,CJK_EARTHLY_BRANCH:15,CJK_HEAVENLY_STEM:16,CJK_IDEOGRAPHIC:17,DEVANAGARI:18,ETHIOPIC_NUMERIC:19,GEORGIAN:20,GUJARATI:21,GURMUKHI:22,HEBREW:22,HIRAGANA:23,HIRAGANA_IROHA:24,JAPANESE_FORMAL:25,JAPANESE_INFORMAL:26,KANNADA:27,KATAKANA:28,KATAKANA_IROHA:29,KHMER:30,KOREAN_HANGUL_FORMAL:31,KOREAN_HANJA_FORMAL:32,KOREAN_HANJA_INFORMAL:33,LAO:34,LOWER_ARMENIAN:35,MALAYALAM:36,MONGOLIAN:37,MYANMAR:38,ORIYA:39,PERSIAN:40,SIMP_CHINESE_FORMAL:41,SIMP_CHINESE_INFORMAL:42,TAMIL:43,TELUGU:44,THAI:45,TIBETAN:46,TRAD_CHINESE_FORMAL:47,TRAD_CHINESE_INFORMAL:48,UPPER_ARMENIAN:49,DISCLOSURE_OPEN:50,DISCLOSURE_CLOSED:51},d=t.parseListStyleType=function(A){switch(A){case"disc":return s.DISC;case"circle":return s.CIRCLE;case"square":return s.SQUARE;case"decimal":return s.DECIMAL;case"cjk-decimal":return s.CJK_DECIMAL;case"decimal-leading-zero":return s.DECIMAL_LEADING_ZERO;case"lower-roman":return s.LOWER_ROMAN;case"upper-roman":return s.UPPER_ROMAN;case"lower-greek":return s.LOWER_GREEK;case"lower-alpha":return s.LOWER_ALPHA;case"upper-alpha":return s.UPPER_ALPHA;case"arabic-indic":return s.ARABIC_INDIC;case"armenian":return s.ARMENIAN;case"bengali":return s.BENGALI;case"cambodian":return s.CAMBODIAN;case"cjk-earthly-branch":return s.CJK_EARTHLY_BRANCH;case"cjk-heavenly-stem":return s.CJK_HEAVENLY_STEM;case"cjk-ideographic":return s.CJK_IDEOGRAPHIC;case"devanagari":return s.DEVANAGARI;case"ethiopic-numeric":return s.ETHIOPIC_NUMERIC;case"georgian":return s.GEORGIAN;case"gujarati":return s.GUJARATI;case"gurmukhi":return s.GURMUKHI;case"hebrew":return s.HEBREW;case"hiragana":return s.HIRAGANA;case"hiragana-iroha":return s.HIRAGANA_IROHA;case"japanese-formal":return s.JAPANESE_FORMAL;case"japanese-informal":return s.JAPANESE_INFORMAL;case"kannada":return s.KANNADA;case"katakana":return s.KATAKANA;case"katakana-iroha":return s.KATAKANA_IROHA;case"khmer":return s.KHMER;case"korean-hangul-formal":return s.KOREAN_HANGUL_FORMAL;case"korean-hanja-formal":return s.KOREAN_HANJA_FORMAL;case"korean-hanja-informal":return s.KOREAN_HANJA_INFORMAL;case"lao":return s.LAO;case"lower-armenian":return s.LOWER_ARMENIAN;case"malayalam":return s.MALAYALAM;case"mongolian":return s.MONGOLIAN;case"myanmar":return s.MYANMAR;case"oriya":return s.ORIYA;case"persian":return s.PERSIAN;case"simp-chinese-formal":return s.SIMP_CHINESE_FORMAL;case"simp-chinese-informal":return s.SIMP_CHINESE_INFORMAL;case"tamil":return s.TAMIL;case"telugu":return s.TELUGU;case"thai":return s.THAI;case"tibetan":return s.TIBETAN;case"trad-chinese-formal":return s.TRAD_CHINESE_FORMAL;case"trad-chinese-informal":return s.TRAD_CHINESE_INFORMAL;case"upper-armenian":return s.UPPER_ARMENIAN;case"disclosure-open":return s.DISCLOSURE_OPEN;case"disclosure-closed":return s.DISCLOSURE_CLOSED;case"none":default:return s.NONE;}},l=t.parseListStyle=function(A){var t=(0,r.parseBackgroundImage)(A.getPropertyValue("list-style-image"));return{listStyleType:d(A.getPropertyValue("list-style-type")),listStyleImage:t.length?t[0]:null,listStylePosition:c(A.getPropertyValue("list-style-position"))}},c=function(A){switch(A){case"inside":return a.INSIDE;case"outside":default:return a.OUTSIDE;}}},function(A,t,n){"";function r(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}function a(A,t,n){return 0<A.length?t+n.toUpperCase():A}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function A(A,t){for(var n=0,r;n<t.length;n++)r=t[n],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(A,r.key,r)}return function(t,n,r){return n&&A(t.prototype,n),r&&A(t,r),t}}(),d=n(20),l=n(22),c=function(){function A(t,n,a){r(this,A),this.text=t,this.parent=n,this.bounds=a}return s(A,null,[{key:"fromTextNode",value:function(t,n){var r=B(t.data,n.style.textTransform);return new A(r,n,(0,l.parseTextBounds)(r,n,t))}}]),A}();t.default=c;var B=function(A,t){return t===d.TEXT_TRANSFORM.LOWERCASE?A.toLowerCase():t===d.TEXT_TRANSFORM.CAPITALIZE?A.replace(/(^|\s|:|-|\(|\))([a-z])/g,a):t===d.TEXT_TRANSFORM.UPPERCASE?A.toUpperCase():A}},function(A,t,n){"";Object.defineProperty(t,"__esModule",{value:!0});var r=n(23),s=function(A){if(A.createRange){var t=A.createRange();if(t.getBoundingClientRect){var n=A.createElement("boundtest");n.style.height="123px",n.style.display="block",A.body.appendChild(n),t.selectNode(n);var r=t.getBoundingClientRect(),s=a(r.height);if(A.body.removeChild(n),123===s)return!0}}return!1},d=function(A,t){var n=new Image,r=A.createElement("canvas"),a=r.getContext("2d");return new Promise(function(A){n.src=t;var s=function(){try{a.drawImage(n,0,0),r.toDataURL()}catch(t){return A(!1)}return A(!0)};n.onload=s,n.onerror=function(){return A(!1)},!0===n.complete&&setTimeout(function(){s()},500)})},l=function(){return"undefined"!=typeof new Image().crossOrigin},c=function(){return"string"==typeof new XMLHttpRequest().responseType},B=function(A){var t=new Image,n=A.createElement("canvas"),r=n.getContext("2d");t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(t,0,0),n.toDataURL()}catch(A){return!1}return!0},g=function(A){return 0===A[0]&&255===A[1]&&0===A[2]&&255===A[3]},u=function(A){var t=A.createElement("canvas"),n=100;t.width=n,t.height=n;var a=t.getContext("2d");a.fillStyle="rgb(0, 255, 0)",a.fillRect(0,0,n,n);var s=new Image,d=t.toDataURL();s.src=d;var l=(0,r.createForeignObjectSVG)(n,n,0,0,s);return a.fillStyle="red",a.fillRect(0,0,n,n),(0,r.loadSerializedSVG)(l).then(function(t){a.drawImage(t,0,0);var s=a.getImageData(0,0,n,n).data;a.fillStyle="red",a.fillRect(0,0,n,n);var l=A.createElement("div");return l.style.backgroundImage="url("+d+")",l.style.height=n+"px",g(s)?(0,r.loadSerializedSVG)((0,r.createForeignObjectSVG)(n,n,0,0,l)):Promise.reject(!1)}).then(function(A){return a.drawImage(A,0,0),g(a.getImageData(0,0,n,n).data)}).catch(function(){return!1})},m={get SUPPORT_RANGE_BOUNDS(){'';var A=s(document);return Object.defineProperty(m,"SUPPORT_RANGE_BOUNDS",{value:A}),A},get SUPPORT_SVG_DRAWING(){'';var A=B(document);return Object.defineProperty(m,"SUPPORT_SVG_DRAWING",{value:A}),A},get SUPPORT_BASE64_DRAWING(){'';return function(A){var t=d(document,A);return Object.defineProperty(m,"SUPPORT_BASE64_DRAWING",{value:function(){return t}}),t}},get SUPPORT_FOREIGNOBJECT_DRAWING(){'';var A="function"==typeof Array.from&&"function"==typeof window.fetch?u(document):Promise.resolve(!1);return Object.defineProperty(m,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:A}),A},get SUPPORT_CORS_IMAGES(){'';var A=l();return Object.defineProperty(m,"SUPPORT_CORS_IMAGES",{value:A}),A},get SUPPORT_RESPONSE_TYPE(){'';var A=c();return Object.defineProperty(m,"SUPPORT_RESPONSE_TYPE",{value:A}),A},get SUPPORT_CORS_XHR(){'';var A=("withCredentials"in new XMLHttpRequest);return Object.defineProperty(m,"SUPPORT_CORS_XHR",{value:A}),A}};t.default=m},function(A,t,n){"";Object.defineProperty(t,"__esModule",{value:!0}),t.parseTextDecoration=t.TEXT_DECORATION_LINE=t.TEXT_DECORATION=t.TEXT_DECORATION_STYLE=void 0;var r=n(0),a=function(A){return A&&A.__esModule?A:{default:A}}(r),s=t.TEXT_DECORATION_STYLE={SOLID:0,DOUBLE:1,DOTTED:2,DASHED:3,WAVY:4},d=t.TEXT_DECORATION={NONE:null},l=t.TEXT_DECORATION_LINE={UNDERLINE:1,OVERLINE:2,LINE_THROUGH:3,BLINK:4},c=function(A){return"underline"===A?l.UNDERLINE:"overline"===A?l.OVERLINE:"line-through"===A?l.LINE_THROUGH:l.BLINK},B=function(A){return"none"===A?null:A.split(" ").map(c)},g=function(A){return"double"===A?s.DOUBLE:"dotted"===A?s.DOTTED:"dashed"===A?s.DASHED:"wavy"===A?s.WAVY:s.SOLID},u=t.parseTextDecoration=function(A){var t=B(A.textDecorationLine?A.textDecorationLine:A.textDecoration);if(null===t)return d.NONE;var n=A.textDecorationColor?new a.default(A.textDecorationColor):null,r=g(A.textDecorationStyle);return{textDecorationLine:t,textDecorationColor:n,textDecorationStyle:r}}},function(A,t,n){"";Object.defineProperty(t,"__esModule",{value:!0}),t.parseBorder=t.BORDER_SIDES=t.BORDER_STYLE=void 0;var r=n(0),a=function(A){return A&&A.__esModule?A:{default:A}}(r),s=t.BORDER_STYLE={NONE:0,SOLID:1},d=t.BORDER_SIDES={TOP:0,RIGHT:1,BOTTOM:2,LEFT:3},l=Object.keys(d).map(function(A){return A.toLowerCase()}),c=function(A){return"none"===A?s.NONE:s.SOLID},B=t.parseBorder=function(A){return l.map(function(t){var n=new a.default(A.getPropertyValue("border-"+t+"-color")),r=c(A.getPropertyValue("border-"+t+"-style")),s=parseFloat(A.getPropertyValue("border-"+t+"-width"));return{borderColor:n,borderStyle:r,borderWidth:isNaN(s)?0:s}})}},function(A,t){"";Object.defineProperty(t,"__esModule",{value:!0});for(var n=t.toCodePoints=function(A){for(var t=[],n=0,r=A.length;n<r;){var a=A.charCodeAt(n++);if(55296<=a&&56319>=a&&n<r){var s=A.charCodeAt(n++);56320==(64512&s)?t.push(((1023&a)<<10)+(1023&s)+65536):(t.push(a),n--)}else t.push(a)}return t},r=t.fromCodePoint=function(){var A=String.fromCodePoint;if(A)return A.apply(String,arguments);var t=arguments.length;if(!t)return"";for(var n=[],r=-1,a="";++r<t;){var s=arguments.length<=r?void 0:arguments[r];65535>=s?n.push(s):(s-=65536,n.push((s>>10)+55296,s%1024+56320)),(r+1===t||16384<n.length)&&(a+=String.fromCharCode.apply(String,n),n.length=0)}return a},a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s="undefined"==typeof Uint8Array?[]:new Uint8Array(256),d=0;d<a.length;d++)s[a.charCodeAt(d)]=d;var l=t.decode=function(A){var t=.75*A.length,n=A.length,r=0,a,d,l,c,B;"="===A[A.length-1]&&(t--,"="===A[A.length-2]&&t--);var g="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint8Array.prototype.slice?new ArrayBuffer(t):Array(t),u=Array.isArray(g)?g:new Uint8Array(g);for(a=0;a<n;a+=4)d=s[A.charCodeAt(a)],l=s[A.charCodeAt(a+1)],c=s[A.charCodeAt(a+2)],B=s[A.charCodeAt(a+3)],u[r++]=d<<2|l>>4,u[r++]=(15&l)<<4|c>>2,u[r++]=(3&c)<<6|63&B;return g},c=t.polyUint16Array=function(A){for(var t=A.length,n=[],r=0;r<t;r+=2)n.push(A[r+1]<<8|A[r]);return n},B=t.polyUint32Array=function(A){for(var t=A.length,n=[],r=0;r<t;r+=4)n.push(A[r+3]<<24|A[r+2]<<16|A[r+1]<<8|A[r]);return n}},function(A,t,a){"";function s(A){return A&&A.__esModule?A:{default:A}}Object.defineProperty(t,"__esModule",{value:!0}),t.createCounterText=t.inlineListItemElement=t.getListOwner=void 0;var d=a(3),l=a(6),c=s(l),B=a(9),g=s(B),u=a(8),m=a(24),p=["OL","UL","MENU"],w=t.getListOwner=function(A){var t=A.parent;if(!t)return null;do{var n=-1!==p.indexOf(t.tagName);if(n)return t;t=t.parent}while(t);return A.parent},h=t.inlineListItemElement=function(A,t,n){var r=t.style.listStyle;if(r){var a=A.ownerDocument.defaultView.getComputedStyle(A,null),s=A.ownerDocument.createElement("html2canvaswrapper");switch((0,d.copyCSSStyles)(a,s),s.style.position="absolute",s.style.bottom="auto",s.style.display="block",s.style.letterSpacing="normal",r.listStylePosition){case u.LIST_STYLE_POSITION.OUTSIDE:s.style.left="auto",s.style.right=A.ownerDocument.defaultView.innerWidth-t.bounds.left-t.style.margin[1].getAbsoluteValue(t.bounds.width)+7+"px",s.style.textAlign="right";break;case u.LIST_STYLE_POSITION.INSIDE:s.style.left=t.bounds.left-t.style.margin[3].getAbsoluteValue(t.bounds.width)+"px",s.style.right="auto",s.style.textAlign="left";}var l=void 0,B=t.style.margin[0].getAbsoluteValue(t.bounds.width),m=r.listStyleImage;if(!m)"number"==typeof t.listIndex&&(l=A.ownerDocument.createTextNode(K(t.listIndex,r.listStyleType,!0)),s.appendChild(l),s.style.top=t.bounds.top-B+"px");else if("url"===m.method){var p=A.ownerDocument.createElement("img");p.src=m.args[0],s.style.top=t.bounds.top-B+"px",s.style.width="auto",s.style.height="auto",s.appendChild(p)}else{var w=.5*parseFloat(t.style.font.fontSize);s.style.top=t.bounds.top-B+t.bounds.height-1.5*w+"px",s.style.width=w+"px",s.style.height=w+"px",s.style.backgroundImage=a.listStyleImage}var h=A.ownerDocument.body;h.appendChild(s),l?(t.childNodes.push(g.default.fromTextNode(l,t)),h.removeChild(s)):t.childNodes.push(new c.default(s,t,n,0))}},C={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Q={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u0554","\u0553","\u0552","\u0551","\u0550","\u054F","\u054E","\u054D","\u054C","\u054B","\u054A","\u0549","\u0548","\u0547","\u0546","\u0545","\u0544","\u0543","\u0542","\u0541","\u0540","\u053F","\u053E","\u053D","\u053C","\u053B","\u053A","\u0539","\u0538","\u0537","\u0536","\u0535","\u0534","\u0533","\u0532","\u0531"]},U={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["\u05D9\u05F3","\u05D8\u05F3","\u05D7\u05F3","\u05D6\u05F3","\u05D5\u05F3","\u05D4\u05F3","\u05D3\u05F3","\u05D2\u05F3","\u05D1\u05F3","\u05D0\u05F3","\u05EA","\u05E9","\u05E8","\u05E7","\u05E6","\u05E4","\u05E2","\u05E1","\u05E0","\u05DE","\u05DC","\u05DB","\u05D9\u05D8","\u05D9\u05D7","\u05D9\u05D6","\u05D8\u05D6","\u05D8\u05D5","\u05D9","\u05D8","\u05D7","\u05D6","\u05D5","\u05D4","\u05D3","\u05D2","\u05D1","\u05D0"]},E={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u10F5","\u10F0","\u10EF","\u10F4","\u10EE","\u10ED","\u10EC","\u10EB","\u10EA","\u10E9","\u10E8","\u10E7","\u10E6","\u10E5","\u10E4","\u10F3","\u10E2","\u10E1","\u10E0","\u10DF","\u10DE","\u10DD","\u10F2","\u10DC","\u10DB","\u10DA","\u10D9","\u10D8","\u10D7","\u10F1","\u10D6","\u10D5","\u10D4","\u10D3","\u10D2","\u10D1","\u10D0"]},F=function(A,t,n,r,a,s){return A<t||A>n?K(A,a,0<s.length):r.integers.reduce(function(t,n,a){for(;A>=n;)A-=n,t+=r.values[a];return t},"")+s},b=function(A,t,n,r){var a="";do n||A--,a=r(A)+a,A/=t;while(A*t>=t);return a},H=function(A,t,a,s,d){var l=a-t+1;return(0>A?"-":"")+(b(r(A),l,s,function(A){return(0,m.fromCodePoint)(n(A%l)+t)})+d)},S=function(A,t){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:". ",s=t.length;return b(r(A),s,!1,function(A){return t[n(A%s)]})+a},T=1,I=2,N=4,R=8,L=function(A,t,a,s,l,c){if(-9999>A||9999<A)return K(A,u.LIST_STYLE_TYPE.CJK_DECIMAL,0<l.length);var B=r(A),g=l;if(0===B)return t[0]+g;for(var m=0,p;0<B&&4>=m;m++)p=B%10,0===p&&(0,d.contains)(c,T)&&""!==g?g=t[p]+g:1<p||1===p&&0===m||1===p&&1===m&&(0,d.contains)(c,I)||1===p&&1===m&&(0,d.contains)(c,N)&&100<A||1===p&&1<m&&(0,d.contains)(c,R)?g=t[p]+(0<m?a[m-1]:"")+g:1===p&&0<m&&(g=a[m-1]+g),B=n(B/10);return(0>A?s:"")+g},M="\u5341\u767E\u5343\u842C",D="\u62FE\u4F70\u4EDF\u842C",O="\u30DE\u30A4\u30CA\u30B9",k="\uB9C8\uC774\uB108\uC2A4 ",K=t.createCounterText=function(A,t,n){var r=n?". ":"",a=n?"\u3001":"",s=n?", ":"";switch(t){case u.LIST_STYLE_TYPE.DISC:return"\u2022";case u.LIST_STYLE_TYPE.CIRCLE:return"\u25E6";case u.LIST_STYLE_TYPE.SQUARE:return"\u25FE";case u.LIST_STYLE_TYPE.DECIMAL_LEADING_ZERO:var d=H(A,48,57,!0,r);return 4>d.length?"0"+d:d;case u.LIST_STYLE_TYPE.CJK_DECIMAL:return S(A,"\u3007\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D",a);case u.LIST_STYLE_TYPE.LOWER_ROMAN:return F(A,1,3999,C,u.LIST_STYLE_TYPE.DECIMAL,r).toLowerCase();case u.LIST_STYLE_TYPE.UPPER_ROMAN:return F(A,1,3999,C,u.LIST_STYLE_TYPE.DECIMAL,r);case u.LIST_STYLE_TYPE.LOWER_GREEK:return H(A,945,969,!1,r);case u.LIST_STYLE_TYPE.LOWER_ALPHA:return H(A,97,122,!1,r);case u.LIST_STYLE_TYPE.UPPER_ALPHA:return H(A,65,90,!1,r);case u.LIST_STYLE_TYPE.ARABIC_INDIC:return H(A,1632,1641,!0,r);case u.LIST_STYLE_TYPE.ARMENIAN:case u.LIST_STYLE_TYPE.UPPER_ARMENIAN:return F(A,1,9999,Q,u.LIST_STYLE_TYPE.DECIMAL,r);case u.LIST_STYLE_TYPE.LOWER_ARMENIAN:return F(A,1,9999,Q,u.LIST_STYLE_TYPE.DECIMAL,r).toLowerCase();case u.LIST_STYLE_TYPE.BENGALI:return H(A,2534,2543,!0,r);case u.LIST_STYLE_TYPE.CAMBODIAN:case u.LIST_STYLE_TYPE.KHMER:return H(A,6112,6121,!0,r);case u.LIST_STYLE_TYPE.CJK_EARTHLY_BRANCH:return S(A,"\u5B50\u4E11\u5BC5\u536F\u8FB0\u5DF3\u5348\u672A\u7533\u9149\u620C\u4EA5",a);case u.LIST_STYLE_TYPE.CJK_HEAVENLY_STEM:return S(A,"\u7532\u4E59\u4E19\u4E01\u620A\u5DF1\u5E9A\u8F9B\u58EC\u7678",a);case u.LIST_STYLE_TYPE.CJK_IDEOGRAPHIC:case u.LIST_STYLE_TYPE.TRAD_CHINESE_INFORMAL:return L(A,"\u96F6\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D",M,"\u8CA0",a,I|N|R);case u.LIST_STYLE_TYPE.TRAD_CHINESE_FORMAL:return L(A,"\u96F6\u58F9\u8CB3\u53C3\u8086\u4F0D\u9678\u67D2\u634C\u7396",D,"\u8CA0",a,T|I|N|R);case u.LIST_STYLE_TYPE.SIMP_CHINESE_INFORMAL:return L(A,"\u96F6\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D",M,"\u8D1F",a,I|N|R);case u.LIST_STYLE_TYPE.SIMP_CHINESE_FORMAL:return L(A,"\u96F6\u58F9\u8D30\u53C1\u8086\u4F0D\u9646\u67D2\u634C\u7396",D,"\u8D1F",a,T|I|N|R);case u.LIST_STYLE_TYPE.JAPANESE_INFORMAL:return L(A,"\u3007\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D","\u5341\u767E\u5343\u4E07",O,a,0);case u.LIST_STYLE_TYPE.JAPANESE_FORMAL:return L(A,"\u96F6\u58F1\u5F10\u53C2\u56DB\u4F0D\u516D\u4E03\u516B\u4E5D","\u62FE\u767E\u5343\u4E07",O,a,T|I|N);case u.LIST_STYLE_TYPE.KOREAN_HANGUL_FORMAL:return L(A,"\uC601\uC77C\uC774\uC0BC\uC0AC\uC624\uC721\uCE60\uD314\uAD6C","\uC2ED\uBC31\uCC9C\uB9CC",k,s,T|I|N);case u.LIST_STYLE_TYPE.KOREAN_HANJA_INFORMAL:return L(A,"\u96F6\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D","\u5341\u767E\u5343\u842C",k,s,0);case u.LIST_STYLE_TYPE.KOREAN_HANJA_FORMAL:return L(A,"\u96F6\u58F9\u8CB3\u53C3\u56DB\u4E94\u516D\u4E03\u516B\u4E5D","\u62FE\u767E\u5343",k,s,T|I|N);case u.LIST_STYLE_TYPE.DEVANAGARI:return H(A,2406,2415,!0,r);case u.LIST_STYLE_TYPE.GEORGIAN:return F(A,1,19999,E,u.LIST_STYLE_TYPE.DECIMAL,r);case u.LIST_STYLE_TYPE.GUJARATI:return H(A,2790,2799,!0,r);case u.LIST_STYLE_TYPE.GURMUKHI:return H(A,2662,2671,!0,r);case u.LIST_STYLE_TYPE.HEBREW:return F(A,1,10999,U,u.LIST_STYLE_TYPE.DECIMAL,r);case u.LIST_STYLE_TYPE.HIRAGANA:return S(A,"\u3042\u3044\u3046\u3048\u304A\u304B\u304D\u304F\u3051\u3053\u3055\u3057\u3059\u305B\u305D\u305F\u3061\u3064\u3066\u3068\u306A\u306B\u306C\u306D\u306E\u306F\u3072\u3075\u3078\u307B\u307E\u307F\u3080\u3081\u3082\u3084\u3086\u3088\u3089\u308A\u308B\u308C\u308D\u308F\u3090\u3091\u3092\u3093");case u.LIST_STYLE_TYPE.HIRAGANA_IROHA:return S(A,"\u3044\u308D\u306F\u306B\u307B\u3078\u3068\u3061\u308A\u306C\u308B\u3092\u308F\u304B\u3088\u305F\u308C\u305D\u3064\u306D\u306A\u3089\u3080\u3046\u3090\u306E\u304A\u304F\u3084\u307E\u3051\u3075\u3053\u3048\u3066\u3042\u3055\u304D\u3086\u3081\u307F\u3057\u3091\u3072\u3082\u305B\u3059");case u.LIST_STYLE_TYPE.KANNADA:return H(A,3302,3311,!0,r);case u.LIST_STYLE_TYPE.KATAKANA:return S(A,"\u30A2\u30A4\u30A6\u30A8\u30AA\u30AB\u30AD\u30AF\u30B1\u30B3\u30B5\u30B7\u30B9\u30BB\u30BD\u30BF\u30C1\u30C4\u30C6\u30C8\u30CA\u30CB\u30CC\u30CD\u30CE\u30CF\u30D2\u30D5\u30D8\u30DB\u30DE\u30DF\u30E0\u30E1\u30E2\u30E4\u30E6\u30E8\u30E9\u30EA\u30EB\u30EC\u30ED\u30EF\u30F0\u30F1\u30F2\u30F3",a);case u.LIST_STYLE_TYPE.KATAKANA_IROHA:return S(A,"\u30A4\u30ED\u30CF\u30CB\u30DB\u30D8\u30C8\u30C1\u30EA\u30CC\u30EB\u30F2\u30EF\u30AB\u30E8\u30BF\u30EC\u30BD\u30C4\u30CD\u30CA\u30E9\u30E0\u30A6\u30F0\u30CE\u30AA\u30AF\u30E4\u30DE\u30B1\u30D5\u30B3\u30A8\u30C6\u30A2\u30B5\u30AD\u30E6\u30E1\u30DF\u30B7\u30F1\u30D2\u30E2\u30BB\u30B9",a);case u.LIST_STYLE_TYPE.LAO:return H(A,3792,3801,!0,r);case u.LIST_STYLE_TYPE.MONGOLIAN:return H(A,6160,6169,!0,r);case u.LIST_STYLE_TYPE.MYANMAR:return H(A,4160,4169,!0,r);case u.LIST_STYLE_TYPE.ORIYA:return H(A,2918,2927,!0,r);case u.LIST_STYLE_TYPE.PERSIAN:return H(A,1776,1785,!0,r);case u.LIST_STYLE_TYPE.TAMIL:return H(A,3046,3055,!0,r);case u.LIST_STYLE_TYPE.TELUGU:return H(A,3174,3183,!0,r);case u.LIST_STYLE_TYPE.THAI:return H(A,3664,3673,!0,r);case u.LIST_STYLE_TYPE.TIBETAN:return H(A,3872,3881,!0,r);case u.LIST_STYLE_TYPE.DECIMAL:default:return H(A,48,57,!0,r);}}},function(r,s,l){"";function c(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(s,"__esModule",{value:!0});var B=function(){function A(A,t){for(var n=0,r;n<t.length;n++)r=t[n],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(A,r.key,r)}return function(t,n,r){return n&&A(t.prototype,n),r&&A(t,r),t}}(),g=l(5),u=l(11),m=function(A,t){var n=d.apply(null,A.colorStops.map(function(A){return A.stop})),r=1/d(1,n);A.colorStops.forEach(function(A){t.addColorStop(r*A.stop,A.color.toString())})},p=function(){function r(A){c(this,r),this.canvas=A?A:document.createElement("canvas")}return B(r,[{key:"render",value:function(A){this.ctx=this.canvas.getContext("2d"),this.options=A,this.canvas.width=n(A.width*A.scale),this.canvas.height=n(A.height*A.scale),this.canvas.style.width=A.width+"px",this.canvas.style.height=A.height+"px",this.ctx.scale(this.options.scale,this.options.scale),this.ctx.translate(-A.x,-A.y),this.ctx.textBaseline="bottom",A.logger.log("Canvas renderer initialized ("+A.width+"x"+A.height+" at "+A.x+","+A.y+") with scale "+this.options.scale)}},{key:"clip",value:function(A,t){var n=this;A.length&&(this.ctx.save(),A.forEach(function(A){n.path(A),n.ctx.clip()})),t(),A.length&&this.ctx.restore()}},{key:"drawImage",value:function(A,t,n){this.ctx.drawImage(A,t.left,t.top,t.width,t.height,n.left,n.top,n.width,n.height)}},{key:"drawShape",value:function(A,t){this.path(A),this.ctx.fillStyle=t.toString(),this.ctx.fill()}},{key:"fill",value:function(A){this.ctx.fillStyle=A.toString(),this.ctx.fill()}},{key:"getTarget",value:function(){return this.canvas.getContext("2d").setTransform(1,0,0,1,0,0),Promise.resolve(this.canvas)}},{key:"path",value:function(A){var n=this;this.ctx.beginPath(),Array.isArray(A)?A.forEach(function(A,t){var r=A.type===g.PATH.VECTOR?A:A.start;0===t?n.ctx.moveTo(r.x,r.y):n.ctx.lineTo(r.x,r.y),A.type===g.PATH.BEZIER_CURVE&&n.ctx.bezierCurveTo(A.startControl.x,A.startControl.y,A.endControl.x,A.endControl.y,A.end.x,A.end.y)}):this.ctx.arc(A.x+A.radius,A.y+A.radius,A.radius,0,2*t,!0),this.ctx.closePath()}},{key:"rectangle",value:function(A,t,n,r,a){this.ctx.fillStyle=a.toString(),this.ctx.fillRect(A,t,n,r)}},{key:"renderLinearGradient",value:function(A,t){var n=this.ctx.createLinearGradient(A.left+t.direction.x1,A.top+t.direction.y1,A.left+t.direction.x0,A.top+t.direction.y0);m(t,n),this.ctx.fillStyle=n,this.ctx.fillRect(A.left,A.top,A.width,A.height)}},{key:"renderRadialGradient",value:function(A,t){var n=this,r=A.left+t.center.x,a=A.top+t.center.y,s=this.ctx.createRadialGradient(r,a,0,r,a,t.radius.x);if(s)if(m(t,s),this.ctx.fillStyle=s,t.radius.x!==t.radius.y){var d=A.left+.5*A.width,l=A.top+.5*A.height,c=t.radius.y/t.radius.x,B=1/c;this.transform(d,l,[1,0,0,c,0,0],function(){return n.ctx.fillRect(A.left,B*(A.top-l)+l,A.width,A.height*B)})}else this.ctx.fillRect(A.left,A.top,A.width,A.height)}},{key:"renderRepeat",value:function(A,t,n,r,a){this.path(A),this.ctx.fillStyle=this.ctx.createPattern(this.resizeImage(t,n),"repeat"),this.ctx.translate(r,a),this.ctx.fill(),this.ctx.translate(-r,-a)}},{key:"renderTextNode",value:function(t,n,r,s,d){var l=this;this.ctx.font=[r.fontStyle,r.fontVariant,r.fontWeight,r.fontSize,r.fontFamily].join(" "),t.forEach(function(t){if(l.ctx.fillStyle=n.toString(),d&&t.text.trim().length?d.slice(0).reverse().forEach(function(A){l.ctx.shadowColor=A.color.toString(),l.ctx.shadowOffsetX=A.offsetX*l.options.scale,l.ctx.shadowOffsetY=A.offsetY*l.options.scale,l.ctx.shadowBlur=A.blur,l.ctx.fillText(t.text,t.bounds.left,t.bounds.top+t.bounds.height)}):l.ctx.fillText(t.text,t.bounds.left,t.bounds.top+t.bounds.height),null!==s){var c=s.textDecorationColor||n;s.textDecorationLine.forEach(function(n){switch(n){case u.TEXT_DECORATION_LINE.UNDERLINE:var s=l.options.fontMetrics.getMetrics(r),d=s.baseline;l.rectangle(t.bounds.left,a(t.bounds.top+d),t.bounds.width,1,c);break;case u.TEXT_DECORATION_LINE.OVERLINE:l.rectangle(t.bounds.left,a(t.bounds.top),t.bounds.width,1,c);break;case u.TEXT_DECORATION_LINE.LINE_THROUGH:var B=l.options.fontMetrics.getMetrics(r),g=B.middle;l.rectangle(t.bounds.left,A(t.bounds.top+g),t.bounds.width,1,c);}})}})}},{key:"resizeImage",value:function(A,t){if(A.width===t.width&&A.height===t.height)return A;var n=this.canvas.ownerDocument.createElement("canvas");n.width=t.width,n.height=t.height;var r=n.getContext("2d");return r.drawImage(A,0,0,A.width,A.height,0,0,t.width,t.height),n}},{key:"setOpacity",value:function(A){this.ctx.globalAlpha=A}},{key:"transform",value:function(A,t,n,r){this.ctx.save(),this.ctx.translate(A,t),this.ctx.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this.ctx.translate(-A,-t),r(),this.ctx.restore()}}]),r}();s.default=p},function(A,t){"";function n(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function A(A,t){for(var n=0,r;n<t.length;n++)r=t[n],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(A,r.key,r)}return function(t,n,r){return n&&A(t.prototype,n),r&&A(t,r),t}}(),a=function(){function A(t,r,a){n(this,A),this.enabled="undefined"!=typeof window&&t,this.start=a?a:Date.now(),this.id=r}return r(A,[{key:"child",value:function(t){return new A(this.enabled,t,this.start)}},{key:"log",value:function(){if(this.enabled&&window.console&&window.console.log){for(var A=arguments.length,t=Array(A),n=0;n<A;n++)t[n]=arguments[n];Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-this.start+"ms",this.id?"html2canvas ("+this.id+"):":"html2canvas:"].concat([].slice.call(t,0)))}}},{key:"error",value:function(){if(this.enabled&&window.console&&window.console.error){for(var A=arguments.length,t=Array(A),n=0;n<A;n++)t[n]=arguments[n];Function.prototype.bind.call(window.console.error,window.console).apply(window.console,[Date.now()-this.start+"ms",this.id?"html2canvas ("+this.id+"):":"html2canvas:"].concat([].slice.call(t,0)))}}}]),A}();t.default=a},function(A,t,n){"";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePadding=t.PADDING_SIDES=void 0;var r=n(1),a=function(A){return A&&A.__esModule?A:{default:A}}(r),s=t.PADDING_SIDES={TOP:0,RIGHT:1,BOTTOM:2,LEFT:3},d=["top","right","bottom","left"],l=t.parsePadding=function(A){return d.map(function(t){return new a.default(A.getPropertyValue("padding-"+t))})}},function(A,t){"";Object.defineProperty(t,"__esModule",{value:!0});var n=t.OVERFLOW_WRAP={NORMAL:0,BREAK_WORD:1},r=t.parseOverflowWrap=function(A){switch(A){case"break-word":return n.BREAK_WORD;case"normal":default:return n.NORMAL;}}},function(A,t){"";Object.defineProperty(t,"__esModule",{value:!0});var n=t.POSITION={STATIC:0,RELATIVE:1,ABSOLUTE:2,FIXED:3,STICKY:4},r=t.parsePosition=function(A){return"relative"===A?n.RELATIVE:"absolute"===A?n.ABSOLUTE:"fixed"===A?n.FIXED:"sticky"===A?n.STICKY:n.STATIC}},function(A,t){"";Object.defineProperty(t,"__esModule",{value:!0});var n=t.TEXT_TRANSFORM={NONE:0,LOWERCASE:1,UPPERCASE:2,CAPITALIZE:3},r=t.parseTextTransform=function(A){return"uppercase"===A?n.UPPERCASE:"lowercase"===A?n.LOWERCASE:"capitalize"===A?n.CAPITALIZE:n.NONE}},function(A,t,n){"";function r(A){return A&&A.__esModule?A:{default:A}}Object.defineProperty(t,"__esModule",{value:!0}),t.reformatInputBounds=t.inlineSelectElement=t.inlineTextAreaElement=t.inlineInputElement=t.getInputBorderRadius=t.INPUT_BACKGROUND=t.INPUT_BORDERS=t.INPUT_COLOR=void 0;var a=n(9),s=r(a),d=n(4),c=n(12),B=n(50),g=r(B),u=n(7),m=r(u),p=n(0),w=r(p),h=n(1),C=r(h),Q=n(2),U=n(22),E=n(3),F=t.INPUT_COLOR=new w.default([42,42,42]),b=new w.default([165,165,165]),H=new w.default([222,222,222]),S={borderWidth:1,borderColor:b,borderStyle:c.BORDER_STYLE.SOLID},T=t.INPUT_BORDERS=[S,S,S,S],I=t.INPUT_BACKGROUND={backgroundColor:H,backgroundImage:[],backgroundClip:d.BACKGROUND_CLIP.PADDING_BOX,backgroundOrigin:d.BACKGROUND_ORIGIN.PADDING_BOX},N=new C.default("50%"),R=[N,N],L=[R,R,R,R],M=new C.default("3px"),D=[M,M],O=[D,D,D,D],k=t.getInputBorderRadius=function(A){return"radio"===A.type?L:O},K=t.inlineInputElement=function(A,t){if(!("radio"===A.type||"checkbox"===A.type))z(G(A),A,t,!1);else if(A.checked){var n=l(t.bounds.width,t.bounds.height);t.childNodes.push("checkbox"===A.type?[new m.default(t.bounds.left+.39363*n,t.bounds.top+.79*n),new m.default(t.bounds.left+.16*n,t.bounds.top+.5549*n),new m.default(t.bounds.left+.27347*n,t.bounds.top+.44071*n),new m.default(t.bounds.left+.39694*n,t.bounds.top+.5649*n),new m.default(t.bounds.left+.72983*n,t.bounds.top+.23*n),new m.default(t.bounds.left+.84*n,t.bounds.top+.34085*n),new m.default(t.bounds.left+.39363*n,t.bounds.top+.79*n)]:new g.default(t.bounds.left+n/4,t.bounds.top+n/4,n/4))}},_=t.inlineTextAreaElement=function(A,t){z(A.value,A,t,!0)},P=t.inlineSelectElement=function(A,t){var n=A.options[A.selectedIndex||0];z(n?n.text||"":"",A,t,!1)},V=t.reformatInputBounds=function(A){return A.width>A.height?(A.left+=(A.width-A.height)/2,A.width=A.height):A.width<A.height&&(A.top+=(A.height-A.width)/2,A.height=A.width),A},z=function(A,t,n,r){var a=t.ownerDocument.body;if(0<A.length&&a){var d=t.ownerDocument.createElement("html2canvaswrapper");(0,E.copyCSSStyles)(t.ownerDocument.defaultView.getComputedStyle(t,null),d),d.style.position="absolute",d.style.left=n.bounds.left+"px",d.style.top=n.bounds.top+"px",r||(d.style.whiteSpace="nowrap");var l=t.ownerDocument.createTextNode(A);d.appendChild(l),a.appendChild(d),n.childNodes.push(s.default.fromTextNode(l,n)),a.removeChild(d)}},G=function(A){var t="password"===A.type?Array(A.value.length+1).join("\u2022"):A.value;return 0===t.length?A.placeholder||"":t}},function(A,t,n){"";function r(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.parseTextBounds=t.TextBounds=void 0;var a=n(2),s=n(11),d=n(10),l=function(A){return A&&A.__esModule?A:{default:A}}(d),c=n(24),B=t.TextBounds=function A(t,n){r(this,A),this.text=t,this.bounds=n},g=t.parseTextBounds=function(A,t,n){for(var r=0!==t.style.letterSpacing,a=r?(0,c.toCodePoints)(A).map(function(A){return(0,c.fromCodePoint)(A)}):(0,c.breakWords)(A,t),d=a.length,g=n.parentNode?n.parentNode.ownerDocument.defaultView:null,p=g?g.pageXOffset:0,w=g?g.pageYOffset:0,h=[],C=0,Q=0,U;Q<d;Q++){if(U=a[Q],!(t.style.textDecoration!==s.TEXT_DECORATION.NONE||0<U.trim().length))l.default.SUPPORT_RANGE_BOUNDS||(n=n.splitText(U.length));else if(l.default.SUPPORT_RANGE_BOUNDS)h.push(new B(U,m(n,C,U.length,p,w)));else{var E=n.splitText(U.length);h.push(new B(U,u(n,p,w))),n=E}C+=U.length}return h},u=function(A,t,n){var r=A.ownerDocument.createElement("html2canvaswrapper");r.appendChild(A.cloneNode(!0));var s=A.parentNode;if(s){s.replaceChild(r,A);var d=(0,a.parseBounds)(r,t,n);return r.firstChild&&s.replaceChild(r.firstChild,r),d}return new a.Bounds(0,0,0,0)},m=function(A,t,n,r,s){var d=A.ownerDocument.createRange();return d.setStart(A,t),d.setEnd(A,t+n),a.Bounds.fromClientRect(d.getBoundingClientRect(),r,s)}},function(A,t){"";function r(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function A(A,t){for(var n=0,r;n<t.length;n++)r=t[n],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(A,r.key,r)}return function(t,n,r){return n&&A(t.prototype,n),r&&A(t,r),t}}(),s=function(){function A(t){r(this,A),this.element=t}return a(A,[{key:"render",value:function(A){var t=this;this.options=A,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.width=n(A.width)*A.scale,this.canvas.height=n(A.height)*A.scale,this.canvas.style.width=A.width+"px",this.canvas.style.height=A.height+"px",A.logger.log("ForeignObject renderer initialized ("+A.width+"x"+A.height+" at "+A.x+","+A.y+") with scale "+A.scale);var r=l(d(A.windowWidth,A.width)*A.scale,d(A.windowHeight,A.height)*A.scale,A.scrollX*A.scale,A.scrollY*A.scale,this.element);return c(r).then(function(n){return A.backgroundColor&&(t.ctx.fillStyle=A.backgroundColor.toString(),t.ctx.fillRect(0,0,A.width*A.scale,A.height*A.scale)),t.ctx.drawImage(n,-A.x*A.scale,-A.y*A.scale),t.canvas})}}]),A}();t.default=s;var l=t.createForeignObjectSVG=function(A,t,n,r,a){var s=document.createElementNS("http://www.w3.org/2000/svg","svg"),d=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");return s.setAttributeNS(null,"width",A),s.setAttributeNS(null,"height",t),d.setAttributeNS(null,"width","100%"),d.setAttributeNS(null,"height","100%"),d.setAttributeNS(null,"x",n),d.setAttributeNS(null,"y",r),d.setAttributeNS(null,"externalResourcesRequired","true"),s.appendChild(d),d.appendChild(a),s},c=t.loadSerializedSVG=function(A){return new Promise(function(t,n){var r=new Image;r.onload=function(){return t(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(A))})}},function(A,t,n){"";Object.defineProperty(t,"__esModule",{value:!0}),t.breakWords=t.fromCodePoint=t.toCodePoints=void 0;var r=n(46);Object.defineProperty(t,"toCodePoints",{enumerable:!0,get:function(){return r.toCodePoints}}),Object.defineProperty(t,"fromCodePoint",{enumerable:!0,get:function(){return r.fromCodePoint}});var a=n(18),s=t.breakWords=function(A,t){for(var n=(0,r.LineBreaker)(A,{lineBreak:t.style.lineBreak,wordBreak:t.style.overflowWrap===a.OVERFLOW_WRAP.BREAK_WORD?"break-word":t.style.wordBreak}),s=[],d=void 0;!(d=n.next()).done;)s.push(d.value.slice());return s}},function(A,t,n){"";function r(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.FontMetrics=void 0;var a=function(){function A(A,t){for(var n=0,r;n<t.length;n++)r=t[n],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(A,r.key,r)}return function(t,n,r){return n&&A(t.prototype,n),r&&A(t,r),t}}(),s=n(3),d="Hidden Text",l=t.FontMetrics=function(){function A(t){r(this,A),this._data={},this._document=t}return a(A,[{key:"_parseMetrics",value:function(A){var t=this._document.createElement("div"),n=this._document.createElement("img"),r=this._document.createElement("span"),a=this._document.body;if(!a)throw new Error("No document found for font metrics");t.style.visibility="hidden",t.style.fontFamily=A.fontFamily,t.style.fontSize=A.fontSize,t.style.margin="0",t.style.padding="0",a.appendChild(t),n.src=s.SMALL_IMAGE,n.width=1,n.height=1,n.style.margin="0",n.style.padding="0",n.style.verticalAlign="baseline",r.style.fontFamily=A.fontFamily,r.style.fontSize=A.fontSize,r.style.margin="0",r.style.padding="0",r.appendChild(this._document.createTextNode(d)),t.appendChild(r),t.appendChild(n);var l=n.offsetTop-r.offsetTop+2;t.removeChild(r),t.appendChild(this._document.createTextNode(d)),t.style.lineHeight="normal",n.style.verticalAlign="super";var c=n.offsetTop-t.offsetTop+2;return a.removeChild(t),{baseline:l,middle:c}}},{key:"getMetrics",value:function(A){var t=A.fontFamily+" "+A.fontSize;return void 0===this._data[t]&&(this._data[t]=this._parseMetrics(A)),this._data[t]}}]),A}()},function(A,t,n){"";Object.defineProperty(t,"__esModule",{value:!0}),t.Proxy=void 0;var r=n(10),a=function(A){return A&&A.__esModule?A:{default:A}}(r),s=t.Proxy=function(A,t){if(!t.proxy)return Promise.reject("No proxy defined");var n=t.proxy;return new Promise(function(r,s){var d=a.default.SUPPORT_CORS_XHR&&a.default.SUPPORT_RESPONSE_TYPE?"blob":"text",l=a.default.SUPPORT_CORS_XHR?new XMLHttpRequest:new XDomainRequest;if(l.onload=function(){if(!(l instanceof XMLHttpRequest))r(l.responseText);else if(200!==l.status)s("Failed to proxy resource "+A.substring(0,256)+" with status code "+l.status);else if("text"===d)r(l.response);else{var t=new FileReader;t.addEventListener("load",function(){return r(t.result)},!1),t.addEventListener("error",function(A){return s(A)},!1),t.readAsDataURL(l.response)}},l.onerror=s,l.open("GET",n+"?url="+encodeURIComponent(A)+"&responseType="+d),"text"!=d&&l instanceof XMLHttpRequest&&(l.responseType=d),t.imageTimeout){var c=t.imageTimeout;l.timeout=c,l.ontimeout=function(){return s("Timed out ("+c+"ms) proxying "+A.substring(0,256))}}l.send()})}},function(A,t,n){"";function r(A){return A&&A.__esModule?A:{default:A}}var a=Object.assign||function(A){for(var t=1,n;t<arguments.length;t++)for(var r in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,r)&&(A[r]=n[r]);return A},s=n(15),d=r(s),l=n(16),c=r(l),B=n(28),g=function(A,t){var n=t||{},r=new c.default("boolean"!=typeof n.logging||n.logging);r.log("html2canvas 1.0.0-alpha.12"),"function"==typeof n.onrendered&&r.error("onrendered option is deprecated, html2canvas returns a Promise with the canvas as the value");var s=A.ownerDocument;if(!s)return Promise.reject("Provided element is not within a Document");var l=s.defaultView,g={async:!0,allowTaint:!1,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,scale:l.devicePixelRatio||1,target:new d.default(n.canvas),useCORS:!1,windowWidth:l.innerWidth,windowHeight:l.innerHeight,scrollX:l.pageXOffset,scrollY:l.pageYOffset},u=(0,B.renderElement)(A,a({},g,n),r);return u.catch(function(A){throw r.error(A),A})};g.CanvasRenderer=d.default,A.exports=g},function(t,n,r){"";function a(A){return A&&A.__esModule?A:{default:A}}Object.defineProperty(n,"__esModule",{value:!0}),n.renderElement=void 0;var s=function(){function A(A,t){var n=[],r=!0,a=!1,s=void 0;try{for(var d=A[Symbol.iterator](),l;!(r=(l=d.next()).done)&&(n.push(l.value),!(t&&n.length===t));r=!0);}catch(A){a=!0,s=A}finally{try{!r&&d["return"]&&d["return"]()}finally{if(a)throw s}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return A(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=r(16),l=a(d),c=r(29),B=r(51),g=a(B),u=r(23),m=a(u),p=r(10),w=a(p),h=r(2),C=r(54),Q=r(25),U=r(0),E=a(U),F=n.renderElement=function t(n,r,a){var d=n.ownerDocument,l=new h.Bounds(r.scrollX,r.scrollY,r.windowWidth,r.windowHeight),B=d.documentElement?new E.default(getComputedStyle(d.documentElement).backgroundColor):U.TRANSPARENT,u=d.body?new E.default(getComputedStyle(d.body).backgroundColor):U.TRANSPARENT,p=n===d.documentElement?B.isTransparent()?u.isTransparent()?r.backgroundColor?new E.default(r.backgroundColor):null:u:B:r.backgroundColor?new E.default(r.backgroundColor):null;return(r.foreignObjectRendering?w.default.SUPPORT_FOREIGNOBJECT_DRAWING:Promise.resolve(!1)).then(function(B){return B?function(t){return a.log("Document cloned, using foreignObject rendering"),t.inlineFonts(d).then(function(){return t.resourceLoader.ready()}).then(function(){var s=new m.default(t.documentElement),l=d.defaultView,c=l.pageXOffset,B=l.pageYOffset,g="HTML"===n.tagName||"BODY"===n.tagName,u=g?(0,h.parseDocumentSize)(d):(0,h.parseBounds)(n,c,B),w=u.width,C=u.height,Q=u.left,U=u.top;return s.render({backgroundColor:p,logger:a,scale:r.scale,x:"number"==typeof r.x?r.x:Q,y:"number"==typeof r.y?r.y:U,width:"number"==typeof r.width?r.width:A(w),height:"number"==typeof r.height?r.height:A(C),windowWidth:r.windowWidth,windowHeight:r.windowHeight,scrollX:r.scrollX,scrollY:r.scrollY})})}(new C.DocumentCloner(n,r,a,!0,t)):(0,C.cloneWindow)(d,l,n,r,a,t).then(function(t){var n=s(t,3),l=n[0],B=n[1],u=n[2];a.log("Document cloned, using computed rendering");var m=(0,c.NodeParser)(B,u,a),w=B.ownerDocument;return p===m.container.style.background.backgroundColor&&(m.container.style.background.backgroundColor=U.TRANSPARENT),u.ready().then(function(t){var n=new Q.FontMetrics(w);a.log("Starting renderer");var s=w.defaultView,c=s.pageXOffset,u=s.pageYOffset,C="HTML"===B.tagName||"BODY"===B.tagName,U=C?(0,h.parseDocumentSize)(d):(0,h.parseBounds)(B,c,u),E=U.width,F=U.height,b=U.left,H=U.top,S={backgroundColor:p,fontMetrics:n,imageStore:t,logger:a,scale:r.scale,x:"number"==typeof r.x?r.x:b,y:"number"==typeof r.y?r.y:H,width:"number"==typeof r.width?r.width:A(E),height:"number"==typeof r.height?r.height:A(F)};if(Array.isArray(r.target))return Promise.all(r.target.map(function(A){var t=new g.default(A,S);return t.render(m)}));var T=new g.default(r.target,S),I=T.render(m);return!0===r.removeContainer&&(l.parentNode?l.parentNode.removeChild(l):a.log("Cannot detach cloned iframe as it is not in the DOM anymore")),I})})})}},function(A,t,n){"";function r(A){return A&&A.__esModule?A:{default:A}}Object.defineProperty(t,"__esModule",{value:!0}),t.NodeParser=void 0;var a=n(30),s=r(a),d=n(6),l=r(d),c=n(9),B=r(c),g=n(21),u=n(14),m=n(8),p=t.NodeParser=function(A,t,n){n.log("Starting node parsing");var r=0,a=new l.default(A,null,t,r++),d=new s.default(a,null,!0);return h(A,a,d,t,r),n.log("Finished parsing node tree"),d},w=["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"],h=function A(t,n,r,a,d){if(5e4<d)throw new Error("Recursion error while parsing node tree");for(var c=t.firstChild,p;c;c=p){p=c.nextSibling;var h=c.ownerDocument.defaultView;if(c instanceof h.Text||c instanceof Text||h.parent&&c instanceof h.parent.Text)0<c.data.trim().length&&n.childNodes.push(B.default.fromTextNode(c,n));else if(c instanceof h.HTMLElement||c instanceof HTMLElement||h.parent&&c instanceof h.parent.HTMLElement){if(-1===w.indexOf(c.nodeName)){var U=new l.default(c,n,a,d++);if(U.isVisible()){"INPUT"===c.tagName?(0,g.inlineInputElement)(c,U):"TEXTAREA"===c.tagName?(0,g.inlineTextAreaElement)(c,U):"SELECT"===c.tagName?(0,g.inlineSelectElement)(c,U):U.style.listStyle&&U.style.listStyle.listStyleType!==m.LIST_STYLE_TYPE.NONE&&(0,u.inlineListItemElement)(c,U,a);var E="TEXTAREA"!==c.tagName,F=C(U,c);if(F||Q(U)){var b=F||U.isPositioned()?r.getRealParentStackingContext():r,H=new s.default(U,b,F);b.contexts.push(H),E&&A(c,U,H,a,d)}else r.children.push(U),E&&A(c,U,r,a,d)}}}else if(c instanceof h.SVGSVGElement||c instanceof SVGSVGElement||h.parent&&c instanceof h.parent.SVGSVGElement){var S=new l.default(c,n,a,d++),T=C(S,c);if(T||Q(S)){var I=T||S.isPositioned()?r.getRealParentStackingContext():r,N=new s.default(S,I,T);I.contexts.push(N)}else r.children.push(S)}}},C=function(A,t){return A.isRootElement()||A.isPositionedWithZIndex()||1>A.style.opacity||A.isTransformed()||U(A,t)},Q=function(A){return A.isPositioned()||A.isFloating()},U=function(A,t){return"BODY"===t.nodeName&&A.parent instanceof l.default&&A.parent.style.background.backgroundColor.isTransparent()}},function(A,t,n){"";function r(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function A(A,t){for(var n=0,r;n<t.length;n++)r=t[n],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(A,r.key,r)}return function(t,n,r){return n&&A(t.prototype,n),r&&A(t,r),t}}(),s=n(6),d=function(A){return A&&A.__esModule?A:{default:A}}(s),l=n(19),c=function(){function A(t,n,a){r(this,A),this.container=t,this.parent=n,this.contexts=[],this.children=[],this.treatAsRealStackingContext=a}return a(A,[{key:"getOpacity",value:function(){return this.parent?this.container.style.opacity*this.parent.getOpacity():this.container.style.opacity}},{key:"getRealParentStackingContext",value:function(){return!this.parent||this.treatAsRealStackingContext?this:this.parent.getRealParentStackingContext()}}]),A}();t.default=c},function(A,t){"";function n(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});t.default=function A(t,r){n(this,A),this.width=t,this.height=r}},function(A,t,n){"";function r(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function A(A,t){for(var n=0,r;n<t.length;n++)r=t[n],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(A,r.key,r)}return function(t,n,r){return n&&A(t.prototype,n),r&&A(t,r),t}}(),s=n(5),d=n(7),l=function(A){return A&&A.__esModule?A:{default:A}}(d),c=function(A,n,r){return new l.default(A.x+(n.x-A.x)*r,A.y+(n.y-A.y)*r)},B=function(){function A(t,n,a,d){r(this,A),this.type=s.PATH.BEZIER_CURVE,this.start=t,this.startControl=n,this.endControl=a,this.end=d}return a(A,[{key:"subdivide",value:function(n,t){var r=c(this.start,this.startControl,n),a=c(this.startControl,this.endControl,n),s=c(this.endControl,this.end,n),d=c(r,a,n),l=c(a,s,n),B=c(d,l,n);return t?new A(this.start,r,d,B):new A(B,l,s,this.end)}},{key:"reverse",value:function(){return new A(this.end,this.endControl,this.startControl,this.start)}}]),A}();t.default=B},function(A,t,n){"";Object.defineProperty(t,"__esModule",{value:!0}),t.parseBorderRadius=void 0;var r=function(){function A(A,t){var n=[],r=!0,a=!1,s=void 0;try{for(var d=A[Symbol.iterator](),l;!(r=(l=d.next()).done)&&(n.push(l.value),!(t&&n.length===t));r=!0);}catch(A){a=!0,s=A}finally{try{!r&&d["return"]&&d["return"]()}finally{if(a)throw s}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return A(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=n(1),s=function(A){return A&&A.__esModule?A:{default:A}}(a),d=["top-left","top-right","bottom-right","bottom-left"],l=t.parseBorderRadius=function(A){return d.map(function(t){var n=A.getPropertyValue("border-"+t+"-radius"),a=n.split(" ").map(s.default.create),d=r(a,2),l=d[0],c=d[1];return"undefined"==typeof c?[l,l]:[l,c]})}},function(A,t){"";Object.defineProperty(t,"__esModule",{value:!0});var n=t.DISPLAY={NONE:1,BLOCK:2,INLINE:4,RUN_IN:8,FLOW:16,FLOW_ROOT:32,TABLE:64,FLEX:128,GRID:256,RUBY:512,SUBGRID:1024,LIST_ITEM:2048,TABLE_ROW_GROUP:4096,TABLE_HEADER_GROUP:8192,TABLE_FOOTER_GROUP:16384,TABLE_ROW:32768,TABLE_CELL:65536,TABLE_COLUMN_GROUP:131072,TABLE_COLUMN:262144,TABLE_CAPTION:524288,RUBY_BASE:1048576,RUBY_TEXT:2097152,RUBY_BASE_CONTAINER:4194304,RUBY_TEXT_CONTAINER:8388608,CONTENTS:16777216,INLINE_BLOCK:33554432,INLINE_LIST_ITEM:67108864,INLINE_TABLE:134217728,INLINE_FLEX:268435456,INLINE_GRID:536870912},r=function(A){return"block"===A?n.BLOCK:"inline"===A?n.INLINE:"run-in"===A?n.RUN_IN:"flow"===A?n.FLOW:"flow-root"===A?n.FLOW_ROOT:"table"===A?n.TABLE:"flex"===A?n.FLEX:"grid"===A?n.GRID:"ruby"===A?n.RUBY:"subgrid"===A?n.SUBGRID:"list-item"===A?n.LIST_ITEM:"table-row-group"===A?n.TABLE_ROW_GROUP:"table-header-group"===A?n.TABLE_HEADER_GROUP:"table-footer-group"===A?n.TABLE_FOOTER_GROUP:"table-row"===A?n.TABLE_ROW:"table-cell"===A?n.TABLE_CELL:"table-column-group"===A?n.TABLE_COLUMN_GROUP:"table-column"===A?n.TABLE_COLUMN:"table-caption"===A?n.TABLE_CAPTION:"ruby-base"===A?n.RUBY_BASE:"ruby-text"===A?n.RUBY_TEXT:"ruby-base-container"===A?n.RUBY_BASE_CONTAINER:"ruby-text-container"===A?n.RUBY_TEXT_CONTAINER:"contents"===A?n.CONTENTS:"inline-block"===A?n.INLINE_BLOCK:"inline-list-item"===A?n.INLINE_LIST_ITEM:"inline-table"===A?n.INLINE_TABLE:"inline-flex"===A?n.INLINE_FLEX:"inline-grid"===A?n.INLINE_GRID:n.NONE},a=function(A,t){return A|r(t)},s=t.parseDisplay=function(A){return A.split(" ").reduce(a,0)}},function(A,t){"";Object.defineProperty(t,"__esModule",{value:!0});var n=t.FLOAT={NONE:0,LEFT:1,RIGHT:2,INLINE_START:3,INLINE_END:4},r=t.parseCSSFloat=function(A){return"left"===A?n.LEFT:"right"===A?n.RIGHT:"inline-start"===A?n.INLINE_START:"inline-end"===A?n.INLINE_END:n.NONE}},function(A,t){"";Object.defineProperty(t,"__esModule",{value:!0});var n=function(A){switch(A){case"normal":return 400;case"bold":return 700;}var t=parseInt(A,10);return isNaN(t)?400:t},r=t.parseFont=function(A){var t=A.fontFamily,r=A.fontSize,a=A.fontStyle,s=A.fontVariant,d=n(A.fontWeight);return{fontFamily:t,fontSize:r,fontStyle:a,fontVariant:s,fontWeight:d}}},function(A,t){"";Object.defineProperty(t,"__esModule",{value:!0});t.parseLetterSpacing=function(A){if("normal"===A)return 0;var t=parseFloat(A);return isNaN(t)?0:t}},function(A,t){"";Object.defineProperty(t,"__esModule",{value:!0});var n=t.LINE_BREAK={NORMAL:"normal",STRICT:"strict"},r=t.parseLineBreak=function(A){switch(A){case"strict":return n.STRICT;case"normal":default:return n.NORMAL;}}},function(A,t,n){"";Object.defineProperty(t,"__esModule",{value:!0}),t.parseMargin=void 0;var r=n(1),a=function(A){return A&&A.__esModule?A:{default:A}}(r),s=["top","right","bottom","left"],d=t.parseMargin=function(A){return s.map(function(t){return new a.default(A.getPropertyValue("margin-"+t))})}},function(A,t){"";Object.defineProperty(t,"__esModule",{value:!0});var n=t.OVERFLOW={VISIBLE:0,HIDDEN:1,SCROLL:2,AUTO:3},r=t.parseOverflow=function(A){switch(A){case"hidden":return n.HIDDEN;case"scroll":return n.SCROLL;case"auto":return n.AUTO;case"visible":default:return n.VISIBLE;}}},function(A,t,n){"";Object.defineProperty(t,"__esModule",{value:!0}),t.parseTextShadow=void 0;var r=n(0),a=function(A){return A&&A.__esModule?A:{default:A}}(r),s=t.parseTextShadow=function(A){if("none"===A||"string"!=typeof A)return null;for(var t="",n=!1,r=[],s=[],d=0,l=null,B=function(){t.length&&(n?r.push(parseFloat(t)):l=new a.default(t)),n=!1,t=""},g=function(){r.length&&null!==l&&s.push({color:l,offsetX:r[0]||0,offsetY:r[1]||0,blur:r[2]||0}),r.splice(0,r.length),l=null},u=0,m;u<A.length;u++)m=A[u],"("===m?(t+=m,d++):")"===m?(t+=m,d--):","===m?0===d?(B(),g()):t+=m:" "===m?0===d?B():t+=m:(0===t.length&&/^([+-]|\d|\.)$/i.test(m)&&(n=!0),t+=m);return B(),g(),0===s.length?null:s}},function(A,t,n){"";Object.defineProperty(t,"__esModule",{value:!0}),t.parseTransform=void 0;var r=n(1),a=function(A){return A&&A.__esModule?A:{default:A}}(r),s=function(A){return parseFloat(A.trim())},d=t.parseTransform=function(A){var t=c(A.transform||A.webkitTransform||A.mozTransform||A.msTransform||A.oTransform);return null===t?null:{transform:t,transformOrigin:l(A.transformOrigin||A.webkitTransformOrigin||A.mozTransformOrigin||A.msTransformOrigin||A.oTransformOrigin)}},l=function(A){if("string"!=typeof A){var t=new a.default("0");return[t,t]}var n=A.split(" ").map(a.default.create);return[n[0],n[1]]},c=function(A){if("none"===A||"string"!=typeof A)return null;var t=A.match(/(matrix|matrix3d)\((.+)\)/);if(t){if("matrix"===t[1]){var n=t[2].split(",").map(s);return[n[0],n[1],n[2],n[3],n[4],n[5]]}var r=t[2].split(",").map(s);return[r[0],r[1],r[4],r[5],r[12],r[13]]}return null}},function(A,t){"";Object.defineProperty(t,"__esModule",{value:!0});var n=t.VISIBILITY={VISIBLE:0,HIDDEN:1,COLLAPSE:2},r=t.parseVisibility=function(A){switch(A){case"hidden":return n.HIDDEN;case"collapse":return n.COLLAPSE;case"visible":default:return n.VISIBLE;}}},function(A,t){"";Object.defineProperty(t,"__esModule",{value:!0});var n=t.WORD_BREAK={NORMAL:"normal",BREAK_ALL:"break-all",KEEP_ALL:"keep-all"},r=t.parseWordBreak=function(A){switch(A){case"break-all":return n.BREAK_ALL;case"keep-all":return n.KEEP_ALL;case"normal":default:return n.NORMAL;}}},function(A,t){"";Object.defineProperty(t,"__esModule",{value:!0});t.parseZIndex=function(A){var t="auto"===A;return{auto:t,order:t?0:parseInt(A,10)}}},function(A,t,n){"";Object.defineProperty(t,"__esModule",{value:!0});var r=n(13);Object.defineProperty(t,"toCodePoints",{enumerable:!0,get:function(){return r.toCodePoints}}),Object.defineProperty(t,"fromCodePoint",{enumerable:!0,get:function(){return r.fromCodePoint}});var a=n(47);Object.defineProperty(t,"LineBreaker",{enumerable:!0,get:function(){return a.LineBreaker}})},function(A,t,n){"";function r(A){if(Array.isArray(A)){for(var t=0,n=Array(A.length);t<A.length;t++)n[t]=A[t];return n}return Array.from(A)}function a(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.LineBreaker=t.inlineBreakOpportunities=t.lineBreakAtIndex=t.codePointsToCharacterClasses=t.UnicodeTrie=t.BREAK_ALLOWED=t.BREAK_NOT_ALLOWED=t.BREAK_MANDATORY=t.classes=t.LETTER_NUMBER_MODIFIER=void 0;var s=function(){function A(A,t){for(var n=0,r;n<t.length;n++)r=t[n],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(A,r.key,r)}return function(t,n,r){return n&&A(t.prototype,n),r&&A(t,r),t}}(),d=function(){function A(A,t){var n=[],r=!0,a=!1,s=void 0;try{for(var d=A[Symbol.iterator](),l;!(r=(l=d.next()).done)&&(n.push(l.value),!(t&&n.length===t));r=!0);}catch(A){a=!0,s=A}finally{try{!r&&d["return"]&&d["return"]()}finally{if(a)throw s}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return A(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=n(48),c=n(49),B=function(A){return A&&A.__esModule?A:{default:A}}(c),g=n(13),u=t.LETTER_NUMBER_MODIFIER=50,m=1,p=2,w=3,h=4,C=5,Q=7,U=8,E=9,F=10,b=11,H=12,S=13,T=14,I=15,N=16,R=17,L=18,M=19,D=20,O=21,k=22,K=23,_=24,P=25,V=26,z=27,G=28,X=29,J=30,Y=31,W=32,q=33,Z=34,ee=35,Ae=36,te=37,ne=38,re=39,ae=40,ie=41,oe=42,se=43,de=t.classes={BK:m,CR:p,LF:w,CM:h,NL:C,SG:6,WJ:Q,ZW:U,GL:E,SP:F,ZWJ:b,B2:H,BA:S,BB:T,HY:I,CB:N,CL:R,CP:L,EX:M,IN:D,NS:O,OP:k,QU:K,IS:_,NU:P,PO:V,PR:z,SY:G,AI:X,AL:J,CJ:Y,EB:W,EM:q,H2:Z,H3:ee,HL:Ae,ID:te,JL:ne,JV:re,JT:ae,RI:ie,SA:oe,XX:se},le=t.BREAK_MANDATORY="!",ce=t.BREAK_NOT_ALLOWED="\xD7",Be=t.BREAK_ALLOWED="\xF7",ge=t.UnicodeTrie=(0,l.createTrieFromBase64)(B.default),ue=[J,Ae],me=[m,p,w,C],pe=[F,U],we=[z,V],he=me.concat(pe),fe=[ne,re,ae,Z,ee],Ce=[I,S],Qe=t.codePointsToCharacterClasses=function(A){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"strict",n=[],r=[],a=[];return A.forEach(function(A,s){var d=ge.get(A);if(d>u?(a.push(!0),d-=u):a.push(!1),-1!==["normal","auto","loose"].indexOf(t)&&-1!==[8208,8211,12316,12448].indexOf(A))return r.push(s),n.push(N);if(d===h||d===b){if(0===s)return r.push(s),n.push(J);var l=n[s-1];return-1===he.indexOf(l)?(r.push(r[s-1]),n.push(l)):(r.push(s),n.push(J))}return r.push(s),d===Y?n.push("strict"===t?O:te):d===oe?n.push(J):d===X?n.push(J):d===se?131072<=A&&196605>=A||196608<=A&&262141>=A?n.push(te):n.push(J):void n.push(d)}),[r,n,a]},Ue=function(A,t,r,a){var s=a[r];if(Array.isArray(A)?-1!==A.indexOf(s):A===s)for(var d=r;d<=a.length;){d++;var l=a[d];if(l===t)return!0;if(l!==F)break}if(s===F)for(var c=r;0<c;){c--;var B=a[c];if(Array.isArray(A)?-1!==A.indexOf(B):A===B)for(var g=r;g<=a.length;){g++;var u=a[g];if(u===t)return!0;if(u!==F)break}if(B!==F)break}return!1},Ee=function(A,t){for(var n=A;0<=n;){var r=t[n];if(r===F)n--;else return r}return 0},Fe=function(A,t,n,r,a){if(0===n[r])return ce;var s=r-1;if(Array.isArray(a)&&!0===a[s])return ce;var d=s-1,l=s+1,c=t[s],B=0<=d?t[d]:0,g=t[l];if(c===p&&g===w)return ce;if(-1!==me.indexOf(c))return le;if(-1!==me.indexOf(g))return ce;if(-1!==pe.indexOf(g))return ce;if(Ee(s,t)===U)return Be;if(ge.get(A[s])===b&&(g===te||g===W||g===q))return ce;if(c===Q||g===Q)return ce;if(c===E)return ce;if(-1===[F,S,I].indexOf(c)&&g===E)return ce;if(-1!==[R,L,M,_,G].indexOf(g))return ce;if(Ee(s,t)===k)return ce;if(Ue(K,k,s,t))return ce;if(Ue([R,L],O,s,t))return ce;if(Ue(H,H,s,t))return ce;if(c===F)return Be;if(c===K||g===K)return ce;if(g===N||c===N)return Be;if(-1!==[S,I,O].indexOf(g)||c===T)return ce;if(B===Ae&&-1!==Ce.indexOf(c))return ce;if(c===G&&g===Ae)return ce;if(g===D&&-1!==ue.concat(D,M,P,te,W,q).indexOf(c))return ce;if(-1!==ue.indexOf(g)&&c===P||-1!==ue.indexOf(c)&&g===P)return ce;if(c===z&&-1!==[te,W,q].indexOf(g)||-1!==[te,W,q].indexOf(c)&&g===V)return ce;if(-1!==ue.indexOf(c)&&-1!==we.indexOf(g)||-1!==we.indexOf(c)&&-1!==ue.indexOf(g))return ce;if(-1!==[z,V].indexOf(c)&&(g===P||-1!==[k,I].indexOf(g)&&t[l+1]===P)||-1!==[k,I].indexOf(c)&&g===P||c===P&&-1!==[P,G,_].indexOf(g))return ce;if(-1!==[P,G,_,R,L].indexOf(g))for(var u=s,m;0<=u;){if(m=t[u],m===P)return ce;if(-1!==[G,_].indexOf(m))u--;else break}if(-1!==[z,V].indexOf(g))for(var h=-1===[R,L].indexOf(c)?s:d,C;0<=h;){if(C=t[h],C===P)return ce;if(-1!==[G,_].indexOf(C))h--;else break}if(ne===c&&-1!==[ne,re,Z,ee].indexOf(g)||-1!==[re,Z].indexOf(c)&&-1!==[re,ae].indexOf(g)||-1!==[ae,ee].indexOf(c)&&g===ae)return ce;if(-1!==fe.indexOf(c)&&-1!==[D,V].indexOf(g)||-1!==fe.indexOf(g)&&c===z)return ce;if(-1!==ue.indexOf(c)&&-1!==ue.indexOf(g))return ce;if(c===_&&-1!==ue.indexOf(g))return ce;if(-1!==ue.concat(P).indexOf(c)&&g===k||-1!==ue.concat(P).indexOf(g)&&c===L)return ce;if(c===ie&&g===ie){for(var X=n[s],J=1;0<X&&(X--,t[X]===ie);)J++;if(0!=J%2)return ce}return c===W&&g===q?ce:Be},be=t.lineBreakAtIndex=function(A,t){if(0===t)return ce;if(t>=A.length)return le;var n=Qe(A),r=d(n,2),a=r[0],s=r[1];return Fe(A,s,a,t)},ve=function(A,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var n=Qe(A,t.lineBreak),r=d(n,3),a=r[0],s=r[1],l=r[2];("break-all"===t.wordBreak||"break-word"===t.wordBreak)&&(s=s.map(function(A){return-1===[P,J,oe].indexOf(A)?A:te}));var c="keep-all"===t.wordBreak?l.map(function(t,n){return t&&19968<=A[n]&&40959>=A[n]}):null;return[a,s,c]},ye=t.inlineBreakOpportunities=function(A,t){var n=(0,g.toCodePoints)(A),r=ce,a=ve(n,t),s=d(a,3),l=s[0],c=s[1],B=s[2];return n.forEach(function(A,t){r+=(0,g.fromCodePoint)(A)+(t>=n.length-1?le:Fe(n,c,l,t+1,B))}),r},He=function(){function A(t,n,r,s){a(this,A),this._codePoints=t,this.required=n===le,this.start=r,this.end=s}return s(A,[{key:"slice",value:function(){return g.fromCodePoint.apply(void 0,r(this._codePoints.slice(this.start,this.end)))}}]),A}(),Se=t.LineBreaker=function(A,t){var n=(0,g.toCodePoints)(A),r=ve(n,t),a=d(r,3),s=a[0],l=a[1],c=a[2],B=n.length,u=0,m=0;return{next:function(){if(m>=B)return{done:!0};for(var A=ce;m<B&&(A=Fe(n,l,s,++m,c))===ce;);if(A!==ce||m===B){var t=new He(n,A,u,m);return u=m,{value:t,done:!1}}return{done:!0}}}}},function(t,n,r){"";function a(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.Trie=n.createTrieFromBase64=n.UTRIE2_INDEX_2_MASK=n.UTRIE2_INDEX_2_BLOCK_LENGTH=n.UTRIE2_OMITTED_BMP_INDEX_1_LENGTH=n.UTRIE2_INDEX_1_OFFSET=n.UTRIE2_UTF8_2B_INDEX_2_LENGTH=n.UTRIE2_UTF8_2B_INDEX_2_OFFSET=n.UTRIE2_INDEX_2_BMP_LENGTH=n.UTRIE2_LSCP_INDEX_2_LENGTH=n.UTRIE2_DATA_MASK=n.UTRIE2_DATA_BLOCK_LENGTH=n.UTRIE2_LSCP_INDEX_2_OFFSET=n.UTRIE2_SHIFT_1_2=n.UTRIE2_INDEX_SHIFT=n.UTRIE2_SHIFT_1=n.UTRIE2_SHIFT_2=void 0;var s=function(){function A(A,t){for(var n=0,r;n<t.length;n++)r=t[n],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(A,r.key,r)}return function(t,n,r){return n&&A(t.prototype,n),r&&A(t,r),t}}(),d=r(13),l=n.UTRIE2_SHIFT_2=5,c=n.UTRIE2_SHIFT_1=11,B=n.UTRIE2_INDEX_SHIFT=2,g=n.UTRIE2_SHIFT_1_2=c-l,u=n.UTRIE2_LSCP_INDEX_2_OFFSET=65536>>l,m=n.UTRIE2_DATA_BLOCK_LENGTH=1<<l,p=n.UTRIE2_DATA_MASK=m-1,w=n.UTRIE2_LSCP_INDEX_2_LENGTH=1024>>l,h=n.UTRIE2_INDEX_2_BMP_LENGTH=u+w,C=n.UTRIE2_UTF8_2B_INDEX_2_OFFSET=h,Q=n.UTRIE2_UTF8_2B_INDEX_2_LENGTH=32,U=n.UTRIE2_INDEX_1_OFFSET=C+Q,E=n.UTRIE2_OMITTED_BMP_INDEX_1_LENGTH=65536>>c,F=n.UTRIE2_INDEX_2_BLOCK_LENGTH=1<<g,b=n.UTRIE2_INDEX_2_MASK=F-1,H=n.createTrieFromBase64=function(t){var n=(0,d.decode)(t),r=Array.isArray(n)?(0,d.polyUint32Array)(n):new Uint32Array(n),a=Array.isArray(n)?(0,d.polyUint16Array)(n):new Uint16Array(n),s=24,l=a.slice(s/2,r[4]/2),c=2===r[5]?a.slice((s+r[4])/2):r.slice(A((s+r[4])/4));return new S(r[0],r[1],r[2],r[3],l,c)},S=n.Trie=function(){function A(t,n,r,s,d,l){a(this,A),this.initialValue=t,this.errorValue=n,this.highStart=r,this.highValueIndex=s,this.index=d,this.data=l}return s(A,[{key:"get",value:function(A){var t;if(0<=A){if(55296>A||56319<A&&65535>=A)return t=this.index[A>>l],t=(t<<B)+(A&p),this.data[t];if(65535>=A)return t=this.index[u+(A-55296>>l)],t=(t<<B)+(A&p),this.data[t];if(A<this.highStart)return t=U-E+(A>>c),t=this.index[t],t+=A>>l&b,t=this.index[t],t=(t<<B)+(A&p),this.data[t];if(1114111>=A)return this.data[this.highValueIndex]}return this.errorValue}}]),A}()},function(A){"";A.exports="KwAAAAAAAAAACA4AIDoAAPAfAAACAAAAAAAIABAAGABAAEgAUABYAF4AZgBeAGYAYABoAHAAeABeAGYAfACEAIAAiACQAJgAoACoAK0AtQC9AMUAXgBmAF4AZgBeAGYAzQDVAF4AZgDRANkA3gDmAOwA9AD8AAQBDAEUARoBIgGAAIgAJwEvATcBPwFFAU0BTAFUAVwBZAFsAXMBewGDATAAiwGTAZsBogGkAawBtAG8AcIBygHSAdoB4AHoAfAB+AH+AQYCDgIWAv4BHgImAi4CNgI+AkUCTQJTAlsCYwJrAnECeQKBAk0CiQKRApkCoQKoArACuALAAsQCzAIwANQC3ALkAjAA7AL0AvwCAQMJAxADGAMwACADJgMuAzYDPgOAAEYDSgNSA1IDUgNaA1oDYANiA2IDgACAAGoDgAByA3YDfgOAAIQDgACKA5IDmgOAAIAAogOqA4AAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAK8DtwOAAIAAvwPHA88D1wPfAyAD5wPsA/QD/AOAAIAABAQMBBIEgAAWBB4EJgQuBDMEIAM7BEEEXgBJBCADUQRZBGEEaQQwADAAcQQ+AXkEgQSJBJEEgACYBIAAoASoBK8EtwQwAL8ExQSAAIAAgACAAIAAgACgAM0EXgBeAF4AXgBeAF4AXgBeANUEXgDZBOEEXgDpBPEE+QQBBQkFEQUZBSEFKQUxBTUFPQVFBUwFVAVcBV4AYwVeAGsFcwV7BYMFiwWSBV4AmgWgBacFXgBeAF4AXgBeAKsFXgCyBbEFugW7BcIFwgXIBcIFwgXQBdQF3AXkBesF8wX7BQMGCwYTBhsGIwYrBjMGOwZeAD8GRwZNBl4AVAZbBl4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAGMGXgBqBnEGXgBeAF4AXgBeAF4AXgBeAF4AXgB5BoAG4wSGBo4GkwaAAIADHgR5AF4AXgBeAJsGgABGA4AAowarBrMGswagALsGwwbLBjAA0wbaBtoG3QbaBtoG2gbaBtoG2gblBusG8wb7BgMHCwcTBxsHCwcjBysHMAc1BzUHOgdCB9oGSgdSB1oHYAfaBloHaAfaBlIH2gbaBtoG2gbaBtoG2gbaBjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHbQdeAF4ANQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQd1B30HNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B4MH2gaKB68EgACAAIAAgACAAIAAgACAAI8HlwdeAJ8HpweAAIAArwe3B14AXgC/B8UHygcwANAH2AfgB4AA6AfwBz4B+AcACFwBCAgPCBcIogEYAR8IJwiAAC8INwg/CCADRwhPCFcIXwhnCEoDGgSAAIAAgABvCHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIhAiLCI4IMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAANQc1BzUHNQc1BzUHNQc1BzUHNQc1B54INQc1B6II2gaqCLIIugiAAIAAvgjGCIAAgACAAIAAgACAAIAAgACAAIAAywiHAYAA0wiAANkI3QjlCO0I9Aj8CIAAgACAAAIJCgkSCRoJIgknCTYHLwk3CZYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiAAIAAAAFAAXgBeAGAAcABeAHwAQACQAKAArQC9AJ4AXgBeAE0A3gBRAN4A7AD8AMwBGgEAAKcBNwEFAUwBXAF4QkhCmEKnArcCgAHHAsABz4LAAcABwAHAAd+C6ABoAG+C/4LAAcABwAHAAc+DF4MAAcAB54M3gweDV4Nng3eDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEeDqABVg6WDqABoQ6gAaABoAHXDvcONw/3DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DncPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB7cPPwlGCU4JMACAAIAAgABWCV4JYQmAAGkJcAl4CXwJgAkwADAAMAAwAIgJgACLCZMJgACZCZ8JowmrCYAAswkwAF4AXgB8AIAAuwkABMMJyQmAAM4JgADVCTAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAqwYWBNkIMAAwADAAMADdCeAJ6AnuCR4E9gkwAP4JBQoNCjAAMACAABUK0wiAAB0KJAosCjQKgAAwADwKQwqAAEsKvQmdCVMKWwowADAAgACAALcEMACAAGMKgABrCjAAMAAwADAAMAAwADAAMAAwADAAMAAeBDAAMAAwADAAMAAwADAAMAAwADAAMAAwAIkEPQFzCnoKiQSCCooKkAqJBJgKoAqkCokEGAGsCrQKvArBCjAAMADJCtEKFQHZCuEK/gHpCvEKMAAwADAAMACAAIwE+QowAIAAPwEBCzAAMAAwADAAMACAAAkLEQswAIAAPwEZCyELgAAOCCkLMAAxCzkLMAAwADAAMAAwADAAXgBeAEELMAAwADAAMAAwADAAMAAwAEkLTQtVC4AAXAtkC4AAiQkwADAAMAAwADAAMAAwADAAbAtxC3kLgAuFC4sLMAAwAJMLlwufCzAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAApwswADAAMACAAIAAgACvC4AAgACAAIAAgACAALcLMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAvwuAAMcLgACAAIAAgACAAIAAyguAAIAAgACAAIAA0QswADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAANkLgACAAIAA4AswADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACJCR4E6AswADAAhwHwC4AA+AsADAgMEAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMACAAIAAGAwdDCUMMAAwAC0MNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQw1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHPQwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADUHNQc1BzUHNQc1BzUHNQc2BzAAMAA5DDUHNQc1BzUHNQc1BzUHNQc1BzUHNQdFDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAATQxSDFoMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAF4AXgBeAF4AXgBeAF4AYgxeAGoMXgBxDHkMfwxeAIUMXgBeAI0MMAAwADAAMAAwAF4AXgCVDJ0MMAAwADAAMABeAF4ApQxeAKsMswy7DF4Awgy9DMoMXgBeAF4AXgBeAF4AXgBeAF4AXgDRDNkMeQBqCeAM3Ax8AOYM7Az0DPgMXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgCgAAANoAAHDQ4NFg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAeDSYNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAC4NMABeAF4ANg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAD4NRg1ODVYNXg1mDTAAbQ0wADAAMAAwADAAMAAwADAA2gbaBtoG2gbaBtoG2gbaBnUNeg3CBYANwgWFDdoGjA3aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gaUDZwNpA2oDdoG2gawDbcNvw3HDdoG2gbPDdYN3A3fDeYN2gbsDfMN2gbaBvoN/g3aBgYODg7aBl4AXgBeABYOXgBeACUG2gYeDl4AJA5eACwO2w3aBtoGMQ45DtoG2gbaBtoGQQ7aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B1EO2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQdZDjUHNQc1BzUHNQc1B2EONQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHaA41BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B3AO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B2EO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBkkOeA6gAKAAoAAwADAAMAAwAKAAoACgAKAAoACgAKAAgA4wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAD//wQABAAEAAQABAAEAAQABAAEAA0AAwABAAEAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAKABMAFwAeABsAGgAeABcAFgASAB4AGwAYAA8AGAAcAEsASwBLAEsASwBLAEsASwBLAEsAGAAYAB4AHgAeABMAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAFgAbABIAHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYADQARAB4ABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkAFgAaABsAGwAbAB4AHQAdAB4ATwAXAB4ADQAeAB4AGgAbAE8ATwAOAFAAHQAdAB0ATwBPABcATwBPAE8AFgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwArAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAAQABAANAA0ASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAUAArACsAKwArACsAKwArACsABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAGgAaAFAAUABQAFAAUABMAB4AGwBQAB4AKwArACsABAAEAAQAKwBQAFAAUABQAFAAUAArACsAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUAArAFAAUAArACsABAArAAQABAAEAAQABAArACsAKwArAAQABAArACsABAAEAAQAKwArACsABAArACsAKwArACsAKwArAFAAUABQAFAAKwBQACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwAEAAQAUABQAFAABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQAKwArAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeABsAKwArACsAKwArACsAKwBQAAQABAAEAAQABAAEACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAKwArACsAKwArACsAKwArAAQABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwAEAFAAKwBQAFAAUABQAFAAUAArACsAKwBQAFAAUAArAFAAUABQAFAAKwArACsAUABQACsAUAArAFAAUAArACsAKwBQAFAAKwArACsAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQAKwArACsABAAEAAQAKwAEAAQABAAEACsAKwBQACsAKwArACsAKwArAAQAKwArACsAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAB4AHgAeAB4AHgAeABsAHgArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArAFAAUABQACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAB4AUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArACsAKwArACsAKwArAFAAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwArAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAKwBcAFwAKwBcACsAKwBcACsAKwArACsAKwArAFwAXABcAFwAKwBcAFwAXABcAFwAXABcACsAXABcAFwAKwBcACsAXAArACsAXABcACsAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgArACoAKgBcACsAKwBcAFwAXABcAFwAKwBcACsAKgAqACoAKgAqACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAFwAXABcAFwAUAAOAA4ADgAOAB4ADgAOAAkADgAOAA0ACQATABMAEwATABMACQAeABMAHgAeAB4ABAAEAB4AHgAeAB4AHgAeAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUAANAAQAHgAEAB4ABAAWABEAFgARAAQABABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAAQABAAEAAQABAANAAQABABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsADQANAB4AHgAeAB4AHgAeAAQAHgAeAB4AHgAeAB4AKwAeAB4ADgAOAA0ADgAeAB4AHgAeAB4ACQAJACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgAeAB4AHgBcAFwAXABcAFwAXAAqACoAKgAqAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAKgAqACoAKgAqACoAKgBcAFwAXAAqACoAKgAqAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAXAAqAEsASwBLAEsASwBLAEsASwBLAEsAKgAqACoAKgAqACoAUABQAFAAUABQAFAAKwBQACsAKwArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQACsAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwAEAAQABAAeAA0AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAEQArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAADQANAA0AUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAA0ADQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoADQANABUAXAANAB4ADQAbAFwAKgArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAB4AHgATABMADQANAA4AHgATABMAHgAEAAQABAAJACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAUABQAFAAUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwAeACsAKwArABMAEwBLAEsASwBLAEsASwBLAEsASwBLAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwBcAFwAXABcAFwAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcACsAKwArACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwAeAB4AXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsABABLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKgAqACoAKgAqACoAKgBcACoAKgAqACoAKgAqACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAUABQAFAAUABQAFAAUAArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4ADQANAA0ADQAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAHgAeAB4AHgBQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwANAA0ADQANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwBQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsABAAEAAQAHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAABABQAFAAUABQAAQABAAEAFAAUAAEAAQABAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAKwBQACsAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAKwArAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAKwAeAB4AHgAeAB4AHgAeAA4AHgArAA0ADQANAA0ADQANAA0ACQANAA0ADQAIAAQACwAEAAQADQAJAA0ADQAMAB0AHQAeABcAFwAWABcAFwAXABYAFwAdAB0AHgAeABQAFAAUAA0AAQABAAQABAAEAAQABAAJABoAGgAaABoAGgAaABoAGgAeABcAFwAdABUAFQAeAB4AHgAeAB4AHgAYABYAEQAVABUAFQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgANAB4ADQANAA0ADQAeAA0ADQANAAcAHgAeAB4AHgArAAQABAAEAAQABAAEAAQABAAEAAQAUABQACsAKwBPAFAAUABQAFAAUAAeAB4AHgAWABEATwBQAE8ATwBPAE8AUABQAFAAUABQAB4AHgAeABYAEQArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGgAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgBQABoAHgAdAB4AUAAeABoAHgAeAB4AHgAeAB4AHgAeAB4ATwAeAFAAGwAeAB4AUABQAFAAUABQAB4AHgAeAB0AHQAeAFAAHgBQAB4AUAAeAFAATwBQAFAAHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AUABQAFAAUABPAE8AUABQAFAAUABQAE8AUABQAE8AUABPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAE8ATwBPAE8ATwBPAE8ATwBPAE8AUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAATwAeAB4AKwArACsAKwAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB0AHQAeAB4AHgAdAB0AHgAeAB0AHgAeAB4AHQAeAB0AGwAbAB4AHQAeAB4AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB0AHgAdAB4AHQAdAB0AHQAdAB0AHgAdAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAdAB0AHQAdAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAlACUAHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB0AHQAeAB4AHgAeAB0AHQAdAB4AHgAdAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB0AHQAeAB4AHQAeAB4AHgAeAB0AHQAeAB4AHgAeACUAJQAdAB0AJQAeACUAJQAlACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHQAdAB0AHgAdACUAHQAdAB4AHQAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHQAdAB0AHQAlAB4AJQAlACUAHQAlACUAHQAdAB0AJQAlAB0AHQAlAB0AHQAlACUAJQAeAB0AHgAeAB4AHgAdAB0AJQAdAB0AHQAdAB0AHQAlACUAJQAlACUAHQAlACUAIAAlAB0AHQAlACUAJQAlACUAJQAlACUAHgAeAB4AJQAlACAAIAAgACAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeABcAFwAXABcAFwAXAB4AEwATACUAHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACUAJQBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwArACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAE8ATwBPAE8ATwBPAE8ATwAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeACsAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUAArACsAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQBQAFAAUABQACsAKwArACsAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAABAAEAAQAKwAEAAQAKwArACsAKwArAAQABAAEAAQAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsABAAEAAQAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsADQANAA0ADQANAA0ADQANAB4AKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAUABQAFAAUABQAA0ADQANAA0ADQANABQAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwANAA0ADQANAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAeAAQABAAEAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLACsADQArAB4AKwArAAQABAAEAAQAUABQAB4AUAArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwAEAAQABAAEAAQABAAEAAQABAAOAA0ADQATABMAHgAeAB4ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0AUABQAFAAUAAEAAQAKwArAAQADQANAB4AUAArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXABcAA0ADQANACoASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUAArACsAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANACsADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEcARwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwAeAAQABAANAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAEAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUAArACsAUAArACsAUABQACsAKwBQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAeAB4ADQANAA0ADQAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAArAAQABAArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAEAAQABAAEAAQABAAEACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAFgAWAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAKwBQACsAKwArACsAKwArAFAAKwArACsAKwBQACsAUAArAFAAKwBQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQACsAUAArAFAAKwBQACsAUABQACsAUAArACsAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAUABQAFAAUAArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUAArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAlACUAJQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeACUAJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeACUAJQAlACUAJQAeACUAJQAlACUAJQAgACAAIAAlACUAIAAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIQAhACEAIQAhACUAJQAgACAAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAIAAlACUAJQAlACAAJQAgACAAIAAgACAAIAAgACAAIAAlACUAJQAgACUAJQAlACUAIAAgACAAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeACUAHgAlAB4AJQAlACUAJQAlACAAJQAlACUAJQAeACUAHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAIAAgACAAIAAgAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFwAXABcAFQAVABUAHgAeAB4AHgAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAlACAAIAAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsA"},function(A,t,n){"";function r(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(5);t.default=function A(t,n,s){r(this,A),this.type=a.PATH.CIRCLE,this.x=t,this.y=n,this.radius=s,isNaN(t)&&console.error("Invalid x value given for Circle"),isNaN(n)&&console.error("Invalid y value given for Circle"),isNaN(s)&&console.error("Invalid radius value given for Circle")}},function(A,t,n){"";function r(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function A(A,t){var n=[],r=!0,a=!1,s=void 0;try{for(var d=A[Symbol.iterator](),l;!(r=(l=d.next()).done)&&(n.push(l.value),!(t&&n.length===t));r=!0);}catch(A){a=!0,s=A}finally{try{!r&&d["return"]&&d["return"]()}finally{if(a)throw s}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return A(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(){function A(A,t){for(var n=0,r;n<t.length;n++)r=t[n],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(A,r.key,r)}return function(t,n,r){return n&&A(t.prototype,n),r&&A(t,r),t}}(),l=n(2),c=n(25),B=n(52),g=n(9),u=function(A){return A&&A.__esModule?A:{default:A}}(g),m=n(4),p=n(12),w=function(){function A(t,n){r(this,A),this.target=t,this.options=n,t.render(n)}return d(A,[{key:"renderNode",value:function(A){A.isVisible()&&(this.renderNodeBackgroundAndBorders(A),this.renderNodeContent(A))}},{key:"renderNodeContent",value:function(A){var t=this,n=function(){if(A.childNodes.length&&A.childNodes.forEach(function(n){if(n instanceof u.default){var r=n.parent.style;t.target.renderTextNode(n.bounds,r.color,r.font,r.textDecoration,r.textShadow)}else t.target.drawShape(n,A.style.color)}),A.image){var n=t.options.imageStore.get(A.image);if(n){var r=(0,l.calculateContentBox)(A.bounds,A.style.padding,A.style.border),a="number"==typeof n.width&&0<n.width?n.width:r.width,s="number"==typeof n.height&&0<n.height?n.height:r.height;0<a&&0<s&&t.target.clip([(0,l.calculatePaddingBoxPath)(A.curvedBounds)],function(){t.target.drawImage(n,new l.Bounds(0,0,a,s),r)})}}},r=A.getClipPaths();r.length?this.target.clip(r,n):n()}},{key:"renderNodeBackgroundAndBorders",value:function(A){var t=this,n=!A.style.background.backgroundColor.isTransparent()||A.style.background.backgroundImage.length,r=A.style.border.some(function(A){return A.borderStyle!==p.BORDER_STYLE.NONE&&!A.borderColor.isTransparent()}),a=function(){var r=(0,m.calculateBackgroungPaintingArea)(A.curvedBounds,A.style.background.backgroundClip);n&&t.target.clip([r],function(){A.style.background.backgroundColor.isTransparent()||t.target.fill(A.style.background.backgroundColor),t.renderBackgroundImage(A)}),A.style.border.forEach(function(n,r){n.borderStyle===p.BORDER_STYLE.NONE||n.borderColor.isTransparent()||t.renderBorder(n,r,A.curvedBounds)})};if(n||r){var s=A.parent?A.parent.getClipPaths():[];s.length?this.target.clip(s,a):a()}}},{key:"renderBackgroundImage",value:function(A){var t=this;A.style.background.backgroundImage.slice(0).reverse().forEach(function(n){"url"===n.source.method&&n.source.args.length?t.renderBackgroundRepeat(A,n):/gradient/i.test(n.source.method)&&t.renderBackgroundGradient(A,n)})}},{key:"renderBackgroundRepeat",value:function(A,t){var n=this.options.imageStore.get(t.source.args[0]);if(n){var r=(0,m.calculateBackgroungPositioningArea)(A.style.background.backgroundOrigin,A.bounds,A.style.padding,A.style.border),s=(0,m.calculateBackgroundSize)(t,n,r),d=(0,m.calculateBackgroundPosition)(t.position,s,r),l=(0,m.calculateBackgroundRepeatPath)(t,d,s,r,A.bounds),c=a(r.left+d.x),B=a(r.top+d.y);this.target.renderRepeat(l,n,s,c,B)}}},{key:"renderBackgroundGradient",value:function(A,t){var n=(0,m.calculateBackgroungPositioningArea)(A.style.background.backgroundOrigin,A.bounds,A.style.padding,A.style.border),r=(0,m.calculateGradientBackgroundSize)(t,n),s=(0,m.calculateBackgroundPosition)(t.position,r,n),d=new l.Bounds(a(n.left+s.x),a(n.top+s.y),r.width,r.height),c=(0,B.parseGradient)(A,t.source,d);if(c)switch(c.type){case B.GRADIENT_TYPE.LINEAR_GRADIENT:this.target.renderLinearGradient(d,c);break;case B.GRADIENT_TYPE.RADIAL_GRADIENT:this.target.renderRadialGradient(d,c);}}},{key:"renderBorder",value:function(A,t,n){this.target.drawShape((0,l.parsePathForBorder)(n,t),A.borderColor)}},{key:"renderStack",value:function(A){var t=this;if(A.container.isVisible()){var n=A.getOpacity();n!==this._opacity&&(this.target.setOpacity(A.getOpacity()),this._opacity=n);var r=A.container.style.transform;null===r?this.renderStackContent(A):this.target.transform(A.container.bounds.left+r.transformOrigin[0].value,A.container.bounds.top+r.transformOrigin[1].value,r.transform,function(){return t.renderStackContent(A)})}}},{key:"renderStackContent",value:function(A){var t=C(A),n=s(t,5),r=n[0],a=n[1],d=n[2],l=n[3],c=n[4],B=h(A),g=s(B,2),u=g[0],m=g[1];this.renderNodeBackgroundAndBorders(A.container),r.sort(Q).forEach(this.renderStack,this),this.renderNodeContent(A.container),m.forEach(this.renderNode,this),l.forEach(this.renderStack,this),c.forEach(this.renderStack,this),u.forEach(this.renderNode,this),a.forEach(this.renderStack,this),d.sort(Q).forEach(this.renderStack,this)}},{key:"render",value:function(A){var t=this;this.options.backgroundColor&&this.target.rectangle(this.options.x,this.options.y,this.options.width,this.options.height,this.options.backgroundColor),this.renderStack(A);var n=this.target.getTarget();return n.then(function(A){return t.options.logger.log("Render completed"),A})}}]),A}();t.default=w;var h=function(A){for(var t=[],n=[],r=A.children.length,a=0,s;a<r;a++)s=A.children[a],s.isInlineLevel()?t.push(s):n.push(s);return[t,n]},C=function(A){for(var t=[],n=[],r=[],a=[],s=[],d=A.contexts.length,l=0,c;l<d;l++)c=A.contexts[l],c.container.isPositioned()||1>c.container.style.opacity||c.container.isTransformed()?0>c.container.style.zIndex.order?t.push(c):0<c.container.style.zIndex.order?r.push(c):n.push(c):c.container.isFloating()?a.push(c):s.push(c);return[t,n,r,a,s]},Q=function(A,t){if(A.container.style.zIndex.order>t.container.style.zIndex.order)return 1;return A.container.style.zIndex.order<t.container.style.zIndex.order?-1:A.container.index>t.container.index?1:-1}},function(A,n,a){"";function s(A){return A&&A.__esModule?A:{default:A}}function c(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.transformWebkitRadialGradientArgs=n.parseGradient=n.RadialGradient=n.LinearGradient=n.RADIAL_GRADIENT_SHAPE=n.GRADIENT_TYPE=void 0;var B=function(){function A(A,t){var n=[],r=!0,a=!1,s=void 0;try{for(var d=A[Symbol.iterator](),l;!(r=(l=d.next()).done)&&(n.push(l.value),!(t&&n.length===t));r=!0);}catch(A){a=!0,s=A}finally{try{!r&&d["return"]&&d["return"]()}finally{if(a)throw s}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return A(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=a(6),u=s(g),m=a(53),p=a(0),w=s(p),h=a(1),C=s(h),Q=a(3),U=n.GRADIENT_TYPE={LINEAR_GRADIENT:0,RADIAL_GRADIENT:1},E=n.RADIAL_GRADIENT_SHAPE={CIRCLE:0,ELLIPSE:1},F={left:new C.default("0%"),top:new C.default("0%"),center:new C.default("50%"),right:new C.default("100%"),bottom:new C.default("100%")},b=n.LinearGradient=function A(t,n){c(this,A),this.type=U.LINEAR_GRADIENT,this.colorStops=t,this.direction=n},H=n.RadialGradient=function A(t,n,r,a){c(this,A),this.type=U.RADIAL_GRADIENT,this.colorStops=t,this.shape=n,this.center=r,this.radius=a},S=n.parseGradient=function(A,t,n){var r=t.args,a=t.method,s=t.prefix;if("linear-gradient"===a)return I(r,n,!!s);return"gradient"===a&&"linear"===r[0]?I(["to bottom"].concat(_(r.slice(3))),n,!!s):"radial-gradient"===a?N(A,"-webkit-"===s?K(r):r,n):"gradient"===a&&"radial"===r[0]?N(A,_(K(r.slice(1))),n):void 0},T=function(A,t,r){for(var a=[],s=t;s<A.length;s++){var d=A[s],l=/(px)|%|( 0)$/i.test(d),c=d.lastIndexOf(" "),B=new w.default(l?d.substring(0,c):d),g=l?new C.default(d.substring(c+1)):s===t?new C.default("0%"):s===A.length-1?new C.default("100%"):null;a.push({color:B,stop:g})}for(var u=a.map(function(A){var t=A.color,n=A.stop,a=0===r?0:n?n.getAbsoluteValue(r)/r:null;return{color:t,stop:a}}),m=u[0].stop,p=0;p<u.length;p++)if(null!==m){var h=u[p].stop;if(null===h){for(var Q=p;null===u[Q].stop;)Q++;for(var U=Q-p+1,E=u[Q].stop,F=(E-m)/U;p<Q;p++)m=u[p].stop=m+F}else m=h}return u},I=function(A,n,a){var s=(0,m.parseAngle)(A[0]),d=/^(to )?(left|top|right|bottom)( (left|top|right|bottom))?$/i.test(A[0]),c=d||null!==s||/^([+-]?\d*\.?\d+)% ([+-]?\d*\.?\d+)%$/i.test(A[0]),B=c?null===s?d?M(A[0],n):D(A[0],n):R(a?s-.5*t:s,n):R(Math.PI,n),g=c?1:0,u=l((0,Q.distance)(r(B.x0)+r(B.x1),r(B.y0)+r(B.y1)),2*n.width,2*n.height);return new b(T(A,g,u),B)},N=function(A,t,n){var r=t[0].match(/^\s*(circle|ellipse)?\s*((?:([\d.]+)(px|r?em|%)\s*(?:([\d.]+)(px|r?em|%))?)|closest-side|closest-corner|farthest-side|farthest-corner)?\s*(?:at\s*(?:(left|center|right)|([\d.]+)(px|r?em|%))\s+(?:(top|center|bottom)|([\d.]+)(px|r?em|%)))?(?:\s|$)/i),a=r&&("circle"===r[1]||r[3]!==void 0&&r[5]===void 0)?E.CIRCLE:E.ELLIPSE,s={},d={};r&&(r[3]!==void 0&&(s.x=(0,h.calculateLengthFromValueWithUnit)(A,r[3],r[4]).getAbsoluteValue(n.width)),r[5]!==void 0&&(s.y=(0,h.calculateLengthFromValueWithUnit)(A,r[5],r[6]).getAbsoluteValue(n.height)),r[7]?d.x=F[r[7].toLowerCase()]:r[8]!==void 0&&(d.x=(0,h.calculateLengthFromValueWithUnit)(A,r[8],r[9])),r[10]?d.y=F[r[10].toLowerCase()]:r[11]!==void 0&&(d.y=(0,h.calculateLengthFromValueWithUnit)(A,r[11],r[12])));var c={x:d.x===void 0?n.width/2:d.x.getAbsoluteValue(n.width),y:d.y===void 0?n.height/2:d.y.getAbsoluteValue(n.height)},B=k(r&&r[2]||"farthest-corner",a,c,s,n);return new H(T(t,r?1:0,l(B.x,B.y)),a,c,B)},R=function(A,t){var n=Math.cos,a=Math.sin,s=t.width,d=t.height,l=r(s*a(A))+r(d*n(A)),c=l/2,B=.5*s+a(A)*c,g=.5*d-n(A)*c;return{x0:B,x1:s-B,y0:g,y1:d-g}},L=function(A){return Math.acos(A.width/2/((0,Q.distance)(A.width,A.height)/2))},M=function(A,n){switch(A){case"bottom":case"to top":return R(0,n);case"left":case"to right":return R(t/2,n);case"right":case"to left":return R(3*t/2,n);case"top right":case"right top":case"to bottom left":case"to left bottom":return R(t+L(n),n);case"top left":case"left top":case"to bottom right":case"to right bottom":return R(t-L(n),n);case"bottom left":case"left bottom":case"to top right":case"to right top":return R(L(n),n);case"bottom right":case"right bottom":case"to top left":case"to left top":return R(2*t-L(n),n);case"top":case"to bottom":default:return R(Math.PI,n);}},D=function(A,n){var r=A.split(" ").map(parseFloat),a=B(r,2),s=a[0],d=a[1],l=s/100*n.width/(d/100*n.height);return R(Math.atan(isNaN(l)?1:l)+t/2,n)},O=function(A,t,n,r){var a=[{x:0,y:0},{x:0,y:A.height},{x:A.width,y:0},{x:A.width,y:A.height}];return a.reduce(function(A,a){var s=(0,Q.distance)(t-a.x,n-a.y);return(r?s<A.optimumDistance:s>A.optimumDistance)?{optimumCorner:a,optimumDistance:s}:A},{optimumDistance:r?1/0:-Infinity,optimumCorner:null}).optimumCorner},k=function(A,t,n,a,s){var B=n.x,g=n.y,u=0,m=0;switch(A){case"closest-side":t===E.CIRCLE?u=m=l(r(B),r(B-s.width),r(g),r(g-s.height)):t===E.ELLIPSE&&(u=l(r(B),r(B-s.width)),m=l(r(g),r(g-s.height)));break;case"closest-corner":if(t===E.CIRCLE)u=m=l((0,Q.distance)(B,g),(0,Q.distance)(B,g-s.height),(0,Q.distance)(B-s.width,g),(0,Q.distance)(B-s.width,g-s.height));else if(t===E.ELLIPSE){var p=l(r(g),r(g-s.height))/l(r(B),r(B-s.width)),c=O(s,B,g,!0);u=(0,Q.distance)(c.x-B,(c.y-g)/p),m=p*u}break;case"farthest-side":t===E.CIRCLE?u=m=d(r(B),r(B-s.width),r(g),r(g-s.height)):t===E.ELLIPSE&&(u=d(r(B),r(B-s.width)),m=d(r(g),r(g-s.height)));break;case"farthest-corner":if(t===E.CIRCLE)u=m=d((0,Q.distance)(B,g),(0,Q.distance)(B,g-s.height),(0,Q.distance)(B-s.width,g),(0,Q.distance)(B-s.width,g-s.height));else if(t===E.ELLIPSE){var w=d(r(g),r(g-s.height))/d(r(B),r(B-s.width)),h=O(s,B,g,!1);u=(0,Q.distance)(h.x-B,(h.y-g)/w),m=w*u}break;default:u=a.x||0,m=a.y===void 0?u:a.y;}return{x:u,y:m}},K=n.transformWebkitRadialGradientArgs=function(A){var t="",n="",r="",a="",s=0,d=/^(left|center|right|\d+(?:px|r?em|%)?)(?:\s+(top|center|bottom|\d+(?:px|r?em|%)?))?$/i,l=/^\d+(px|r?em|%)?(?:\s+\d+(px|r?em|%)?)?$/i,c=A[s].match(d);c&&s++;var B=A[s].match(/^(circle|ellipse)?\s*(closest-side|closest-corner|farthest-side|farthest-corner|contain|cover)?$/i);B&&(t=B[1]||"",r=B[2]||"","contain"===r?r="closest-side":"cover"===r&&(r="farthest-corner"),s++);var g=A[s].match(l);g&&s++;var u=A[s].match(d);u&&s++;var m=A[s].match(l);m&&s++;var p=u||c;p&&p[1]&&(a=p[1]+(/^\d+$/.test(p[1])?"px":""),p[2]&&(a+=" "+p[2]+(/^\d+$/.test(p[2])?"px":"")));var w=m||g;return w&&(n=w[0],!w[1]&&(n+="px")),!a||t||n||r||(n=a,a=""),a&&(a="at "+a),[[t,r,n,a].filter(function(A){return!!A}).join(" ")].concat(A.slice(s))},_=function(A){return A.map(function(A){return A.match(/^(from|to|color-stop)\((?:([\d.]+)(%)?,\s*)?(.+?)\)$/i)}).map(function(t,n){if(!t)return A[n];switch(t[1]){case"from":return t[4]+" 0%";case"to":return t[4]+" 100%";case"color-stop":return"%"===t[3]?t[4]+" "+t[2]:t[4]+" "+100*parseFloat(t[2])+"%";}})}},function(A,n){"";Object.defineProperty(n,"__esModule",{value:!0});n.parseAngle=function(A){var n=A.match(/([+-]?\d*\.?\d+)(deg|grad|rad|turn)/i);if(n){var r=parseFloat(n[1]);switch(n[2].toLowerCase()){case"deg":return t*r/180;case"grad":return t/200*r;case"rad":return r;case"turn":return 2*t*r;}}return null}},function(t,n,r){"";function a(A){return A&&A.__esModule?A:{default:A}}function s(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.cloneWindow=n.DocumentCloner=void 0;var d=function(){function A(A,t){var n=[],r=!0,a=!1,s=void 0;try{for(var d=A[Symbol.iterator](),l;!(r=(l=d.next()).done)&&(n.push(l.value),!(t&&n.length===t));r=!0);}catch(A){a=!0,s=A}finally{try{!r&&d["return"]&&d["return"]()}finally{if(a)throw s}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return A(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function A(A,t){for(var n=0,r;n<t.length;n++)r=t[n],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(A,r.key,r)}return function(t,n,r){return n&&A(t.prototype,n),r&&A(t,r),t}}(),c=r(2),B=r(26),g=r(55),u=a(g),m=r(3),p=r(4),w=r(15),h=a(w),C=r(56),Q="data-html2canvas-ignore",U=n.DocumentCloner=function(){function A(t,n,r,a,d){s(this,A),this.referenceElement=t,this.scrolledElements=[],this.copyStyles=a,this.inlineImages=a,this.logger=r,this.options=n,this.renderer=d,this.resourceLoader=new u.default(n,r,window),this.pseudoContentData={counters:{},quoteDepth:0},this.documentElement=this.cloneNode(t.ownerDocument.documentElement)}return l(A,[{key:"inlineAllImages",value:function(A){var t=this;if(this.inlineImages&&A){var n=A.style;Promise.all((0,p.parseBackgroundImage)(n.backgroundImage).map(function(A){return"url"===A.method?t.resourceLoader.inlineImage(A.args[0]).then(function(A){return A&&"string"==typeof A.src?"url(\""+A.src+"\")":"none"}).catch(function(A){t.logger.log("Unable to load image",A)}):Promise.resolve(""+A.prefix+A.method+"("+A.args.join(",")+")")})).then(function(A){1<A.length&&(n.backgroundColor=""),n.backgroundImage=A.join(",")}),A instanceof HTMLImageElement&&this.resourceLoader.inlineImage(A.src).then(function(t){if(t&&A instanceof HTMLImageElement&&A.parentNode){var n=A.parentNode,r=(0,m.copyCSSStyles)(A.style,t.cloneNode(!1));n.replaceChild(r,A)}}).catch(function(A){t.logger.log("Unable to load image",A)})}}},{key:"inlineFonts",value:function(A){var t=this;return Promise.all(Array.from(A.styleSheets).map(function(n){return n.href?fetch(n.href).then(function(A){return A.text()}).then(function(A){return F(A,n.href)}).catch(function(A){return t.logger.log("Unable to load stylesheet",A),[]}):E(n,A)})).then(function(A){return A.reduce(function(A,t){return A.concat(t)},[])}).then(function(A){return Promise.all(A.map(function(A){return fetch(A.formats[0].src).then(function(A){return A.blob()}).then(function(A){return new Promise(function(t,n){var r=new FileReader;r.onerror=n,r.onload=function(){var A=r.result;t(A)},r.readAsDataURL(A)})}).then(function(t){return A.fontFace.setProperty("src","url(\""+t+"\")"),"@font-face {"+A.fontFace.cssText+" "})}))}).then(function(n){var r=A.createElement("style");r.textContent=n.join("\n"),t.documentElement.appendChild(r)})}},{key:"createElementClone",value:function(A){var t=this;if(this.copyStyles&&A instanceof HTMLCanvasElement){var n=A.ownerDocument.createElement("img");try{return n.src=A.toDataURL(),n}catch(A){this.logger.log("Unable to clone canvas contents, canvas is tainted")}}if(A instanceof HTMLIFrameElement){var r=A.cloneNode(!1),a=k();r.setAttribute("data-html2canvas-internal-iframe-key",a);var s=(0,c.parseBounds)(A,0,0),d=s.width,l=s.height;return this.resourceLoader.cache[a]=K(A,this.options).then(function(A){return t.renderer(A,{async:t.options.async,allowTaint:t.options.allowTaint,backgroundColor:"#ffffff",canvas:null,imageTimeout:t.options.imageTimeout,logging:t.options.logging,proxy:t.options.proxy,removeContainer:t.options.removeContainer,scale:t.options.scale,foreignObjectRendering:t.options.foreignObjectRendering,useCORS:t.options.useCORS,target:new h.default,width:d,height:l,x:0,y:0,windowWidth:A.ownerDocument.defaultView.innerWidth,windowHeight:A.ownerDocument.defaultView.innerHeight,scrollX:A.ownerDocument.defaultView.pageXOffset,scrollY:A.ownerDocument.defaultView.pageYOffset},t.logger.child(a))}).then(function(t){return new Promise(function(n,a){var s=document.createElement("img");s.onload=function(){return n(t)},s.onerror=a,s.src=t.toDataURL(),r.parentNode&&r.parentNode.replaceChild((0,m.copyCSSStyles)(A.ownerDocument.defaultView.getComputedStyle(A),s),r)})}),r}if(A instanceof HTMLStyleElement&&A.sheet&&A.sheet.cssRules){var B=[].slice.call(A.sheet.cssRules,0).reduce(function(A,n){try{return n&&n.cssText?A+n.cssText:A}catch(r){return t.logger.log("Unable to access cssText property",n.name),A}},""),g=A.cloneNode(!1);return g.textContent=B,g}return A.cloneNode(!1)}},{key:"cloneNode",value:function(A){var t=A.nodeType===Node.TEXT_NODE?document.createTextNode(A.nodeValue):this.createElementClone(A),n=A.ownerDocument.defaultView,r=A instanceof n.HTMLElement?n.getComputedStyle(A):null,a=A instanceof n.HTMLElement?n.getComputedStyle(A,":before"):null,s=A instanceof n.HTMLElement?n.getComputedStyle(A,":after"):null;this.referenceElement===A&&t instanceof n.HTMLElement&&(this.clonedReferenceElement=t),t instanceof n.HTMLBodyElement&&M(t);for(var d=(0,C.parseCounterReset)(r,this.pseudoContentData),l=(0,C.resolvePseudoContent)(A,a,this.pseudoContentData),c=A.firstChild;c;c=c.nextSibling)c.nodeType===Node.ELEMENT_NODE&&("SCRIPT"===c.nodeName||c.hasAttribute(Q)||"function"==typeof this.options.ignoreElements&&this.options.ignoreElements(c))||(!this.copyStyles||"STYLE"!==c.nodeName)&&t.appendChild(this.cloneNode(c));var B=(0,C.resolvePseudoContent)(A,s,this.pseudoContentData);if((0,C.popCounters)(d,this.pseudoContentData),A instanceof n.HTMLElement&&t instanceof n.HTMLElement)switch(a&&this.inlineAllImages(S(A,t,a,l,T)),s&&this.inlineAllImages(S(A,t,s,B,I)),r&&this.copyStyles&&!(A instanceof HTMLIFrameElement)&&(0,m.copyCSSStyles)(r,t),this.inlineAllImages(t),(0!==A.scrollTop||0!==A.scrollLeft)&&this.scrolledElements.push([t,A.scrollLeft,A.scrollTop]),A.nodeName){case"CANVAS":this.copyStyles||H(A,t);break;case"TEXTAREA":case"SELECT":t.value=A.value;}return t}}]),A}(),E=function(A,t){return(A.cssRules?Array.from(A.cssRules):[]).filter(function(A){return A.type===CSSRule.FONT_FACE_RULE}).map(function(A){for(var n=(0,p.parseBackgroundImage)(A.style.getPropertyValue("src")),r=[],s=0;s<n.length;s++)if("url"===n[s].method&&n[s+1]&&"format"===n[s+1].method){var d=t.createElement("a");d.href=n[s].args[0],t.body&&t.body.appendChild(d);var a={src:d.href,format:n[s+1].args[0]};r.push(a)}return{formats:r.filter(function(A){return /^woff/i.test(A.format)}),fontFace:A.style}}).filter(function(A){return A.formats.length})},F=function(A,t){var n=document.implementation.createHTMLDocument(""),r=document.createElement("base");r.href=t;var a=document.createElement("style");return a.textContent=A,n.head&&n.head.appendChild(r),n.body&&n.body.appendChild(a),a.sheet?E(a.sheet,n):[]},b=function(A,t,n){A.defaultView&&(t!==A.defaultView.pageXOffset||n!==A.defaultView.pageYOffset)&&A.defaultView.scrollTo(t,n)},H=function(A,t){try{if(t){t.width=A.width,t.height=A.height;var n=A.getContext("2d"),r=t.getContext("2d");n?r.putImageData(n.getImageData(0,0,A.width,A.height),0,0):r.drawImage(A,0,0)}}catch(A){}},S=function(A,t,n,r,a){if(n&&n.content&&"none"!==n.content&&"-moz-alt-content"!==n.content&&"none"!==n.display){var s=t.ownerDocument.createElement("html2canvaspseudoelement");if((0,m.copyCSSStyles)(n,s),r)for(var d=r.length,l=0,c;l<d;l++)switch(c=r[l],c.type){case C.PSEUDO_CONTENT_ITEM_TYPE.IMAGE:var B=t.ownerDocument.createElement("img");B.src=(0,p.parseBackgroundImage)("url("+c.value+")")[0].args[0],B.style.opacity="1",s.appendChild(B);break;case C.PSEUDO_CONTENT_ITEM_TYPE.TEXT:s.appendChild(t.ownerDocument.createTextNode(c.value));}return s.className=N+" "+R,t.className+=a===T?" "+N:" "+R,a===T?t.insertBefore(s,t.firstChild):t.appendChild(s),s}},T=":before",I=":after",N="___html2canvas___pseudoelement_before",R="___html2canvas___pseudoelement_after",L="{\n    content: \"\" !important;\n    display: none !important;\n}",M=function(A){D(A,"."+N+T+L+"\n         ."+R+I+L)},D=function(A,t){var n=A.ownerDocument.createElement("style");n.innerHTML=t,A.appendChild(n)},O=function(A){var t=d(A,3),n=t[0],r=t[1],a=t[2];n.scrollLeft=r,n.scrollTop=a},k=function(){return A(Date.now()+1e7*Math.random()).toString(16)},K=function(A,t){try{return Promise.resolve(A.contentWindow.document.documentElement)}catch(n){return t.proxy?(0,B.Proxy)(A.src,t).then(function(A){var t=A.match(/^data:text\/(.+);(base64)?,(.*)$/i);return t?"base64"===t[2]?window.atob(decodeURIComponent(t[3])):decodeURIComponent(t[3]):Promise.reject()}).then(function(t){return _(A.ownerDocument,(0,c.parseBounds)(A,0,0)).then(function(A){var n=A.contentWindow,r=n.document;r.open(),r.write(t);var a=P(A).then(function(){return r.documentElement});return r.close(),a})}):Promise.reject()}},_=function(A,t){var n=A.createElement("iframe");return(n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=t.width.toString(),n.height=t.height.toString(),n.scrolling="no",n.setAttribute(Q,"true"),!A.body)?Promise.reject("Body element not found in Document that is getting rendered"):(A.body.appendChild(n),Promise.resolve(n))},P=function(A){var t=A.contentWindow,n=t.document;return new Promise(function(r){t.onload=A.onload=n.onreadystatechange=function(){var t=setInterval(function(){0<n.body.childNodes.length&&"complete"===n.readyState&&(clearInterval(t),r(A))},50)}})},V=n.cloneWindow=function(A,t,n,r,a,s){var d=new U(n,r,a,!1,s),l=A.defaultView.pageXOffset,c=A.defaultView.pageYOffset;return _(A,t).then(function(a){var s=a.contentWindow,B=s.document,g=P(a).then(function(){d.scrolledElements.forEach(O),s.scrollTo(t.left,t.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(s.scrollY!==t.top||s.scrollX!==t.left)&&(B.documentElement.style.top=-t.top+"px",B.documentElement.style.left=-t.left+"px",B.documentElement.style.position="absolute");var l=Promise.resolve([a,d.clonedReferenceElement,d.resourceLoader]),c=r.onclone;return d.clonedReferenceElement instanceof s.HTMLElement||d.clonedReferenceElement instanceof A.defaultView.HTMLElement||d.clonedReferenceElement instanceof HTMLElement?"function"==typeof c?Promise.resolve().then(function(){return c(B)}).then(function(){return l}):l:Promise.reject("Error finding the "+n.nodeName+" in the cloned document")});return B.open(),B.write(z(document.doctype)+"<html></html>"),b(n.ownerDocument,l,c),B.replaceChild(B.adoptNode(d.documentElement),B.documentElement),B.close(),g})},z=function(A){var t="";return A&&(t+="<!DOCTYPE ",A.name&&(t+=A.name),A.internalSubset&&(t+=A.internalSubset),A.publicId&&(t+="\""+A.publicId+"\""),A.systemId&&(t+="\""+A.systemId+"\""),t+=">"),t}},function(A,t,n){"";function r(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceStore=void 0;var a=function(){function A(A,t){for(var n=0,r;n<t.length;n++)r=t[n],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(A,r.key,r)}return function(t,n,r){return n&&A(t.prototype,n),r&&A(t,r),t}}(),s=n(10),d=function(A){return A&&A.__esModule?A:{default:A}}(s),l=n(26),c=function(){function A(t,n,a){r(this,A),this.options=t,this._window=a,this.origin=this.getOrigin(a.location.href),this.cache={},this.logger=n,this._index=0}return a(A,[{key:"loadImage",value:function(A){var t=this;if(this.hasResourceInCache(A))return A;if(m(A))return this.cache[A]=w(A,this.options.imageTimeout||0),A;if(!p(A)||d.default.SUPPORT_SVG_DRAWING){if(!0===this.options.allowTaint||g(A)||this.isSameOrigin(A))return this.addImage(A,A,!1);if(!this.isSameOrigin(A)){if("string"==typeof this.options.proxy)return this.cache[A]=(0,l.Proxy)(A,this.options).then(function(A){return w(A,t.options.imageTimeout||0)}),A;if(!0===this.options.useCORS&&d.default.SUPPORT_CORS_IMAGES)return this.addImage(A,A,!0)}}}},{key:"inlineImage",value:function(A){var t=this;return g(A)?w(A,this.options.imageTimeout||0):this.hasResourceInCache(A)?this.cache[A]:this.isSameOrigin(A)||"string"!=typeof this.options.proxy?this.xhrImage(A):this.cache[A]=(0,l.Proxy)(A,this.options).then(function(A){return w(A,t.options.imageTimeout||0)})}},{key:"xhrImage",value:function(A){var t=this;return this.cache[A]=new Promise(function(n,r){var a=new XMLHttpRequest;if(a.onreadystatechange=function(){if(4===a.readyState)if(200!==a.status)r("Failed to fetch image "+A.substring(0,256)+" with status code "+a.status);else{var t=new FileReader;t.addEventListener("load",function(){var A=t.result;n(A)},!1),t.addEventListener("error",function(A){return r(A)},!1),t.readAsDataURL(a.response)}},a.responseType="blob",t.options.imageTimeout){var s=t.options.imageTimeout;a.timeout=s,a.ontimeout=function(){return r("Timed out ("+s+"ms) fetching "+A.substring(0,256))}}a.open("GET",A,!0),a.send()}).then(function(A){return w(A,t.options.imageTimeout||0)}),this.cache[A]}},{key:"loadCanvas",value:function(A){var t=this._index++ +"";return this.cache[t]=Promise.resolve(A),t}},{key:"hasResourceInCache",value:function(A){return"undefined"!=typeof this.cache[A]}},{key:"addImage",value:function(A,t,n){var r=this;this.logger.log("Added image "+A.substring(0,256));var a=function(A){return new Promise(function(a,s){var d=new Image;if(d.onload=function(){return a(d)},(!A||n)&&(d.crossOrigin="anonymous"),d.onerror=s,d.src=t,!0===d.complete&&setTimeout(function(){a(d)},500),r.options.imageTimeout){var l=r.options.imageTimeout;setTimeout(function(){return s("Timed out ("+l+"ms) fetching "+t.substring(0,256))},l)}})};return this.cache[A]=u(t)&&!p(t)?d.default.SUPPORT_BASE64_DRAWING(t).then(a):a(!0),A}},{key:"isSameOrigin",value:function(A){return this.getOrigin(A)===this.origin}},{key:"getOrigin",value:function(A){var t=this._link||(this._link=this._window.document.createElement("a"));return t.href=A,t.href=t.href,t.protocol+t.hostname+t.port}},{key:"ready",value:function(){var A=this,t=Object.keys(this.cache),n=t.map(function(t){return A.cache[t].catch(function(t){return A.logger.log("Unable to load image",t),null})});return Promise.all(n).then(function(n){return A.logger.log("Finished loading "+n.length+" images",n),new B(t,n)})}}]),A}();t.default=c;var B=t.ResourceStore=function(){function A(t,n){r(this,A),this._keys=t,this._resources=n}return a(A,[{key:"get",value:function(A){var t=this._keys.indexOf(A);return-1===t?null:this._resources[t]}}]),A}(),g=function(A){return /^data:image\/.*/i.test(A)},u=function(A){return /^data:image\/.*;base64,/i.test(A)},m=function(A){return"blob"===A.substr(0,4)},p=function(A){return"svg"===A.substr(-3).toLowerCase()||/^data:image\/svg\+xml/i.test(A)},w=function(A,t){return new Promise(function(n,r){var a=new Image;a.onload=function(){return n(a)},a.onerror=r,a.src=A,!0===a.complete&&setTimeout(function(){n(a)},500),t&&setTimeout(function(){return r("Timed out ("+t+"ms) loading image")},t)})}},function(A,t,n){"";Object.defineProperty(t,"__esModule",{value:!0}),t.parseContent=t.resolvePseudoContent=t.popCounters=t.parseCounterReset=t.TOKEN_TYPE=t.PSEUDO_CONTENT_ITEM_TYPE=void 0;var r=function(){function A(A,t){var n=[],r=!0,a=!1,s=void 0;try{for(var d=A[Symbol.iterator](),l;!(r=(l=d.next()).done)&&(n.push(l.value),!(t&&n.length===t));r=!0);}catch(A){a=!0,s=A}finally{try{!r&&d["return"]&&d["return"]()}finally{if(a)throw s}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return A(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=n(14),s=n(8),d=t.PSEUDO_CONTENT_ITEM_TYPE={TEXT:0,IMAGE:1},l=t.TOKEN_TYPE={STRING:0,ATTRIBUTE:1,URL:2,COUNTER:3,COUNTERS:4,OPENQUOTE:5,CLOSEQUOTE:6},c=t.parseCounterReset=function(A,t){if(!A||!A.counterReset||"none"===A.counterReset)return[];for(var n=[],a=A.counterReset.split(/\s*,\s*/),s=a.length,d=0;d<s;d++){var l=a[d].split(/\s+/),c=r(l,2),B=c[0],g=c[1];n.push(B);var u=t.counters[B];u||(u=t.counters[B]=[]),u.push(parseInt(g||0,10))}return n},B=t.popCounters=function(A,t){for(var n=A.length,r=0;r<n;r++)t.counters[A[r]].pop()},g=t.resolvePseudoContent=function(A,t,n){if(!t||!t.content||"none"===t.content||"-moz-alt-content"===t.content||"none"===t.display)return null;var a=u(t.content),c=a.length,B=[],g="",m=t.counterIncrement;if(m&&"none"!==m){var h=m.split(/\s+/),C=r(h,2),Q=C[0],U=C[1],E=n.counters[Q];E&&(E[E.length-1]+=void 0===U?1:parseInt(U,10))}for(var F=0,b;F<c;F++)switch(b=a[F],b.type){case l.STRING:g+=b.value||"";break;case l.ATTRIBUTE:A instanceof HTMLElement&&b.value&&(g+=A.getAttribute(b.value)||"");break;case l.COUNTER:var H=n.counters[b.name||""];H&&(g+=w([H[H.length-1]],"",b.format));break;case l.COUNTERS:var S=n.counters[b.name||""];S&&(g+=w(S,b.glue,b.format));break;case l.OPENQUOTE:g+=p(t,!0,n.quoteDepth),n.quoteDepth++;break;case l.CLOSEQUOTE:n.quoteDepth--,g+=p(t,!1,n.quoteDepth);break;case l.URL:g&&(B.push({type:d.TEXT,value:g}),g=""),B.push({type:d.IMAGE,value:b.value||""});}return g&&B.push({type:d.TEXT,value:g}),B},u=t.parseContent=function(A,t){if(t&&t[A])return t[A];for(var n=[],r=A.length,a=!1,s=!1,d=!1,B="",g="",u=[],p=0,w;p<r;p++){switch(w=A.charAt(p),w){case"'":case"\"":s?B+=w:(a=!a,!d&&!a&&(n.push({type:l.STRING,value:B}),B=""));break;case"\\":s?(B+=w,s=!1):s=!0;break;case"(":a?B+=w:(d=!0,g=B,B="",u=[]);break;case")":if(a)B+=w;else if(d){switch(B&&u.push(B),g){case"attr":0<u.length&&n.push({type:l.ATTRIBUTE,value:u[0]});break;case"counter":if(0<u.length){var h={type:l.COUNTER,name:u[0]};1<u.length&&(h.format=u[1]),n.push(h)}break;case"counters":if(0<u.length){var C={type:l.COUNTERS,name:u[0]};1<u.length&&(C.glue=u[1]),2<u.length&&(C.format=u[2]),n.push(C)}break;case"url":0<u.length&&n.push({type:l.URL,value:u[0]});}d=!1,B=""}break;case",":a?B+=w:d&&(u.push(B),B="");break;case" ":case"\t":a?B+=w:B&&(m(n,B),B="");break;default:B+=w;}"\\"!==w&&(s=!1)}return B&&m(n,B),t&&(t[A]=n),n},m=function(A,t){"open-quote"===t?A.push({type:l.OPENQUOTE}):"close-quote"===t?A.push({type:l.CLOSEQUOTE}):void 0},p=function(A,t,n){var r=A.quotes?A.quotes.split(/\s+/):["'\"'","'\"'"],a=2*n;return a>=r.length&&(a=r.length-2),t||++a,r[a].replace(/^["']|["']$/g,"")},w=function(A,t,n){for(var r=A.length,d="",l=0;l<r;l++)0<l&&(d+=t||""),d+=(0,a.createCounterText)(A[l],(0,s.parseListStyleType)(n||"decimal"),!1);return d}}])});var webrtcdevcon=function(){var qA=Math.pow,ZA=Math.log,$A=Math.ceil,et=Math.floor,At=String.fromCharCode,tt=Math.round,nt=Math.sqrt,rt=Math.min;function A(A,n){return A?"<video src=\""+A+"\" autoplay></vide>":"<img src=\""+n+"\">"}function t(A="",n,r=document.createElement("template"),t="length"){return r.innerHTML=A.trim(),n=[...r.content.childNodes],1<n[t]?n:n[0]||""}function n(A){if(0==A)return"0 Bytes";var t=parseInt(et(ZA(A)/ZA(1024)));return tt(A/qA(1024,t),2)+" "+["Bytes","KB","MB","GB","TB"][t]}function r(A){var t=document.createElement("script");t.src=A,t.async=!0,document.documentElement.appendChild(t)}async function a(){let A=null;try{if(A=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}),0<A.getVideoTracks().length)return webrtcdev.log("--------------------------------- Video Permission obtained "),void(bt=!0)}catch(A){webrtcdev.error(A.name+": "+A.message)}bt=!1}async function s(){let A=null;try{if(A=await navigator.mediaDevices.getUserMedia({audio:!0,video:!1}),0<A.getAudioTracks().length)return webrtcdev.log("--------------------------------- Audio Permission obtained "),void(Ft=!0)}catch(A){webrtcdev.error(A.name+": "+A.message)}Ft=!1}function d(A){try{return document.getElementById(A)}catch(A){return webrtcdev.error(A),""}}function l(A){try{if(document.getElementsByName(A))return document.getElementsByName(A)[0]}catch(A){return webrtcdev.error(A),""}}function c(A){if(!A)return void webrtcdev.error("show elem undefined");try{webrtcdev.log(" [init] show elem",A," , type ",typeof A," , nodetype ",A.nodeType),"object"==typeof A&&A.nodeType!==void 0?(A.removeAttribute("hidden"),A.setAttribute("style","display:block!important")):d(A)?(A=d(A),A.removeAttribute("hidden"),A.setAttribute("style","display:block")):l(A)?(A=l(A),A[0].removeAttribute("hidden"),A[0].setAttribute("style","display:block")):webrtcdev.warn("elem not found ",A)}catch(A){webrtcdev.error("showeleem",A)}}function B(A){try{"object"==typeof A&&A.nodeType!==void 0?(A.setAttribute("hidden",!0),A.setAttribute("style","display:none!important")):d(A)&&(d(A).setAttribute("hidden",!0),d(A).setAttribute("style","display:none"))}catch(t){webrtcdev.error(A,t)}}function g(A){return!!d(A)}function u(A){let t=document.getElementsByName(yt)[0];yt&&t?aA(t,A.stream).then(()=>{webrtcdev.log("[webcallviewdevmanager] updateWaitingWebCallView - Done attaching local stream to element",t),t.muted=!0,t.className=$t.videoClass,$t.userDisplay&&A.name&&attachUserDetails(t,A),$t.userMetaDisplay&&A.userid&&attachMetaUserDetails(t,A)}):(alert(" Please Add a video container in config for Waiting video"),webrtcdev.error("[webcallviewdevmanager] updateWaitingWebCallView - No local video container in localobj -> ",$t))}function m(A){return webrtcdev.log("[webcallviewdevmanager] updateLocalWebCallView - local video reattachMediaStream / attachMediaStream"),new Promise(function(t){if(!bt&&!Ft)t();else if(yt&&Ht){let t=document.getElementsByName(yt)[0],n=document.getElementsByName(Ht)[0];if(0>=n.played.length){let r;t.srcObject?0<t.played.length?(webrtcdev.log("[webcallviewdevmanager] updateLocalWebCallView - local video is playing, just reattach stream to add in session"),r=iA(n,t)):(webrtcdev.log("[webcallviewdevmanager] updateLocalWebCallView - local video is not playing, use webcallpeers for stream to add in session"),r=aA(n,A.stream)):r=Promise.resolve("done"),r.then(()=>{webrtcdev.log("[ webcallviewdevmanager ] updateLocalWebCallView - Done attaching local stream to local element"),$t.userDisplay&&A.name&&attachUserDetails(n,A),$t.userMetaDisplay&&A.userid&&attachMetaUserDetails(n,A),n.id=A.videoContainer,n.className=en.videoClass,n.muted=!0,attachControlButtons(n,A)})}else webrtcdev.info("[webcallviewdevmanager] updateLocalWebCallView - not updating self video as it is already playing ",n.played.length)}else webrtcdev.error("[webcallviewdevmanager] updateLocalWebCallView - Local video container not defined "),t()})}function p(A){return webrtcdev.log("[webcallviewdevmanager] updateRemoteWebCalView"),new Promise(function(t){if(!Ut&&!Qt)webrtcdev.log("[webcallviewdevmanager] updateRemoteWebCalView - session without incoming video ",Ut),t();else if(0>=St.length)webrtcdev.error("[webcallviewdevmanager] updateRemoteWebCalView - remote Video containers not defined  , length - ",St.length,St),t();else{let n=C(A,St);h(A,St,n).then(A=>{webrtcdev.log("[webcallviewdevmanager] updateRemoteWebCalView video -",A),aA(A,A.stream)}).then(()=>{webrtcdev.log("[webcallviewdevmanager] updateRemoteWebCalView - Done attaching remote stream to remote element"),c(St[n].video),en.userDisplay&&A.name&&attachUserDetails(St[n].video,A),en.userMetaDisplay&&A.userid&&attachMetaUserDetails(St[n].video,peerInfo),St[n].video.id=A.videoContainer,St[n].video.className=en.videoClass,attachControlButtons(St[n].video,A),t()})}})}function w(A){if(webrtcdev.warn("[webcallviewmanager] destroyWebCallView peerInfo",A),A.videoContainer&&document.getElementById(A.videoContainer)){let t=document.getElementById(A.videoContainer);for(v in t||webrtcdev.warn("[webcallviewmanager] destroywebcallview - video not found for the peer who left"),oA(t),St)if(St[v].userid==A.userid){St[v]=St[v].video.getAttribute("name");break}webrtcdev.warn("[webcallviewmanager] destroywebcallview - remoteVideos after destroy webcallview and dettach stream ",St),t.setAttribute("hidden",!0)}if(Lt.active&&"single"!=Lt.props.fileList){let t=document.getElementById("fileListingRow");if(2<=t.childElementCount){webrtcdev.warn("[webcallviewmanager] destroywebcallview - more than 1 file listing rows present, remove the ones for peers that are no longer in session  ");let n=t.childNodes;for(x in n){if(!n[x].id)break;let r=n[x].id.split("widget-filelisting-box");if(A.userid==r[1]){webrtcdev.warn("[webcallviewmanager] destroywebcallview - File list boxes belonging to userid ",r[1]," need to be removed  "),t.removeChild(n[x]);break}}}let n=d("fileSharingRow");if(2<=n.childElementCount){webrtcdev.warn("[webcallviewmanager] destroyWebCallView - more than 1 file listing rows present , remove the ones for peers that are no longer in session  ");let t=n.childNodes;for(x in t){if(!t[x].id)break;let r=t[x].id.split("widget-filesharing-box");if(A.userid==r[1]){webrtcdev.warn("[webcallviewmanager] destroywebcallview - File list boxes belonging to userid ",r[1]," need to be removed  "),n.removeChild(t[x]);break}}}}let t="";for(i in ot)"remote"==ot[i].type&&(t+=ot[i].userid);webrtcdev.log("Active Remote Peers  ",t)}function h(A,t,n){try{if("unlimited"==en.maxAllowed){webrtcdev.log("[webcallviewmanager ] updateRemoteVideos - remote video is unlimited , creating video for remoteVideos array ");let r=document.createElement("video");t[n]={userid:A.userid,stream:A.stream,video:r},document.getElementById(en.dynamicVideos.videoContainer).appendChild(r)}else{if(webrtcdev.log("[webcallviewmanager] updateRemoteVideos - Max-capacity is limited to size -",en.maxAllowed),webrtcdev.log("[webcallviewmanager] updateRemoteVideos - remoteVideos -",t),n>t.length)return void webrtcdev.error("[webcallviewmanager] current index is larger than remote video length ");let r=document.getElementsByName(t[n]);webrtcdev.log("[webcallviewmanager] updateRemoteVideos - update remote video : ",r),r&&0<=r.length?r[0]&&(t[n]={userid:A.userid,stream:A.stream,video:r[0]},webrtcdev.log("[webcallviewmanager] updateRemoteVideos - RemoteVideos["+n+"] updated ",t[n],A.stream)):t[n].userid==A.userid&&""==t[n].stream?(webrtcdev.warn("[webcallviewmanager] updateRemoteVideos - since remvideo holder already exists with '' stream just overwrite the stream "),t[n].stream=A.stream):(webrtcdev.warn("[webcallviewmanager] updateRemoteVideos - since remvideo holder doesnt exist just overwrite the last remote with the video "),t[t.length-1]={userid:A.userid,stream:A.stream,video:r[0]},webrtcdev.log("[webcallviewmanager ] updateRemoteVideos - RemoteVideos["+t.length-1+"] updated ",t[n]))}webrtcdev.log("[webcallviewmanager ] updateRemoteVideos - remoteVideos after updating ",t[n])}catch(A){webrtcdev.error("[webcallviewmanager ] updateRemoteVideos - ",A)}finally{return Promise.resolve(t[n])}}function C(A,t){let n=0;for(n in t)if(t[n].userid==A.userid)return webrtcdev.log("[webcallviewdevmanager] findEmptyRemoteVideoIndex - Remote Video dom exist already for the userid ",A.userid," checking for srcobject on ",t[n]),t[n].video.id==A.videoContainer?t[n].video.srcObject&&t[n].video.srcObject.active?(webrtcdev.info("[webcallviewdevmanager] findEmptyRemoteVideoIndex - Peer already has a playing video ",t[n]),n):""==t[n].stream?(webrtcdev.info("[webcallviewdevmanager] findEmptyRemoteVideoIndex - Peer already has a video but without active stream",t[n]),n):(webrtcdev.info("[webcallviewdevmanager] findEmptyRemoteVideoIndex - Peer already has a video reuse that ",t[n]),n):(webrtcdev.info("[webcallviewdevmanager] findEmptyRemoteVideoIndex - Remote Video doesnt have an id yet "),n);for(n in n=0,t)if(!t[n].stream&&!t[n].video){let A=document.getElementsByName(t[n])[0];if(!A)webrtcdev.error("[webcallviewdevmanager] findEmptyRemoteVideoIndex - Remote Video ",t[n]," is undefined , check if named video containers actually exist , skip to next ");else{if(!A.srcObject)return webrtcdev.log("[webcallviewdevmanager] findEmptyRemoteVideoIndex - Remote Video is not appended by json  ",A," thus can be empty"),n;webrtcdev.log("[webcallviewdevmanager] findEmptyRemoteVideoIndex -  Remote video is played or srcObject exists ",A,"cannot be empty , continue to next iteration ")}}else webrtcdev.log("[webcallviewdevmanager] findEmptyRemoteVideoIndex - This Remote video space ",t[n],"is waiting for a diff peer video , skip to next ");return webrtcdev.log("[webcallviewmanager] findEmptyRemoteVideoIndex - Last element is empty video ",t[n],"index ",n),n}function Q(A){const t=document.createElement("span");t.setAttribute("data-provides","fileinput"),t.className=A.button.class,t.innerHTML=A.button.html,t.onclick=function(){const A=new FileSelector;A.selectSingleFile(function(A){wA(A)})};const n=document.createElement("li");n.appendChild(t),document.getElementById("topIconHolder_ul").appendChild(n)}function U(A){let t=document.getElementById(A.button.id);t.onclick=function(){const A=new FileSelector;A.selectSingleFile(function(A){wA(A)})}}function E(A,t,n,r,a,s,d,l){try{if(!t)return void webrtcdev.error(" [filehsraingJs] Progress helpler cannot be added for one peer as its absent");if(!t.fileList.container||!document.getElementById(t.fileList.container))return void webrtcdev.error("[filehsraingJs dommodifier] Progress helpler cannot be added , missing fileListcontainer ");webrtcdev.log("[filehsraingJs dommodifier] progress helper attributes  attributes : uuid -",A,"peerinfo - ",t,"filename - ",n,"file size - ",r,"progress helper class - ",s,"file to - ",l,"file from - ",d);let c=A+"_"+d+"_"+l;webrtcdev.log("[filehsraingJs dommodifier]  addProgressHelper - progressid ",c);let B=document.createElement("ul");if(B.id=c,B.title=n+" size - "+a.size+" type - "+a.type+" last modified on -"+a.lastModifiedDate,B.setAttribute("type","progressbar"),B.setAttribute("class","row"),Tt){const A=document.createElement("li");A.innerHTML=n+"size - "+a.size+" type - "+a.type+" last modified on -"+a.lastModifiedDate+" from :"+d+" --> to :"+l+"</br>",B.appendChild(A)}let g=document.createElement("li");g.setAttribute("class",s),g.innerHTML="<label>0%</label><progress></progress>",B.appendChild(g),Sn[c]={div:g,progress:g.querySelector("progress"),label:g.querySelector("label")},Sn[c].progress.max=r;let u=document.createElement("li");u.id="stopuploadButton"+c,u.innerHTML="<i class=\"fa fa-trash-o\"></i>",u.onclick=function(A){webrtcdev.log("[filehsraingJs dommodifier]  addProgressHelper - remove progressid ",c," dom : ",document.getElementById(c)),R(c),hA(c,n,a,l,d),A.target.remove(),L(c),ct==n?ct==n&&(ct=""):(at.send({type:"shareFileStopUpload",_element:c,_filename:n}),ct=n)},B.appendChild(u),parentDom=document.getElementById(t.fileList.container),parentDom.insertBefore(B,parentDom.firstChild)}catch(A){webrtcdev.error("[filehsraingJs dommodifier]  problem in addProgressHelper  ",A)}}function F(A,t){if(-1!=A.position){const r=+A.position.toFixed(2).split(".")[1]||100;t.innerHTML=r+"%"}}function b(A,n,r,a,s){let d;const l=n.fileShare.container,c=n.fileList.container;A||(A="000");try{if(!Lt.active)return;webrtcdev.log("[filesharing dommodifierjs] displayList - uuid: ",A," peerinfo :",n,"file url : ",r," file name : ",a," file type :",s);let t=null;"sessionRecording"==s&&(a=a.videoname+"_"+a.audioname,t=a);let l=document.querySelectorAll("ul[id^=\""+A+"\"]");if(0<l.length)for(x in l)webrtcdev.log("[filesharing dommodifier js] displayList remove progress bar index - ",x," file dom - ",l[x]),"object"==typeof l[x]&&("progressbar"==l[x].type||-1<l[x].indexOf("progressbar"))?n.fileList.container&&document.getElementById(n.fileList.container)?(d=document.getElementById(n.fileList.container),webrtcdev.log("[filehsraingJs dommodifier]  displayList, set up parent dom ",d),d.removeChild(l[x])):(webrtcdev.log("[filesharing dommodifier js] displayList, Not sure what does this do ",l[x]),d=l[x].parentNode.parentNode):webrtcdev.warn("[filesharing dommodifier js] displayList - cannot remove since , elem is not of type progressbar  ",l[x]);else d=document.getElementById(c)||document.body,webrtcdev.warn("[filesharing dommodifier js] displayList , progress bar area doesnt exist, set parent dom to ",c,document.getElementById(c)," or to document body")}catch(A){webrtcdev.error("[filesharing dommodifier] displaylist exception ",A)}webrtcdev.log("[filesharing dommodifier] displayList set up parent dom  ",d);let g=document.createElement("ul");g.id=a,g.type=n.type,g.innerHTML="",g.className="row";let u=document.createElement("li");u.innerHTML=a,u.title=s+" shared by "+n.name,u.className="filenameClass",u.id="name"+a+A;let m=document.createElement("li");if(m.id="downloadButton"+a,m.title="Download",!Lt.filelist.downloadicon)m.innerHTML="<i class=\"fa fa-download\"></i>";else if(t(Lt.filelist.downloadicon)instanceof HTMLElement)m.innerHTML=Lt.filelist.downloadicon;else{let A=document.createElement("img");A.src=Lt.filelist.downloadicon,m.appendChild(A)}m.onclick=function(){webrtcdev.log("[filesharing dommodifier js] download  filename ",a),M(A,l,r,a,s)};let p=document.createElement("li");if(p.id="showButton"+a,p.title="Show",!Lt.filelist.showicon)p.innerHTML="<i class=\"fa fa-eye-slash\"></i>";else if(t(Lt.filelist.showicon)instanceof HTMLElement)p.innerHTML=Lt.filelist.showicon;else{let A=document.createElement("img");A.src=Lt.filelist.showicon,p.appendChild(A)}let w=0;for(x in dt=a,st="",webrtcdevobj.getwebcallpeers()[0].filearray){let A=webrtcdevobj.getwebcallpeers()[0].filearray[x];if(A!=a&&!A.name){let t=document.getElementById("showButton"+A);t&&I("",l,"",A,"",t,2)}else;}p.onclick=function(){w++,I(A,l,r,a,s,p,w)};let h=document.createElement("li");h.id="removeButton"+a+A,h.title="Remove",Lt.filelist.trashicon?t(Lt.filelist.trashicon)instanceof HTMLElement?h.innerHTML=Lt.filelist.trashicon:h.appendChild(Lt.filelist.trashicon):h.innerHTML="<i class=\"fa fa-trash-o\"></i>",h.onclick=function(){if(lt!=a){const A=a;R(l,a),at.send({type:"shareFileRemove",_element:A,_filename:a}),L(A),lt=a,webrtcdev.log("[filesharing dommodifier js] filedom to be hidden : ",g),g.setAttribute("style","display:none!important")}else lt==a&&(lt="")},n.userid!=it&&B(h),"inspector"==jt&&((!0).hidden=!0,p.hidden=!0,g.appendChild(u),h.hidden=!0),g.appendChild(u),g.appendChild(m),g.appendChild(p),!0&&g.appendChild(h),webrtcdev.log("[filesharing dom modifier JS ] filedom ",g," | parentdom ",d),d?d.appendChild(g):webrtcdev.error("[filesharing dom modifier JS ] filedom's parent dom not found ")}function H(A,t,n){webrtcdev.log(" [filehsaring domodifier]  - getFileElementDisplayByType ","file type :",A,"file url : ",t,", file name : ",n);let r;if(-1<A.indexOf("msword")||-1<A.indexOf("officedocument")){let A=document.createElement("div");A.className="alert alert-warning",A.innerHTML="Microsoft and Libra word file cannot be opened in browser. Click bottom DOWNLOAD in UF box . File shows up below the UF box. Click arrow on right, then select OPEN  . File Opens in New Window, then 'Save As'.",r=A}else if(-1<A.indexOf("image")){let A=document.createElement("img");A.src=t,A.title=n,A.id="display"+n,r=A}else if("sessionRecording"==A){let A=A.videoname+"_"+A.audioname;const n=document.createElement("div");n.setAttribute("background-color","black"),n.id="display"+A,n.title=A;let a=document.createElement("video");a.src=t.videofileurl,a.setAttribute("type","audvideo/webm"),a.setAttribute("name","videofile"),a.controls="controls",a.title=A.videoname+".webm";let s=document.createElement("audio");s.src=t.audiofileurl,s.setAttribute("type","audio/wav"),s.controls="controls",s.title=A.videoname+".wav",n.appendChild(a),n.appendChild(s),r=n,a.play(),s.play()}else if(-1<A.indexOf("videoScreenRecording")){webrtcdev.log("[filehsaring domodifier] getFileElementDisplayByType - videoScreenRecording  fileurl ",t);let A=document.createElement("video");A.src=t,A.setAttribute("controls","controls"),A.style.width="100%",A.title=n,A.id="display"+n,r=A}else if(-1<A.indexOf("video")){webrtcdev.log("[filehsaring domodifier] getFileElementDisplayByType - videoRecording ",t);let A=document.createElement("video");A.src=t,A.setAttribute("controls","controls"),A.style.width="100%",A.title=n,A.id="display"+n,r=A}else if(-1<A.indexOf("audio")){webrtcdev.log("[filehsaring domodifier] getFileElementDisplayByType - audio ",t);let A=document.createElement("audio");A.src=t,A.controls="controls",A.title=n,A.id="display"+n,r=A}else{webrtcdev.log("[filehsaring domodifier] getFileElementDisplayByType - iframe ",t);let A=document.createElement("iframe");A.src=t,A.className="viewerIframeClass",A.title=n,A.id="display"+n,r=A}return r}function S(A,t,n,r,a){webrtcdev.log("[filehsaring dommodifier] displayFile  - uuid :",A,"peerinfo :",t," file url : ",n," file name : ",r,"  file type :",a);try{if(!t||!t.fileShare)return;let A=document.getElementById(t.fileShare.container),s=H(a,n,r);if(A)N(t.fileShare.container,n,r,a);else if("inspector"==jt)for(j in ot){const A=++j,t=document.getElementById(ot[A].fileShare.container);if(t){N(ot[A].fileShare.container,n,r,a);break}}else document.body.appendChild(s);window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"file",action:"onFileListed"}}))}catch(A){webrtcdev.error("[filehsaring dommodifier] displayFile has a problem ",A)}}function T(A){const t=document.getElementById(A);for(let n in ot)if(t.getAttribute("lastClickedBy")===ot[n].userid)return void t.setAttribute("lastClickedBy","");""==t.getAttribute("lastClickedBy")&&(t.setAttribute("lastClickedBy",at.userid),at.send({type:"buttonclick",buttonName:A}))}function I(A,t,n,r,a,s,d){webrtcdev.log(" [filehsaring js]  - show/hide elementDisplay ",t),webrtcdev.log(" [filehsaring js]  - show/hide button ",r," || ",d),1==d%2?(window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"file",action:"onFileShow",type:"local"}})),N(t,n,r,a),s.innerHTML=Lt.filelist.showicon||"<i class=\"fa fa-eye\"></i>",webrtcdev.log(" [filehsaring js]  Executed script to show the file")):0==d%2&&(R(t,r),s.innerHTML=Lt.filelist.hideicon||"<i class=\"fa fa-eye-slash\"></i>",webrtcdev.log(" [filehsaring js]  Executed script to hide the file "))}function N(A,t,n,r){webrtcdev.log("[filehsaring js]  showFile container - ",A,document.getElementById(A));const a=H(r,t,n);webrtcdev.log("[filehsaring js]  showFile  filedom - ",a),g(A)?(document.getElementById(A).innerHTML="",c(A),document.getElementById(A).appendChild(a)):webrtcdev.warn(" [filehsaring js] cant show file as parent DOM fir fileDisplay container doesnt exist ")}function R(A){webrtcdev.log("[filehsaring js]  hidefile ",A),g(A)?(document.getElementById(A).innerHTML="",B(A),webrtcdev.log("[filehsaring js] hidefile done")):webrtcdev.warn(" [filehsaring js]  file is not displayed to hide  ")}function L(A){webrtcdev.log("[filehsaring js]  removeFile ",A),document.getElementById(A).remove()}function M(A,t,n,r,a){if(webrtcdev.log(" downloadButton _filename ",r,"  filetype ",a),"sessionRecording"==a){const A=document.createElement("a");document.body.appendChild(A),A.style="display: none",A.href=n.audiofileurl,A.download=peerinfo.filearray[0]+".wav",A.click(),window.URL.revokeObjectURL(n.audiofileurl);const t=document.createElement("a");document.body.appendChild(t),t.style="display: none",t.href=n.videofileurl,t.download=peerinfo.filearray[1]+".webm",t.click(),window.URL.revokeObjectURL(n.videofileurl)}else{const A=document.createElement("a");document.body.appendChild(A),A.style="display: none",A.href=n,A.download=r,A.click(),window.URL.revokeObjectURL(n)}}function D(A,n,r){try{if(webrtcdev.log(" [ filehsreing js ]  createFileSharingBox ",A,n),document.getElementById(A.fileShare.outerbox))return;const a=document.createElement("div");a.className="single"==r?"col-md-12 fileviewing-box":"col-md-6 fileviewing-box",a.id=A.fileShare.outerbox;let s=document.createElement("p"),d,l;if(s.id=A.fileShare.container+"controlBar","single"!=r&&s.appendChild(document.createTextNode(A.name)),"none"!=Lt.fileshare.minicon){if(d=document.createElement("span"),!Lt.fileshare.minicon){"<i class=\"fa fa-minus-square\"></i>".innerHTML="<i class=\"fa fa-minus-square\"></i>",webrtcdev.log(" [fileShare JS ] creating default minicon ","<i class=\"fa fa-minus-square\"></i>")}else if(t(Lt.fileshare.minicon)instanceof HTMLElement)d.innerHTML=Lt.fileshare.minicon;else{let A=Lt.fileshare.minicon;webrtcdev.log(" [fileShare JS ] creating custom minicon",A);let t=document.createElement("img");t.src=A,d.appendChild(t)}d.id=A.fileShare.minButton,d.title="Minimize/Maximize",d.style.display="none",d.setAttribute("lastClickedBy",""),d.onclick=function(){z(A.userid,d.id,A.fileShare.outerbox),B(d),c(l),d.setAttribute("lastClickedBy",A.userid)},s.appendChild(d)}else webrtcdev.warn(" [fileShare JS ] minicon is none");if("none"!=Lt.fileshare.maxicon){if(l=document.createElement("span"),!Lt.fileshare.maxicon){l.innerHTML="<i class=\"fa fa-external-link-square\"></i>",webrtcdev.log(" [fileShare JS ] creating default maxicon","<i class=\"fa fa-external-link-square\"></i>")}else if(t(Lt.fileshare.maxicon)instanceof HTMLElement)l.innerHTML=Lt.fileshare.maxicon;else{let A=Lt.fileshare.maxicon;webrtcdev.log(" [fileShare JS ] creating custom maxicon",A);let t=document.createElement("img");t.src=A,l.appendChild(t)}l.id=A.fileShare.maxButton,l.title="Maximize",l.style.display="block",l.setAttribute("lastClickedBy",""),l.onclick=function(){for(x in X(A.userid,l.id,A.fileShare.outerbox),ot)ot[x].fileShare.outerbox!=A.fileShare.outerbox&&G(ot[x].userid,l.id,ot[x].fileShare.outerbox);B(l),c(d),l.setAttribute("lastClickedBy",A.userid)},s.appendChild(l)}else webrtcdev.warn(" [fileShare JS ] maxicon is none");let g=document.createElement("span");if(!Lt.fileshare.closeicon)g.innerHTML="<i class=\"fa fa-times-circle\"></i>";else if(t(Lt.fileshare.closeicon)instanceof HTMLElement)g.innerHTML=Lt.fileshare.closeicon;else{let A=document.createElement("img");A.src=Lt.fileshare.closeicon,g.appendChild(A)}g.id=A.fileShare.closeButton,g.title="Close",g.setAttribute("lastClickedBy",""),g.onclick=function(){V(A.userid,g.id,A.fileShare.container)},s.appendChild(g);let u=0;let m=document.createElement("span");if(!Lt.fileshare.rotateicon)m.innerHTML="<i class=\"fa fa-mail-forward\"></i>";else if(t(Lt.fileshare.rotateicon)instanceof HTMLElement)m.innerHTML=Lt.fileshare.rotateicon;else{let A=document.createElement("img");A.src=Lt.fileshare.rotateicon,m.appendChild(A)}m.id=A.fileShare.rotateButton,m.title="Rotate",m.onclick=function(){let t=document.getElementById(A.fileShare.container),n=t.firstChild;webrtcdev.log(" [filehsraing ] rotateButton dom ",n,n.nodeName,"dom parent ",t),u=(u+90)%360,n.setAttribute("angle",u),n?"VIDEO"==n.nodeName?O(n,t):"IMG"==n.nodeName?K(n,t):"IFRAME"==n.nodeName?k(n,t):n.setAttribute("orientation",""):webrtcdev.error(" [filehsraing ] rotateButton  , dom doesnt exist")},s.appendChild(m);let p=document.createElement("div");if(p.className="filesharingWidget-"+r,p.id=A.fileShare.container,Tt){let A=document.createElement("span");A.innerHTML="<br/>"+p.id+"<br/>",a.appendChild(A)}a.appendChild(s),a.appendChild(p),n.appendChild(a)}catch(A){webrtcdev.error(" createFileSharingBox ",A)}}function O(A,t){const n=A.getAttribute("angle")||0;A.videoWidth>A.videoHeight?(A.setAttribute("style","height:"+t.clientWidth+"px;margin-left: 0px"),orientation="landscape"):orientation="portrait",A.setAttribute("orientation",orientation),A.className="col rotate"+n+A.getAttribute("orientation")}function k(A,t){const n=A.getAttribute("angle")||0;A.setAttribute("style","height:"+t.clientWidth+"px !important;width:100%"),A.setAttribute("orientation","portrait"),A.className="col rotate"+n+A.getAttribute("orientation")}function K(A){let t;const n=A.getAttribute("angle")||0;t=A.width>A.height?"landscape":"portrait",A.setAttribute("orientation",t),A.className="col rotate"+n+A.getAttribute("orientation")}function _(A,t,n){try{if(d(A.fileList.outerbox))return;const r=document.createElement("div");r.className="single"==n?"col-sm-12 filesharing-box":"col-sm-6 filesharing-box",r.id=A.fileList.outerbox;let a=document.createElement("div");a.id="widget-filelisting-container-header",a.setAttribute("style","background-color:"+A.color),"single"!=n&&a.appendChild(document.createTextNode(A.name+"     "));let s,l;"none"!=Lt.filelist.minicon&&(s=document.createElement("span"),s.innerHTML="<i class=\"fa fa-minus\" ></i>",s.id=A.fileShare.minButton,s.setAttribute("lastClickedBy",""),s.onclick=function(){G(A.userid,s.id,A.fileList.container),B(s),c(l)},a.appendChild(s)),"none"!=Lt.filelist.maxicon&&(l=document.createElement("span"),l.innerHTML="<i class=\"fa fa-plus\" ></i>",l.id=A.fileShare.maxButton,l.setAttribute("lastClickedBy",""),l.onclick=function(){X(A.userid,l.id,A.fileList.container),B(l),c(s)},a.appendChild(l),B(l));const g=document.createElement("div");g.id=A.fileList.container;let u=document.createElement("div");if(Tt){let A=document.createElement("span");A.innerHTML=g.id,r.appendChild(A)}r.appendChild(a),r.appendChild(g),r.appendChild(u),t.appendChild(r)}catch(A){webrtcdev.error("[filesharing dom modifier] createFileListingBox ",A)}}function P(A){if(webrtcdev.log("[filesharing dommodifier] createFileSharingDiv for - ",A),"inspector"!=A.role||"inspector"==jt){if(!d(A.fileShare.outerbox)){let t=d(Lt.fileShareContainer);D(A,t,Lt.props.fileShare)}if(!d(A.fileList.outerbox)){let t=d(Lt.fileListContainer);_(A,t,Lt.props.fileList)}}}function V(A,t,n){d(n).innerHTML=""}function z(){for(x in ot)c(ot[x].fileShare.outerbox),document.getElementById(ot[x].fileShare.outerbox).className="col-md-6 fileviewing-box"}function G(A,t,n){B(n),"col-md-12 fileviewing-box"==document.getElementById(n).className&&(document.getElementById(n).className="col-md-6 fileviewing-box")}function X(A,t,n){c(n),"col-md-6 fileviewing-box"==document.getElementById(n).className&&(document.getElementById(n).className="col-md-12 fileviewing-box")}function J(A){webrtcdev.log(" create Modal popup for filetype ",A);const t=d("mainDiv");d("saveModal")&&t.removeChild(document.getElementById("saveModal"));const n=document.createElement("div");n.className="modal fade",n.setAttribute("role","dialog"),n.id="saveModal";const r=document.createElement("div");r.className="modal-dialog";const a=document.createElement("div");a.className="modal-content";const s=document.createElement("div");s.className="modal-header";const l=document.createElement("button");l.className="close",l.setAttribute("data-dismiss","modal"),l.innerHTML="&times;";const c=document.createElement("h4");c.className="modal-title",c.innerHTML="Save File",c.setAttribute("float","left"),s.appendChild(c),s.appendChild(l);const B=document.createElement("div");B.className="modal-body",B.innerHTML="";const g=document.createElement("div");let u;switch(A){case"blobcanvas":c.innerHTML="Save Drawing",u=document.createElement("div"),u.innerHTML="Right Click on Save, pop up window gives following info: Right Click on Draw image, Click Save As when window opens up.",g.appendChild(u);break;case"application/pdf":c.innerHTML="Save PDF",u=document.createElement("div"),u.innerHTML="Click DOWNLOAD on top of the doc . Click SAVE AS when window opens up";const t=document.createElement("img");t.src="images/savefile.PNG",g.appendChild(u),g.appendChild(t);break;case"image/jpeg":case"image/png":case"video/mov":case"video/webm":case"imagesnapshot":c.innerHTML="Save Picture / Video",u=document.createElement("div"),u.innerHTML="Right Click on the FILE . Click SAVE AS when window opens up",g.appendChild(u);break;case"audio/mp3":c.innerHTML="Save Music File",u=document.createElement("div"),u.innerHTML="Right Click on the FILE (play display line). Click SAVE AS when window opens up",g.appendChild(u);break;case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":case"application/vnd.ms-excel":case"application/vnd.openxmlformats-officedocument.presentationml.presentation":case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":case"video/x-ms-wmv":c.innerHTML="Save Microsoft Office / Libra / Open Office Documents",u=document.createElement("div"),u.innerHTML="Click bottom DOWNLOAD in Uploaded Files box . File shows up below the Uploaded Files box. Click arrow on right, then select OPEN  . File Opens in New Window, then 'Save As'.",g.appendChild(u);break;case"sessionRecording":c.innerHTML="Save Session Recording",u=document.createElement("div"),u.innerHTML="Extract the video and audio recording from the dowloaded compresed file and play together ",g.appendChild(u);break;default:u=document.createElement("div"),u.innerHTML="Document is Unrecognizable, cannot be saved, but can be shared with Remote. Use/Click Screen Share for Remote to view your screen. Then open the document on your screen.",g.appendChild(u);}B.appendChild(g),a.appendChild(s),a.appendChild(B),r.appendChild(a),n.appendChild(r),t.appendChild(n)}function Y(A,t,n){let r=document.createElement("span");return r.id=t+"fullscreeButton",r.setAttribute("title","Full Screen"),r.className=A.max.button.class_off,r.innerHTML=A.max.button.html_off,r.onclick=function(){if(r.className==A.max.button.class_off){if("VIDEO"==n.videoContainer.nodeName){let A=n.videoContainer;A.webkitEnterFullScreen()}else if("VIDEO"==document.getElementById(n.videoContainer).nodeName){let A=document.getElementById(n.videoContainer);A.webkitEnterFullScreen()}else webrtcdev.error("[media dommodifier] createFullScreenButton videoContainer missing in peerinfo",n.videoContainer);r.className=A.max.button.class_on,r.innerHTML=A.max.button.html_on}else r.className=A.max.button.class_off,r.innerHTML=A.max.button.html_off},r}function W(A,t,n){var r=document.createElement("span");r.id=t+"minmizevideoButton",r.setAttribute("title","Minimize Video"),r.className=A.min.button.class_off,r.innerHTML=A.min.button.html_off;var a=document.getElementById(n.videoContainer);return r.onclick=function(){r.className==A.min.button.class_off?(B(a),r.className=A.min.button.class_on,r.innerHTML=A.min.button.html_on):(c(a),r.className=A.min.button.class_off,r.innerHTML=A.min.button.html_off)},webrtcdev.log("[_media_dommodifier ] createMinimizeVideoButton - button",r," vid ",a),r}function q(A,t,n){let r=document.createElement("span");return r.id=t+"audioButton",r.setAttribute("data-val","mute"),r.setAttribute("title","Toggle Audio"),r.className=A.audio.button.class_on,r.innerHTML=A.audio.button.html_on,r.onclick=function(){if(r.className==A.audio.button.class_on){try{n.stream.mute({audio:!0})}catch(A){webrtcdev.log("[media_dommanager] audio mute error ",A),n.stream.getAudioTracks()[0].enabled=!1}finally{webrtcdev.log("[media_dommanager] audio mute "),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"mute",action:"muteaudio",type:n.type}}))}sA("audiomute","mute"),r.className=A.audio.button.class_off,r.innerHTML=A.audio.button.html_off}else{try{n.stream.unmute({audio:!0})}catch(A){webrtcdev.log("[media_dommanager] audio ummute error ",A),n.stream.getAudioTracks()[0].enabled=!0}finally{webrtcdev.log("[media_dommanager] audio un mute "),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"mute",action:"unmuteaudio",type:n.type}}))}sA("audiounmute","mute"),r.className=A.audio.button.class_on,r.innerHTML=A.audio.button.html_on}T(r.id)},r}function Z(A,t,n){let r=document.createElement("span");return r.id=t+"videoButton",r.setAttribute("title","Toggle Video"),r.setAttribute("data-container","body"),r.className=A.video.button.class_on,r.innerHTML=A.video.button.html_on,r.onclick=function(){if(r.className==A.video.button.class_on){try{n.stream.mute({video:!0})}catch(A){webrtcdev.log("[media_dommanager] video mute error ",A),n.stream.getVideoTracks()[0].enabled=!1}finally{webrtcdev.log("[media_dommanager] video mute on ",n.stream),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"mute",action:"mutevideo",type:n.type}}))}sA("videomute","mute"),r.innerHTML=A.video.button.html_off,r.className=A.video.button.class_off}else{try{n.stream.unmute({video:!0})}catch(A){webrtcdev.log("[media_dommanager] video unmute error ",A),n.stream.getVideoTracks()[0].enabled=!0}finally{webrtcdev.log("[media_dommanager] video unmute on ",n.stream),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"mute",action:"unmutevideo",type:n.type}}))}sA("videounmute","mute"),r.innerHTML=A.video.button.html_on,r.className=A.video.button.class_on}T(r.id)},r}function ee(A,t){var n=document.createElement("div");return n.id=A+"snapshotButton",n.setAttribute("title","Snapshot"),n.className=Dt.button.class_on,n.innerHTML=Dt.button.html_on,n.onclick=function(){je(t,function(A){let t="snapshot"+new Date().getTime();var n;n=it?_n(it):_n(at.userid),n.filearray.push(t),Lt.active?(qe(A,"imagesnapshot",t),b(n.uuid,n,A,t,"imagesnapshot"),S(n.uuid,n,A,t,"imagesnapshot")):S(n.uuid,n,A,t,"imagesnapshot")})},n}function Ae(A,t,n){let r=document.createElement("div");return r.id=t+"recordButton",r.setAttribute("title","Record"),r.className=A.button.class_off,r.innerHTML=A.button.html_off,r.onclick=function(){r.className==A.button.class_on?(r.className=A.button.class_off,r.innerHTML=A.button.html_off,lA(n)):r.className==A.button.class_off&&(r.className=A.button.class_on,r.innerHTML=A.button.html_on,dA(n))},r}function te(A,t){if(A&&"undefined"!=A)if(document.getElementById("alertBox")){var n=document.createElement("div");n.className="warning"==t?"alert alert-warning fade in":"crtical"==t?"alert alert-crtical":"alert alert-success fade in",n.innerHTML="<a href=\"#\" class=\"close\" data-dismiss=\"alert\" aria-label=\"close\">&times;</a>"+A,document.getElementById("alertBox").hidden=!1,document.getElementById("alertBox").appendChild(n),setTimeout(function(){document.getElementById("alertBox").hidden=!0},3e3)}else alert(A)}function ne(A){if(A&&"undefined"!=A&&Tt)if(document.getElementById("alertBox")){var t=document.createElement("div");t.className="alert alert-warning fade in",t.innerHTML="<a href=\"#\" class=\"close\" data-dismiss=\"alert\" aria-label=\"close\">&times;</a>"+A,document.getElementById("alertBox").hidden=!1,document.getElementById("alertBox").innerHTML="",document.getElementById("alertBox").appendChild(t),setTimeout(function(){document.getElementById("alertBox").hidden=!0},3e3)}else alert(A)}function re(){if(typeof Notification!=null)try{Notification.requestPermission().then(function(A){webrtcdev.log("[notify.js] notification requestPermission ",A)})}catch(A){webrtcdev.error("[notify.js] notification requestPermission ",A)}}function ae(A){webrtcdev.log("[screenshare dommodifier] create ScreenshareButton ",A),an=document.createElement("span"),an.className=A.button.shareButton.class_off,an.innerHTML=A.button.shareButton.html_off,an.id="screenShareButton",an.onclick=function(){if(an.className==A.button.shareButton.class_off){let t=new Date().getUTCMilliseconds();ln="screenshare_"+wt+"_"+t,Ie(ln),an.className=A.button.shareButton.class_on,an.innerHTML=A.button.shareButton.html_on}else an.className==A.button.shareButton.class_on?(an.className=A.button.shareButton.class_off,an.innerHTML=A.button.shareButton.html_off,Re()):webrtcdev.log("[screenshare js] createScreenshareButton , classname is neither on nor off",an.className)};let t=document.createElement("li");return t.appendChild(an),d("topIconHolder_ul").appendChild(t),an}function ie(A){webrtcdev.log("[screenshare dommodifier] assignScreenShareButton",A);let t=d(A.id);return t.onclick=function(){if(t.className==A.class_off){let n=new Date().getUTCMilliseconds();ln="screenshare_"+wt+"_"+n,Ie(ln),t.className=A.class_on,t.innerHTML=A.html_on}else t.className==A.class_on?(t.className=A.class_off,t.innerHTML=A.html_off,Re()):webrtcdev.warn("[screenshare js] createScreenshareButton,classname neither on nor off",A.className)},t}function oe(A,t){if(!d("alertBox"))alert(A);else if(d("alertBox").innerHTML="","screenshareBegin"==t){let A=document.createElement("div");Me(),A.className="alert alert-info",A.innerHTML="<a href=\"#\" class=\"close\" data-dismiss=\"alert\" aria-label=\"close\">&times;</a>You have begun sharing screen , waiting for peer to view",d("alertBox").appendChild(A),setTimeout(function(){let A=document.createElement("div");Me(),A.className="alert alert-danger",A.innerHTML="<a href=\"#\" class=\"close\" data-dismiss=\"alert\" aria-label=\"close\">&times;</a>Peer was not able to view screen , please retry",d("alertBox").appendChild(A)},2e4)}else if("screclass_offenshareStartedViewing"==t);else if("screenshareError"==t){let A=document.createElement("div");Me(),A.className="alert alert-danger",A.innerHTML="<a href=\"#\" class=\"close\" data-dismiss=\"alert\" aria-label=\"close\">&times;</a>There was a error while sharing screen , please contact support ",d("alertBox").appendChild(A)}else;}function se(A){let t=document.getElementById(A.button.id);t.onclick=function(){t.className==A.button.class_on?(t.className=A.button.class_off,t.innerHTML=A.button.html_off,cA()):t.className==A.button.class_off&&(t.className=A.button.class_on,t.innerHTML=A.button.html_on,BA())}}function de(){var A=document.createElement("span");A.className=Mt.button.class_off,A.innerHTML=Mt.button.html_off,A.onclick=function(){if(A.className==Mt.button.class_off){var t=document.body;recorder=Ve(t,{type:"canvas",showMousePointer:!0});var n=document.createElement("canvas");n.id="screenrecordCanvas",n.setAttribute("style","z-index:-1");var r=n.getContext("2d");n.style.top=0,n.style.left=0,(document.body||document.documentElement).appendChild(n);var a=!1,s=!1;(function A(){return a?void html2canvas(elementToShare,{grabMouse:!0,onrendered:function(t){r.clearRect(0,0,n.width,n.height),r.drawImage(t,0,0,n.width,n.height);s||setTimeout(A,1)}}):setTimeout(A,500)})(),recorder=Ve(n,{type:"canvas"}),A.className=Mt.button.class_on,A.innerHTML=Mt.button.html_on,recorder.startRecording(),s=!1,a=!0,setTimeout(function(){A.disabled=!1},500)}else A.className==Mt.button.class_on&&(A.className=Mt.button.class_off,A.innerHTML=Mt.button.html_off,isStoppedRecoridng=!0,recorder.stopRecording(function(){var A=document.getElementById("screenrecordCanvas");A.parentNode.removeChild(A);var t=recorder.getBlob(),n=document.createElement("video");n.src=wn.createObjectURL(t),n.setAttribute("style","height: 100%; position: absolute; top:0;"),document.body.appendChild(n),n.controls=!0,n.play()}))};var t=document.createElement("li");t.appendChild(A),document.getElementById("topIconHolder_ul").appendChild(t)}function le(A){if(webrtcdev.log("[chat dom modifier] create Chat Box ",A),!A)return;let t=document.createElement("div"),n=document.createElement("input");n.setAttribute("type","text"),n.className="form-control chatInputClass",n.id="chatInput",n.onkeypress=function(A){13==A.keyCode&&(Ze(n.value),n.value="")};let r=document.createElement("span");r.className="btn btn-primary",r.innerHTML="Enter",r.onclick=function(){let A=document.getElementById("chatInput");Ze(A.value),A.value=""};let a=document.createElement("div");a.className="whoTypingClass",a.id="whoTyping",t.appendChild(n),t.appendChild(r),t.appendChild(a),document.getElementById(A.container.id).appendChild(t);let s=document.createElement("div");s.className="chatMessagesClass",s.setAttribute("contenteditable",!0),s.id=A.chatBox.id,document.getElementById(A.container.id).appendChild(s)}function ce(A){webrtcdev.warn("[chatdommodifier ]  assignChatBox ");var t=document.getElementById(A.inputBox.text_id);if(!t||null==t)return void webrtcdev.warn("[chatdommodifier ]  chatobj.inputBox.text_id not defined - ",A.inputBox.text_id);if(t.onkeypress=function(A){if(13==A.keyCode){var n=_n(it);Ze(t.value,n),t.value=""}},document.getElementById(A.inputBox.sendbutton_id)){let t=document.getElementById(A.inputBox.sendbutton_id);t.onclick=function(){var t=_n(it),n=document.getElementById(A.inputBox.text_id);Ze(n.value,t),n.value=""}}if(document.getElementById(A.inputBox.minbutton_id)){var n=document.getElementById(A.inputBox.minbutton_id);n.onclick=function(){document.getElementById(A.container.id).hidden?c(A.container.id):B(A.container.id)}}}function Be(A,t,r,a){let s=document.createElement("div");s.id=" chat-msg-"+Fn++,s.className=A+" chat-msg ",je(t,function(A){let n=document.createElement("img");n.src=A;let a=document.createElement("span");a.className="msg-avatar",a.appendChild(n);let d=document.createElement("span");d.className="cm-msg-text ",d.innerHTML=$e(r),s.appendChild(a),s.appendChild(d)}),document.getElementById(a).insertBefore(s,document.getElementById(a).firstChild)}function ge(A,t,r,a){console.log(" addMessageLineformat ",t);let s=document.createElement("ul");s.className=A,s.innerHTML=t.name?"<li><h5>"+t.name+" : "+$e(r)+"</h5></li>":"<li><h5>"+$e(r)+"</h5></li>",document.getElementById(a).insertBefore(s,document.getElementById(a).firstChild)}function ue(A){document.getElementById(A.button.id)?document.getElementById(A.button.id).click():webrtcdev.error("[draw dom modifier] Received sync board event but no button id found")}function me(A){let t=document.createElement("span");t.className=A.button.class_off,t.innerHTML=A.button.html_off,t.onclick=()=>{t.className==A.button.class_off?(t.className=A.button.class_on,t.innerHTML=A.button.html_on,QA()):t.className==A.button.class_on&&(t.className=A.button.class_off,t.innerHTML=A.button.html_off,UA())};var n=document.createElement("li");n.appendChild(t),document.getElementById("topIconHolder_ul").appendChild(n)}function pe(A){webrtcdev.log("[draw] dom modifier] drawCanvasobj ",A);let t=document.getElementById(A.button.id);t.className=A.button.class_off,t.innerHTML=A.button.html_off,t.onclick=function(){t.className==A.button.class_off?(c(A.drawCanvasContainer),webrtcdev.log("[draw dom modifier] Draw Board Opened "),t.className=A.button.class_on,t.innerHTML=A.button.html_on,QA()):t.className==A.button.class_on&&(webrtcdev.log("[draw dom modifier] Draw Board Closed "),B(A.drawCanvasContainer),t.className=A.button.class_off,t.innerHTML=A.button.html_off,UA())}}function we(A){if(A.container.minbutton_id&&d(A.container.minbutton_id)){var t=d(A.container.minbutton_id);t.onclick=function(){d(A.container.id).hidden=!d(A.container.id).hidden}}}function he(){webrtcdev.log("[timerjs] startForwardTimer");var A=xn,t=kn,n=parseInt(A.innerHTML,10),r=parseInt(t.innerHTML,10);Ce(A,n,t,r)}function fe(){webrtcdev.log("[timerjs] startBackwardTimer",On,kn,xn);let A=xn,t=kn,n=parseInt(A.innerHTML,10),r=parseInt(t.innerHTML,10);Qe(A,n,t,r)}function Ce(A,t,n,r){setInterval(function(){t++,xn.innerHTML=t,60==t&&(t=0,r++,kn.innerHTML=r)},1e3)}function Qe(A,t,n,r){var a=setInterval(function(){t--,xn.innerHTML=t,0==t&&(t=60,r--,kn.innerHTML=r,0>r&&clearInterval(a))},1e3)}function Ue(){if(It.span.currentTimeZone&&l(It.span.currentTimeZone)){let A=l(It.span.currentTimeZone);A.innerHTML=zA()}else webrtcdev.error(" [timer js ] timerobj.span.currentTimeZone DOM doesnt exist ")}function Ee(A){if(0>=It.span.remoteTimeZone.length)return void webrtcdev.warn("[timer js] showRemoteTimeZone - no remoteTimeZone span found ");if(d("remoteTimeZone_"+A.userid))return void webrtcdev.warn("[timer js] showRemoteTimeZone - remoteTimeZone_"+A.userid," already exists , do not append Time zone");for(x in It.span.remoteTimeZone){let t=x+1;if(t>ot.length)return;let n;It.span.remoteTimeZone[x]?(webrtcdev.info("[timer js] showRemoteTimeZone - timerobj.span.remoteTimeZone",It.span.remoteTimeZone[x]," exist for remote"),n=l(It.span.remoteTimeZone[x])):(webrtcdev.info("[timer js] showRemoteTimeZone - timerobj.span.remoteTimeZone getting created for local and remotes"),n=document.createElement("li")),n.id="remoteTimeZone_"+A.userid,n.innerHTML=A.zone+" , "}}function Fe(){try{if(It.span.currentTime&&l(It.span.currentTime)){let A=l(It.span.currentTime);A.innerHTML=new Date().toLocaleTimeString();setTimeout(Fe,1e3)}else webrtcdev.error("[timer js ] startTime - No place for timerobj.span.currentTime_id")}catch(A){webrtcdev.error("[timer js ]",A)}}function be(A){let t=document.createElement("ul");t.id="remoteTimerArea_"+A;let n=_n(A);if(d(n.videoContainer)){let A=d(n.videoContainer).parentNode;return A.appendChild(t),t}return null}function ve(A){if(0>=It.span.remoteTime.length)return void webrtcdev.warn("[timer js] showRemoteTimeZone - no remoteTimeZone span found ");let t={hour:"numeric",minute:"numeric",second:"numeric",hour12:!1,timeZone:A.zone},n;if(It.span.remoteTime[x])webrtcdev.info(" [timer js] startPeersTime - timerobj.span.remoteTime dom ",It.span.remoteTime[x]," exist for remotes"),n=l(It.span.remoteTime[x]),n.id="remoteTime_"+A.userid,n.innerHTML=new Date().toLocaleString("en-US",t);else{if(webrtcdev.info(" timerobj.span.remoteTime - timerobj.span.remoteTime dom  ",It.span.remoteTime[x]," does not exist, creating it"),d("remoteTimeDate_"+A.userid))return;n=document.createElement("span"),n.id="remoteTime_"+A.userid,n.innerHTML=new Date().toLocaleString("en-US",t);var r;r=d("remoteTimerArea_"+A.userid)?d("remoteTimerArea_"+A.userid):be(A.userid),r.appendChild(n)}}function ye(){getWebrtcdevStats.then(A=>{at.send({type:"stats",message:A})})}function He(A,t){webrtcdev.info("[stats] getWebrtcdevStats - remote userid ",A,t)}function Se(){webrtcdev.info("[stats] codec Audio ",at.codecs.audio),webrtcdev.info("[stats] Codec Video ",at.codecs.video)}function Te(A,t){return localStorage.setItem("screenRoomid ",A),webrtcdev.log("[screenshare JS] webrtcdevPrepareScreenShare - screenRoomid : ",A),webrtcdev.log("[screenshare JS] webrtcdevPrepareScreenShare  with sessionnobj : ",t," config ",ft),on=new RTCMultiConnection,on.channel=A,on.socketURL=t.signaller,on.iceServers=t.turn.iceServers,on.candidates={host:!0,stun:!0,turn:!0},on.session={screen:!0,oneway:!0},on.direction="one-way",on.sdpConstraints.mandatory={OfferToReceiveAudio:!1,OfferToReceiveVideo:!0},on.mediaConstraints={audio:!1,video:{frameRate:20,height:240,width:320}},on.dontCaptureUserMedia=!1,on.dontGetRemoteStream=!1,on.dontAttachStream=!1,on.codecs={audio:"opus",video:"VP9"},on.onMediaError=function(A,t){webrtcdev.error("[screenshareJS] onMediaError in _screenshare :",A,t),ne(A.name)},on.onstream=function(t){if(webrtcdev.log("[screenshareJS] onstream in _screenshare :",t),Tt){let t=document.createElement("span");t.innerHTML="<br/>"+A+"<br/>",d(Jt.screenshareContainer).appendChild(t)}if("remote"==t.type&&"local"!=t.type){ne("started streaming remote's screen"),webrtcdev.log("[screensharejs] on stream remote "),t.stream.streamid?(webrtcdev.log("[screensharejs] remote screen event.stream.streamId "+t.stream.streamId),dn=t.stream.streamid):t.streamid&&(webrtcdev.log("[screensharejs] remote screen event.streamid "+t.streamid),dn=t.streamid);let n=document.getElementById(Jt.screenshareContainer).querySelectorAll("video");for(x in n)n[x].playing||(n[x].hidden=!0);let r=document.createElement("video");r.muted=!0,r.id="video_"+A;let a=t.stream;aA(r,a).then(()=>{d(Jt.screenshareContainer).appendChild(r)}),c(Jt.screenshareContainer),at.send({type:"screenshare",screenid:A,message:"screenshareStartedViewing"}),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"screenshare",action:"onScreenShareStarted",type:"remote"}}))}else ne("started streaming local screen"),webrtcdev.log("[screenshareJS] onstream local , send message to remote to connect to scr room"),at.send({type:"screenshare",screenid:A,screenStreamid:dn,message:"startscreenshare"}),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"screenshare",action:"onScreenShareStarted",type:"local"}}))},on.onstreamended=function(A){A&&webrtcdev.log("[screenshare JS] onstreamended -",A);let t=Jt.button.shareButton.id;t&&document.getElementById(t)&&(document.getElementById(t).className=Jt.button.shareButton.class_off,document.getElementById(t).innerHTML=Jt.button.shareButton.html_off),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"screenshare",action:"onScreenShareEnded"}}))},on.onopen=function(){webrtcdev.log("[screensharejs] scrConn onopen - ",on.connectionType)},on.onerror=function(A){webrtcdev.error("[screensharejs] scrConn error - ",A)},on.onEntireSessionClosed=function(A){webrtcdev.log("[screensharejs] scrConn onEntireSessionClosed - ",A)},on.socketMessageEvent="scrRTCMultiConnection-Message",on.socketCustomEvent="scrRTCMultiConnection-Custom-Message",on.enableFileSharing=!1,on}function Ie(A){return webrtcdev.log("[screenshareJS] webrtcdevSharescreen, preparing screen-share by initiating ScrConn , scrroomid - ",A),webrtcdev.log("[screenshareJS] webrtcdevSharescreen, sessionobj - ",Zt),new Promise(t=>{on=Te(A,Zt),t(A)}).then(function(A){socket?(webrtcdev.log("[screenshare JS] open-channel-screenshare on - ",socket.io.uri),socket.emit("open-channel-screenshare",{channel:A,sender:it,maxAllowed:100}),te("Making a new session for screenshare"+A)):webrtcdev.error("[screenshare JS] parent socket doesnt exist "),socket.on("open-channel-screenshare-resp",function(t){webrtcdev.log("[screenshare JS] open-channel-screenshare-response -",t),t.status&&t.channel==A&&on.open(A,function(){webrtcdev.log("[screenshare JS] webrtcdevSharescreen, opened up room for screen share ")})})})}function Ne(A,t){return webrtcdev.log("[screenshareJS] connectScrWebRTC, first preparing screenshare by initiating ScrConn , scrroomid - ",t),webrtcdev.log("[screenshareJS] webrtcdevSharescreen, sessionobj - ",Zt),new Promise(A=>{Te(t,Zt),A(t)}).then(function(t){webrtcdev.log("[screenshare JS] connectScrWebRTC -> ",A,t),"join"==A?(on.join(t),te("Connected with existing Screenshare channel "+t)):(te("Connection type not found for Screenshare "),webrtcdev.error("[screenshare JS] connectScrWebRTC - Connection type not found for Screenshare "))})}function Re(){try{at.send({type:"screenshare",message:"stoppedscreenshare"}),on.closeEntireSession(),webrtcdev.log("[screenshare JS] Sender stopped: screenRoomid ",ln,"| Screen stopped ",on,"| container ",d(Jt.screenshareContainer)),sn&&(sn.stop(),sn=null);let A=on.streamEvents.selectFirst();A&&(webrtcdev.error("[screensharejs] webrtcdevStopShareScreen - stoppping the stream"),A.stream.getTracks().forEach(A=>A.stop())),Le()}catch(A){webrtcdev.error("[screensharejs] webrtcdevStopShareScreen - ",A)}}function Le(A){try{on.onstreamended(),on.removeStream(A),on.close(),on=null;let t=document.getElementById(Jt.screenshareContainer).querySelectorAll("video");for(x in t)t[x].playing||(t[x].hidden=!0);Jt.screenshareContainer&&d(Jt.screenshareContainer)&&(d(Jt.screenshareContainer).innerHTML="")}catch(A){webrtcdev.error("[screensharejs] webrtcdevStopShareScreen - ",A)}}function Me(){d("alertBox").hidden=!1,d("alertBox").innerHTML=""}function De(A){if(!A)throw"MediaStream is mandatory.";this.start=function(n){var r=cn?window.StereoRecorder:window.MediaRecorderWrapper;-1!=this.mimeType.indexOf("video")&&(r=cn?window.WhammyRecorder:window.MediaRecorderWrapper),"image/gif"===this.mimeType&&(r=window.GifRecorder),t=new r(A),t.ondataavailable=this.ondataavailable,t.onstop=this.onstop,t.onStartedDrawingNonBlankFrames=this.onStartedDrawingNonBlankFrames,t=Oe(t,this),t.start(n)},this.onStartedDrawingNonBlankFrames=function(){},this.clearOldRecordedFrames=function(){t&&t.clearOldRecordedFrames()},this.stop=function(){t&&t.stop()},this.ondataavailable=function(A){webrtcdev.log("ondataavailable..",A)},this.onstop=function(A){webrtcdev.warn("stopped..",A)};var t}function r(A,t){var n=window.MediaStreamRecorderScriptsDir,a=document.createElement("script");a.src=n+A,a.onload=t||function(){},document.documentElement.appendChild(a)}function Oe(A,n){for(var r in n=ke(n),n)"function"!=typeof n[r]&&(A[r]=n[r]);return A}function ke(A){var t={};for(var n in A)if(-1!=n.indexOf("-")){var r=n.split("-"),a=r[0]+r[1].split("")[0].toUpperCase()+r[1].substr(1);t[a]=A[n]}else t[n]=A[n];return t}function xe(A,t){function r(A,t){for(var n=A.length+t.length,r=new Float32Array(n),a=0,s=0;s<n;)r[s++]=A[a],r[s++]=t[a],a++;return r}function a(A,t){for(var n=new Float32Array(t),r=0,a=A.length,s=0,d;s<a;s++)d=A[s],n.set(d,r),r+=d.length;return n}function s(A,t,n){for(var r=n.length,a=0;a<r;a++)A.setUint8(t+a,n.charCodeAt(a))}var d=[],l=[],c=!1,B=0,g=44100,u=t.mono?1:2,m,p,w,h,C;this.record=function(){c=!0,d.length=l.length=0,B=0},this.requestData=function(){if(0==B)return void(U=!1);U=!0;var A=d.slice(0),c=l.slice(0),m=B;d.length=l.length=[],B=0,U=!1;var p=a(A,m),w=a(A,m);if(2===u)var h=r(p,w);else var h=p;var C=new ArrayBuffer(44+2*h.length),Q=new DataView(C);s(Q,0,"RIFF"),Q.setUint32(4,44+2*h.length,!0),s(Q,8,"WAVE"),s(Q,12,"fmt "),Q.setUint32(16,16,!0),Q.setUint16(20,1,!0),Q.setUint16(22,u,!0),Q.setUint32(24,g,!0),Q.setUint32(28,4*g,!0),Q.setUint16(32,2*u,!0),Q.setUint16(34,16,!0),s(Q,36,"data"),Q.setUint32(40,2*h.length,!0);for(var E=h.length,F=44,b=0;b<E;b++)Q.setInt16(F,h[b]*(32767*1),!0),F+=2;var H=new Blob([Q],{type:"audio/wav"});webrtcdev.debug("audio recorded blob size:",n(H.size)),t.ondataavailable(H)},this.stop=function(){c=!1,this.requestData()};var h=Bn.AudioContext;Bn.AudioContextConstructor||(Bn.AudioContextConstructor=new h);var C=Bn.AudioContextConstructor;Bn.VolumeGainNode||(Bn.VolumeGainNode=C.createGain());var p=Bn.VolumeGainNode;Bn.AudioInput||(Bn.AudioInput=C.createMediaStreamSource(A));var w=Bn.AudioInput;w.connect(p);var Q=t.bufferSize||2048;if(0==t.bufferSize&&(Q=0),C.createJavaScriptNode)m=C.createJavaScriptNode(Q,u,u);else if(C.createScriptProcessor)m=C.createScriptProcessor(Q,u,u);else throw"WebAudio API has no support on this browser.";Q=m.bufferSize,webrtcdev.debug("using audio buffer-size:",Q);var U=!1;window.scriptprocessornode=m,1==u&&webrtcdev.debug("It seems mono audio. All right-channels are skipped."),m.onaudioprocess=function(A){if(c&&!U){var t=A.inputBuffer.getChannelData(0);if(d.push(new Float32Array(t)),2==u){var n=A.inputBuffer.getChannelData(1);l.push(new Float32Array(n))}B+=Q}},p.connect(m),m.connect(C.destination)}function Ke(A,t){function r(){if(!B){if(d)return setTimeout(r,100);var A=new Date().getTime()-w;return A?void(w=new Date().getTime(),u.drawImage(p,0,0,g.width,g.height),!B&&l.push({duration:A,image:g.toDataURL("image/webp")}),!c&&!a(l[l.length-1])&&(c=!0,t.onStartedDrawingNonBlankFrames()),setTimeout(r,10)):r()}}function a(A,t,n){var r=document.createElement("canvas");r.width=g.width,r.height=g.height;var a=r.getContext("2d"),s={r:0,g:0,b:0},d=nt(qA(255,2)+qA(255,2)+qA(255,2)),l=t&&0<=t&&1>=t?t:0,c=n&&0<=n&&1>=n?n:0,B=new Image,u,m,p;B.src=A.image,a.drawImage(B,0,0,g.width,g.height);var w=a.getImageData(0,0,g.width,g.height);u=0,m=w.data.length,p=w.data.length/4;for(var h=0;h<m;h+=4){var C={r:w.data[h],g:w.data[h+1],b:w.data[h+2]},Q=nt(qA(C.r-s.r,2)+qA(C.g-s.g,2)+qA(C.b-s.b,2));Q<=d*l&&u++}return!(p-u<=p*c)}function s(A,t,n,r){var a=document.createElement("canvas");a.width=g.width,a.height=g.height;for(var s=a.getContext("2d"),d=[],l=t&&0<t&&t<=A.length?t:A.length,c={r:0,g:0,b:0},B=nt(qA(255,2)+qA(255,2)+qA(255,2)),u=n&&0<=n&&1>=n?n:0,m=r&&0<=r&&1>=r?r:0,p=!1,w=0;w<l;w++){var h,C,Q;if(!p){var U=new Image;U.src=A[w].image,s.drawImage(U,0,0,g.width,g.height);var E=s.getImageData(0,0,g.width,g.height);h=0,C=E.data.length,Q=E.data.length/4;for(var F=0;F<C;F+=4){var b={r:E.data[F],g:E.data[F+1],b:E.data[F+2]},H=nt(qA(b.r-c.r,2)+qA(b.g-c.g,2)+qA(b.b-c.b,2));H<=B*u&&h++}}!p&&Q-h<=Q*m||(-1===t&&(p=!0),d.push(A[w]))}return d=d.concat(A.slice(l)),0>=d.length&&d.push(A[A.length-1]),d}this.record=function(){this.width||(this.width=320),this.height||(this.height=240),this.video&&this.video instanceof HTMLVideoElement&&(!this.width&&(this.width=p.videoWidth||320),!this.height&&(this.height=p.videoHeight||240)),this.video||(this.video={width:this.width,height:this.height}),this.canvas||(this.canvas={width:this.width,height:this.height}),g.width=this.canvas.width,g.height=this.canvas.height,this.video&&this.video instanceof HTMLVideoElement?p=this.video.cloneNode():(p=document.createElement("video"),p.src=wn.createObjectURL(A),p.width=this.video.width,p.height=this.video.height),p.muted=!0,p.play(),w=new Date().getTime(),h=new gn.Video,webrtcdev.log("canvas resolutions",g.width,"*",g.height),webrtcdev.log("video width/height",p.width||g.width,"*",p.height||g.height),r()},this.clearOldRecordedFrames=function(){l=[]};var d=!1;this.requestData=function(){if(!l.length)return void(d=!1);d=!0;var A=l.slice(0);l=[],h.frames=s(A,-1);var r=h.compile();t.ondataavailable(r),webrtcdev.debug("video recorded blob size:",n(r.size)),d=!1};var l=[],c=!1,B=!1;this.stop=function(){B=!0,this.requestData()};var g=document.createElement("canvas"),u=g.getContext("2d"),m=this,p,w,h}function _e(A){this.start=function(r){for(var a in r=r||1e3,t=new Ke(A,this),this)"function"!=typeof this[a]&&(t[a]=this[a]);t.record(),n=setInterval(function(){t.requestData()},r)},this.stop=function(){t&&(t.stop(),clearTimeout(n))},this.clearOldRecordedFrames=function(){t&&t.clearOldRecordedFrames()},this.ondataavailable=function(){};var t,n}function Pe(A){function t(){Date.now();var A=new Blob([new Uint8Array(B.stream().bin)],{type:"image/gif"});n.ondataavailable(A),B.stream().bin=[]}if(!window.GIFEncoder)throw"Please link: https://cdn.webrtc-experiment.com/gif-recorder.js";this.start=function(A){function n(A){d=un(n),typeof c===void 0&&(c=A);90>A-c||(a.drawImage(s,0,0,u,m),B.addFrame(a),c=A)}A=A||1e3;var u=this.videoWidth||320,m=this.videoHeight||240;r.width=s.width=u,r.height=s.height=m,B=new GIFEncoder,B.setRepeat(0),B.setDelay(this.frameRate||200),B.setQuality(this.quality||1),B.start(),l=Date.now(),d=un(n),g=setTimeout(t,A)};this.stop=function(){d&&(mn(d),clearTimeout(g),t())},this.ondataavailable=function(){},this.onstop=function(){};var n=this,r=document.createElement("canvas"),a=r.getContext("2d"),s=document.createElement("video");s.muted=!0,s.autoplay=!0,s.src=wn.createObjectURL(A),s.play();var d=null,l,c,B,g}function n(A){if(0===A)return"0 Bytes";var t=parseInt(et(ZA(A)/ZA(1000)),10);return(A/qA(1000,t)).toPrecision(3)+" "+["Bytes","KB","MB","GB","TB"][t]}function Ve(A,t){function r(){return(t.disableLogs||webrtcdev.debug("started recording "+t.type+" stream."),w)?(w.clearRecordedData(),w.resume(),u.recordingDuration&&g(),u):(a(function(){u.recordingDuration&&g()}),u)}function a(n){n&&(t.initCallback=function(){n(),n=t.initCallback=null});var r=new Ge(A,t);w=new r(A,t),w.record(),t.disableLogs||webrtcdev.debug("Initialized recorderType:",w.constructor.name,"for output-type:",t.type)}function s(A){function r(r){for(var s in w)u&&(u[s]=w[s]),a&&(a[s]=w[s]);var d=w.blob;if(!d)if(r)w.blob=d=r;else throw"Recording failed.";if(A){var l=wn.createObjectURL(d);A(l)}d&&!t.disableLogs&&webrtcdev.debug(d.type,"->",n(d.size)),t.autoWriteToDisk&&B(function(A){var n={};n[t.type+"Blob"]=A,En.Store(n)})}if(!w)return webrtcdev.warn(m);var a=this;t.disableLogs||webrtcdev.warn("Stopped recording "+t.type+" stream."),"gif"===t.type?(w.stop(),r()):w.stop(r)}function d(){return w?void(w.pause(),!t.disableLogs&&webrtcdev.debug("Paused recording.")):webrtcdev.warn(m)}function l(){return w?void(w.resume(),!t.disableLogs&&webrtcdev.debug("Resumed recording.")):webrtcdev.warn(m)}function c(A){postMessage(new FileReaderSync().readAsDataURL(A))}function B(A,n){function r(A){var t=wn.createObjectURL(new Blob([A.toString(),"this.onmessage =  function (e) {"+A.name+"(e.data);}"],{type:"application/javascript"})),n=new Worker(t);return wn.revokeObjectURL(t),n}if(!A)throw"Pass a callback function over getDataURL.";var a=n?n.blob:(w||{}).blob;if(!a)return t.disableLogs||webrtcdev.warn("Blob encoder did not finish its job yet."),void setTimeout(function(){B(A,n)},1e3);if("undefined"!=typeof Worker&&!navigator.mozGetUserMedia){var s=r(c);s.onmessage=function(t){A(t.data)},s.postMessage(a)}else{var d=new FileReader;d.readAsDataURL(a),d.onload=function(t){A(t.target.result)}}}function g(){setTimeout(function(){s(u.onRecordingStopped)},u.recordingDuration)}if(!A)throw"MediaStream is mandatory.";t=t||{type:"video"},t=new ze(A,t);var u=this,m="It seems that \"startRecording\" is not invoked for "+t.type+" recorder.",p={startRecording:r,stopRecording:s,pauseRecording:d,resumeRecording:l,initRecorder:a,setRecordingDuration:function(A,t){if("undefined"==typeof A)throw"milliseconds is required.";if("number"!=typeof A)throw"milliseconds must be a number.";return u.recordingDuration=A,u.onRecordingStopped=t||function(){},{onRecordingStopped:function(A){u.onRecordingStopped=A}}},clearRecordedData:function(){return w?void(w.clearRecordedData(),!t.disableLogs&&webrtcdev.debug("Cleared old recorded data.")):webrtcdev.warn(m)},getBlob:function(){return w?w.blob:webrtcdev.warn(m)},getDataURL:B,toURL:function(){return w?wn.createObjectURL(w.blob):webrtcdev.warn(m)},save:function(A){return w?void Je(w.blob,A):webrtcdev.warn(m)},getFromDisk:function(A){return w?void Ve.getFromDisk(t.type,A):webrtcdev.warn(m)},setAdvertisementArray:function(A){t.advertisement=[];for(var n=A.length,r=0;r<n;r++)t.advertisement.push({duration:r,image:A[r]})},blob:null,bufferSize:0,sampleRate:0,buffer:null,view:null},w;if(!this)return u=p,p;for(var h in p)this[h]=p[h];return u=this,p}function ze(A,t){return t.recorderType&&!t.type&&(t.recorderType===_e||t.recorderType===We?t.type="video":t.recorderType===Pe?t.type="gif":t.recorderType===xe?t.type="audio":t.recorderType===De&&(A.getAudioTracks().length&&A.getVideoTracks().length?t.type="video":A.getAudioTracks().length&&!A.getVideoTracks().length?t.type="audio":!A.getAudioTracks().length&&A.getVideoTracks().length&&(t.type="audio"))),"undefined"!=typeof De&&"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&(!t.mimeType&&(t.mimeType="video/webm"),!t.type&&(t.type=t.mimeType.split("/")[0]),!t.bitsPerSecond),t.type||(t.mimeType&&(t.type=t.mimeType.split("/")[0]),!t.type&&(t.type="audio")),t}function Ge(A,t){var n;return(Cn||hn||fn)&&(n=xe),"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&!Cn&&(n=De),"video"===t.type&&(Cn||fn)&&(n=_e),"gif"===t.type&&(n=Pe),"canvas"===t.type&&(n=We),Ye()&&n!==We&&n!==Pe&&"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&A.getVideoTracks().length&&(n=De),t.recorderType&&(n=t.recorderType),t.disableLogs||!n||!n.name||webrtcdev.debug("Using recorderType:",n.name||n.constructor.name),n}function Xe(A){this.addStream=function(t){t&&(A=t)},this.mediaType={audio:!0,video:!0},this.startRecording=function(){var t=this.mediaType,n=this.mimeType||{audio:null,video:null,gif:null},r;if("function"!=typeof t.audio&&Ye()&&A.getAudioTracks&&!A.getAudioTracks().length&&(t.audio=!1),"function"!=typeof t.video&&Ye()&&A.getVideoTracks&&!A.getVideoTracks().length&&(t.video=!1),!t.audio&&!t.video)throw"MediaStream must have either audio or video tracks.";if(!t.audio||(r=null,"function"==typeof t.audio&&(r=t.audio),this.audioRecorder=new Ve(A,{type:"audio",bufferSize:this.bufferSize,sampleRate:this.sampleRate,numberOfAudioChannels:this.numberOfAudioChannels||2,disableLogs:this.disableLogs,recorderType:r,mimeType:n.audio}),!t.video&&this.audioRecorder.startRecording()),!!t.video){r=null,"function"==typeof t.video&&(r=t.video);var a=A;if(Ye()&&!!t.audio&&"function"==typeof t.audio){var s=A.getVideoTracks()[0];navigator.mozGetUserMedia?(a=new Qn,a.addTrack(s),r&&r===_e&&(r=De)):a=new Qn([s])}this.videoRecorder=new Ve(a,{type:"video",video:this.video,canvas:this.canvas,frameInterval:this.frameInterval||10,disableLogs:this.disableLogs,recorderType:r,mimeType:n.video}),t.audio||this.videoRecorder.startRecording()}if(!!t.audio&&!!t.video){var d=this;Ye()?(d.audioRecorder=null,d.videoRecorder.startRecording()):d.videoRecorder.initRecorder(function(){d.audioRecorder.initRecorder(function(){d.videoRecorder.startRecording(),d.audioRecorder.startRecording()})})}!t.gif||(r=null,"function"==typeof t.gif&&(r=t.gif),this.gifRecorder=new Ve(A,{type:"gif",frameRate:this.frameRate||200,quality:this.quality||10,disableLogs:this.disableLogs,recorderType:r,mimeType:n.gif}),this.gifRecorder.startRecording())},this.stopRecording=function(A){A=A||function(){},this.audioRecorder&&this.audioRecorder.stopRecording(function(t){A(t,"audio")}),this.videoRecorder&&this.videoRecorder.stopRecording(function(t){A(t,"video")}),this.gifRecorder&&this.gifRecorder.stopRecording(function(t){A(t,"gif")})},this.pauseRecording=function(){this.audioRecorder&&this.audioRecorder.pauseRecording(),this.videoRecorder&&this.videoRecorder.pauseRecording(),this.gifRecorder&&this.gifRecorder.pauseRecording()},this.resumeRecording=function(){this.audioRecorder&&this.audioRecorder.resumeRecording(),this.videoRecorder&&this.videoRecorder.resumeRecording(),this.gifRecorder&&this.gifRecorder.resumeRecording()},this.getBlob=function(A){var t={};return this.audioRecorder&&(t.audio=this.audioRecorder.getBlob()),this.videoRecorder&&(t.video=this.videoRecorder.getBlob()),this.gifRecorder&&(t.gif=this.gifRecorder.getBlob()),A&&A(t),t},this.getDataURL=function(A){function t(A,t){if("undefined"!=typeof Worker){var r=n(function(A){postMessage(new FileReaderSync().readAsDataURL(A))});r.onmessage=function(A){t(A.data)},r.postMessage(A)}else{var a=new FileReader;a.readAsDataURL(A),a.onload=function(A){t(A.target.result)}}}function n(A){var t=wn.createObjectURL(new Blob([A.toString(),"this.onmessage =  function (e) {"+A.name+"(e.data);}"],{type:"application/javascript"})),n=new Worker(t),r;if("undefined"!=typeof wn)r=wn;else if("undefined"!=typeof webkitURL)r=webkitURL;else throw"Neither URL nor webkitURL detected.";return r.revokeObjectURL(t),n}this.getBlob(function(n){n.audio&&n.video?t(n.audio,function(r){t(n.video,function(t){A({audio:r,video:t})})}):n.audio?t(n.audio,function(t){A({audio:t})}):n.video&&t(n.video,function(t){A({video:t})})})},this.writeToDisk=function(){Ve.writeToDisk({audio:this.audioRecorder,video:this.videoRecorder,gif:this.gifRecorder})},this.save=function(A){A=A||{audio:!0,video:!0,gif:!0},!!A.audio&&this.audioRecorder&&this.audioRecorder.save("string"==typeof A.audio?A.audio:""),!!A.video&&this.videoRecorder&&this.videoRecorder.save("string"==typeof A.video?A.video:""),!!A.gif&&this.gifRecorder&&this.gifRecorder.save("string"==typeof A.gif?A.gif:"")}}function n(A){if(0===A)return"0 Bytes";var t=parseInt(et(ZA(A)/ZA(1000)),10);return(A/qA(1000,t)).toPrecision(3)+" "+["Bytes","KB","MB","GB","TB"][t]}function Je(A,t){if(!A)throw"Blob object is required.";if(!A.type)try{A.type="video/webm"}catch(A){}var n=(A.type||"video/webm").split("/")[1];if(t&&-1!==t.indexOf(".")){var r=t.split(".");t=r[0],n=r[1]}var a=(t||tt(9999999999*Math.random())+888888888)+"."+n;if("undefined"!=typeof navigator.msSaveOrOpenBlob)return navigator.msSaveOrOpenBlob(A,a);if("undefined"!=typeof navigator.msSaveBlob)return navigator.msSaveBlob(A,a);var s=document.createElement("a");s.href=wn.createObjectURL(A),s.target="_blank",s.download=a,!navigator.mozGetUserMedia||(s.onclick=function(){(document.body||document.documentElement).removeChild(s)},(document.body||document.documentElement).appendChild(s));var d=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});s.dispatchEvent(d),navigator.mozGetUserMedia||wn.revokeObjectURL(s.href)}function Ye(){var A=!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),t=!!window.chrome&&!A,n="undefined"!=typeof window.InstallTrigger;if(n)return!0;var r=navigator.appVersion,a=navigator.userAgent,s=""+parseFloat(navigator.appVersion),d=parseInt(navigator.appVersion,10),l,c;return(t||A)&&(l=a.indexOf("Chrome"),s=a.substring(l+7)),-1!==(c=s.indexOf(";"))&&(s=s.substring(0,c)),-1!==(c=s.indexOf(" "))&&(s=s.substring(0,c)),d=parseInt(""+s,10),isNaN(d)&&(s=""+parseFloat(navigator.appVersion),d=parseInt(navigator.appVersion,10)),49<=d}function De(A,t){function n(){if("active"in A){if(!A.active)return!1;}else if("ended"in A&&A.ended)return!1;return!0}var r=this;if(t=t||{mimeType:"video/webm"},"audio"===t.type){if(A.getVideoTracks().length&&A.getAudioTracks().length){var a;navigator.mozGetUserMedia?(a=new Qn,a.addTrack(A.getAudioTracks()[0])):a=new Qn(A.getAudioTracks()),A=a}t.mimeType&&-1!==t.mimeType.toString().toLowerCase().indexOf("audio")||(t.mimeType=Cn?"audio/webm":"audio/ogg"),t.mimeType&&"audio/ogg"!==t.mimeType.toString().toLowerCase()&&!!navigator.mozGetUserMedia&&(t.mimeType="audio/ogg")}this.record=function(){r.blob=null;var n=t;t.disableLogs||webrtcdev.log("Passing following config over MediaRecorder API.",n),s&&(s=null),Cn&&!Ye()&&(n="video/vp8");try{s=new MediaRecorder(A,n)}catch(t){s=new MediaRecorder(A)}"canRecordMimeType"in s&&!1===s.canRecordMimeType(t.mimeType)&&!t.disableLogs&&webrtcdev.warn("MediaRecorder API seems unable to record mimeType:",t.mimeType),s.ignoreMutedMedia=t.ignoreMutedMedia||!1,s.ondataavailable=function(A){r.dontFireOnDataAvailableEvent||!A.data||!A.data.size||100>A.data.size||r.blob||(r.blob=t.getNativeBlob?A.data:new Blob([A.data],{type:t.mimeType||"video/webm"}),r.recordingCallback&&(r.recordingCallback(r.blob),r.recordingCallback=null))},s.onerror=function(A){t.disableLogs||("InvalidState"===A.name?webrtcdev.error("The MediaRecorder is not in a state in which the proposed operation is allowed to be executed."):"OutOfMemory"===A.name?webrtcdev.error("The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute."):"IllegalStreamModification"===A.name?webrtcdev.error("A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute."):"OtherRecordingError"===A.name?webrtcdev.error("Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute."):"GenericError"===A.name?webrtcdev.error("The UA cannot provide the codec or recording option that has been requested.",A):webrtcdev.error("MediaRecorder Error",A)),"inactive"!==s.state&&"stopped"!==s.state&&s.stop()},s.start(36e5),t.onAudioProcessStarted&&t.onAudioProcessStarted(),t.initCallback&&t.initCallback()},this.stop=function(A){s&&(this.recordingCallback=function(t){s=null,A&&A(t)},"recording"===s.state&&s.stop())},this.pause=function(){s&&("recording"!==s.state||s.pause())},this.resume=function(){if(this.dontFireOnDataAvailableEvent){this.dontFireOnDataAvailableEvent=!1;var A=t.disableLogs;return t.disableLogs=!0,this.record(),void(t.disableLogs=A)}s&&("paused"!==s.state||s.resume())},this.clearRecordedData=function(){s&&(this.pause(),this.dontFireOnDataAvailableEvent=!0,this.stop())};var r=this,s;(function A(){return s?!1===n()?(t.disableLogs||webrtcdev.log("MediaStream seems stopped."),void r.stop()):void setTimeout(A,1e3):void 0})()}function xe(A,t){function n(){if("active"in A){if(!A.active)return!1;}else if("ended"in A&&A.ended)return!1;return!0}function r(A,t){function n(A,t){function n(A,t){for(var n=new Float64Array(t),r=0,a=A.length,s=0,d;s<a;s++)d=A[s],n.set(d,r),r+=d.length;return n}function r(A,t){for(var n=A.length+t.length,r=new Float64Array(n),a=0,s=0;s<n;)r[s++]=A[a],r[s++]=t[a],a++;return r}function a(A,t,n){for(var r=n.length,a=0;a<r;a++)A.setUint8(t+a,n.charCodeAt(a))}var s=A.numberOfAudioChannels,d=A.leftBuffers.slice(0),l=A.rightBuffers.slice(0),c=A.sampleRate,B=A.internalInterleavedLength;2===s&&(d=n(d,B),l=n(l,B)),1===s&&(d=n(d,B));var g;2===s&&(g=r(d,l)),1===s&&(g=d);var u=g.length,m=new ArrayBuffer(44+2*u),p=new DataView(m);a(p,0,"RIFF"),p.setUint32(4,44+2*u,!0),a(p,8,"WAVE"),a(p,12,"fmt "),p.setUint32(16,16,!0),p.setUint16(20,1,!0),p.setUint16(22,s,!0),p.setUint32(24,c,!0),p.setUint32(28,2*c,!0),p.setUint16(32,2*s,!0),p.setUint16(34,16,!0),a(p,36,"data"),p.setUint32(40,2*u,!0);for(var w=44,h=0;h<u;h++)p.setInt16(w,g[h]*(32767*1),!0),w+=2;return t?t({buffer:m,view:p}):void postMessage({buffer:m,view:p})}if(!Cn)return void n(A,function(A){t(A.buffer,A.view)});var r=a(n);r.onmessage=function(A){t(A.data.buffer,A.data.view),wn.revokeObjectURL(r.workerURL)},r.postMessage(A)}function a(A){var t=wn.createObjectURL(new Blob([A.toString(),";this.onmessage =  function (e) {"+A.name+"(e.data);}"],{type:"application/javascript"})),n=new Worker(t);return n.workerURL=t,n}function s(A){if(!U){if(!1===n()&&(!t.disableLogs&&webrtcdev.log("MediaStream seems stopped."),m.disconnect(),B=!1),!B)return void w.disconnect();E||(E=!0,t.onAudioProcessStarted&&t.onAudioProcessStarted(),t.initCallback&&t.initCallback());var r=A.inputBuffer.getChannelData(0);if(l.push(new Float32Array(r)),2===u){var a=A.inputBuffer.getChannelData(1);c.push(new Float32Array(a))}g+=C}}if(!A.getAudioTracks().length)throw"Your stream has no audio tracks.";t=t||{};var d=this,l=[],c=[],B=!1,g=0,u=2,m;!0===t.leftChannel&&(u=1),1===t.numberOfAudioChannels&&(u=1),t.disableLogs||webrtcdev.debug("StereoAudioRecorder is set to record number of channels: ",u),this.record=function(){if(!1===n())throw"Please make sure MediaStream is active.";l.length=c.length=0,g=0,w&&w.connect(m),E=U=!1,B=!0},this.stop=function(A){B=!1,r({sampleRate:Q,numberOfAudioChannels:u,internalInterleavedLength:g,leftBuffers:l,rightBuffers:1===u?[]:c},function(t,n){d.blob=new Blob([n],{type:"audio/wav"}),d.buffer=new ArrayBuffer(n.buffer.byteLength),d.view=n,d.sampleRate=Q,d.bufferSize=C,d.length=g,A&&A(),E=!1})},Un.AudioContextConstructor||(Un.AudioContextConstructor=new Un.AudioContext);var p=Un.AudioContextConstructor,w=p.createMediaStreamSource(A),h=[0,256,512,1024,2048,4096,8192,16384],C="undefined"==typeof t.bufferSize?4096:t.bufferSize;if(-1!==h.indexOf(C)||t.disableLogs||webrtcdev.warn("Legal values for buffer-size are "+JSON.stringify(h,null,"\t")),p.createJavaScriptNode)m=p.createJavaScriptNode(C,u,u);else if(p.createScriptProcessor)m=p.createScriptProcessor(C,u,u);else throw"WebAudio API has no support on this browser.";w.connect(m),t.bufferSize||(C=m.bufferSize);var Q="undefined"==typeof t.sampleRate?p.sampleRate||44100:t.sampleRate;(22050>Q||96e3<Q)&&!t.disableLogs&&webrtcdev.warn("sample-rate must be under range 22050 and 96000."),t.disableLogs||(webrtcdev.log("sample-rate",Q),webrtcdev.log("buffer-size",C));var U=!1;this.pause=function(){U=!0},this.resume=function(){if(!1===n())throw"Please make sure MediaStream is active.";return B?void(U=!1):(t.disableLogs||webrtcdev.info("Seems recording has been restarted."),void this.record())},this.clearRecordedData=function(){this.pause(),l.length=c.length=0,g=0};var E=!1;m.onaudioprocess=s,m.connect(p.destination)}function We(A,t){function n(){var t=document.createElement("canvas"),n=t.getContext("2d");return t.width=A.width,t.height=A.height,n.drawImage(A,0,0),t}function r(){if(u)return m=new Date().getTime(),setTimeout(r,500);if("canvas"===A.nodeName.toLowerCase()){var a=new Date().getTime()-m;return m=new Date().getTime(),p.frames.push({image:n(),duration:a}),void(g&&setTimeout(r,t.frameInterval))}html2canvas(A,{grabMouse:"undefined"==typeof t.showMousePointer||t.showMousePointer,onrendered:function(A){var n=new Date().getTime()-m;return n?void(m=new Date().getTime(),p.frames.push({image:A.toDataURL("image/webp",1),duration:n}),g&&setTimeout(r,t.frameInterval)):setTimeout(r,t.frameInterval)}})}if("undefined"==typeof html2canvas&&"canvas"!==A.nodeName.toLowerCase())throw"Please link: https://cdn.webrtc-experiment.com/screenshot.js";t=t||{},t.frameInterval||(t.frameInterval=10);var a=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach(function(A){A in document.createElement("canvas")&&(a=!0)});var s=(!!window.webkitRTCPeerConnection||!!window.webkitGetUserMedia)&&!!window.chrome,d=50,l=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);s&&l&&l[2]&&(d=parseInt(l[2],10)),s&&52>d&&(a=!1);var c,B;if(!a)!navigator.mozGetUserMedia||t.disableLogs||webrtcdev.error("Canvas recording is NOT supported in Firefox.");else if(t.disableLogs||webrtcdev.debug("Your browser supports both MediRecorder API and canvas.captureStream!"),A instanceof HTMLCanvasElement)c=A;else if(A instanceof CanvasRenderingContext2D)c=A.canvas;else throw"Please pass either HTMLCanvasElement or CanvasRenderingContext2D.";var g;this.record=function(){if(g=!0,a){var A;"captureStream"in c?A=c.captureStream(25):"mozCaptureStream"in c?A=c.mozCaptureStream(25):"webkitCaptureStream"in c&&(A=c.webkitCaptureStream(25));try{var n=new Qn;n.addTrack(A.getVideoTracks()[0]),A=n}catch(A){}if(!A)throw"captureStream API are NOT available.";B=new De(A,{mimeType:"video/webm"}),B.record()}else p.frames=[],m=new Date().getTime(),r();t.initCallback&&t.initCallback()},this.getWebPImages=function(n){if("canvas"!==A.nodeName.toLowerCase())return void n();var r=p.frames.length;p.frames.forEach(function(A,n){var a=r-n;t.disableLogs||webrtcdev.debug(a+"/"+r+" frames remaining"),t.onEncodingCallback&&t.onEncodingCallback(a,r);var s=A.image.toDataURL("image/webp",1);p.frames[n].image=s}),t.disableLogs||webrtcdev.debug("Generating WebM"),n()},this.stop=function(A){g=!1;var n=this;return a&&B?void B.stop(A):void this.getWebPImages(function(){p.compile(function(r){t.disableLogs||webrtcdev.debug("Recording finished!"),n.blob=r,n.blob.forEach&&(n.blob=new Blob([],{type:"video/webm"})),A&&A(n.blob),p.frames=[]})})};var u=!1;this.pause=function(){u=!0},this.resume=function(){u=!1,g||this.record()},this.clearRecordedData=function(){this.pause(),p.frames=[]};var m=new Date().getTime(),p=new gn.Video(100)}function _e(A,t){function n(A){A="undefined"==typeof A?10:A;var t=new Date().getTime()-g;return t?d?(g=new Date().getTime(),setTimeout(n,100)):void(g=new Date().getTime(),B.paused&&B.play(),c.drawImage(B,0,0,l.width,l.height),u.frames.push({duration:t,image:l.toDataURL("image/webp")}),!s&&setTimeout(n,A,A)):setTimeout(n,A,A)}function r(A){var t=-1,n=A.length,r=function(){return t++,t===n?void A.callback():void A.functionToLoop(r,t)};r()}function a(A,t,n,a,s){var d=document.createElement("canvas");d.width=l.width,d.height=l.height;var c=d.getContext("2d"),B=[],g=t&&0<t&&t<=A.length?t:A.length,u={r:0,g:0,b:0},m=nt(qA(255,2)+qA(255,2)+qA(255,2)),p=n&&0<=n&&1>=n?n:0,w=a&&0<=a&&1>=a?a:0,h=!1;r({length:g,functionToLoop:function(n,r){var a=function(){!h&&g-s<=g*w||(-1===t&&(h=!0),B.push(A[r])),n()},s,d,g;if(!h){var C=new Image;C.onload=function(){c.drawImage(C,0,0,l.width,l.height);var A=c.getImageData(0,0,l.width,l.height);s=0,d=A.data.length,g=A.data.length/4;for(var t=0;t<d;t+=4){var n={r:A.data[t],g:A.data[t+1],b:A.data[t+2]},r=nt(qA(n.r-u.r,2)+qA(n.g-u.g,2)+qA(n.b-u.b,2));r<=m*p&&s++}a()},C.src=A[r].image}else a()},callback:function(){B=B.concat(A.slice(g)),0>=B.length&&B.push(A[A.length-1]),s(B)}})}t=t||{},t.frameInterval||(t.frameInterval=10),t.disableLogs||webrtcdev.log("Using frames-interval:",t.frameInterval),this.record=function(){t.width||(t.width=320),t.height||(t.height=240),t.video||(t.video={width:t.width,height:t.height}),t.canvas||(t.canvas={width:t.width,height:t.height}),l.width=t.canvas.width,l.height=t.canvas.height,c=l.getContext("2d"),t.video&&t.video instanceof HTMLVideoElement?(B=t.video.cloneNode(),t.initCallback&&t.initCallback()):(B=document.createElement("video"),"undefined"==typeof B.srcObject?B.src=wn.createObjectURL(A):B.srcObject=A,B.onloadedmetadata=function(){t.initCallback&&t.initCallback()},B.width=t.video.width,B.height=t.video.height),B.muted=!0,B.play(),g=new Date().getTime(),u=new gn.Video,t.disableLogs||(webrtcdev.log("canvas resolutions",l.width,"*",l.height),webrtcdev.log("video width/height",B.width||l.width,"*",B.height||l.height)),n(t.frameInterval)};var s=!1;this.stop=function(A){s=!0;var n=this;setTimeout(function(){a(u.frames,-1,null,null,function(r){u.frames=r,t.advertisement&&t.advertisement.length&&(u.frames=t.advertisement.concat(u.frames)),u.compile(function(t){n.blob=t,n.blob.forEach&&(n.blob=new Blob([],{type:"video/webm"})),A&&A(n.blob)})})},10)};var d=!1;this.pause=function(){d=!0},this.resume=function(){d=!1,s&&this.record()},this.clearRecordedData=function(){this.pause(),u.frames=[]};var l=document.createElement("canvas"),c=l.getContext("2d"),B,g,u}function Pe(A,t){if("undefined"==typeof GIFEncoder)throw"Please link: https://cdn.webrtc-experiment.com/gif-recorder.js";t=t||{};var n=A instanceof CanvasRenderingContext2D||A instanceof HTMLCanvasElement;this.record=function(){function A(c){return r?setTimeout(function(){A(c)},100):void(l=un(A),void 0===typeof g&&(g=c),90>c-g||(!n&&d.paused&&d.play(),!n&&s.drawImage(d,0,0,a.width,a.height),t.onGifPreview&&t.onGifPreview(a.toDataURL("image/png")),u.addFrame(s),g=c))}n||(!t.width&&(t.width=d.offsetWidth||320),!this.height&&(t.height=d.offsetHeight||240),!t.video&&(t.video={width:t.width,height:t.height}),!t.canvas&&(t.canvas={width:t.width,height:t.height}),a.width=t.canvas.width,a.height=t.canvas.height,d.width=t.video.width,d.height=t.video.height),u=new GIFEncoder,u.setRepeat(0),u.setDelay(t.frameRate||200),u.setQuality(t.quality||10),u.start(),c=Date.now();this;l=un(A),t.initCallback&&t.initCallback()},this.stop=function(){l&&mn(l),B=Date.now(),this.blob=new Blob([new Uint8Array(u.stream().bin)],{type:"image/gif"}),u.stream().bin=[]};var r=!1;this.pause=function(){r=!0},this.resume=function(){r=!1},this.clearRecordedData=function(){u&&(this.pause(),u.stream().bin=[])};var a=document.createElement("canvas"),s=a.getContext("2d");if(n&&(A instanceof CanvasRenderingContext2D?(s=A,a=s.canvas):A instanceof HTMLCanvasElement&&(s=A.getContext("2d"),a=A)),!n){var d=document.createElement("video");d.muted=!0,d.autoplay=!0,"undefined"==typeof d.srcObject?d.src=wn.createObjectURL(A):d.srcObject=A,d.play()}var l=null,c,B,g,u}function je(A,t){try{function n(A){if(A){let n=document.createElement("canvas");n.width=A.videoWidth||A.clientWidth,n.height=A.videoHeight||A.clientHeight;let r=n.getContext("2d");r.drawImage(A,0,0,n.width,n.height),t(n.toDataURL("image/png"))}else t("")}if("VIDEO"==A.videoContainer.nodeName){let t=A.videoContainer;return n(t)}if("VIDEO"==document.getElementById(A.videoContainer).nodeName){let t=document.getElementById(A.videoContainer);return n(t)}return webrtcdev.error("[snapshot] videocontainer missing in peerinfo",A.videoContainer),"empty"}catch(A){webrtcdev.error("[Snapshot] ",A)}}function qe(A,t,n){at.send({type:t,message:A,name:n})}function Ze(A,t){eA({header:at.extra.username,message:A,userinfo:t,color:at.extra.color}),at.send({type:"chat",userinfo:t,message:A})}function $e(A){return A.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,"<a href='$1' target='_blank'>$1</a>")}function eA(A){""!=A.message&&" "!=A.message&&(Rt.msgsnapshot?Be("chat-message self msg-avatar",A.userinfo,A.message,Rt.chatBox.id):ge("msg-box fonts",A.userinfo,A.message,Rt.chatBox.id))}function AA(A){""!=A.message&&" "!=A.message&&(Rt.msgsnapshot?Be("chat-message user msg-avatar",A.userinfo,A.message,Rt.chatBox.id):ge("msg-box fonts",A.userinfo,A.message,Rt.chatBox.id))}function tA(){return new Promise(function(A){let t=navigator.mediaDevices;t&&t.enumerateDevices||(webrtcdev.warn("[mediacontrol] detectwebcam cant detect devices "),A(!1)),webrtcdev.log("[mediacontrol] detectwebcam mediaDevices object - ",t),t.enumerateDevices().then(t=>{webrtcdev.log("[mediacontrol] detectwebcam individual devices - ",t),A(t.some(A=>"videoinput"===A.kind))})})}function nA(){return new Promise(function(A){let t=navigator.mediaDevices;t&&t.enumerateDevices||A(!1),t.enumerateDevices().then(t=>{A(t.some(A=>"audioinput"===A.kind))})})}function rA(A,t,n){webrtcdev.log("[mediacontrol js] getCamMedia - role :",jt),webrtcdev.log("[mediacontrol js] getCamMedia - outgoingVideo "+t+" outgoingAudio "+n);var r={audio:{},video:{frameRate:20,height:240,width:320,facingMode:"user"}};"inspector"==jt?(A.dontCaptureUserMedia=!0,webrtcdev.warn("[_mediacontrol.js] getCamMedia  - Joining as inspector without camera Video")):t&&n?(webrtcdev.log("[startJS] getCamMedia - default mediaConstraints :",A.mediaConstraints),webrtcdev.log("[mediacontrol.js] getCamMedia  - Capture Full Media "),A.getUserMedia()):!t&&n?(r.video=!1,A.mediaConstraints=r,webrtcdev.log("[mediacontroljs] getCamMedia - default mediaConstraints :",A.mediaConstraints),webrtcdev.warn("[mediacontroljs] getCamMedia  - Dont Capture Webcam only Mic "),A.getUserMedia()):t&&!n?(r.audio=!1,A.mediaConstraints=r,webrtcdev.log("[mediacontroljs] getCamMedia - default mediaConstraints :",A.mediaConstraints),webrtcdev.warn("[mediacontroljs] getCamMedia - Dont Capture Mic only webcam "),A.getUserMedia()):!t&&!n&&(r.video=!1,r.audio=!1,A.mediaConstraints=r,A.dontCaptureUserMedia=!0,webrtcdev.warn("[mediacontroljs] getCamMedia - dont Capture outgoing video ",t," and outgoing Audio ",n),webrtcdev.log("[startJS] getCamMedia - default mediaConstraints :",A.mediaConstraints))}function aA(A,t){try{webrtcdev.log("[Mediacontrol] attachMediaStream - Video Element ",A);var n="";if(0<document.getElementsByName(A).length)return webrtcdev.warn("[Mediacontrol] attachMediaStream - Video Element is already playing "),Promise.resolve();if(A.video)n=A.video;else if("VIDEO"==A.nodeName)n=A;else return webrtcdev.error("[Mediacontrol] attachMediaStream - Video element not found to attach stream"),Promise.reject("video not found to attach stream");if(webrtcdev.log("[Mediacontrol] attachMediaStream - Video Element ",n),webrtcdev.log("[Mediacontrol] attachMediaStream - stream ",t),t&&(t.isVideo||t.isScreen))try{n.srcObject=t}catch(A){webrtcdev.error("[Mediacontrol] attachMediaStream - ",A),n.src=wn.createObjectURL(t)}finally{return webrtcdev.info("[Mediacontrol] attachMediaStream - added srcObject for ",t.type," valid stream ",t.streamid," to Video element ",n),n.play().then(()=>{webrtcdev.log("[Mediacontrol] attachMediaStream - element started playing ",n)}).catch(A=>{if(webrtcdev.error("[Mediacontrol] attachMediaStream - video play error ",A),"NotAllowedError"==A.name&&A.message.includes("play() failed")){let A=confirm("Play failed due to auto play policy, starting video on mute, click on video to unmute");(A||!A)&&(n.muted=!0,n.autoplay=!0,n.addEventListener("click",function(){n.muted=!1}),n.play().then(()=>{webrtcdev.info("[Mediacontrol] attachMediaStream - retry  ok ")}).catch(A=>{webrtcdev.error("[Mediacontrol] attachMediaStream - error",A)}))}else"NotAllowedError"==A.name&&A.message.includes("The play() request was interrupted by a call to pause()")?setTimeout(function(){n.play().then(()=>{webrtcdev.info("[Mediacontrol] attachMediaStream - retry  ok ")}).catch(A=>{webrtcdev.error("[Mediacontrol] attachMediaStream - error",A)})},3e3):"AbortError"==A.name&&A.message.includes("The play() request was interrupted by a new load request")?(n.pause(),setTimeout(function(){n.play().then(()=>{webrtcdev.info("[Mediacontrol] attachMediaStream - retry  ok ")}).catch(A=>{webrtcdev.error("[Mediacontrol] attachMediaStream - error",A)})},3e3)):setTimeout(function(){n.play().then(()=>{webrtcdev.info("[Mediacontrol] attachMediaStream - retry  ok ")}).catch(A=>{webrtcdev.error("[Mediacontrol] attachMediaStream - error",A)})},3e3)})}else{if(""==t)return n.srcObject=null,webrtcdev.warn("[ Mediacontrol - attachMediaStream ] Media Stream empty '' attached to ",n," as stream is not valid ",t),Promise.resolve();throw webrtcdev.error("[Mediacontrol] attachMediaStream - stream is not recognized ",t),"unrecognized media stream"}}catch(A){return webrtcdev.error("[Mediacontrol] attachMediaStream - error",A),Promise.reject(new Error("attachMediaStream failed"))}}function iA(A,t){try{return A.srcObject&&A.srcObject.active?(webrtcdev.log("[Mediacontrol] reattachMediaStream - element has srcObject and is active "),Promise.resolve(1)):(A.srcObject=t.srcObject,webrtcdev.log("[Mediacontrol] reattachMediaStream - added src object for valid stream ",A),A.play().then(()=>{webrtcdev.log("[Mediacontrol] reattachMediaStream - element started playing ",A)}).catch(t=>{if(webrtcdev.error("[Mediacontrol] reattachMediaStream - video play error ",t),"NotAllowedError"==t.name&&t.message.includes("play() failed")){let t=confirm("Play failed due to auto play policy, starting video on mute, click on video to unmute");(t||!t)&&(A.muted=!0,A.autoplay=!0,A.addEventListener("click",function(){A.muted=!1}),A.play())}else"NotAllowedError"==t.name&&t.message.includes("The play() request was interrupted by a call to pause()")&&alert("Play failed, video was paused ")}))}catch(A){return webrtcdev.error("[media control] reattachMediaStream err ",A),Promise.reject(new Error("reattachMediaStream failed"))}}function oA(A){webrtcdev.warn("[ Mediacontrol] dettachMediaStream  on vid ",A);try{if("srcObject"in A){const t=A.srcObject;if(t&&""!=t){const n=t.getTracks();n.forEach(function(A){A.stop()}),A.srcObject=null}else webrtcdev.warn("[ Mediacontrol] dettachMediaStream  no stream present on remote's video")}else A.src=""}catch(A){webrtcdev.error("[ Mediacontrol] dettachMediaStream  error ",A)}finally{A.id=null}}function sA(A,t="mute"){at.send({type:t,message:A})}function dA(A){let t=A.streamid,n=A.stream;n||webrtcdev.error("[recordjs] startRecord - stream is missing for peer ",A),webrtcdev.log("[recordjs] stop - stream",n);let r=Ve(n,{type:"video",recorderType:De});r.startRecording(),bn[t]=r}function lA(A){let t=A.streamid,n=A.stream;n||webrtcdev.error("[recordjs] stopRecord - stream is missing for peer ",A),webrtcdev.log("[recordjs] stop - stream",n),bn[t]||webrtcdev.log("wrong stream id ");let r=bn[t];r.stopRecording(function(){let A=r.getBlob(),t="recordedvideo"+new Date().getTime();var n;n=it?_n(it):_n(at.userid),n.filearray.push(t);let a=document.createElement("div");a.value=n.filearray.length;let s=wn.createObjectURL(A);Lt.active?(b(n.uuid,n,s,t,"videoRecording"),S(n.uuid,n,s,t,"videoRecording")):S(n.uuid,n,s,t,"videoRecording")})}async function cA(){webrtcdev.log("[screenrecord js] webrtcdevRecordScreen");try{vn=await navigator.mediaDevices.getDisplayMedia({audio:!0,video:{mediaSource:"screen",mandatory:{maxWidth:1920<window.screen.width?window.screen.width:1920,maxHeight:1080<window.screen.height?window.screen.height:1080},optional:[]}}),webrtcdev.log("[screenrecord js] stream",vn)}catch(A){webrtcdev.error("[screenrecord js] Error in webrtcdevRecordScreen ",A)}vn.addEventListener("inactive",A=>{webrtcdev.log("Capture stream inactive - stop recording!"),BA(A)});try{yn=new MediaRecorder(vn,{mimeType:"video/webm"}),yn.addEventListener("dataavailable",A=>{A.data&&0<A.data.size&&Hn.push(A.data)}),yn.start(10),webrtcdev.log("[screenrecord js] mediaRecorder",yn)}catch(A){webrtcdev.error("[screenrecord js] Error in mediaRecorder ",A)}}function BA(A){webrtcdev.log("webrtcdevStopRecordScreen",A),yn.stop(),yn=null,vn.getTracks().forEach(A=>A.stop()),vn=null;let t=window.URL.createObjectURL(new Blob(Hn,{type:"video/webm"}));gA(t)}function gA(A){var t=null;t=A instanceof Blob?wn.createObjectURL(blob):A;var n=it?_n(it):_n(at.userid);var r="recordedvideo"+new Date().getTime();n.filearray.push(r);var a=document.createElement("div");a.value=n.filearray.length,b(n.uuid,n,t,r,"videoScreenRecording"),S(n.uuid,n,t,r,"videoScreenRecording")}function uA(A){webrtcdev.log("[flesharing JS] on File start ",A),webrtcdev.log("[flesharing JS] on File start description  , name :",A.name," from -> ",A.userid," to ->",A.remoteUserId);let t=A.uuid+"_"+A.userid+"_"+A.remoteUserId,n=_n(A.userid);n.filearray.includes("name : file.name")||(n.filearray.push({pid:t,name:A.name,status:"progress",from:A.userid,to:A.remoteUserId}),E(A.uuid,n,A.name,A.maxChunks,A,"fileBoxClass",A.userid,A.remoteUserId)),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"file",action:"onFileShareStart"}}))}function mA(A){try{if(A.currentPosition>A.maxChunks)return;let t=A.uuid+"_"+A.userid+"_"+A.remoteUserId,n=Sn[t];n&&(n.progress.value=A.currentPosition||A.maxChunks||n.progress.max,F(n.progress,n.label))}catch(A){webrtcdev.error("[flesharing JS] Problem in onFileProgress ",A)}}function pA(A){webrtcdev.log("[flesharing JS] On file End description , file :",A," from -> ",A.userid," to ->",A.remoteUserId),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"file",action:"onFileShareEnded"}}));let t=A.uuid+"_"+A.userid+"_"+A.remoteUserId,n=A.name;var r=_n(A.userid);if(null!=r)for(x in r.filearray)r.filearray[x].name==n&&r.filearray[x].pid==t&&(r.filearray[x].status="finished",r.filearray[x]=n,B("stopuploadButton"+t));webrtcdev.log("[flesharing JS] onFileEnd - Display List -",n);it==A.userid&&document.getElementById(n)||(b(A.uuid,r,A.url,n,A.type),webrtcdev.log("[flesharing JS] onFileEnd - Display on File Viewer -",A.url,n,A.type),S(A.uuid,r,A.url,n,A.type))}function wA(A){webrtcdev.log(" [filehsraing js] Send file - ",A),at.send(A)}function hA(A,t,n){webrtcdev.log(" [filehsraing js] Stop Sending file - ",n);var r=_n(n.userid);for(y in r.filearray)r.filearray[y].pid==A&&(r.filearray[y].status="stop",webrtcdev.log("[filesharing js] stopSendFile - filename ",r.filearray[y].name," | status ",r.filearray[y].status))}function fA(){try{at.send({type:"syncOldFiles"})}catch(A){webrtcdev.error("[filesharing js ] syncOldFiles",A)}}function CA(){var A=[];for(x in ot){webrtcdev.log("[flesharing JS] Checking Old Files in index ",x);var t=ot[x];if(t.filearray&&0<t.filearray.length)for(y in t.filearray){for(o in A)if(A[o].name==t.filearray[y].name)break;webrtcdev.log("[filehsraing js] user.filearray[y]",t.filearray[y]),A.push(t.filearray[y])}}setTimeout(function(){if(0<A.length)for(f in webrtcdev.log("[filehsraing js] sendOldFiles ",A),A)wA(A[f])},2e4)}function QA(){Tn=!0;let A={event:"open",from:"remote",board:kt.drawCanvasContainer,button:kt.button};at.send({type:"canvas",board:A}),webrtcdev.log("[drawJS] send canvas data on rtc"),EA(kt),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"drawboard",action:"onDrawBoardActive"}})),webrtcdev.log("[drawJS] send ondrawboard active data on webrtcdev")}function UA(){Tn=!1;let A={event:"close",from:"remote",board:kt.drawCanvasContainer,button:kt.button};at.send({type:"canvas",board:A}),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"drawboard",action:"onDrawBoardTerminate"}}))}function EA(A){if(webrtcdev.log("[drawjs] drawCanvasobj.drawCanvasContainer ",A.drawCanvasContainer),0>document.getElementById(A.drawCanvasContainer).innerHTML.indexOf("iframe"))try{In.addSyncListener(function(A){at.send({type:"canvas",draw:A})}),In.setSelected("pencil"),In.setTools({pencil:A.tools.pencil||!1,eraser:A.tools.eraser||!1,text:A.tools.text||!1,line:A.tools.line||!1,rectangle:A.tools.rectangle||!1,circle:A.tools.arc||!1}),In.appendTo(document.getElementById(A.drawCanvasContainer))}catch(A){webrtcdev.error("[drawjs] Canvas drawing not supported ",A)}else webrtcdev.log("[drawjs] CanvasDesigner already started iframe is attached ")}function FA(A){let t=document.createElement("span");t.className=A.button.class,t.innerHTML=A.button.html,t.onclick=function(){let t=confirm("Do you want to reconnet ?");!0==t&&($(this).html("<img src=\"http://www.bba-reman.com/images/fbloader.gif\" />"),setTimeout(function(){$(this).html(A.button.html)},3e3))};let n=document.createElement("li");n.appendChild(t),document.getElementById("topIconHolder_ul").appendChild(n)}function bA(A,t){document.getElementById(A).onclick=function(){var n=confirm("Do you want to reconnect ?");if(!0==n){if(!at.peers[at.connectionDescription.remoteUserId])return;at.peers[at.connectionDescription.remoteUserId].peer.close(),at.rejoin(at.connectionDescription),$(this).html("<img src=\"http://www.bba-reman.com/images/fbloader.gif\" />"),setTimeout(function(){document.getElementById(A).innerHTML=t.button.html},3e3)}else;}}function vA(){document.body.setAttribute("style","pointer-events: none;")}function yA(A,t,n){A.style.position="absolute",A.style.left=t+"px",A.style.top=n+"px"}function HA(){document.getElementById("cursor1").setAttribute("style","display:block"),document.onmousemove=function(A){Ln=A.pageX+10,Mn=A.pageY},Dn=setInterval(TA,500)}function SA(){document.getElementById("cursor1").setAttribute("style","display:none"),at.send({type:"pointer",action:"stopCursor"}),clearInterval(Dn)}function TA(){var A=document.getElementById("cursor1");A.hidden=!1,yA(A,Ln,Mn),at.send({type:"pointer",action:"startCursor",corX:Ln,corY:Mn})}function IA(A){var t=document.createElement("span");return t.id=A+"cursorButton",t.setAttribute("data-val","mute"),t.setAttribute("title","Cursor"),t.className=Vt.button.class_on,t.innerHTML=Vt.button.html_on,t.onclick=function(){var A=t.id,n;n=it?_n(it):_n(at.userid),-1<A.indexOf(n.controlBarName)?t.className==Vt.button.class_on?(HA(),t.className=Vt.button.class_off,t.innerHTML=Vt.button.html_off):t.className==Vt.button.class_off&&(SA(),t.className=Vt.button.class_on,t.innerHTML=Vt.button.html_on):alert(" Use Local Pointer button ")},t}function NA(){var A=document.createElement("span");for(x in A.className=Kt.button.class_off,A.innerHTML=Kt.button.html_off,Kt.languages)document.getElementById("CodeStyles").innerHTML=document.getElementById("CodeStyles").innerHTML+Kt.languages[x];document.getElementById("codeArea").value;_t=CodeMirror.fromTextArea(document.getElementById("codeArea"),{mode:"text/javascript",styleActiveLine:!0,lineNumbers:!1,lineWrapping:!0}),_t.setOption("theme","mdn-like"),A.onclick=function(){A.className==Kt.button.class_off?(A.className=Kt.button.class_on,A.innerHTML=Kt.button.html_on,DA(),document.getElementById(Kt.codeeditorContainer).hidden=!1):A.className==Kt.button.class_on&&(A.className=Kt.button.class_off,A.innerHTML=Kt.button.html_off,OA(),document.getElementById(Kt.codeeditorContainer).hidden=!0)};var t=document.createElement("li");t.appendChild(A),document.getElementById("topIconHolder_ul").appendChild(t)}function RA(A){if(37==A.which||38==A.which||39==A.which||40==A.which||17==A.which||18==A.which||16==A.which)return!0;var t={option:"text",codeContent:_t.getValue()};webrtcdev.log(" sending ",t),rtcMultiConnection.send({type:"codeeditor",data:t})}function LA(){$("#CodeStyles option:selected").each(function(){var A=CodeMirror.findModeByMIME($(this).attr("mime"));A&&(mode=A.mode,spec=$(this).attr("mime"),_t.setOption("mode",spec),CodeMirror.autoLoadMode(_t,mode))});var A={option:"menu",codeMode:mode,codeSpec:spec};webrtcdev.log(" sending ",A),rtcMultiConnection.send({type:"codeeditor",data:A})}function MA(A){if(webrtcdev.log("codeeditor ",A),"text"==A.option){var t=_t.getCursor();_t.setValue(A.codeContent),_t.setCursor(t)}else"menu"==A.option&&(_t.setOption("mode",evt.data.codeSpec),CodeMirror.autoLoadMode(_t,evt.data.codeMode))}function DA(){document.getElementById(Kt.codeeditorContainer).addEventListener("keyup",RA,!1),document.getElementById("CodeStyles").addEventListener("change",LA,!1)}function OA(){document.getElementById(Kt.codeeditorContainer).removeEventListener("keyup",RA,!1)}function kA(A){var t=document.createElement("span");t.className=A.button.class_off,t.innerHTML=A.button.html_off,t.onclick=function(){t.className==A.button.class_off?(t.className=A.button.class_on,t.innerHTML=A.button.html_on,_A(),document.getElementById(A.texteditorContainer).hidden=!1):t.className==A.button.class_on&&(t.className=A.button.class_off,t.innerHTML=A.button.html_off,PA(),document.getElementById(A.texteditorContainer).hidden=!0)};var n=document.createElement("li");n.appendChild(t),document.getElementById("topIconHolder_ul").appendChild(n)}function xA(A){if(37==A.which||38==A.which||39==A.which||40==A.which||17==A.which||18==A.which||16==A.which)return!0;var t={option:"text",content:document.getElementById(xt.texteditorContainer).value};webrtcdev.log(" sending ",document.getElementById(xt.texteditorContainer).value),rtcMultiConnection.send({type:"texteditor",data:t})}function KA(A){webrtcdev.log("texteditor ",A),"text"==A.option&&(document.getElementById(xt.texteditorContainer).value=A.content)}function _A(){document.getElementById(xt.texteditorContainer).addEventListener("keyup",xA,!1)}function PA(){document.getElementById(xt.texteditorContainer).removeEventListener("keyup",xA,!1)}function VA(A){webrtcdev.log("[ timerobj] startsessionTimer ",A),A.counter.hours&&A.counter.minutes&&A.counter.seconds?(On=d(A.counter.hours),kn=d(A.counter.minutes),xn=d(A.counter.seconds),"forward"==A.type?(he(),On.innerHTML=0,kn.innerHTML=0,xn.innerHTML=0):"backward"==A.type&&(On.innerHTML=0,kn.innerHTML=3,xn.innerHTML=0,fe())):webrtcdev.error(" [timerobj] counter DOM elemnents not found ")}function zA(){try{return Nn=Intl.DateTimeFormat().resolvedOptions().timeZone,ot[0].zone=Nn,Nn}catch(A){webrtcdev.error("[timer js ]",A)}}function GA(){try{var A={type:"timer",userid:ot[0].userid,time:new Date().toJSON(),zone:ot[0].zone};webrtcdev.log("[timerjs] shareTimePeer ",A),at.send(A)}catch(A){webrtcdev.error(A)}}function XA(A,t){try{webrtcdev.log("[timerjs] peerTimeZone - ",A,t);let n=_n(t);if(!n)return;appendToPeerValue(t,"zone",A),Ee(n),webrtcdev.log("[timerjs] peerTimeZone , updated peerinfo with zone -  ",n)}catch(A){webrtcdev.error("[timerjs] ",A)}}function JA(){return at.peers.getAllParticipants()}function YA(A){try{for(x in webrtcdev.log("[peerinfomanager] removePeerInfo - remove userid: ",A),ot)if(ot[x].userid==A)return void ot.splice(x,1)}catch(A){webrtcdev.error("[peerinfomanager] removePeerInfo errorr - ",A)}}function WA(A,t,n,r,a,s){if(webrtcdev.log("[peerinfomanager] updatePeerInfo"),!A)return void webrtcdev.error("[peerinfomanager] updatePeerInfo - userid is null / undefined, cannot create PeerInfo");let d=_n(A);d?(webrtcdev.log("[peerinfomanager] updatePeerInfo - UserID is already existing in webcallpeers",d," update the fields only "),d.videoContainer=d.videoContainer||"video"+A,d.videoHeight=d.videoHeight||null,d.videoClassName=d.videoClassName||null,d.userid=d.userid||A,d.name=d.name||t,d.color=d.color||n,d.email=d.email||r,d.role=d.role||a||"participant",d.type=d.type||s,d.controlBarName=d.controlBarName||"control-video"+A,d.filearray=d.filearray||[],d.vid=d.vid||"video"+s+"_"+A,d.stream=d.stream||"",d.streamid=d.streamid||""):(d={videoContainer:"video"+A,videoHeight:null,videoClassName:null,userid:A,name:t,color:n,email:r,role:a||"participant",type:s,controlBarName:"control-video"+A,filearray:[],vid:"video"+s+"_"+A,stream:"",streamid:""},ot.push(d),webrtcdev.log("[peerinfomanager] updatedPeerInfo - created new peerinfo")),Lt.active&&(d.fileShare="single"==Lt.props.fileShare?{outerbox:"widget-filesharing-box",container:"widget-filesharing-container",minButton:"widget-filesharing-minbutton",maxButton:"widget-filesharing-maxbutton",rotateButton:"widget-filesharing-rotatebutton",closeButton:"widget-filesharing-closebutton"}:{outerbox:"widget-filesharing-box"+A,container:"widget-filesharing-container"+A,minButton:"widget-filesharing-minbutton"+A,maxButton:"widget-filesharing-maxbutton"+A,rotateButton:"widget-filesharing-rotatebutton"+A,closeButton:"widget-filesharing-closebutton"+A},d.fileList="single"==Lt.props.fileList?{outerbox:"widget-filelisting-box",container:"widget-filelisting-container"}:{outerbox:"widget-filelisting-box"+A,container:"widget-filelisting-container"+A});let l=Pn(d.userid);ot[l]=d,webrtcdev.log("[peerinfomanager] updatePeerInfo "+l,ot[l])}function jA(A,t,n){webrtcdev.log("[sessionmanager] startSocketSession , set selfuserid ",A.userid),it||(it=A.userid);try{webrtcdev.log("[sessionmanager] StartSession"+n," on address ",t),socket=io.connect(t)}catch(A){throw webrtcdev.error(" problem in socket connection",A)," problem in socket connection"}return n?void(socket.on("connect",function(A){webrtcdev.log("[sessionmanager] connected to signaller ",A),socket.emit("presence",{channel:n}),socket.on("disconnected",function(A){webrtcdev.error("[sessionmanager] Disconnected from signaller ",A),te("Disconnected from signaller "),"io server disconnect"===A&&(webrtcdev.error("[sessionmanager] Disconnected initiated by signaller , attempt to re-connect "),socket.connect())})}),socket.on("presence",function(A){Tt&&showUserStats(),webrtcdev.log("[sessionmanager] ======================= presence for sessionid ==================",A),A?Gn(n,it):zn(n,it,en.maxAllowed||10)}),socket.on("open-channel-resp",function(t){webrtcdev.log("[sessionmanager] --------------open-channel-resp---------------------  ",t),t.status&&t.channel==n?(webrtcdev.log("[sessionmanager] open-channel-resp - "," Session video:",bt," audio: ",Ft," data: ",vt," OfferToReceiveAudio: ",Qt," OfferToReceiveVideo: ",Ut),new Promise(function(t){rA(A,bt,Ft),setTimeout(t,3e3,"")}).then(()=>{let n=t.channel;A.openOrJoin(n,function(A){webrtcdev.log(" [sessionmanager] open-channel-resp - openOrJoin session id  ",n,"response ",A),A?(webrtcdev.info(" [sessionmanager] open-channel-resp - openOrJoin ok,  userid ",it," with role ",jt),WA(it,Bt,ut,gt,jt,"local")):webrtcdev.error(" [sessionmanager] open-channel-resp Errored from signaller ")})}).catch(A=>{webrtcdev.error(" [sessionmanager] Handle rejected promise ("+A+")")})):(alert("Could not open this channel, Server refused"),webrtcdev.error(" [sessionmanager] Could not open this channel, Server refused")),t.message&&te(t.msgtype+" : "+t.message)}),socket.on("join-channel-resp",function(t){webrtcdev.log("[sessionmanager] --------------join-channel-resp---------------------  ",t),t.status&&t.channel==n?(webrtcdev.log(" [ join-channel-resp ] "," Session video:",bt," audio: ",Ft," data: ",vt," OfferToReceiveAudio: ",Qt," OfferToReceiveVideo: ",Ut),new Promise(function(t){rA(A,bt,Ft),setTimeout(t,3e3,"")}).then(()=>{let n=t.channel;A.openOrJoin(n,function(A){webrtcdev.info("[sessionmanager] join-channel-resp - openOrJoin session ",n," response - ",A),A?(webrtcdev.info(" [sessionmanager] join-channel-resp - openOrJoin ok,  userid ",it," with role ",jt),WA(it,Bt,ut,gt,jt,"local")):webrtcdev.error(" [sessionmanager] join-channel-resp -  openOrJoin  Errored from signaller ")})}).catch(A=>{webrtcdev.error("[sessionmanager] join-channel-resp - Handle rejected promise ("+A+")")}),t.message&&te(t.msgtype+" : "+t.message)):(webrtcdev.error("[sessionmanager] Could not join this channel, Server refused"),alert("Could not join this channel, Server refused. Please end this session and create another session"))}),socket.on("channel-event",function(A){webrtcdev.log("[sessionmanager] channel-event---------------------  ",A),"new-join"==A.type&&"error"!=A.msgtype?webrtcdev.log("[session manager] - new-join-channel "):webrtcdev.warn("[session manager] - unhandled channel event ")}),socket.on("event",function(A){console.log("event",A)}),socket.on("disconnect",function(){console.error("disconnected ")})):(te("Invalid session"),void webrtcdev.error("[sessionmanager] Session id undefined "))}var at=null,it=null,ot=this.webcallpeers=[],st=null,dt=null,lt=null,ct=null,Bt="",gt="",ut="",mt="",pt="",wt=this.sessionid="",ht=[],ft={socketAddr:location.hostname+":8083/",signaller:location.hostname+":8085/"},Ct=[],Qt=!0,Ut=!0,Et=!0,Ft=!0,bt=!0,vt=!0,yt=null,Ht=null,St;this.remoteVideos=St=[];var Tt=!1,It=!1,Nt=!1,Rt=!1,Lt=!1,Mt=!1,Dt=!1,Ot=!1,kt=!1,xt=!1,Kt=!1,_t=null,Pt=!1,Vt=!1,zt=!1,Gt=!1,Xt=!1,Jt=!1,Yt=!1,Wt=!1,jt="participant",qt=null,Ct="none",Zt={},$t={},en={},An=[],tn=null,nn;this.connectionStatus=tn,this.version="6.7.4",this.makesessionid=function(A){let t="";return(webrtcdev.log("[Init] Location  ",location.href),webrtcdev.log("[Init] Existing charecters after # ",location.href.replace("#","").length),location.href.replace("#","").length&&(t=-1<location.href.indexOf("?")?location.hash.substring(0,location.hash.indexOf("?")).replace(/\/|:|#|\?|\$|\^|%|\.|`|~|!|\+|@|\[|\||]|\|*. /g,"").split("\n").join("").split("\r").join(""):location.hash.replace(/\/|:|#|\?|\$|\^|%|\.|`|~|!|\+|@|\[|\||]|\|*. /g,"").split("\n").join("").split("\r").join(""),t))?t:(webrtcdev.log("Session id not Found in URL ,  Check for auto - reload if  ",A),"reload"!=A||location.hash.replace("#","").length?(t=prompt("Enter session ",""),t):void(location.href=location.href.split("#")[0]+"#"+(100*Math.random()).toString().replace(".",""),location.reload()))},this.issafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),this.setsession=function(A,t,n,r,a,s){return webrtcdev.log("[ initjs ] : setsession - sessionobj : ",a),this.sessionid=wt=session.sessionid,Zt=a,Zt.socketAddr&&(ft.socketAddr=Zt.socketAddr),Zt.signaller&&(ft.signaller=Zt.signaller),$t=A,en=t,Ct=session.turn,s&&(s.debug&&(Tt=s.debug||!1),s.chat&&(Rt=s.chat||null),s.fileShare&&(Lt=s.fileShare||null),s.screenrecord&&(Mt=s.screenrecord||null),s.screenshare&&(Jt=s.screenshare||null),s.snapshot&&(Dt=s.snapshot||null),s.videoRecord&&(Ot=s.videoRecord||null),s.reconnect&&(Pt=s.reconnect||null),s.drawCanvas&&(kt=s.drawCanvas||null),s.texteditor&&(xt=s.texteditor||null),s.codeeditor&&(Kt=s.codeeditor||null),s.mute&&(zt=s.mute||null),s.timer&&(It=s.timer||null),s.listenin&&(Xt=s.listenin||null),s.cursor&&(Vt=s.cursor||null),s.minmax&&(Gt=s.minmax||null),s.help&&(Yt=s.help||null),s.statistics&&(Wt=s.statistics||null)),{sessionid:wt,outgoing:r,incoming:n,socketAddr:ft.socketAddr,signaller:ft.signaller,localobj:$t,remoteobj:en,turn:Ct,widgets:s}},this.startCall=function(A){if(!A)return void webrtcdev.error("[ initjs ] : Cannot initiate startcall without session object ");webrtcdev.log("[ initjs ] startwebrtcdev begin processing with ",A),webrtcdev.log("[ initjs ] : incoming ",A.incoming),webrtcdev.log("[ initjs ] : outgoing ",A.outgoing),A.incoming&&(Qt=A.incoming.audio,Ut=A.incoming.video,Et=A.incoming.data),A.outgoing&&(Ft=A.outgoing.audio,bt=A.outgoing.video,vt=A.outgoing.data),webrtcdev.log(" [ initjs  ] : role ",jt);let t=A.sessionid;webrtcdev.log("[ initjs ] : sessionid : "+t+" and localStorage  ",localStorage),1<=localStorage.length&&localStorage.getItem("channel")!==t?(webrtcdev.log("[ intijs ] : Current Session ID "+t+" doesnt match cached channel id "+localStorage.getItem("channel")+"-> clearCaches()"),clearCaches()):webrtcdev.log("[ initjs ] : no action taken on localStorage"),webrtcdev.log("[ initjs ] : localobj ",$t),webrtcdev.log("[ initjs ] : remoteobj ",en),yt=$t.video;let n=en.videoarr;if(bt&&(Ht=n[0]),!en.dynamicVideos)for(let A=1;A<n.length;A++)St.push(n[A]);if($t.hasOwnProperty("userdetails")){let A=$t.userdetails;webrtcdev.info("[init JS] localobj userdetails ",A),Bt=A.username||"LOCAL",ut=A.usercolor||"",gt=A.useremail||"",jt=A.role||"participant"}else webrtcdev.warn("localobj has no userdetails ");return"inspector"==jt&&resolve("done"),new Promise(A=>{tA().then(A=>{webrtcdev.log("Has Webcam: "+(A?"yes":"no")),A||(webrtcdev.error(" dont have access to webcam  "),alert(" you dont have access to webcam "),bt=!1),bt&&(webrtcdev.log(" get permission for video Access "),a())}).catch(A=>{webrtcdev.error(" dont have access to webcam  ",A)}),nA().then(A=>{webrtcdev.log("Has Mic: "+(A?"yes":"no")),A||(webrtcdev.error(" dont have access to mic  "),alert(" you dont have access to Mic "),Ft=!1),Ft&&(webrtcdev.log(" get permission for audio access "),s())}).catch(A=>{webrtcdev.error(" dont have access to mic  ",A)}),re(),A(t)}).then(t=>{Xn(t,A)}).then(()=>{Vn(at,A.widgets)}).then(()=>{jA(at,A.socketAddr,A.sessionid),tn="started"}).catch(A=>{webrtcdev.error(" [ initjs ] : Promise rejected ",A)})},this.stopCall=stopCall=function(){webrtcdev.log(" stopCall "),at.closeEntireSession(),localStorage.getItem("channel")||localStorage.removeItem("channel"),localStorage.getItem("userid")||localStorage.removeItem("userid"),localStorage.getItem("remoteUsers")||localStorage.removeItem("remoteUsers"),this.connectionStatus="closed"},Element.prototype.remove=function(){this.parentElement.removeChild(this)},NodeList.prototype.remove=HTMLCollection.prototype.remove=function(){for(var A=this.length-1;0<=A;A--)this[A]&&this[A].parentElement&&this[A].parentElement.removeChild(this[A])},this.updateWebCallView=updateWebCallView=function(A){let t=jt;switch(webrtcdev.log("[webcallviewmanager] - updateWebCallView with ",A.userid," peerinfo",A," peerinfo role ",A.role," | myrole :",t),t){case"inspector":for(var n=0,r=0;r<St.length;r++)webrtcdev.log(" [webcallviewmanager] Remote Video index array ",r," || ",St[r],document.getElementsByName(St[r]),document.getElementsByName(St[r]).src),St[r].src&&n++;let a=document.createElement("video");St[n]=a,document.getElementById(en.videoContainer).appendChild(a);let s=St[n];for(let n in webrtcdev.log(" [webcallviewmanager] updateWebCallView role-inspector , attaching stream",s,A.stream),aA(s,A.stream).then(()=>{s.hidden&&(removid.hidden=!1),s.id=A.videoContainer,s.className=en.videoClass,en.userDisplay&&A.name&&attachUserDetails(s,A),en.userMetaDisplay&&A.userid&&attachMetaUserDetails(s,A);var t=document.getElementsByName(yt)[0];for(r in t&&(t.hidden=!0),en.videoarr){var n=document.getElementsByName(en.videoarr[r])[0];n&&n.setAttribute("style","display:none")}}),document.getElementsByClassName("timeBox"))document.getElementsByClassName("timeBox")[n].hidden=!0;break;case"participant":case"host":case"guest":webrtcdev.info("[webcallviewdevmanager] updateWebCallView -  role - ",A.role," peerinfo type - ",A.type," peerinfo Vid - ",A.vid," peerinfo stream - ",A.stream),"local"==A.type&&-1<A.vid.indexOf("videolocal")?u(A):"remote"==A.type&&-1<A.vid.indexOf("videoremote")?p(A).then(()=>{Jn("join",wt,it)}):webrtcdev.error("[webcallviewdevmanager] updateWebCallView-  PeerInfo vid did not match either case ",A.vid);break;default:webrtcdev.error("[webcallviewdevmanager] updateWebCallView- No role found to update webcall view ",t);}},this.attachControlButtons=attachControlButtons=function(A,t){let r=t.stream||A.srcObject||null,a=t.streamid||A.srcObject.id||null,s=t.controlBarName,d=t.fileSharingContainer,l=A.parentNode;if(webrtcdev.log(" [media dom modifier] attachControlButtons to the parent Node of video  ",l),l){let A=l.childNodes;for(let t in A){let n=A[t];"DIV"==n.nodeName&&n.id&&-1<n.id.indexOf("control")&&(webrtcdev.warn("[media dom modifier] control bar exists already, delete the previous one before adding new one",n),l.removeChild(n))}}let c=document.createElement("div");if(c.id=s,c.className="local"==t.type?"localVideoControlBarClass":"remoteVideoControlBarClass",Tt){let t=document.createElement("div");t.innerHTML=A.id,c.appendChild(t)}if(zt.active&&(zt.audio.active&&c.appendChild(q(zt,s,t)),zt.video.active&&c.appendChild(Z(zt,s,t))),Dt.active&&c.appendChild(ee(s,t)),Ot.active&&c.appendChild(Ae(Ot,s,t)),Vt.active&&c.appendChild(IA(s,t)),Gt.active){c.appendChild(Y(Gt,s,t,a,r)),nameBoxid="#videoheaders"+t.userid;let A=document.querySelectorAll(nameBoxid);for(let d in A)A[d].appendChild&&A[d].appendChild(W(Gt,s,t,a,r))}l.appendChild(c)},this.attachUserDetails=attachUserDetails=function(A,t){if(webrtcdev.log("[media_dommanager] attachUserDetails - ",t.userid,":",t.type," to video DOM ",A),0<A.parentNode.querySelectorAll(".videoHeaderClass").length)if(webrtcdev.warn("[media_dommanager] attachUserDetails - video header already present ",A.parentNode.querySelectorAll(".videoHeaderClass")," remove it before re-setting"),0<A.parentNode.querySelectorAll("videoheaders"+t.userid).length)return void webrtcdev.warn("[media_dommanager] user's video header already present ","videoheaders"+t.userid);else{webrtcdev.warn("[media_dommanager] attachUserDetails - video header already present for diff user , overwrite with ","videoheaders"+t.userid);let n=A.parentNode.querySelectorAll(".videoHeaderClass")[0];n.remove()}let n=document.createElement("div");n.className="videoHeaderClass",n.innerHTML=t.name,n.id="videoheaders"+t.userid,A.parentNode.appendChild(n)},this.attachMetaUserDetails=attachMetaUserDetails=function(A,t){webrtcdev.log("[media_dommanager] attachMetaUserDetails - ",t.userid,":",t.type);let n=document.createElement("span");n.setAttribute("style","background-color:"+t.color),n.innerHTML=t.userid+":"+t.type+"<br/>",A.parentNode.insertBefore(n,A.parentNode.firstChild)},this.showdesktopnotification=showdesktopnotification=function(A,t){if(!("Notification"in window))alert("This browser does not support desktop notification");else if("granted"===Notification.permission){new Notification(A,{body:t})}else"denied"!==Notification.permission&&webrtcdev.warn(" [notify.js] notification denied")};var rn=document.createElement("div"),an;rn.id="saveButtonCanvasDraw",rn.setAttribute("data-toggle","modal"),rn.setAttribute("data-target","#saveModal"),rn.onclick=function(){J("blobcanvas")},document.body.appendChild(rn),this.getWebrtcdevStats=getWebrtcdevStats=function(){for(let A in webrtcdev.info(" URL  : ",window.location.href),webrtcdev.info(" Bandwidth  : ",this.version),webrtcdev.info(" Browser  : ",at.DetectRTC.browser),webrtcdev.info(" Network connection downlink : ",navigator.connection.downlink),webrtcdev.info(" Network connection effectiveType : ",navigator.connection.effectiveType),webrtcdev.info(" Network connection rtt : ",navigator.connection.rtt),webrtcdev.info(" Bandwidth  : ",at.bandwidth),webrtcdev.info(" All active participants  : ",JA()),Se(),ot)webrtcdev.info(" Peer   : ",A," - ",ot[A]);return new Promise(function(A){for(let t in at.peers)if(at.peers[t].userid){let n=at.peers[t].peer;webrtcdev.log(n),n.getStats(null).then(t=>{let n="";t.forEach(A=>{n+="Report:"+A.type+" <br/> ID:"+A.id+" <br/>Timestamp:"+A.timestamp+" <br/> ",Object.keys(A).forEach(t=>{"id"!==t&&"timestamp"!==t&&"type"!==t&&(n+=t+" : "+A[t]+" <br/> ")})}),webrtcdev.info("[stats] getWebrtcdevStats - self  ",it,n),A(n)})}})},this.oldgetStats=function(A,t,n){function r(t){webrtcdev.log("peer ",a);a.getStats()&&(!navigator.mozGetUserMedia?a.getStats(function(A){var n=[];A.result().forEach(function(A){var t={};A.names().forEach(function(n){t[n]=A.stat(n)}),t.id=A.id,t.type=A.type,t.timestamp=A.timestamp,n.push(t)}),t(n)}):a.getStats(A,function(A){var n=[];A.forEach(function(A){n.push(A)}),t(n)},t))}var a=this;if(arguments[0]instanceof RTCMultiConnection){if(a=arguments[0],!navigator.mozGetUserMedia||(A=arguments[1],t=arguments[2],n=arguments[3]),!(A instanceof MediaStreamTrack)&&!!navigator.mozGetUserMedia)throw"2nd argument is not instance of MediaStreamTrack.";}else if(!(A instanceof MediaStreamTrack)&&!!navigator.mozGetUserMedia)throw"1st argument is not instance of MediaStreamTrack.";var s={audio:{},video:{}},d=!1;(function A(){r(function(r){for(var l={audio:{},video:{},results:r,nomore:function(){d=!0}},c=0,B;c<r.length;++c){if(B=r[c],B.datachannelid&&"datachannel"===B.type&&(l.datachannel={state:B.state}),"googLibjingleSession"===B.type&&(l.isOfferer=B.googInitiator),"googCertificate"==B.type&&(l.encryption=B.googFingerprintAlgorithm),"opus"==B.googCodecName&&B.bytesSent){var g=0;if(!!B.bytesSent){s.audio.prevBytesSent||(s.audio.prevBytesSent=B.bytesSent);var u=B.bytesSent-s.audio.prevBytesSent;s.audio.prevBytesSent=B.bytesSent,g=u/1024}l.audio||(l.audio=B),l.audio.availableBandwidth=g.toFixed(1)}if("VP8"==B.googCodecName){var g=0;if(!!B.bytesSent){s.video.prevBytesSent||(s.video.prevBytesSent=B.bytesSent);var u=B.bytesSent-s.video.prevBytesSent;s.video.prevBytesSent=B.bytesSent,g=u/1024}l.video||(l.video=B),l.video.availableBandwidth=g.toFixed(1),B.googFrameHeightReceived&&B.googFrameWidthReceived&&(l.resolutions={width:B.googFrameWidthReceived,height:B.googFrameHeightReceived})}"VideoBwe"==B.type&&(l.video.bandwidth={googActualEncBitrate:B.googActualEncBitrate,googAvailableSendBandwidth:B.googAvailableSendBandwidth,googAvailableReceiveBandwidth:B.googAvailableReceiveBandwidth,googRetransmitBitrate:B.googRetransmitBitrate,googTargetEncBitrate:B.googTargetEncBitrate,googBucketDelay:B.googBucketDelay,googTransmitBitrate:B.googTransmitBitrate}),"googCandidatePair"==B.type&&"true"==B.googActiveConnection&&(l.connectionType={local:{candidateType:B.googLocalCandidateType,ipAddress:B.googLocalAddress},remote:{candidateType:B.googRemoteCandidateType,ipAddress:B.googRemoteAddress},transport:B.googTransportType});var m=((navigator.connection||{}).type||"unknown").toString().toLowerCase();"localcandidate"===B.type&&(!l.connectionType&&(l.connectionType={}),l.connectionType.local={candidateType:B.candidateType,ipAddress:B.ipAddress+":"+B.portNumber,networkType:B.networkType||"unknown",transport:B.transport}),"remotecandidate"===B.type&&(!l.connectionType&&(l.connectionType={}),l.connectionType.local={candidateType:B.candidateType,ipAddress:B.ipAddress+":"+B.portNumber,networkType:B.networkType||m,transport:B.transport})}try{-1!==a.iceConnectionState.search(/failed|closed/gi)&&(d=!0)}catch(A){d=!0}!0===d&&(l.datachannel&&(l.datachannel.state="close"),l.ended=!0),t(l),!d&&typeof n!=null&&n&&setTimeout(A,n||1e3)})})()},"undefined"!=typeof module&&(module.exports=getStats),this.showRtcConn=function(){return at?(webrtcdev.info(" ========================================================================="),webrtcdev.info("[stats] rtcConn : ",at),webrtcdev.info(" =========================================================================")):webrtcdev.warn(" rtcConn doesnt exist "),at},this.updateStats=function(){webrtcdev.info(" ============================ get Stats  =========================================="),Wt&&Wt.active&&(getStats(event.stream.getVideoTracks(),function(A){document.getElementById("network-stats-body").innerHTML=A},2e4),document.getElementById(Wt.statsConainer).innerHTML+=JSON.stringify(Wt),document.getElementById(Wt.statsConainer).innerHTML+=JSON.stringify(Wt.bandwidth),document.getElementById(Wt.statsConainer).innerHTML+=JSON.stringify(Wt.codecs))};var on=null,sn=null,dn,nn,ln;this.showScrConn=function(){on?(webrtcdev.info(" ========================================================================="),webrtcdev.info(" srcConn : ",on),webrtcdev.info(" srcConn.peers.getAllParticipants() : ",on.peers.getAllParticipants()),webrtcdev.info(" =========================================================================")):webrtcdev.debug(" Screen share is not active ")},"",function(){function A(){function A(A,t){function n(A,n,s){m=$A(n.byteLength/a);for(var d=0,l;d<m;d++)l=d*a,u[g]=n.slice(l,rt(l+a,n.byteLength)),t({uuid:r.uuid,buffer:u[g],currentPosition:g,maxChunks:B,size:r.size,name:r.name,lastModifiedDate:r.lastModifiedDate.toString(),type:r.type}),g++;g==B&&(p=!0),s()}t=t||function(A){postMessage(A)};var r=A.file;r.uuid||(r.uuid=(100*Math.random()).toString().replace(/\./g,""));var a=A.chunkSize||15000;A.extra&&A.extra.chunkSize&&(a=A.extra.chunkSize);var s=0,d=a,l=et(rt(1e8,d)/a),c=l*a,B=$A(r.size/a);r.maxChunks=B;var g=0,u=[],m,p;t({currentPosition:g,uuid:r.uuid,maxChunks:B,size:r.size,name:r.name,type:r.type,lastModifiedDate:r.lastModifiedDate.toString(),start:!0});var w=new FileReader,h;w.onloadend=function(A){A.target.readyState==FileReader.DONE&&n(r.name,A.target.result,function(){s++,(s+1)*c<r.size?(h=r.slice(s*c,(s+1)*c),w.readAsArrayBuffer(h)):s*c<r.size?(h=r.slice(s*c,r.size),w.readAsArrayBuffer(h)):(r.url=wn.createObjectURL(r),t({currentPosition:g,uuid:r.uuid,maxChunks:B,size:r.size,name:r.name,lastModifiedDate:r.lastModifiedDate.toString(),url:wn.createObjectURL(r),type:r.type,end:!0}))})},g+=1,h=r.slice(s*c,(s+1)*c),w.readAsArrayBuffer(h)}var t=this;t.readAsArrayBuffer=function(t,n){function r(A){t.chunks[A.uuid]||(t.chunks[A.uuid]={currentPosition:-1}),n.extra=n.extra||{userid:0},A.userid=n.userid||n.extra.userid||0,A.extra=n.extra,t.chunks[A.uuid][A.currentPosition]=A,A.end&&a&&(a(A.uuid),a=null),200<A.maxChunks&&200==A.currentPosition&&a&&(a(A.uuid),a=null)}var a=n.earlyCallback;delete n.earlyCallback;A(n,r)}}function t(A){function t(a,s){if(!a.uuid)return void A.convertToObject(a,function(A){t(A)});if(a.start&&!r.chunks[a.uuid]&&(r.chunks[a.uuid]={},A.onBegin&&A.onBegin(a)),!a.end&&a.buffer&&(r.chunks[a.uuid][a.currentPosition]=a.buffer),a.end){var d=r.chunks[a.uuid],l=[];Object.keys(d).forEach(function(A){l.push(d[A])});var c=new Blob(l,{type:a.type});c=n(c,a),c.url=wn.createObjectURL(c),c.uuid=a.uuid,c.size||webrtcdev.error("Something went wrong. Blob Size is 0."),A.onEnd&&A.onEnd(c),delete r.chunks[a.uuid],delete r.chunksWaiters[a.uuid]}a.buffer&&A.onProgress&&A.onProgress(a),a.end||(s(a),r.chunksWaiters[a.uuid]=function(){function A(){a.buffer&&r.chunks[a.uuid]&&(a.currentPosition==a.maxChunks||r.chunks[a.uuid][a.currentPosition]||(s(a),setTimeout(A,5e3)))}setTimeout(A,5e3)},r.chunksWaiters[a.uuid]())}var r=this;r.chunks={},r.chunksWaiters={},r.receive=t}function n(A,t){if(A||(A={}),!t)return A;for(var n in t)try{A[n]=t[n]}catch(A){}return A}var r={ConvertToArrayBuffer:function(A,t){E.pack(A,function(A){t(A.buffer)})},ConvertToObject:function(A,t){E.unpack(A,t)}},a=!1,s=!1,d=Uint8Array.BYTES_PER_ELEMENT,l=Uint16Array.BYTES_PER_ELEMENT,c=Uint32Array.BYTES_PER_ELEMENT,B={NULL:0,UNDEFINED:1,STRING:2,NUMBER:3,BOOLEAN:4,ARRAY:5,OBJECT:6,INT8ARRAY:7,INT16ARRAY:8,INT32ARRAY:9,UINT8ARRAY:10,UINT16ARRAY:11,UINT32ARRAY:12,FLOAT32ARRAY:13,FLOAT64ARRAY:14,ARRAYBUFFER:15,BLOB:16,FILE:16,BUFFER:17};if(a)var g=["NULL","UNDEFINED","STRING","NUMBER","BOOLEAN","ARRAY","OBJECT","INT8ARRAY","INT16ARRAY","INT32ARRAY","UINT8ARRAY","UINT16ARRAY","UINT32ARRAY","FLOAT32ARRAY","FLOAT64ARRAY","ARRAYBUFFER","BLOB","BUFFER"];var u=[null,null,"Uint16","Float64","Uint8",null,null,"Int8","Int16","Int32","Uint8","Uint16","Uint32","Float32","Float64","Uint8","Uint8","Uint8"],m=function(A,t,n){var r=[];r[0]=[];for(var a=0;a<40;a++)r[0][a]=10>a?"0"+a.toString(10):a.toString(10);for(a=0;a<n;a++){var d=A.getUint8(t+a,s),l=~~(a/40)+1;"undefined"==typeof r[l]&&(r[l]=[]),r[l][a%40]=16>d?"0"+d.toString(16):d.toString(16)}for(webrtcdev.log("%c"+r[0].join(" "),"font-weight: bold;"),a=1;a<r.length;a++)webrtcdev.log(r[a].join(" "))},p=function(A){var t;if(A===void 0)t=B.UNDEFINED;else if(null===A)t=B.NULL;else{var n=A.constructor.name;if(n!==void 0)t=B[n.toUpperCase()];else switch(typeof A){case"string":t=B.STRING;break;case"number":t=B.NUMBER;break;case"boolean":t=B.BOOLEAN;break;case"object":A instanceof Array?t=B.ARRAY:A instanceof Int8Array?t=B.INT8ARRAY:A instanceof Int16Array?t=B.INT16ARRAY:A instanceof Int32Array?t=B.INT32ARRAY:A instanceof Uint8Array?t=B.UINT8ARRAY:A instanceof Uint16Array?t=B.UINT16ARRAY:A instanceof Uint32Array?t=B.UINT32ARRAY:A instanceof Float32Array?t=B.FLOAT32ARRAY:A instanceof Float64Array?t=B.FLOAT64ARRAY:A instanceof ArrayBuffer?t=B.ARRAYBUFFER:A instanceof Blob?t=B.BLOB:A instanceof Buffer?t=B.BUFFER:A instanceof Object&&(t=B.OBJECT);break;default:}}return t},w=function(A){var t=0,n=0,r=0,p=s,w=new ArrayBuffer(A[0].byte_length+A[0].header_size),h=new DataView(w);for(n=0;n<A.length;n++){var C=t,Q=A[n].header_size,U=A[n].type,E=A[n].length,F=A[n].value,b=A[n].byte_length,H=u[U],S=null===H?0:window[H+"Array"].BYTES_PER_ELEMENT;switch(U===B.BUFFER?h.setUint8(t,B.BLOB,p):h.setUint8(t,U,p),t+=d,a&&webrtcdev.info("Packing",U,g[U]),(U===B.ARRAY||U===B.OBJECT)&&(h.setUint16(t,E,p),t+=l,a&&webrtcdev.info("Content Length",E)),h.setUint32(t,b,p),t+=c,a&&(webrtcdev.info("Header Size",Q,"bytes"),webrtcdev.info("Byte Length",b,"bytes")),U){case B.NULL:case B.UNDEFINED:break;case B.STRING:for(a&&webrtcdev.info("Actual Content %c\""+F+"\"","font-weight:bold;"),r=0;r<E;r++,t+=S)h.setUint16(t,F.charCodeAt(r),p);break;case B.NUMBER:case B.BOOLEAN:a&&webrtcdev.info("%c"+F.toString(),"font-weight:bold;"),h["set"+H](t,F,p),t+=S;break;case B.INT8ARRAY:case B.INT16ARRAY:case B.INT32ARRAY:case B.UINT8ARRAY:case B.UINT16ARRAY:case B.UINT32ARRAY:case B.FLOAT32ARRAY:case B.FLOAT64ARRAY:var T=new Uint8Array(h.buffer,t,b);T.set(new Uint8Array(F.buffer)),t+=b;break;case B.ARRAYBUFFER:case B.BUFFER:var T=new Uint8Array(h.buffer,t,b);T.set(new Uint8Array(F)),t+=b;break;case B.BLOB:case B.ARRAY:case B.OBJECT:break;default:throw"TypeError: Unexpected type found.";}a&&m(h,C,t-C)}return h},h=function(A,t){var n=0,r=s,p=t,w,C,Q,U,E;w=A.getUint8(t,r),t+=d,a&&webrtcdev.info("Unpacking",w,g[w]),(w===B.ARRAY||w===B.OBJECT)&&(C=A.getUint16(t,r),t+=l,a&&webrtcdev.info("Content Length",C)),Q=A.getUint32(t,r),t+=c,a&&webrtcdev.info("Byte Length",Q,"bytes");var F=u[w],b=null===F?0:window[F+"Array"].BYTES_PER_ELEMENT;switch(w){case B.NULL:case B.UNDEFINED:a&&m(A,p,t-p),U=null;break;case B.STRING:C=Q/b;var H=[];for(n=0;n<C;n++){var S=A.getUint16(t,r);t+=b,H.push(At(S))}U=H.join(""),a&&(webrtcdev.info("Actual Content %c\""+U+"\"","font-weight:bold;"),m(A,p,t-p));break;case B.NUMBER:U=A.getFloat64(t,r),t+=b,a&&(webrtcdev.info("Actual Content %c\""+U.toString()+"\"","font-weight:bold;"),m(A,p,t-p));break;case B.BOOLEAN:U=1===A.getUint8(t,r),t+=b,a&&(webrtcdev.info("Actual Content %c\""+U.toString()+"\"","font-weight:bold;"),m(A,p,t-p));break;case B.INT8ARRAY:case B.INT16ARRAY:case B.INT32ARRAY:case B.UINT8ARRAY:case B.UINT16ARRAY:case B.UINT32ARRAY:case B.FLOAT32ARRAY:case B.FLOAT64ARRAY:case B.ARRAYBUFFER:E=A.buffer.slice(t,t+Q),t+=Q,U=w===B.ARRAYBUFFER?E:new window[F+"Array"](E),a&&m(A,p,t-p);break;case B.BLOB:if(a&&m(A,p,t-p),window.Blob){var T=h(A,t),I=h(A,T.cursor);t=I.cursor,U=new Blob([I.value],{type:T.value})}else E=A.buffer.slice(t,t+Q),t+=Q,U=new Buffer(E);break;case B.ARRAY:for(a&&m(A,p,t-p),U=[],n=0;n<C;n++)E=h(A,t),t=E.cursor,U.push(E.value);break;case B.OBJECT:for(a&&m(A,p,t-p),U={},n=0;n<C;n++){var N=h(A,t),R=h(A,N.cursor);t=R.cursor,U[N.value]=R.value}break;default:throw"TypeError: Type not supported.";}return{value:U,cursor:t}},C=function(A,t){for(var n=A.length,r=[],a=0,s=0,d=0;d<A.length;d++)(function(d){Q(A[d],function(A){if(r[d]=A,s+=A[0].header_size+A[0].byte_length,++a===n){for(var l=[],c=0;c<r.length;c++)l=l.concat(r[c]);t(l,s)}})})(d)},Q=function(A,t){var n=1,r=d+c,a=0,s=0,g;switch(g=p(A),n=void 0===u[g]||null===u[g]?0:window[u[g]+"Array"].BYTES_PER_ELEMENT,g){case B.UNDEFINED:case B.NULL:break;case B.NUMBER:case B.BOOLEAN:a=n;break;case B.STRING:s=A.length,a+=s*n;break;case B.INT8ARRAY:case B.INT16ARRAY:case B.INT32ARRAY:case B.UINT8ARRAY:case B.UINT16ARRAY:case B.UINT32ARRAY:case B.FLOAT32ARRAY:case B.FLOAT64ARRAY:s=A.length,a+=s*n;break;case B.ARRAY:return void C(A,function(n,a){t([{type:g,length:A.length,header_size:r+l,byte_length:a,value:null}].concat(n))});case B.OBJECT:var m=[];for(var w in A)A.hasOwnProperty(w)&&(m.push(w),m.push(A[w]),s++);return void C(m,function(A,n){t([{type:g,length:s,header_size:r+l,byte_length:n,value:null}].concat(A))});case B.ARRAYBUFFER:a+=A.byteLength;break;case B.BLOB:var h=A.type,Q=new FileReader;return Q.onload=function(A){C([h,A.target.result],function(A,n){t([{type:g,length:s,header_size:r,byte_length:n,value:null}].concat(A))})},Q.onerror=function(A){throw"FileReader Error: "+A},void Q.readAsArrayBuffer(A);case B.BUFFER:a+=A.length;break;default:throw"TypeError: Type \""+A.constructor.name+"\" not supported.";}t([{type:g,length:s,header_size:r,byte_length:a,value:A}].concat([]))},U=function(A){var t=A instanceof DataView?A:new DataView(A),n=h(t,0);return n.value};a&&(window.Test={BIG_ENDIAN:s,LITTLE_ENDIAN:!0,Types:B,pack:w,unpack:h,serialize:Q,deserialize:U});var E={pack:function(A,t){try{a&&webrtcdev.info("%cPacking Start","font-weight: bold; color: red;",A),Q(A,function(A){a&&webrtcdev.info("Serialized Object",A),t(w(A))})}catch(A){throw A}},unpack:function(A,t){try{a&&webrtcdev.info("%cUnpacking Start","font-weight: bold; color: red;",A);var n=U(A);a&&webrtcdev.info("Deserialized Object",n),t(n)}catch(A){throw A}}};window.FileConverter=r,window.FileSelector=function(){function A(A,r){var a=document.createElement("input");a.type="file",r&&(a.multiple=!0),a.accept=n.accept,a.onchange=function(){return r?a.files.length?void A(a.files):void webrtcdev.error("No file selected."):a.files[0]?void(A(a.files[0]),a.parentNode.removeChild(a)):void webrtcdev.error("No file selected.")},a.style.display="none",(document.body||document.documentElement).appendChild(a),t(a)}function t(A){var t=new window.MouseEvent("click",{view:window,bubbles:!0,cancelable:!0,button:0,buttons:0,mozInputSource:1}),n=A.dispatchEvent(t)}var n=this;n.selectSingleFile=A,n.selectMultipleFiles=function(t){A(t,!0)},n.accept="*.*"},window.FileBufferReader=function(){function n(A,t){if(null==A||"object"!=typeof A)return A;if(A.constructor!=Object&&A.constructor!=Array)return A;if(A.constructor==Date||A.constructor==RegExp||A.constructor==Function||A.constructor==String||A.constructor==Number||A.constructor==Boolean)return new A.constructor(A);for(var r in t=t||new A.constructor,A)t[r]="undefined"==typeof t[r]?n(A[r],null):t[r];return t}var a=this,s=new A;a.chunks={},a.users={},a.readAsArrayBuffer=function(A,t,r){s.readAsArrayBuffer(a,{file:A,earlyCallback:function(A){t(n(A,{currentPosition:-1}))},extra:r||{userid:0}})},a.getNextChunk=function(A,t,r){try{for(x in ot)if(ot[x].userid==it)for(y in ot[x].filearray)ot[x].filearray[y].pid||console.warn("[ fbr.getNextChunk ] pid does mot exist "),ot[x].filearray[y].pid.includes(A)&&"stop"==ot[x].filearray[y].status&&(ot[x].filearray[y].status="stopped")}catch(A){webrtcdev.log(A)}var s;"undefined"!=typeof A.currentPosition&&(s=A.currentPosition,A=A.uuid);var d=a.chunks[A];if(d){"undefined"==typeof r?("undefined"!=typeof s&&(a.chunks[A].currentPosition=s),a.chunks[A].currentPosition++,s=a.chunks[A].currentPosition):(!a.users[r+""]&&(a.users[r+""]={fileUUID:A,userid:r,currentPosition:-1}),"undefined"!=typeof s&&(a.users[r+""].currentPosition=s),a.users[r+""].currentPosition++,s=a.users[r+""].currentPosition);var l=d[s];return l?void(l=n(l),"undefined"!=typeof r&&(l.remoteUserId=r+""),!!l.start&&a.onBegin(l),!!l.end&&a.onEnd(l),a.onProgress(l),a.convertToArrayBuffer(l,function(A){return l.currentPosition==l.maxChunks?void t(A,!0):void t(A,!1)})):(delete a.chunks[A],void a.convertToArrayBuffer({chunkMissing:!0,currentPosition:s,uuid:A},t))}};var d=new t(a);a.addChunk=function(A,t){A&&d.receive(A,function(A){a.convertToArrayBuffer({readyForNextChunk:!0,currentPosition:A.currentPosition,uuid:A.uuid},t)})},a.chunkMissing=function(A){delete d.chunks[A.uuid],delete d.chunksWaiters[A.uuid]},a.onBegin=function(){},a.onEnd=function(){},a.onProgress=function(){},a.convertToObject=r.ConvertToObject,a.convertToArrayBuffer=r.ConvertToArrayBuffer,a.setMultipleUsers=function(){}}}(),window.requestAnimationFrame||(un=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame),window.cancelAnimationFrame||(mn=window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame),window.AudioContext||(window.AudioContext=window.webkitAudioContext||window.mozAudioContext),wn=window.URL||window.webkitURL,navigator.getUserMedia=navigator.webkitGetUserMedia||navigator.mozGetUserMedia,window.webkitMediaStream&&(window.MediaStream=window.webkitMediaStream);var cn=!!navigator.webkitGetUserMedia,Bn={AudioContext:window.AudioContext||window.webkitAudioContext},gn=function(){function A(A){for(var n=t(A),r=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:B(n.duration),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:25541},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:n.width,id:176},{data:n.height,id:186}]}]}]}]}],a=0,l=0;a<A.length;){var c=[],g=0;do c.push(A[a]),g+=A[a].duration,a++;while(a<A.length&&g<3e4);var u=0,m={id:524531317,data:[{data:l,id:231}].concat(c.map(function(A){var t=d({discardable:0,frame:A.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:tt(u)});return u+=A.duration,{data:t,id:163}}))};r[1].data.push(m),l+=g}return s(r)}function t(A){if(!A[0])return void webrtcdev.warn("Something went wrong. Maybe WebP format is not supported in the current browser.");for(var t=A[0].width,n=A[0].height,r=A[0].duration,a=1;a<A.length;a++)r+=A[a].duration;return{duration:r,width:t,height:n}}function n(A){for(var t=[];0<A;)t.push(255&A),A>>=8;return new Uint8Array(t.reverse())}function r(A){return new Uint8Array(A.split("").map(function(A){return A.charCodeAt(0)}))}function a(A){var t=[],n=A.length%8?Array(9-A.length%8).join("0"):"";A=n+A;for(var r=0;r<A.length;r+=8)t.push(parseInt(A.substr(r,8),2));return new Uint8Array(t)}function s(A){for(var t=[],d=0,l;d<A.length;d++){l=A[d].data,"object"==typeof l&&(l=s(l)),"number"==typeof l&&(l=a(l.toString(2))),"string"==typeof l&&(l=r(l));var c=l.size||l.byteLength||l.length,B=$A($A(ZA(c)/ZA(2))/8),g=c.toString(2),u=Array(7*B+7+1-g.length).join("0")+g,m=Array(B).join("0")+"1"+u;t.push(n(A[d].id)),t.push(a(m)),t.push(l)}return new Blob(t,{type:"video/webm"})}function d(A){var t=0;if(A.keyframe&&(t|=128),A.invisible&&(t|=8),A.lacing&&(t|=A.lacing<<1),A.discardable&&(t|=1),127<A.trackNum)throw"TrackNumber > 127 not supported";var n=[128|A.trackNum,A.timecode>>8,255&A.timecode,t].map(function(A){return At(A)}).join("")+A.frame;return n}function l(A){for(var t=A.RIFF[0].WEBP[0],n=t.indexOf("\x9D\x01*"),r=0,a=[];4>r;r++)a[r]=t.charCodeAt(n+3+r);var s,d,l;return l=a[1]<<8|a[0],s=16383&l,l=a[3]<<8|a[2],d=16383&l,{width:s,height:d,data:t,riff:A}}function c(A){for(var t=0,n={};t<A.length;){var r=A.substr(t,4),a=parseInt(A.substr(t+4,4).split("").map(function(A){var t=A.charCodeAt(0).toString(2);return Array(8-t.length+1).join("0")+t}).join(""),2),s=A.substr(t+4+4,a);t+=8+a,n[r]=n[r]||[],"RIFF"==r||"LIST"==r?n[r].push(c(s)):n[r].push(s)}return n}function B(A){return[].slice.call(new Uint8Array(new Float64Array([A]).buffer),0).map(function(A){return At(A)}).reverse().join("")}function g(A){this.frames=[],this.duration=A||1,this.quality=100}return g.prototype.add=function(A,t){if("canvas"in A&&(A=A.canvas),"toDataURL"in A&&(A=A.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/ig.test(A))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:A,duration:t||this.duration})},g.prototype.compile=function(){return new A(this.frames.map(function(A){var t=l(c(atob(A.image.slice(23))));return t.duration=A.duration,t}))},{Video:g,toWebM:A}}();"",Ve.getFromDisk=function(A,t){if(!t)throw"callback is mandatory.";webrtcdev.log("Getting recorded "+("all"===A?"blobs":A+" blob ")+" from disk!"),En.Fetch(function(n,r){"all"!==A&&r===A+"Blob"&&t&&t(n),"all"===A&&t&&t(n,r.replace("Blob",""))})},Ve.writeToDisk=function(A){webrtcdev.log("Writing recorded blob(s) to disk!"),A=A||{},A.audio&&A.video&&A.gif?A.audio.getDataURL(function(t){A.video.getDataURL(function(n){A.gif.getDataURL(function(A){En.Store({audioBlob:t,videoBlob:n,gifBlob:A})})})}):A.audio&&A.video?A.audio.getDataURL(function(t){A.video.getDataURL(function(A){En.Store({audioBlob:t,videoBlob:A})})}):A.audio&&A.gif?A.audio.getDataURL(function(t){A.gif.getDataURL(function(A){En.Store({audioBlob:t,gifBlob:A})})}):A.video&&A.gif?A.video.getDataURL(function(t){A.gif.getDataURL(function(A){En.Store({videoBlob:t,gifBlob:A})})}):A.audio?A.audio.getDataURL(function(A){En.Store({audioBlob:A})}):A.video?A.video.getDataURL(function(A){En.Store({videoBlob:A})}):A.gif&&A.gif.getDataURL(function(A){En.Store({gifBlob:A})})},"undefined"!=typeof module&&(module.exports=Ve),"function"==typeof define&&define.amd&&define("RecordRTC",[],function(){return Ve}),Xe.getFromDisk=Ve.getFromDisk,Xe.writeToDisk=Ve.writeToDisk,"undefined"!=typeof Ve&&(Ve.MRecordRTC=Xe);(function(A){A&&"undefined"==typeof window&&"undefined"!=typeof global&&(global.navigator={userAgent:"Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",getUserMedia:function(){}},!global.webrtcdev&&(global.webrtcdev={}),"undefined"==typeof global.webrtcdev.debug&&(global.webrtcdev.debug=global.webrtcdev.info=global.webrtcdev.error=global.webrtcdev.log=global.webrtcdev.log||function(){webrtcdev.log(arguments)}),"undefined"==typeof document&&(A.document={},document.createElement=document.captureStream=document.mozCaptureStream=function(){var A={getContext:function(){return A},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""}};return A},A.HTMLVideoElement=function(){}),"undefined"==typeof location&&(A.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof nn&&(A.screen={width:0,height:0}),"undefined"==typeof wn&&(A.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),A.window=global)})("undefined"==typeof global?null:global);var un=window.requestAnimationFrame;"undefined"==typeof un&&("undefined"!=typeof webkitRequestAnimationFrame&&(un=webkitRequestAnimationFrame),"undefined"!=typeof mozRequestAnimationFrame&&(un=mozRequestAnimationFrame));var mn=window.cancelAnimationFrame;"undefined"==typeof mn&&("undefined"!=typeof webkitCancelAnimationFrame&&(mn=webkitCancelAnimationFrame),"undefined"!=typeof mozCancelAnimationFrame&&(mn=mozCancelAnimationFrame));var pn=window.AudioContext;"undefined"==typeof pn&&("undefined"!=typeof webkitAudioContext&&(pn=webkitAudioContext),"undefined"!=typeof mozAudioContext&&(pn=mozAudioContext));var wn=window.URL;"undefined"==typeof wn&&"undefined"!=typeof webkitURL&&(wn=webkitURL),"undefined"!=typeof navigator&&"undefined"==typeof navigator.getUserMedia&&("undefined"!=typeof navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),"undefined"!=typeof navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia));var hn=-1!==navigator.userAgent.indexOf("Edge")&&(!!navigator.msSaveBlob||!!navigator.msSaveOrOpenBlob),fn=!!window.opera||-1!==navigator.userAgent.indexOf("OPR/"),Cn=!fn&&!hn&&!!navigator.webkitGetUserMedia,Qn=window.MediaStream;"undefined"==typeof Qn&&"undefined"!=typeof webkitMediaStream&&(Qn=webkitMediaStream),"undefined"!=typeof Qn&&(!("getVideoTracks"in Qn.prototype)&&(Qn.prototype.getVideoTracks=function(){if(!this.getTracks)return[];var A=[];return this.getTracks.forEach(function(t){-1!==t.kind.toString().indexOf("video")&&A.push(t)}),A},Qn.prototype.getAudioTracks=function(){if(!this.getTracks)return[];var A=[];return this.getTracks.forEach(function(t){-1!==t.kind.toString().indexOf("audio")&&A.push(t)}),A}),!("stop"in Qn.prototype)&&(Qn.prototype.stop=function(){this.getAudioTracks().forEach(function(A){!A.stop||A.stop()}),this.getVideoTracks().forEach(function(A){!A.stop||A.stop()})}));var Un={};"undefined"==typeof pn?"undefined"!=typeof webkitAudioContext&&(Un.AudioContext=webkitAudioContext):Un.AudioContext=pn,"undefined"!=typeof Ve&&(Ve.Storage=Un),"undefined"!=typeof Ve&&(Ve.MediaStreamRecorder=De),"undefined"!=typeof Ve&&(Ve.StereoAudioRecorder=xe),"undefined"!=typeof Ve&&(Ve.CanvasRecorder=We),"undefined"!=typeof Ve&&(Ve.WhammyRecorder=_e);var gn=function(){function A(A){this.frames=[],this.duration=A||1,this.quality=.8}function t(A){var t=wn.createObjectURL(new Blob([A.toString(),"this.onmessage =  function (e) {"+A.name+"(e.data);}"],{type:"application/javascript"})),n=new Worker(t);return wn.revokeObjectURL(t),n}function n(A){function t(A,t,n){return[{data:A,id:231}].concat(n.map(function(A){var n=l({discardable:0,frame:A.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:tt(t)});return t+=A.duration,{data:n,id:163}}))}function n(A){if(!A[0])return void postMessage({error:"Something went wrong. Maybe WebP format is not supported in the current browser."});for(var t=A[0].width,n=A[0].height,r=A[0].duration,a=1;a<A.length;a++)r+=A[a].duration;return{duration:r,width:t,height:n}}function r(A){for(var t=[];0<A;)t.push(255&A),A>>=8;return new Uint8Array(t.reverse())}function a(A){return new Uint8Array(A.split("").map(function(A){return A.charCodeAt(0)}))}function s(A){var t=[],n=A.length%8?Array(9-A.length%8).join("0"):"";A=n+A;for(var r=0;r<A.length;r+=8)t.push(parseInt(A.substr(r,8),2));return new Uint8Array(t)}function d(A){for(var t=[],n=0,l;n<A.length;n++){l=A[n].data,"object"==typeof l&&(l=d(l)),"number"==typeof l&&(l=s(l.toString(2))),"string"==typeof l&&(l=a(l));var c=l.size||l.byteLength||l.length,B=$A($A(ZA(c)/ZA(2))/8),g=c.toString(2),u=Array(7*B+7+1-g.length).join("0")+g,m=Array(B).join("0")+"1"+u;t.push(r(A[n].id)),t.push(s(m)),t.push(l)}return new Blob(t,{type:"video/webm"})}function l(A){var t=0;if(A.keyframe&&(t|=128),A.invisible&&(t|=8),A.lacing&&(t|=A.lacing<<1),A.discardable&&(t|=1),127<A.trackNum)throw"TrackNumber > 127 not supported";var n=[128|A.trackNum,A.timecode>>8,255&A.timecode,t].map(function(A){return At(A)}).join("")+A.frame;return n}function c(A){for(var t=A.RIFF[0].WEBP[0],n=t.indexOf("\x9D\x01*"),r=0,a=[];4>r;r++)a[r]=t.charCodeAt(n+3+r);var s,d,l;return l=a[1]<<8|a[0],s=16383&l,l=a[3]<<8|a[2],d=16383&l,{width:s,height:d,data:t,riff:A}}function B(A,t){return parseInt(A.substr(t+4,4).split("").map(function(A){var t=A.charCodeAt(0).toString(2);return Array(8-t.length+1).join("0")+t}).join(""),2)}function g(A){for(var t=0,n={};t<A.length;){var r=A.substr(t,4),a=B(A,t),s=A.substr(t+4+4,a);t+=8+a,n[r]=n[r]||[],"RIFF"===r||"LIST"===r?n[r].push(g(s)):n[r].push(s)}return n}function u(A){return[].slice.call(new Uint8Array(new Float64Array([A]).buffer),0).map(function(A){return At(A)}).reverse().join("")}var m=new function(A){var r=n(A);if(!r)return[];for(var a=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:u(r.duration),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:29637},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:r.width,id:176},{data:r.height,id:186}]}]}]}]}],s=0,l=0;s<A.length;){var c=[],B=0;do c.push(A[s]),B+=A[s].duration,s++;while(s<A.length&&B<3e4);var g={id:524531317,data:t(l,0,c)};a[1].data.push(g),l+=B}return d(a)}(A.map(function(A){var t=c(g(atob(A.image.slice(23))));return t.duration=A.duration,t}));postMessage(m)}return A.prototype.add=function(A,t){if("canvas"in A&&(A=A.canvas),"toDataURL"in A&&(A=A.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/ig.test(A))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:A,duration:t||this.duration})},A.prototype.compile=function(A){var r=t(n);r.onmessage=function(t){return t.data.error?void webrtcdev.error(t.data.error):void A(t.data)},r.postMessage(this.frames)},{Video:A}}();"undefined"!=typeof Ve&&(Ve.Whammy=gn);var En={init:function(){function A(A){A.createObjectStore(n.dataStoreName)}function t(){function A(A){t.objectStore(n.dataStoreName).get(A).onsuccess=function(t){n.callback&&n.callback(t.target.result,A)}}var t=s.transaction([n.dataStoreName],"readwrite");n.videoBlob&&t.objectStore(n.dataStoreName).put(n.videoBlob,"videoBlob"),n.gifBlob&&t.objectStore(n.dataStoreName).put(n.gifBlob,"gifBlob"),n.audioBlob&&t.objectStore(n.dataStoreName).put(n.audioBlob,"audioBlob"),A("audioBlob"),A("videoBlob"),A("gifBlob")}var n=this;if("undefined"==typeof indexedDB||"undefined"==typeof indexedDB.open)return void webrtcdev.error("IndexedDB API are not available in this browser.");var r=this.dbName||location.href.replace(/\/|:|#|%|\.|\[|\]/g,""),a=indexedDB.open(r,1),s;a.onerror=n.onError,a.onsuccess=function(){if(s=a.result,s.onerror=n.onError,!s.setVersion)t();else if(1!==s.version){var r=s.setVersion(1);r.onsuccess=function(){A(s),t()}}else t()},a.onupgradeneeded=function(t){A(t.target.result)}},Fetch:function(A){return this.callback=A,this.init(),this},Store:function(A){return this.audioBlob=A.audioBlob,this.videoBlob=A.videoBlob,this.gifBlob=A.gifBlob,this.init(),this},onError:function(A){webrtcdev.error(JSON.stringify(A,null,"\t"))},dataStoreName:"recordRTC",dbName:null};"undefined"!=typeof Ve&&(Ve.DiskStorage=En),"undefined"!=typeof Ve&&(Ve.GifRecorder=Pe);var Fn=0;Object.defineProperty(HTMLMediaElement.prototype,"playing",{get:function(){return!(!(0<this.currentTime)||this.paused||this.ended||!(2<this.readyState))}});var bn={},vn=null,yn=null,Hn=[],Sn={},Tn=!1,In;this.getlisteninlink=function(){wt||console.error("cant generate listenin link , no session id found ");try{webrtcdev.log(" Current Session ",window.origin);let A=window.origin+"/#"+wt+"?appname=webrtcwebcall&role=inspector&audio=0&video=0";return A}catch(A){return webrtcdev.error("ListenIn :",A),!1}},this.sendlisteninlink=function(A,t,n,r){var a={apikey:t,senderuseremail:n,receiveruseremail:r,webrtcsessionid:webrtcdevobj.sessionid,connectiontype:1};return fetch(A,{method:"post",crossDomain:!0,headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Authorization:t,"Access-Control-Allow-Origin":window.location.origin,"Access-Control-Allow-Credentials":"true"},body:JSON.stringify(a)}).then(A=>A.json()).then(A=>console.log("Listenin API response ",A)).catch(A=>console.error("Listenin API response ",A))};var Nn="",Rn=null,Ln,Mn,Dn,On,kn,xn;try{Rn=new Worker("js/timekeeper.js"),Rn.addEventListener("message",function(A){let t=d(A.data.remotetime);A.data.remotetime&&t&&(t.innerHTML=A.data.time)},!1)}catch(A){webrtcdev.error("[timerjs]",A)}var Kn=function(){try{var A=[];for(x in ot){let t=ot[+x+1];if(!t)break;webrtcdev.debug(" [timer js] startPeersTime for ",t.userid),ve(t),A.push({zone:t.zone,userid:t.userid,remotetime:"remoteTime_"+t.userid}),Nt=!0}webrtcdev.info("[timerjs] Final tobj ",A),0<A.length&&Rn.postMessage(A)}catch(A){webrtcdev.error(A)}};this.getwebrtcdevlogs=function(){return webrtcdevlogs?webrtcdevlogs:null},this.sendwebrtcdevLogs=function(A,t,n){const r=new FormData;r.append("name",username||"no name"),document.getElementById(Yt.screenshotContainer)&&r.append("scimage",document.getElementById(Yt.screenshotContainer).src),document.getElementById(Yt.logsContainer)&&(document.getElementById(Yt.logsContainer).innerText=webrtcdevlogs),r.append("apikey",t),r.append("useremail",gt),r.append("sessionid",wt),r.append("message",n);{r.append("logfileContent",webrtcdevlogs)}return fetch(A,{method:"POST",body:r})},this.showUserStats=showUserStats=function(){var A=" userid-"+it+" Email-"+gt+" Audio-"+outgoing.audio+" Video-"+outgoing.video+" Role- "+jt;document.getElementById("userstatus")?document.getElementById("userstatus").innerHTML=A:document.body.append("USER Status "+A)},this.getscreenshot=function(A){var t=document.querySelector(A);html2canvas(t).then(A=>A.toDataURL())};var _n=function(A){for(x in ot)if(ot[x].userid==A)return ot[x];return null},Pn=function(A){for(x in ot)if(ot[x].userid==A)return x;return null};this.findPeerInfoSDP=findPeerInfoSDP=function(A){for(x in webrtcdev.log("peerinfomanager] find perinfo SDP ",A),at.peers)if(at.peers[x].userid==A){webrtcdev.log("peerinfomanager] PeerInfo Remote ",at.peers[x]);let A=at.peers[x].peer.currentRemoteDescription;webrtcdev.log("peerinfomanager] PeerInfo Remote SDP ",A.type,A.sdp);let t=A.sdp.split("\n").map(A=>A.trim());t.forEach(function(A){if(0===A.indexOf("a=fingerprint:")){let t=A.substr(14).split(" ");console.log("algorithm - ",t[0]),console.log("fingerprint - ",t[1])}if(0===A.indexOf("m=audio")){let t=A.substr(8).split(" ");console.log("Audio codecs - ",t)}if(0===A.indexOf("m=video")){let t=A.substr(8).split(" ");console.log("Video codecs - ",t)}if(0===A.indexOf("c=IN IP4")){let t=A.substr(9).split(" ");console.log("Contact line - ",t)}})}return null},this.appendToPeerValue=appendToPeerValue=function(A,t,n){try{if(!t||!n)return;let r=_n(A);(r[t]||r.hasOwnProperty(t))&&removefromPeerValue(A,t),r[t]=n;let a=Pn(r.userid);ot[a]=r,webrtcdev.log("[peerinfomanager] appendToPeerValue - update webcallpeers index "+a," with ",t+" -  "+n)}catch(A){webrtcdev.error("[peerinfomanager] appendToPeerValue error - ",A)}finally{return ot}},this.removefromPeerValue=removefromPeerValue=function(A,t){webrtcdev.log("[peerinfomanager] removefromPeerValue "+A+" key "+t);let n=_n(A);return delete n[t]},this.getwebcallpeers=function(){return ot};var Vn=function(A,t){return webrtcdev.log(" [widgets] widgetsobj ",t),new Promise(function(t){if(Rt.active?(webrtcdev.log(" chat objs ",Rt.inputBox,Rt.inputBox.text_id,document.getElementById(Rt.inputBox.text_id)),Rt.inputBox&&Rt.inputBox.text_id?(webrtcdev.log("[sessionmanager] chatObj - Assign chat Box "),ce(Rt)):(webrtcdev.log("[sessionmanager] chatobj - Create chat Box "),le(Rt)),webrtcdev.log("[sessionmanager] chat widget loaded ")):webrtcdev.log("[sessionmanager] chat widget deactivated  "),Mt&&Mt.active&&"inspector"!=jt?(Mt.button.id&&document.getElementById(Mt.button.id)?(webrtcdev.log("[sessionmanager] Assign Screen Record Button "),se(Mt)):(webrtcdev.log("[sessionmanager] Create Screen Record Button "),de(Mt)),webrtcdev.log(" [sessionmanager] Screen record widget loaded ")):Mt&&!Mt.active&&(Mt.button&&Mt.button.id&&document.getElementById(Mt.button.id)&&(document.getElementById(Mt.button.id).className="inactiveButton"),webrtcdev.warn("[sessionmanager] Screen record widget deactivated")),Jt.active?(Jt.button.shareButton.id&&d(Jt.button.shareButton.id)?(webrtcdev.log("[sessionmanager] Assign screenshare Button "),ie(Jt.button.shareButton)):(webrtcdev.log("[sessionmanager] Create screenshare Button "),ae(Jt)),webrtcdev.log(" [sessionmanager]screen share widget loaded ")):webrtcdev.warn("[sessionmanager] screen share widget deactivated "),Pt&&Pt.active?(Pt.button.id&&document.getElementById(Pt.button.id)?(webrtcdev.log("[sessionmanager] Reconnect Button Assigned"),bA(Pt.button.id)):(webrtcdev.log("[sessionmanager]Rconnect Button created"),FA(Pt)),webrtcdev.log(" [sessionmanager]reconnect widget loaded ")):Pt&&!Pt.active&&(Pt.button&&Pt.button.id&&document.getElementById(Pt.button.id)&&(document.getElementById(Pt.button.id).className="inactiveButton"),webrtcdev.warn(" [sessionmanager] reconnect widget deactivated ")),Vt&&Vt.active?(B("cursor1"),B("cursor2"),webrtcdev.log(" [sessionmanager] cursor widget not loaded ")):webrtcdev.warn(" [sessionmanager] cursor widget deactivated "),Xt&&Xt.active?(Xt.button.id&&document.getElementById(Xt.button.id),webrtcdev.log("[widget js] listenin widget loaded ")):Xt&&!Xt.active&&(Xt.button&&Xt.button.id&&document.getElementById(Xt.button.id)&&(document.getElementById(Xt.button.id).className="inactiveButton"),webrtcdev.warn("[widget js] listenin widget deactivated ")),It&&It.active?(we(It),B(It.container.id)):It&&!It.active&&webrtcdev.warn("[widget js] timer widget deactivated "),kt&&kt.active?(kt.container&&kt.container.id&&document.getElementById(kt.container.id)&&(document.getElementById(kt.container.id).hidden=!0),kt.button&&kt.button.id&&document.getElementById(kt.button.id)?pe(kt):me(kt),In=function(){function A(A){n&&n.contentWindow.postMessage({canvasDesignerSyncData:A},"*")}function t(){event.data&&event.data.canvasDesignerSyncData&&s(event.data.canvasDesignerSyncData)}var n;let r={line:!0,pencil:!0,dragSingle:!0,dragMultiple:!0,eraser:!0,rectangle:!0,arc:!0,bezier:!0,quadratic:!0,text:!0};var a="pencil",s=function(A){webrtcdev.log("[widget js] syncDataListener",A)},d=window.addEventListener?"addEventListener":"attachEvent",l=window[d],c="attachEvent"==d?"onmessage":"message";return l(c,function(A){webrtcdev.log(" [widget js] CanvasDesigner parent received message : ",A.data),A.data.modalpopup?rn.click():A.data||A.data.canvasDesignerSyncData?s(A.data.canvasDesignerSyncData):(!A.data||!A.data.canvasDesignerSyncData)&&webrtcdev.log("[widget js] parent received unexpected message")},!1),{appendTo:function(A){n=document.createElement("iframe"),n.id="drawboard",n.src="widget.html?tools="+JSON.stringify(r)+"&selectedIcon="+a,n.style.width="100%",n.style.height="100%",n.allowtransparency=!0,n.style.border=0,A.appendChild(n)},destroy:function(){n&&n.parentNode.removeChild(n),window.removeEventListener("message",t)},addSyncListener:function(A){s=A},syncData:A,setTools:function(A){r=A},setSelected:function(A){"undefined"!=typeof r[A]&&(a=A)}}}(),webrtcdev.log("[widget js] draw widget loaded ")):kt&&!kt.active&&(kt.button&&kt.button.id&&document.getElementById(kt.button.id)&&(document.getElementById(kt.button.id).className="inactiveButton"),webrtcdev.warn("[widget js] draw widget deactivated ")),xt.active&&kA(),Kt.active&&NA(),Lt.active?(webrtcdev.log("[widget js] fileshareobj ",Lt),A.enableFileSharing=!0,A.filesContainer=document.getElementById(Lt.fileShareContainer),Lt.button.id&&document.getElementById(Lt.button.id)?U(Lt):Q(Lt),webrtcdev.log(" [widget js] File sharing widget loaded ")):webrtcdev.warn("[widget js] File sharing widget not loaded "),Wt&&Wt.active)try{webrtcdev.log("[widget js]statisticsobj ",Wt),document.getElementById(Wt.statsConainer).innerHTML=""}catch(A){webrtcdev.error("[widget js] statisticsobj statsConainer not found",A)}if(Yt&&Yt.active)try{webrtcdev.log("[widget js] helpobj ",Yt,document.getElementById(Yt.helpContainer)),document.getElementById(Yt.helpContainer).innerHTML=""}catch(A){webrtcdev.error("[widget js] helpobj helpContainer not found",A)}t("success")})},zn=function(A,t,n){webrtcdev.info("[sessionmanager] - openWebRTC channel: ",A),socket.emit("open-channel",{channel:A,sender:t,maxAllowed:n}),te(" Making a new session ")},Gn=function(A,t){te("Joining an existing session "+A),webrtcdev.info(" [sessionmanager] joinWebRTC channel: ",A),Tt&&showUserStats(),socket.emit("join-channel",{channel:A,sender:t,extra:{userid:t,name:Bt||"",color:ut||"",email:gt||"",role:jt||"participant"}})},Xn=function(t,n){return webrtcdev.log("[sessionmanager] setRtcConn - initiating RtcConn with signaller ",n),at=new RTCMultiConnection,at.channel=this.sessionid,at.socketURL=n.signaller,at.iceServers=n.turn.iceServers,at.iceTransportPolicy="all",at.bundlePolicy="balanced",at.rtcpMuxPolicy="require",at.iceCandidatePoolSize=0,at.sdpSemantics="unified-plan",at.sdpConstraints={mandatory:{OfferToReceiveAudio:Qt,OfferToReceiveVideo:Ut},optional:[{VoiceActivityDetection:!1}]},at.candidates={host:!0,stun:!0,turn:!0},at.session={video:bt||!0,audio:Ft||!0,data:vt||!0},at.direction="many-to-many",at.dontCaptureUserMedia=!bt||!1,at.dontGetRemoteStream=!bt||!1,at.dontAttachStream=!bt||!1,at.isLowBandwidth=1>navigator.connection.downlink,at.bandwidth={screen:!0,audio:!0,video:!0},at.codecs={audio:"opus",video:"VP9"},at.version="6.7.4",at.onopen=function(A){webrtcdev.log("[sessionmanager] onopen - event ",A);try{if(te(A.extra.name+" joined session ","info"),showdesktopnotification(document.title,A.extra.name+" joined session "),A.userid==it)webrtcdev.log("[sessionmanager] onopen - selfuserid ",it," joined the session "),webrtcdev.log("[sessionmanager] onopen - dispatch onLocalConnect"),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"session",action:"onLocalConnect"}}));else{if(webrtcdev.log(" SDP",findPeerInfoSDP(A.userid)),"unlimited"!=en.maxAllowed&&ot.length<=en.maxAllowed){webrtcdev.log("[sessionmanager] onopen: peer length "+ot.length+" is less than max capacity of session  of the session "+en.maxAllowed);let t=_n(A.userid),n=A.extra.name,r=A.extra.color,a=A.extra.email,s=A.extra.role;t?(webrtcdev.log("[sessionmanager] onopen - PeerInfo was already present, this is s rejoin, update the peerinfo "),WA(A.userid,n,r,a,s,"remote"),te(A.extra.role+" "+A.type)):(webrtcdev.log("[sessionmanager] onopen - create new peerinfo"),"LOCAL"==n&&(n="REMOTE"),WA(A.userid,n,r,a,s,"remote"),te(A.extra.role+"  "+A.type),t=_n(A.userid)),updateWebCallView(t)}else webrtcdev.error("[sessionmanager] onopen - max capacity of session is reached ",en.maxAllowed),ne("Another user is trying to join this channel but max count [ "+en.maxAllowed+" ] is reached");webrtcdev.log("[sessionmanager] onopen - dispatch onSessionConnect"),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"session",action:"onSessionConnect"}}))}Tt||(!localStorage.getItem("userid")&&localStorage.setItem("userid",it),!localStorage.getItem("channel")&&localStorage.setItem("channel",t))}catch(A){te("problem in session open ","warning"),webrtcdev.error("[sessionmanager] onopen - problem in session open",A)}},at.onMediaError=function(A,t){webrtcdev.error("[sessionmanager] onMediaError - ",A," constraints ",t),webrtcdev.warn("[sessionmanager] onMediaError - Joining without camera Stream for userid : ",it),te(A.name+" Joining without camera Stream ","warning"),qt=!1},at.onstream=function(A){webrtcdev.log("[sessionmanager] onstream - event ",A),"local"==A.type&&(qt=!0);var t=A.userid;t||console.error("no userid found onstream ");var n=_n(t);if(!n){webrtcdev.warn("[sessionmanager] onstream - PeerInfo not present in webcallpeers "+t+" creating it now ");var r=new Promise(n=>{WA(t,A.extra.name,A.extra.color,A.extra.email,A.extra.role,A.type),n("Success!")});r.then(appendToPeerValue(t,"stream",A.stream)).then(appendToPeerValue(t,"streamid",A.stream.streamid)),n=_n(t),updateWebCallView(n),webrtcdev.log(" [sessionmanager] onstream - updated webcallview for ",t)}else if("inspector"==jt&&"local"==A.type)webrtcdev.warn("[sessionmanager] onstream - ignore any incoming stream from inspector"),updateWebCallView(n);else{webrtcdev.log("[sessionmanager] onstream - update PeerInfo with incoming stream and streamId ");var a=new Promise(n=>{appendToPeerValue(t,"type",A.type),n("Success!")});a.then(appendToPeerValue(t,"stream",A.stream)).then(appendToPeerValue(t,"streamid",A.stream.streamid)),n=_n(t),updateWebCallView(n),webrtcdev.log(" [sessionmanager] onstream - updated webcallview for ",n.userid)}},at.onstreamended=function(A){webrtcdev.warn("[sessionmanager] On streamEnded event ",A);let t=document.getElementById(A.streamid);t&&t.parentNode.removeChild(t)},at.chunkSize=50000,at.onmessage=function(t){if(webrtcdev.log("[sessionmanager] onmessage ",t),t.data.typing);else if(t.data.stoppedTyping);else{var n=_n(t.userid);switch(t.data.type){case"screenshare":if("startscreenshare"==t.data.message){let A=t.data.screenid;te("Starting screen share ",A);let n=document.getElementById(Jt.button.shareButton.id);n.className=Jt.button.shareButton.class_busy,n.innerHTML=Jt.button.shareButton.html_busy,n.disabled=!0,Ne("join",A)}else if("screenshareStartedViewing"==t.data.message)oe("","screenshareStartedViewing");else if("stoppedscreenshare"==t.data.message){te("Screenshare has stopped : "+t.data.screenStreamid);let A=document.getElementById(Jt.button.shareButton.id);A.className=Jt.button.shareButton.class_off,A.innerHTML=Jt.button.shareButton.html_off,A.disabled=!1,Le(e.data.screenStreamid)}else webrtcdev.warn("[sessionmanager] unrecognized screen-share message ",t.data.message);break;case"chat":AA({header:t.extra.name,message:t.data.message,userinfo:t.data.userinfo,color:t.extra.color}),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"chat",action:"onchat"}}));break;case"mute":let g=document.getElementById(n.controlBarName+"videoButton"),u=document.getElementById(n.controlBarName+"audioButton");switch(t.data.message){case"videomute":g.innerHTML=zt.video.button.html_off,g.className=zt.video.button.class_off,console.log("video mute");break;case"videounmute":g.innerHTML=zt.video.button.html_on,g.className=zt.video.button.class_on;break;case"audiomute":u.className=zt.audio.button.class_off,u.innerHTML=zt.audio.button.html_off,console.log("audio mute");break;case"audiounmute":u.className=zt.audio.button.class_on,u.innerHTML=zt.audio.button.html_on;break;default:webrtcdev.error("unmatched mut case transmitted by peer");}break;case"imagesnapshot":b(null,n,t.data.message,t.data.name,"imagesnapshot"),S(null,n,t.data.message,t.data.name,"imagesnapshot");break;case"videoRecording":b(null,n,t.data.message,t.data.name,"videoRecording"),S(null,n,t.data.message,t.data.name,"videoRecording");break;case"videoScreenRecording":b(null,n,t.data.message,t.data.name,"videoScreenRecording"),S(null,n,t.data.message,t.data.name,"videoScreenRecording");break;case"file":AA({header:t.extra.name,message:t.data.message,userinfo:A(at.blobURLs[t.userid],"chat-message.png"),color:t.extra.color});break;case"canvas":t.data.draw?In.syncData(t.data.draw):t.data.board?(webrtcdev.log("[sessionmanager] Canvas : ",t.data),"remote"==t.data.board.from&&("open"==t.data.board.event&&!0!=Tn?ue(t.data.board):"close"==t.data.board.event&&!0==Tn&&ue(t.data.board))):webrtcdev.warn(" Board data mismatch",t.data);break;case"texteditor":KA(t.data.data);break;case"codeeditor":MA(t.data.data);break;case"pointer":var r=document.getElementById("cursor2");r?"startCursor"==e.data.action?(r.setAttribute("style","display:block"),yA(r,t.data.corX,t.data.corY)):"stopCursor"==t.data.action&&r.setAttribute("style","display:none"):alert(" Cursor for remote is not present ");break;case"timer":n&&(!n.time&&(n.time=t.data.time),!n.zone&&(n.zone=t.data.zone),webrtcdev.log("[sessionmanager] webcallpeers appended with zone and datetime ",n)),webrtcdev.log("[sessionmanager] peerTimerStarted, start peerTimeZone and startPeersTime"),XA(t.data.zone,t.userid),Kn(t.data.time,t.data.zone,t.userid);break;case"buttonclick":var a=d(t.data.buttonName);a.getAttribute("lastClickedBy")!=at.userid&&(a.setAttribute("lastClickedBy",t.userid),a.click());break;case"syncOldFiles":CA();break;case"shareFileRemove":webrtcdev.log(" [sessionmanager] shareFileRemove - remove file : ",t.data._filename);var s=t.data._element,l=t.data._filename;let m="removeButton"+s;if(document.getElementById("display"+l)&&B("display"+l),document.getElementById(s))B(s),L(s),webrtcdev.log(" [sessionmanager] shareFileRemove done");else return void webrtcdev.log(" [sessionmanager] shareFileRemove already done since ",s,"element doesnt exist ");document.getElementById(m).click(),B(m);break;case"shareFileStopUpload":var c=t.data._element;for(x in webrtcdev.log(" [sessionmanager] shareFileStopUpload",c),ot)for(y in ot[x].filearray)if(ot[x].filearray[y].pid==c)return webrtcdev.log("[ sessionmanager ] shareFileStopUpload -  filepid ",ot[x].filearray[y].pid," | status ",ot[x].filearray[y].status),ot[x].filearray[y].status="stopped",R(c),void L(c);break;case"sendstats":ye();break;case"receivedstats":He(t.userid,t.data.message);break;default:webrtcdev.warn("[sessionmanager] unrecognizable message from peer  ",t);}}},at.sendMessage=function(A){webrtcdev.log("[session manager] sendMessage ",A),A.userid=at.userid,A.extra=at.extra,at.sendCustomMessage(A)},at.onleave=function(A){webrtcdev.log("[session manager] onleav -  ",A),webrtcdev.warn("[session manager] onleave - userid left ",A.userid);var t=_n(A.userid);t&&(t.name&&(te(t.name+" left the conversation."),webrtcdev.log("[session manager] onleave - name ",t.name)),webrtcdev.warn("[session manager]  onleave -  remove peerinfo ",t," from webcallpeers ",ot),w(t),YA(A.userid))},at.onclose=function(A){webrtcdev.warn("[session manager] RTCConn on close  ",A)},at.onEntireSessionClosed=function(A){webrtcdev.warn("[session manager]  on Entire sesion closed ",A),at.attachStreams.forEach(function(A){A.stop()}),te("Session Disconnected")},at.onFileStart=function(A){webrtcdev.log("[sessionmanager] onFileStart",A),uA(A)},at.onFileProgress=function(A){mA(A)},at.onFileEnd=function(A){pA(A)},at.takeSnapshot=function(A,t){je({userid:A,connection:connection,callback:t})},at.connectionType=null,at.remoteUsers=[],at.extra={uuid:at.userid,name:Bt||"",color:"undefined"==typeof en.userdetails?"":en.userdetails.usercolor,email:gt||"",role:jt||"participant"},at.socketMessageEvent="RTCMultiConnection-Message",at.socketCustomEvent="RTCMultiConnection-Custom-Message",at.enableFileSharing=!0,at.filesContainer=document.body||document.documentElement,at.onSocketDisconnect=function(A){webrtcdev.error("[sesionmanager ] on Socket Disconnected ",A),webrtcdev.log("[sesionmanager ] re-establish socket connection  with SDP "),at.rejoin(at.connectionDescription)},at.onSocketError=function(A){webrtcdev.error("[sesionmanager ] on Socket Error ",A)},webrtcdev.log("[sessionmanager] rtcConn : ",at),at},Jn=function(A,t,n){var r=_n(n);if("done'"==r.setup)return void webrtcdev.info(" [sessionmanager] setupCallView is laready done for peer",r);if(m(r),Tt&&showUserStats(),Xt.active&&"inspector"==jt&&(webrtcdev.info(" [sessionmanage] freezing screen for role inspector "),vA()),Lt.active){if("single"==Lt.props.fileShare)P(r),d(r.fileShare.outerbox)&&(d(r.fileShare.outerbox).style.width="100%");else if("divided"==Lt.props.fileShare){for(x in"inspector"==jt?webrtcdev.log("[sessionmanager] Since it is an inspector's own session , not creating local File viewer and list"):(webrtcdev.log(" [sessionmanager] creating local file sharing"),P(r)),ot)ot[x].userid!=it&&"inspector"!=ot[x].role&&(webrtcdev.log("[sessionmanager] setupCallView - creating remote file sharing "),P(ot[x]));Lt.sendOldFiles&&fA()}else webrtcdev.error("[sessionmanager] fileshareobj.props.fileShare undefined ");"single"==Lt.props.fileList?document.getElementById(r.fileList.outerbox).style.width="100%":"single"==Lt.props.fileShare?webrtcdev.error("fileshareobj.props.fileShare undefined "):webrtcdev.log("No Separate div created for this peer since fileshare container is single")}Wt&&Wt.active&&getWebrtcdevStats(),It&&It.active&&(VA(It),GA(),Fe(),Ue())};window.onunload=function(){webrtcdev.log("[startjs] onunload ",localStorage.getItem("channel")),alert(" Refreshing the Page will loose the session data")},this.clearCaches=clearCaches=function(){localStorage.clear()}};"undefined"!=typeof module&&(module.exports=exports=webrtcdevcon);