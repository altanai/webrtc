/* Generated on:Mon Jul 06 2020 00:07:21 GMT+0530 (India Standard Time) || version: 6.0.4 - Altanai (@altanai)  , License : MIT  */var webrtcdevlogs=[];function isJSON(e){if("string"!=typeof e)return!1;try{var A=JSON.parse(e);return"object"==typeof A}catch(e){return!1}}function toStr(A){try{return JSON.stringify(A,function(e,A){return A&&A.sdp?(log(A.sdp.type,"\t",A.sdp.sdp),""):A},"\t")}catch(t){return A}}function getArgsJson(e){var A="";for(i in e)e[i]&&(A+=toStr(e[i]));return A}var webrtcdevlogger={log:function(){let e="";var A=Date(Date.now()).toString();isJSON(arguments)?(e=JSON.stringify(arguments,void 0,2),webrtcdevlogs.push(A+"<pre style='color:grey'>[LOG]"+e+"</pre>")):(e=getArgsJson(arguments),webrtcdevlogs.push(A+"<p style='color:grey'>[LOG]"+e+"</p>")),console.log(arguments)},info:function(){let e="";var A=Date(Date.now()).toString();isJSON(arguments)?(e=JSON.stringify(arguments,void 0,2),webrtcdevlogs.push(A+"<pre style='color:blue'>[INFO]"+e+"</pre>")):(e=getArgsJson(arguments),webrtcdevlogs.push(A+"<p style='color:blue'>[INFO]"+e+"</p>")),console.info(arguments)},debug:function(){let e="";var A=Date(Date.now()).toString();isJSON(arguments)?(e=JSON.stringify(arguments,void 0,2),webrtcdevlogs.push(A+"<pre style='color:green'>[DEBUG]"+e+"</pre>")):(e=getArgsJson(arguments),webrtcdevlogs.push(A+"<p style='color:green'>[DEBUG]"+e+"</p>")),console.debug(arguments)},warn:function(){let e="";var A=Date(Date.now()).toString();isJSON(arguments)?(e=JSON.stringify(arguments,void 0,2),webrtcdevlogs.push(A+"<pre style='color:orange'>[WARN]"+e+"</pre>")):(e=getArgsJson(arguments),webrtcdevlogs.push(A+"<p style='color:orange'>[WARN]"+e+"</p>")),console.warn(arguments)},error:function(){let e="";var A=Date(Date.now()).toString();isJSON(arguments)?(e=JSON.stringify(arguments,void 0,2),webrtcdevlogs.push(A+"<pre style='color:red'>[ERROR]"+e+"</pre>")):(e=getArgsJson(arguments),webrtcdevlogs.push(A+"<p style='color:red'>[ERROR]"+e+"</p>")),console.error(arguments)}},webrtcdev=webrtcdevlogger,RTCMultiConnection=function(e,A){function t(A,t){function r(e){return!e.audio&&!e.video&&!e.screen&&e.data}function a(e,t){A.peersBackup[e]||(A.peersBackup[e]={userid:e,extra:{}}),A.peersBackup[e].extra=t}function s(e){if(e.remoteUserId==A.userid){if(A.peers[e.sender]&&A.peers[e.sender].extra!=e.message.extra&&(A.peers[e.sender].extra=e.extra,A.onExtraDataUpdated({userid:e.sender,extra:e.extra}),a(e.sender,e.extra)),e.message.streamSyncNeeded&&A.peers[e.sender]){var t=A.streamEvents[e.message.streamid];if(!t||!t.stream)return;var d=e.message.action;if("ended"===d||"inactive"===d||"stream-removed"===d)return A.peersBackup[t.userid]&&(t.extra=A.peersBackup[t.userid].extra),void A.onstreamended(t);var c="both"==e.message.type?null:e.message.type;return void("function"==typeof t.stream[d]&&t.stream[d](c))}if("dropPeerConnection"===e.message)return void A.deletePeer(e.sender);if(e.message.allParticipants)return-1===e.message.allParticipants.indexOf(e.sender)&&e.message.allParticipants.push(e.sender),void e.message.allParticipants.forEach(function(e){l[A.peers[e]?"renegotiatePeer":"createNewPeer"](e,{localPeerSdpConstraints:{OfferToReceiveAudio:A.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:A.sdpConstraints.mandatory.OfferToReceiveVideo},remotePeerSdpConstraints:{OfferToReceiveAudio:A.session.oneway?!!A.session.audio:A.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:A.session.oneway?!!A.session.video||!!A.session.screen:A.sdpConstraints.mandatory.OfferToReceiveVideo},isOneWay:!!A.session.oneway||"one-way"===A.direction,isDataOnly:r(A.session)})});if(e.message.newParticipant)return e.message.newParticipant==A.userid?void 0:A.peers[e.message.newParticipant]?void 0:void l.createNewPeer(e.message.newParticipant,e.message.userPreferences||{localPeerSdpConstraints:{OfferToReceiveAudio:A.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:A.sdpConstraints.mandatory.OfferToReceiveVideo},remotePeerSdpConstraints:{OfferToReceiveAudio:A.session.oneway?!!A.session.audio:A.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:A.session.oneway?!!A.session.video||!!A.session.screen:A.sdpConstraints.mandatory.OfferToReceiveVideo},isOneWay:!!A.session.oneway||"one-way"===A.direction,isDataOnly:r(A.session)});if(e.message.readyForOffer&&(A.attachStreams.length&&(A.waitingForLocalMedia=!1),A.waitingForLocalMedia))return void setTimeout(function(){s(e)},1);if(e.message.newParticipationRequest&&e.sender!==A.userid){A.peers[e.sender]&&A.deletePeer(e.sender);var B={extra:e.extra||{},localPeerSdpConstraints:e.message.remotePeerSdpConstraints||{OfferToReceiveAudio:A.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:A.sdpConstraints.mandatory.OfferToReceiveVideo},remotePeerSdpConstraints:e.message.localPeerSdpConstraints||{OfferToReceiveAudio:A.session.oneway?!!A.session.audio:A.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:A.session.oneway?!!A.session.video||!!A.session.screen:A.sdpConstraints.mandatory.OfferToReceiveVideo},isOneWay:"undefined"==typeof e.message.isOneWay?!!A.session.oneway||"one-way"===A.direction:e.message.isOneWay,isDataOnly:"undefined"==typeof e.message.isDataOnly?r(A.session):e.message.isDataOnly,dontGetRemoteStream:"undefined"==typeof e.message.isOneWay?!!A.session.oneway||"one-way"===A.direction:e.message.isOneWay,dontAttachLocalStream:!!e.message.dontGetRemoteStream,connectionDescription:e,successCallback:function(){}};return void A.onNewParticipant(e.sender,B)}return e.message.changedUUID&&A.peers[e.message.oldUUID]&&(A.peers[e.message.newUUID]=A.peers[e.message.oldUUID],delete A.peers[e.message.oldUUID]),e.message.userLeft?(l.onUserLeft(e.sender),void(!e.message.autoCloseEntireSession||A.leave())):void l.addNegotiatedMessage(e.message,e.sender)}}webrtcdev.log(" >>>>  SocketConnection ",A);var d="";d+="?userid="+A.userid,d+="&sessionid="+A.sessionid,d+="&msgEvent="+A.socketMessageEvent,d+="&socketCustomEvent="+A.socketCustomEvent,d+="&autoCloseEntireSession="+!!A.autoCloseEntireSession,!0===A.session.broadcast&&(d+="&oneToMany=true"),d+="&maxParticipantsAllowed="+A.maxParticipantsAllowed,A.enableScalableBroadcast&&(d+="&enableScalableBroadcast=true",d+="&maxRelayLimitPerUser="+(A.maxRelayLimitPerUser||2)),d+="&extra="+JSON.stringify(A.extra||{}),A.socketCustomParameters&&(d+=A.socketCustomParameters);try{io.sockets={}}catch(A){}if(A.socketURL||(webrtcdev.log(" >>>>s  socket.io url is missing , using / "),A.socketURL="/"),"/"!=A.socketURL.substr(A.socketURL.length-1,1))throw"\"socketURL\" MUST end with a slash.";A.enableLogs&&("/"==A.socketURL?webrtcdev.info("socket.io url is: ",location.origin+"/"):webrtcdev.info("socket.io url is: ",A.socketURL));try{A.socket=io(A.socketURL+d,{transports:["websocket"],upgrade:!1})}catch(t){webrtcdev.error("socket.io signaller connection error ",t),A.socket=io.connect(A.socketURL+d,A.socketOptions)}var l=A.multiPeersHandler;A.socket.on("extra-data-updated",function(e,t){A.peers[e]&&(A.peers[e].extra=t,A.onExtraDataUpdated({userid:e,extra:t}),a(e,t))}),A.socket.on(A.socketMessageEvent,s);var c=!1;A.socket.resetProps=function(){c=!1},A.socket.on("connect",function(){c||(c=!0,A.enableLogs&&webrtcdev.info("[RTC header] socket.io connection is opened."),setTimeout(function(){A.socket.emit("extra-data-updated",A.extra)},1e3),t&&t(A.socket))}),A.socket.on("disconnect",function(e){webrtcdev.error("[RTC header] socket.io connection is disconneted ."),A.onSocketDisconnect(e)}),A.socket.on("error",function(e){webrtcdev.error("[RTC header] socket.io connection errorred."),A.onSocketError(e)}),A.socket.on("user-disconnected",function(e){webrtcdev.log("[RTC header] user-disconnected"),e===A.userid||(A.onUserStatusChanged({userid:e,status:"offline",extra:A.peers[e]?A.peers[e].extra||{}:{}}),A.deletePeer(e))}),A.socket.on("user-connected",function(e){webrtcdev.log("[RTC header] A user-connected connected to the session "),e===A.userid||A.onUserStatusChanged({userid:e,status:"online",extra:A.peers[e]?A.peers[e].extra||{}:{}})}),A.socket.on("closed-entire-session",function(e,t){A.leave(),A.onEntireSessionClosed({sessionid:e,userid:e,extra:t})}),A.socket.on("userid-already-taken",function(e,t){A.onUserIdAlreadyTaken(e,t)}),A.socket.on("logs",function(e){A.enableLogs&&webrtcdev.debug("server-logs",e)}),A.socket.on("number-of-broadcast-viewers-updated",function(e){A.onNumberOfBroadcastViewersUpdated(e)}),A.socket.on("set-isInitiator-true",function(e){e!=A.sessionid||(A.isInitiator=!0)})}function r(e){function A(){e.fbr=new FileBufferReader,e.fbr.onProgress=function(A){e.onFileProgress(A)},e.fbr.onBegin=function(A){e.onFileStart(A)},e.fbr.onEnd=function(A){e.onFileEnd(A)}}var t=this,r=["getAllParticipants","getLength","selectFirst","streams","send","forEach"];e.peers={getLength:function(){var e=0;for(var A in this)-1==r.indexOf(A)&&e++;return e},selectFirst:function(){var e;for(var A in this)-1==r.indexOf(A)&&(e=this[A]);return e},getAllParticipants:function(e){var A=[];for(var t in this)-1==r.indexOf(t)&&t!=e&&A.push(t);return A},forEach:function(A){this.getAllParticipants().forEach(function(t){A(e.peers[t])})},send:function(A,r){var a=this;if(!g(A.size)&&!g(A.type)){if(e.enableFileSharing)return void t.shareFile(A,r);"string"!=typeof A&&(A=JSON.stringify(A))}if("text"!==A.type&&!(A instanceof ArrayBuffer)&&!(A instanceof DataView))return void L.send({text:A,channel:this,connection:e,remoteUserId:r});if("text"===A.type&&(A=JSON.stringify(A)),r){var s=e.peers[r];if(s)return s.channels.length?void s.channels.forEach(function(e){e.send(A)}):(e.peers[r].createDataChannel(),e.renegotiate(r),void setTimeout(function(){a.send(A,r)},3e3))}this.getAllParticipants().forEach(function(t){return a[t].channels.length?void a[t].channels.forEach(function(e){e.send(A)}):(e.peers[t].createDataChannel(),e.renegotiate(t),void setTimeout(function(){a[t].channels.forEach(function(e){e.send(A)})},3e3))})}},this.uuid=e.userid,this.getLocalConfig=function(r,a,s){return s||(s={}),{streamsToShare:s.streamsToShare||{},rtcMultiConnection:e,connectionDescription:s.connectionDescription,userid:a,localPeerSdpConstraints:s.localPeerSdpConstraints,remotePeerSdpConstraints:s.remotePeerSdpConstraints,dontGetRemoteStream:!!s.dontGetRemoteStream,dontAttachLocalStream:!!s.dontAttachLocalStream,renegotiatingPeer:!!s.renegotiatingPeer,peerRef:s.peerRef,channels:s.channels||[],onLocalSdp:function(e){t.onNegotiationNeeded(e,a)},onLocalCandidate:function(A){A=I.processCandidates(e,A),A&&t.onNegotiationNeeded(A,a)},remoteSdp:r,onDataChannelMessage:function(r){if(!e.fbr&&e.enableFileSharing&&A(),"string"==typeof r||!e.enableFileSharing)return void t.onDataChannelMessage(r,a);var s=this;return r instanceof ArrayBuffer||r instanceof DataView?void e.fbr.convertToObject(r,function(e){s.onDataChannelMessage(e)}):r.readyForNextChunk?void e.fbr.getNextChunk(r,function(A){e.peers[a].channels.forEach(function(e){e.send(A)})},a):r.chunkMissing?void e.fbr.chunkMissing(r):void e.fbr.addChunk(r,function(A){e.peers[a].peer.channel.send(A)})},onDataChannelError:function(e){t.onDataChannelError(e,a)},onDataChannelOpened:function(e){t.onDataChannelOpened(e,a)},onDataChannelClosed:function(e){t.onDataChannelClosed(e,a)},onRemoteStream:function(A){e.peers[a]&&e.peers[a].streams.push(A),t.onGettingRemoteMedia(A,a)},onRemoteStreamRemoved:function(e){t.onRemovingRemoteMedia(e,a)},onPeerStateChanged:function(e){t.onPeerStateChanged(e),"new"===e.iceConnectionState&&t.onNegotiationStarted(a,e),"connected"===e.iceConnectionState&&t.onNegotiationCompleted(a,e),-1!==e.iceConnectionState.search(/closed|failed/gi)&&(t.onUserLeft(a),t.disconnectWith(a))}}},this.createNewPeer=function(A,t){if(!(e.maxParticipantsAllowed<=e.getAllParticipants().length)){if(t=t||{},!e.isInitiator||!e.session.audio||"two-way"!==e.session.audio||t.streamsToShare||(t.isOneWay=!1,t.isDataOnly=!1,t.session=e.session),!t.isOneWay&&!t.isDataOnly)return t.isOneWay=!0,void this.onNegotiationNeeded({enableMedia:!0,userPreferences:t},A);t=e.setUserPreferences(t,A);var r=this.getLocalConfig(null,A,t);e.peers[A]=new h(r)}},this.createAnsweringPeer=function(A,t,r){r=e.setUserPreferences(r||{},t);var a=this.getLocalConfig(A,t,r);e.peers[t]=new h(a)},this.renegotiatePeer=function(A,t,r){if(!e.peers[A])return void(e.enableLogs&&webrtcdev.error("Peer ("+A+") does not exist. Renegotiation skipped."));t||(t={}),t.renegotiatingPeer=!0,t.peerRef=e.peers[A].peer,t.channels=e.peers[A].channels;var a=this.getLocalConfig(r,A,t);e.peers[A]=new h(a)},this.replaceTrack=function(A,t,r){if(!e.peers[t])throw"This peer ("+t+") does not exist.";var a=e.peers[t].peer;return!!a.getSenders&&"function"==typeof a.getSenders&&a.getSenders().length?void a.getSenders().forEach(function(a){r&&"video"===a.track.kind&&(e.peers[t].peer.lastVideoTrack=a.track,a.replaceTrack(A)),r||"audio"!==a.track.kind||(e.peers[t].peer.lastAudioTrack=a.track,a.replaceTrack(A))}):void(webrtcdev.warn("RTPSender.replaceTrack is NOT supported."),this.renegotiatePeer(t))},this.onNegotiationNeeded=function(){},this.addNegotiatedMessage=function(A,r){if(A.type&&A.sdp)return"answer"==A.type&&e.peers[r]&&e.peers[r].addRemoteSdp(A),"offer"==A.type&&(A.renegotiatingPeer?this.renegotiatePeer(r,null,A):this.createAnsweringPeer(A,r)),void(e.enableLogs&&webrtcdev.log("Remote peer's sdp:",A.sdp));if(A.candidate)return e.peers[r]&&e.peers[r].addRemoteCandidate(A),void(e.enableLogs&&webrtcdev.log("Remote peer's candidate pairs:",A.candidate));if(A.enableMedia){e.session=A.userPreferences.session||e.session,e.session.oneway&&e.attachStreams.length&&(e.attachStreams=[]),A.userPreferences.isDataOnly&&e.attachStreams.length&&(e.attachStreams.length=[]);var a={};e.attachStreams.forEach(function(e){a[e.streamid]={isAudio:!!e.isAudio,isVideo:!!e.isVideo,isScreen:!!e.isScreen}}),A.userPreferences.streamsToShare=a,t.onNegotiationNeeded({readyForOffer:!0,userPreferences:A.userPreferences},r)}A.readyForOffer&&e.onReadyForOffer(r,A.userPreferences)},this.onGettingRemoteMedia=function(){},this.onRemovingRemoteMedia=function(){},this.onGettingLocalMedia=function(){},this.onLocalMediaError=function(A,t){e.onMediaError(A,t)},this.shareFile=function(t,r){A(),e.fbr.readAsArrayBuffer(t,function(A){var t=e.getAllParticipants();r&&(t=[r]),t.forEach(function(t){e.fbr.getNextChunk(A,function(A){e.peers[t].channels.forEach(function(e){e.send(A)})},t)})},{userid:e.userid,chunkSize:"Firefox"===DetectRTC.browser.name?15000:e.chunkSize||0})};var a;a=new U(e),this.onDataChannelMessage=function(A,t){a.receive(JSON.parse(A),t,e.peers[t]?e.peers[t].extra:{})},this.onDataChannelClosed=function(A,t){A.userid=t,A.extra=e.peers[t]?e.peers[t].extra:{},e.onclose(A)},this.onDataChannelError=function(A,t){A.userid=t,event.extra=e.peers[t]?e.peers[t].extra:{},e.onerror(A)},this.onDataChannelOpened=function(A,t){return e.peers[t].channels.length?void(e.peers[t].channels=[A]):void(e.peers[t].channels.push(A),e.onopen({userid:t,extra:e.peers[t]?e.peers[t].extra:{},channel:A}))},this.onPeerStateChanged=function(A){e.onPeerStateChanged(A)},this.onNegotiationStarted=function(){},this.onNegotiationCompleted=function(){},this.getRemoteStreams=function(A){return A=A||e.peers.getAllParticipants()[0],e.peers[A]?e.peers[A].streams:[]}}function a(e,A,t){if("undefined"!=typeof CustomEvent){var r=new CustomEvent(A,{arguments:t,__exposedProps__:t});e.dispatchEvent(r)}}function s(){if(window.crypto&&window.crypto.getRandomValues&&-1===navigator.userAgent.indexOf("Safari")){for(var e=window.crypto.getRandomValues(new Uint32Array(3)),A="",t=0,r=e.length;t<r;t++)A+=e[t].toString(36);return A}return(Math.random()*new Date().getTime()).toString(36).replace(/\./g,"")}function d(e,A,t){if(webrtcdev.log("[RTC global] getRMCMediaElement"),!t.autoCreateMediaElement)return webrtcdev.log("[RTC global] getRMCMediaElement - not autoCreateMediaElement"),void A({});var r=!1;p(e,"video").length||e.isVideo||e.isScreen||(r=!0);var a=document.createElement(r?"audio":"video");a.srcObject=e,a.setAttribute("autoplay",!0),a.setAttribute("playsinline",!0),a.setAttribute("controls",!0),a.setAttribute("muted",!1),a.setAttribute("volume",1);var s=a.play();if("undefined"!=typeof s){var d=!1;setTimeout(function(){d||(d=!0,A(a))},1e3),s.then(function(){d||(d=!0,A(a))}).catch(function(){d||(d=!0,A(a))})}else A(a)}function l(e,A){window.removeEventListener(e,A),window.addEventListener(e,A,!1)}function c(e){var A=[];return e.forEach(function(e){e&&A.push(e)}),A}function B(e){return!e.audio&&!e.video&&!e.screen&&e.data}function g(e){return"undefined"==typeof e}function u(e){return"string"==typeof e}function m(e,A){return!(e.session.audio&&"two-way"===e.session.audio)&&(!("Firefox"!==DetectRTC.browser.name||!1===A)||!("Chrome"!==DetectRTC.browser.name||50>DetectRTC.browser.version)&&(!(!0!==typeof A)||!!("undefined"==typeof A&&e.session.audio&&e.session.screen&&!e.session.video)&&(A=!0,!0)))}function p(e,A){return e&&e.getTracks?e.getTracks().filter(function(e){return e.kind===(A||"audio")}):[]}function w(e){var A={OfferToReceiveAudio:!!e.OfferToReceiveAudio,OfferToReceiveVideo:!!e.OfferToReceiveVideo};return A}function h(e){function A(A){A.binaryType="arraybuffer",A.onmessage=function(A){e.onDataChannelMessage(A.data)},A.onopen=function(){e.onDataChannelOpened(A)},A.onerror=function(A){e.onDataChannelError(A)},A.onclose=function(A){e.onDataChannelClosed(A)},A.internalSend=A.send,A.send=function(e){"open"!==A.readyState||A.internalSend(e)},l.channel=A}function t(A){webrtcdev.log("[RTC PC] createOfferOrAnswer ",A),webrtcdev.log("[RTC PC] createOfferOrAnswer SDP ------------------- defaults.sdpConstraints ",F.sdpConstraints),l[A](F.sdpConstraints).then(function(A){"Safari"!==DetectRTC.browser.name&&(webrtcdev.log("[RTC PC] createOfferOrAnswer ---------- Local SDP before processSdp ",A.sdp),A.sdp=r.processSdp(A.sdp),webrtcdev.log("[RTC PC] createOfferOrAnswer ---------- Local SDP after processSdp ",A.sdp)),l.setLocalDescription(A).then(function(){r.trickleIce&&(e.onLocalSdp({type:A.type,sdp:A.sdp,remotePeerSdpConstraints:e.remotePeerSdpConstraints||!1,renegotiatingPeer:!!e.renegotiatingPeer||!1,connectionDescription:a.connectionDescription,dontGetRemoteStream:!!e.dontGetRemoteStream,extra:r?r.extra:{},streamsToShare:C}),r.onSettingLocalDescription(a))},function(e){r.enableLogs&&webrtcdev.error("setLocalDescription error",e)})},function(e){!r.enableLogs||webrtcdev.error("sdp-error",e)})}if(!RTCPeerConnection)throw"WebRTC 1.0 (RTCPeerConnection) API are NOT available in this browser.";webrtcdev.log(" [PeerInitiator] RTCPeerConnection - ",RTCPeerConnection);var r=e.rtcMultiConnection;this.extra=e.remoteSdp?e.remoteSdp.extra:r.extra,this.userid=e.userid,this.streams=[],this.channels=e.channels||[],this.connectionDescription=e.connectionDescription,this.addStream=function(e){r.addStream(e,a.userid)},this.removeStream=function(e){r.removeStream(e,a.userid)};var a=this;e.remoteSdp&&(this.connectionDescription=e.remoteSdp.connectionDescription);var s={};F.sdpConstraints=w({OfferToReceiveAudio:!0,OfferToReceiveVideo:!0});var d=!!e.renegotiatingPeer,l;e.remoteSdp&&(d=!!e.remoteSdp.renegotiatingPeer);var c=[];if(r.attachStreams.forEach(function(e){!e||c.push(e)}),!d){var B="all";!r.candidates.turn&&!r.candidates.relay||r.candidates.stun||r.candidates.reflexive||r.candidates.host||(B="relay");try{var g={iceServers:r.iceServers,iceTransportPolicy:r.iceTransportPolicy||B};"undefined"!=typeof r.iceCandidatePoolSize&&(g.iceCandidatePoolSize=r.iceCandidatePoolSize),"undefined"!=typeof r.bundlePolicy&&(g.bundlePolicy=r.bundlePolicy),"undefined"!=typeof r.rtcpMuxPolicy&&(g.rtcpMuxPolicy=r.rtcpMuxPolicy),!r.sdpSemantics||(g.sdpSemantics=r.sdpSemantics||"unified-plan"),r.iceServers&&r.iceServers.length||(g=null,r.optionalArgument=null),webrtcdev.log("[PeerInitiator] RTCPeerConnection params - ",g," connection.optionalArgument ",r.optionalArgument),l=new RTCPeerConnection(g,r.optionalArgument)}catch(A){try{var g={iceServers:r.iceServers};l=new RTCPeerConnection(g)}catch(A){l=new RTCPeerConnection}}}else l=e.peerRef;!l.getRemoteStreams&&l.getReceivers&&(l.getRemoteStreams=function(){var e=new E;return l.getReceivers().forEach(function(A){e.addTrack(A.track)}),[e]}),!l.getLocalStreams&&l.getSenders&&(l.getLocalStreams=function(){var e=new E;return l.getSenders().forEach(function(A){e.addTrack(A.track)}),[e]}),l.onicecandidate=function(A){if(!A.candidate){if(!r.trickleIce){var t=l.localDescription;e.onLocalSdp({type:t.type,sdp:t.sdp,remotePeerSdpConstraints:e.remotePeerSdpConstraints||!1,renegotiatingPeer:!!e.renegotiatingPeer||!1,connectionDescription:a.connectionDescription,dontGetRemoteStream:!!e.dontGetRemoteStream,extra:r?r.extra:{},streamsToShare:C})}return}r.trickleIce&&e.onLocalCandidate({candidate:A.candidate.candidate,sdpMid:A.candidate.sdpMid,sdpMLineIndex:A.candidate.sdpMLineIndex})},c.forEach(function(A){return e.remoteSdp&&e.remoteSdp.remotePeerSdpConstraints&&e.remoteSdp.remotePeerSdpConstraints.dontGetRemoteStream?void webrtcdev.warn("[RTC PC ] PeerInitiator - localStreams remotePeerSdpConstraints.dontGetRemoteStream ",e.remoteSdp.remotePeerSdpConstraints.dontGetRemoteStream):e.dontAttachLocalStream?void webrtcdev.warn("[RTC PC ] PeerInitiator - localStreams dontAttachLocalStream",e.dontAttachLocalStream):void(A=r.beforeAddingStream(A,a),A&&(l.getLocalStreams().forEach(function(e){A&&e.id==A.id&&(A=null)}),A&&A.getTracks&&A.getTracks().forEach(function(e){try{l.addTrack(e,A)}catch(A){}})))}),l.oniceconnectionstatechange=l.onsignalingstatechange=function(){var A=a.extra;r.peers[a.userid]&&(A=r.peers[a.userid].extra||A),l&&(e.onPeerStateChanged({iceConnectionState:l.iceConnectionState,iceGatheringState:l.iceGatheringState,signalingState:l.signalingState,extra:A,userid:a.userid}),l&&l.iceConnectionState&&-1!==l.iceConnectionState.search(/closed|failed/gi)&&a.streams instanceof Array&&a.streams.forEach(function(e){var A=r.streamEvents[e.id]||{streamid:e.id,stream:e,type:"remote"};r.onstreamended(A)}))};var u={OfferToReceiveAudio:!!c.length,OfferToReceiveVideo:!!c.length};e.localPeerSdpConstraints&&(u=e.localPeerSdpConstraints),F.sdpConstraints=w(u);var m={};l.ontrack=function(A){if(A&&"track"===A.type){if(A.stream=A.streams[A.streams.length-1],A.stream.id||(A.stream.id=A.track.id),m[A.stream.id]&&"Safari"!==DetectRTC.browser.name)return void(A.track&&(A.track.onended=function(){l&&l.onremovestream(A)}));m[A.stream.id]=A.stream.id;var t={};e.remoteSdp&&e.remoteSdp.streamsToShare?t=e.remoteSdp.streamsToShare:e.streamsToShare&&(t=e.streamsToShare);var r=t[A.stream.id];r?(A.stream.isAudio=r.isAudio,A.stream.isVideo=r.isVideo,A.stream.isScreen=r.isScreen):(A.stream.isVideo=!!p(A.stream,"video").length,A.stream.isAudio=!A.stream.isVideo,A.stream.isScreen=!1),A.stream.streamid=A.stream.id,s[A.stream.id]=A.stream,e.onRemoteStream(A.stream),A.stream.getTracks().forEach(function(e){e.onended=function(){l&&l.onremovestream(A)}}),A.stream.onremovetrack=function(){l&&l.onremovestream(A)}}},l.onremovestream=function(A){A.stream.streamid=A.stream.id,s[A.stream.id]&&delete s[A.stream.id],e.onRemoteStreamRemoved(A.stream)},"function"!=typeof l.removeStream&&(l.removeStream=function(e){e.getTracks().forEach(function(A){l.removeTrack(A,e)})}),this.addRemoteCandidate=function(e){l.addIceCandidate(new H(e))},this.addRemoteSdp=function(e,A){A=A||function(){},"Safari"!==DetectRTC.browser.name&&(webrtcdev.log("[RTC PC] addRemoteSdp "),e.sdp=r.processSdp(e.sdp)),l.setRemoteDescription(new b(e)).then(A,function(t){webrtcdev.error("[RTC PC] setRemoteDescription failed","\n",t,"\n",e.sdp),A()}).catch(function(t){webrtcdev.error("[RTC PC] setRemoteDescription failed","\n",t,"\n",e.sdp),A()})};var h=!0;e.remoteSdp&&(h=!1),this.createDataChannel=function(){var e=l.createDataChannel("sctp",{});A(e)},!0!==r.session.data||d||(h?this.createDataChannel():l.ondatachannel=function(e){var t=e.channel;A(t)}),this.enableDisableVideoEncoding=function(e){var A;if(l.getSenders().forEach(function(e){A||"video"!==e.track.kind||(A=e)}),A&&A.getParameters){var t=A.getParameters();t.encodings[1]&&(t.encodings[1].active=!!e),t.encodings[2]&&(t.encodings[2].active=!!e),A.setParameters(t)}},e.remoteSdp&&(e.remoteSdp.remotePeerSdpConstraints&&(u=e.remoteSdp.remotePeerSdpConstraints),F.sdpConstraints=w(u),this.addRemoteSdp(e.remoteSdp,function(){t("createAnswer")})),("two-way"==r.session.audio||"two-way"==r.session.video||"two-way"==r.session.screen)&&(F.sdpConstraints=w({OfferToReceiveAudio:"two-way"==r.session.audio||e.remoteSdp&&e.remoteSdp.remotePeerSdpConstraints&&e.remoteSdp.remotePeerSdpConstraints.OfferToReceiveAudio,OfferToReceiveVideo:"two-way"==r.session.video||"two-way"==r.session.screen||e.remoteSdp&&e.remoteSdp.remotePeerSdpConstraints&&e.remoteSdp.remotePeerSdpConstraints.OfferToReceiveAudio}));var C={};l.getLocalStreams().forEach(function(e){C[e.streamid]={isAudio:!!e.isAudio,isVideo:!!e.isVideo,isScreen:!!e.isScreen}}),h&&t("createOffer"),l.nativeClose=l.close,l.close=function(){if(l){try{l.nativeClose!==l.close&&l.nativeClose()}catch(A){webrtcdev.error("[RTCPeerocnnection ] peer onclose error ",A)}l=null,a.peer=null}},this.peer=l}function C(e,A){e.mandatory&&e.mandatory.chromeMediaSource?A.isScreen=!0:e.mozMediaSource||e.mediaSource?A.isScreen=!0:e.video?A.isVideo=!0:e.audio&&(A.isAudio=!0)}function Q(e){function A(A,r){C(e.localMediaConstraints,A);var a="ended";"oninactive"in A&&(a="inactive"),A.addEventListener(a,function(){delete currentUserMediaRequest.streams[t],currentUserMediaRequest.mutex=!1,currentUserMediaRequest.queueRequests.indexOf(e)&&(delete currentUserMediaRequest.queueRequests[currentUserMediaRequest.queueRequests.indexOf(e)],currentUserMediaRequest.queueRequests=c(currentUserMediaRequest.queueRequests))},!1),currentUserMediaRequest.streams[t]={stream:A},currentUserMediaRequest.mutex=!1,currentUserMediaRequest.queueRequests.length&&Q(currentUserMediaRequest.queueRequests.shift()),e.onGettingLocalMedia(A,r)}if(!0===currentUserMediaRequest.mutex)return void currentUserMediaRequest.queueRequests.push(e);currentUserMediaRequest.mutex=!0;var t=JSON.stringify(e.localMediaConstraints);if(currentUserMediaRequest.streams[t])A(currentUserMediaRequest.streams[t].stream,!0);else{if("undefined"==typeof navigator.mediaDevices){webrtcdev.log("[ getusermediahandler ] Capture undefined - localMediaConstraints : ",e.localMediaConstraints),navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia;var r=function(){},a=function(){},d,l;navigator.mediaDevices={getUserMedia:function(e){return navigator.getUserMedia(e,function(e){e(stream),d=stream},function(e){a(e),l=e}),{then:function(e){return d?void e(d):(r=e,{then:function(e){return l?void e(l):void(a=e)}})}}}}}if(!0===e.localMediaConstraints.isScreen){if(webrtcdev.log("[ getusermediahandler ] Capture screen  - localMediaConstraints : ",e.localMediaConstraints),navigator.mediaDevices.getDisplayMedia)navigator.mediaDevices.getDisplayMedia(e.localMediaConstraints).then(function(e){e.streamid=e.streamid||e.id||s(),e.idInstance=t,A(e)}).catch(function(A){e.onLocalMediaError(A,e.localMediaConstraints)});else if(navigator.getDisplayMedia)navigator.getDisplayMedia(e.localMediaConstraints).then(function(e){e.streamid=e.streamid||e.id||s(),e.idInstance=t,A(e)}).catch(function(A){e.onLocalMediaError(A,e.localMediaConstraints)});else throw new Error("getDisplayMedia API is not availabe in this browser.");return}webrtcdev.log("[ getusermediahandler ] Capture Video camera  - localMediaConstraints : ",e.localMediaConstraints),navigator.mediaDevices.getUserMedia(e.localMediaConstraints).then(function(e){e.streamid=e.streamid||e.id||s(),e.idInstance=t,webrtcdev.log("[ getusermediahandler ] Local stream obtained with stream id ",e.streamid),A(e)}).catch(function(A){webrtcdev.error("[ getusermediahandler ] error in getting Local stream ",A),e.onLocalMediaError(A,e.localMediaConstraints)})}}function U(A){var t={};return{receive:function(r,a,s){var d=r.uuid;if(t[d]||(t[d]=[]),t[d].push(r.message),r.last){var l=t[d].join("");r.isobject&&(l=JSON.parse(l));var c=new Date().getTime(),B=c-r.sendingTime,g={data:l,userid:a,extra:s,latency:B};A.autoTranslateText?(g.original=g.data,A.Translator.TranslateText(g.data,function(e){g.data=e,A.onmessage(g)})):A.onmessage(g),delete t[d]}}}}(function(e){e&&"undefined"==typeof window&&"undefined"!=typeof global&&(global.navigator={userAgent:"Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",getUserMedia:function(){}},!global.webrtcdev&&(global.webrtcdev={}),"undefined"==typeof global.webrtcdev.debug&&(global.webrtcdev.debug=global.webrtcdev.info=global.webrtcdev.error=global.webrtcdev.log=global.webrtcdev.log||function(){webrtcdev.log(arguments)}),"undefined"==typeof document&&(e.document={},document.createElement=document.captureStream=document.mozCaptureStream=function(){var e={getContext:function(){return e},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""}};return e},document.addEventListener=document.removeEventListener=e.addEventListener=e.removeEventListener=function(){},e.HTMLVideoElement=e.HTMLMediaElement=function(){}),"undefined"==typeof io&&(e.io=function(){return{on:function(e,A){A=A||function(){},"connect"===e&&A()},emit:function(e,A,t){t=t||function(){},("open-room"===e||"join-room"===e)&&t(!0,A.sessionid,null)}}}),"undefined"==typeof location&&(e.location={protocol:"file:",href:"",hash:"",origin:"self"}),"undefined"==typeof screen&&(e.screen={width:0,height:0}),"undefined"==typeof URL&&(e.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),e.window=global)})("undefined"==typeof global?null:global),"",function(){function e(){var e=g.appVersion,A=g.userAgent,t=g.appName,r=""+parseFloat(g.appVersion),a=parseInt(g.appVersion,10),s,d,l;if(h&&!C&&-1!==A.indexOf("CriOS")&&(h=!1,C=!0),p){t="Opera";try{r=g.userAgent.split("OPR/")[1].split(" ")[0],a=r.split(".")[0]}catch(A){r="0.0.0.0",a=0}}else Q?(d=A.indexOf("rv:"),0<d?r=A.substring(d+3):(d=A.indexOf("MSIE"),r=A.substring(d+5)),t="IE"):C?(d=A.indexOf("Chrome"),t="Chrome",r=A.substring(d+7)):h?(d=A.indexOf("Safari"),t="Safari",r=A.substring(d+7),-1!==(d=A.indexOf("Version"))&&(r=A.substring(d+8)),-1!==g.userAgent.indexOf("Version/")&&(r=g.userAgent.split("Version/")[1].split(" ")[0])):w?(d=A.indexOf("Firefox"),t="Firefox",r=A.substring(d+8)):(s=A.lastIndexOf(" ")+1)<(d=A.lastIndexOf("/"))&&(t=A.substring(s,d),r=A.substring(d+1),t.toLowerCase()===t.toUpperCase()&&(t=g.appName));return m&&(t="Edge",r=g.userAgent.split("Edge/")[1]),-1!==(l=r.search(/[; \)]/))&&(r=r.substring(0,l)),a=parseInt(""+r,10),isNaN(a)&&(r=""+parseFloat(g.appVersion),a=parseInt(g.appVersion,10)),{fullVersion:r,version:a,name:t,isPrivateBrowsing:!1}}function A(e,A){var t=0,r=!1,a=window.setInterval(function(){e()&&(window.clearInterval(a),A(r)),50<t++&&(window.clearInterval(a),r=!0,A(r))},10)}function t(e){var A=e.toLowerCase();if(0===A.indexOf("msie")&&0===A.indexOf("trident"))return!1;var t=/(?:msie|rv:)\s?([\d\.]+)/.exec(A);return!!(t&&10<=parseInt(t[1],10))}function r(){for(var e="-",A=g.appVersion,t=g.userAgent,r=e,a=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}],s=0,d;d=a[s];s++)if(d.r.test(t)){r=d.s;break}var l=e;return /Windows/.test(r)&&(/Windows (.*)/.test(r)&&(l=/Windows (.*)/.exec(r)[1]),r="Windows"),"Mac OS X"===r?/Mac OS X (10[\.\_\d]+)/.test(t)&&(l=/Mac OS X (10[\.\_\d]+)/.exec(t)[1]):"Android"===r?/Android ([\.\_\d]+)/.test(t)&&(l=/Android ([\.\_\d]+)/.exec(t)[1]):"iOS"===r?/OS (\d+)_(\d+)_?(\d+)?/.test(t)&&(l=/OS (\d+)_(\d+)_?(\d+)?/.exec(A),l=l[1]+"."+l[2]+"."+(0|l[3])):void 0,{osName:r,osVersion:l}}function a(e){e=(e||g.userAgent).toLowerCase();var A=e.match(/android\s([0-9\.]*)/);return!!A&&A[1]}function s(e,A){function t(A){if(!A)return void e();var t=N.exec(A);if(t){var r=t[1],s=A.match(I);void 0===a[r]&&e(r,s,!0),a[r]=!0}}function r(){var e=B.localDescription.sdp.split("\n");e.forEach(function(e){e&&0===e.indexOf("a=candidate:")&&t(e)})}if("undefined"!=typeof document&&"function"==typeof document.getElementById){var a={},s=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;if(!s){var d=document.getElementById("iframe");if(!d)return;var l=d.contentWindow;s=l.RTCPeerConnection||l.mozRTCPeerConnection||l.webkitRTCPeerConnection}if(s){var c=null;"Chrome"===z.browser&&58>z.browser.version&&(c={optional:[{RtpDataChannels:!0}]});var B=new s({iceServers:[{urls:"stun:stun.l.google.com:19302"}]},c);if(A&&(B.addStream?B.addStream(A):B.addTrack&&A.getTracks()[0]&&B.addTrack(A.getTracks()[0],A)),B.onicecandidate=function(e){e.candidate&&e.candidate.candidate?t(e.candidate.candidate):t()},!A)try{B.createDataChannel("sctp",{})}catch(A){}z.isPromisesSupported?B.createOffer().then(function(e){B.setLocalDescription(e).then(r)}):B.createOffer(function(e){B.setLocalDescription(e,r,function(){})},function(){})}}}function d(e){if(!O)return void(e&&e());if(!g.enumerateDevices&&window.MediaStreamTrack&&window.MediaStreamTrack.getSources&&(g.enumerateDevices=window.MediaStreamTrack.getSources.bind(window.MediaStreamTrack)),!g.enumerateDevices&&g.enumerateDevices&&(g.enumerateDevices=g.enumerateDevices.bind(g)),!g.enumerateDevices)return void(e&&e());R=[],L=[],M=[],D=[],k=!1,K=!1,_=!1,P=!1,V=!1;var A={};g.enumerateDevices(function(t){t.forEach(function(e){var t={};for(var r in e)try{"function"!=typeof e[r]&&(t[r]=e[r])}catch(A){}A[t.deviceId+t.label+t.kind]||("audio"===t.kind&&(t.kind="audioinput"),"video"===t.kind&&(t.kind="videoinput"),!t.deviceId&&(t.deviceId=t.id),!t.id&&(t.id=t.deviceId),t.label?("videoinput"===t.kind&&!V&&(V=!0),"audioinput"===t.kind&&!P&&(P=!0)):(t.isCustomLabel=!0,t.label="videoinput"===t.kind?"Camera "+(D.length+1):"audioinput"===t.kind?"Microphone "+(L.length+1):"audiooutput"===t.kind?"Speaker "+(M.length+1):"Please invoke getUserMedia once.","undefined"!=typeof z&&z.browser.isChrome&&46<=z.browser.version&&!/^(https:|chrome-extension:)$/g.test(location.protocol||"")&&"undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(t.label="HTTPs is required to get label of this "+t.kind+" device.")),"audioinput"===t.kind&&(k=!0,-1===L.indexOf(t)&&L.push(t)),"audiooutput"===t.kind&&(K=!0,-1===M.indexOf(t)&&M.push(t)),"videoinput"===t.kind&&(_=!0,-1===D.indexOf(t)&&D.push(t)),R.push(t),A[t.deviceId+t.label+t.kind]=t)}),"undefined"!=typeof z&&(z.MediaDevices=R,z.hasMicrophone=k,z.hasSpeakers=K,z.hasWebcam=_,z.isWebsiteHasWebcamPermissions=V,z.isWebsiteHasMicrophonePermissions=P,z.audioInputDevices=L,z.audioOutputDevices=M,z.videoInputDevices=D),e&&e()})}var l="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",c="object"==typeof process&&"object"==typeof process.versions&&process.versions.node&&!process.browser;if(c){var B=process.versions.node.toString().replace("v","");l="Nodejs/"+B+" (NodeOS) AppleWebKit/"+B+" (KHTML, like Gecko) Nodejs/"+B+" Nodejs/"+B}(function(e){"undefined"!=typeof window||("undefined"==typeof window&&"undefined"!=typeof global?(global.navigator={userAgent:l,getUserMedia:function(){}},e.window=global):"undefined"==typeof window,"undefined"==typeof location&&(e.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(e.screen={width:0,height:0}))})("undefined"==typeof global?window:global);var g=window.navigator;"undefined"==typeof g?g={getUserMedia:function(){},userAgent:l}:("undefined"!=typeof g.webkitGetUserMedia&&(g.getUserMedia=g.webkitGetUserMedia),"undefined"!=typeof g.mozGetUserMedia&&(g.getUserMedia=g.mozGetUserMedia));var u=!!/Android|webOS|iPhone|iPad|iPod|BB10|BlackBerry|IEMobile|Opera Mini|Mobile|mobile/i.test(g.userAgent||""),m=-1!==g.userAgent.indexOf("Edge")&&(!!g.msSaveOrOpenBlob||!!g.msSaveBlob),p=!!window.opera||0<=g.userAgent.indexOf(" OPR/"),w="undefined"!=typeof window.InstallTrigger,h=/^((?!chrome|android).)*safari/i.test(g.userAgent),C=!!window.chrome&&!p,Q="undefined"!=typeof document&&!!document.documentMode&&!m,U={Android:function(){return g.userAgent.match(/Android/i)},BlackBerry:function(){return g.userAgent.match(/BlackBerry|BB10/i)},iOS:function(){return g.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return g.userAgent.match(/Opera Mini/i)},Windows:function(){return g.userAgent.match(/IEMobile/i)},any:function(){return U.Android()||U.BlackBerry()||U.iOS()||U.Opera()||U.Windows()},getOsName:function(){var e="Unknown OS";return U.Android()&&(e="Android"),U.BlackBerry()&&(e="BlackBerry"),U.iOS()&&(e="iOS"),U.Opera()&&(e="Opera Mini"),U.Windows()&&(e="Windows"),e}},E="Unknown OS",F="Unknown OS Version",b=r();b&&b.osName&&"-"!=b.osName?(E=b.osName,F=b.osVersion):U.any()&&(E=U.getOsName(),"Android"==E&&(F=a()));var c="object"==typeof process&&"object"==typeof process.versions&&process.versions.node;"Unknown OS"===E&&c&&(E="Nodejs",F=process.versions.node.toString().replace("v",""));var H=!1,T=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach(function(e){"undefined"==typeof document||"function"!=typeof document.createElement||(!H&&e in document.createElement("canvas")&&(H=!0),!T&&e in document.createElement("video")&&(T=!0))});var I=/^(192\.168\.|169\.254\.|10\.|172\.(1[6-9]|2\d|3[01]))/,N=/([0-9]{1,3}(\.[0-9]{1,3}){3})/,R=[],L=[],M=[],D=[];g.mediaDevices&&g.mediaDevices.enumerateDevices&&(g.enumerateDevices=function(e){var A=g.mediaDevices.enumerateDevices();A&&A.then?g.mediaDevices.enumerateDevices().then(e).catch(function(){e([])}):e([])});var O=!1;"undefined"!=typeof S&&"getSources"in S?O=!0:g.mediaDevices&&!!g.mediaDevices.enumerateDevices&&(O=!0);var k=!1,K=!1,_=!1,P=!1,V=!1,z=window.DetectRTC||{};z.browser=e(),function(e){var r;try{if(window.webkitRequestFileSystem)window.webkitRequestFileSystem(window.TEMPORARY,1,function(){r=!1},function(){r=!0});else if(window.indexedDB&&/Firefox/.test(window.navigator.userAgent)){var a;try{a=window.indexedDB.open("test"),a.onerror=function(){return!0}}catch(A){r=!0}"undefined"==typeof r&&A(function(){return"done"===a.readyState},function(e){e||(r=!a.result)})}else if(t(window.navigator.userAgent)){r=!1;try{window.indexedDB||(r=!0)}catch(A){r=!0}}else if(window.localStorage&&/Safari/.test(window.navigator.userAgent)){try{window.localStorage.setItem("test",1)}catch(A){r=!0}"undefined"==typeof r&&(r=!1,window.localStorage.removeItem("test"))}}catch(A){r=!1}A(function(){return"undefined"!=typeof r},function(){e(r)})}(function(e){z.browser.isPrivateBrowsing=!!e}),z.browser["is"+z.browser.name]=!0,z.osName=E,z.osVersion=F;var G="object"==typeof process&&"object"==typeof process.versions&&process.versions["node-webkit"],X=!1;["RTCPeerConnection","webkitRTCPeerConnection","mozRTCPeerConnection","RTCIceGatherer"].forEach(function(e){X||e in window&&(X=!0)}),z.isWebRTCSupported=X,z.isORTCSupported="undefined"!=typeof RTCIceGatherer;var J=!1;if(z.browser.isChrome&&35<=z.browser.version?J=!0:z.browser.isFirefox&&34<=z.browser.version?J=!0:z.browser.isEdge&&17<=z.browser.version?J=!0:"Android"===z.osName&&z.browser.isChrome&&(J=!0),!/^(https:|chrome-extension:)$/g.test(location.protocol||"")){var Y="undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g);Y&&(z.browser.isChrome||z.browser.isEdge||z.browser.isOpera)?J=!1:z.browser.isFirefox&&(J=!1)}z.isScreenCapturingSupported=J;var W={isSupported:!1,isCreateMediaStreamSourceSupported:!1};["AudioContext","webkitAudioContext","mozAudioContext","msAudioContext"].forEach(function(e){W.isSupported||e in window&&(W.isSupported=!0,window[e]&&"createMediaStreamSource"in window[e].prototype&&(W.isCreateMediaStreamSourceSupported=!0))}),z.isAudioContextSupported=W.isSupported,z.isCreateMediaStreamSourceSupported=W.isCreateMediaStreamSourceSupported;var q=!1;z.browser.isChrome&&31<z.browser.version&&(q=!0),z.isRtpDataChannelsSupported=q;var Z=!1;z.browser.isFirefox&&28<z.browser.version?Z=!0:z.browser.isChrome&&25<z.browser.version?Z=!0:z.browser.isOpera&&11<=z.browser.version&&(Z=!0),z.isSctpDataChannelsSupported=Z,z.isMobileDevice=u;var ee=!1;g.getUserMedia?ee=!0:g.mediaDevices&&g.mediaDevices.getUserMedia&&(ee=!0),z.browser.isChrome&&46<=z.browser.version&&!/^(https:|chrome-extension:)$/g.test(location.protocol||"")&&"undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(ee="Requires HTTPs"),"Nodejs"===z.osName&&(ee=!1),z.isGetUserMediaSupported=ee,z.isCanvasSupportsStreamCapturing=H,z.isVideoSupportsStreamCapturing=T,"Chrome"==z.browser.name&&53<=z.browser.version&&(!z.isCanvasSupportsStreamCapturing&&(z.isCanvasSupportsStreamCapturing="Requires chrome flag: enable-experimental-web-platform-features"),!z.isVideoSupportsStreamCapturing&&(z.isVideoSupportsStreamCapturing="Requires chrome flag: enable-experimental-web-platform-features")),z.DetectLocalIPAddress=function(e,A){if(z.isWebRTCSupported){var t=!0,r=!0;s(function(A){A?A.match(I)?(t=!1,e("Local: "+A,t,r)):A.match(/[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7}/)?(r=!1,e("Public: "+A,t,r)):e("Public: "+A,t,r):e()},A)}},z.isWebSocketsSupported="WebSocket"in window&&2===window.WebSocket.CLOSING,z.isWebSocketsBlocked=!z.isWebSocketsSupported,"Nodejs"===z.osName&&(z.isWebSocketsSupported=!0,z.isWebSocketsBlocked=!1),z.checkWebSocketsSupport=function(A){A=A||function(){};try{var t=new WebSocket("wss://echo.websocket.org:443/"),r;t.onopen=function(){z.isWebSocketsBlocked=!1,r=new Date().getTime(),t.send("ping")},t.onmessage=function(){z.WebsocketLatency=new Date().getTime()-r+"ms",A(),t.close(),t=null},t.onerror=function(){z.isWebSocketsBlocked=!0,A()}}catch(t){z.isWebSocketsBlocked=!0,A()}},z.load=function(e){e=e||function(){},d(e)},"function"==typeof d,z.MediaDevices="undefined"==typeof R?[]:R,z.hasMicrophone=k,z.hasSpeakers=K,z.hasWebcam=_,z.isWebsiteHasWebcamPermissions=V,z.isWebsiteHasMicrophonePermissions=P,z.audioInputDevices=L,z.audioOutputDevices=M,z.videoInputDevices=D;var Ae=!1;"undefined"!=typeof document&&"function"==typeof document.createElement&&"setSinkId"in document.createElement("video")&&(Ae=!0),z.isSetSinkIdSupported=Ae;var te=!1;z.browser.isFirefox&&"undefined"!=typeof mozRTCPeerConnection?"getSenders"in mozRTCPeerConnection.prototype&&(te=!0):z.browser.isChrome&&"undefined"!=typeof webkitRTCPeerConnection&&"getSenders"in webkitRTCPeerConnection.prototype&&(te=!0),z.isRTPSenderReplaceTracksSupported=te;var ne=!1;z.browser.isFirefox&&38<z.browser.version&&(ne=!0),z.isRemoteStreamProcessingSupported=ne;var re=!1;"undefined"!=typeof S&&"applyConstraints"in S.prototype&&(re=!0),z.isApplyConstraintsSupported=re;var ae=!1;z.browser.isFirefox&&43<=z.browser.version&&(ae=!0),z.isMultiMonitorScreenCapturingSupported=ae,z.isPromisesSupported=!!("Promise"in window),z.version="1.3.9","undefined"==typeof z&&(window.DetectRTC={});var oe=window.MediaStream;"undefined"==typeof oe&&"undefined"!=typeof webkitMediaStream&&(oe=webkitMediaStream),z.MediaStream="undefined"!=typeof oe&&"function"==typeof oe&&Object.keys(oe.prototype),z.MediaStreamTrack="undefined"!=typeof S&&Object.keys(S.prototype);var ie=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;z.RTCPeerConnection="undefined"!=typeof ie&&Object.keys(ie.prototype),window.DetectRTC=z,"undefined"!=typeof module&&(module.exports=z),"function"==typeof define&&define.amd&&define("DetectRTC",[],function(){return z})}(),"undefined"!=typeof cordova&&(DetectRTC.isMobileDevice=!0,DetectRTC.browser.name="Chrome"),navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Crosswalk")&&(DetectRTC.isMobileDevice=!0,DetectRTC.browser.name="Chrome"),window.addEventListener||(window.addEventListener=function(e,A,t){e.attachEvent&&e.attachEvent("on"+A,t)}),window.attachEventListener=function(e,A,t,r){e.addEventListener(A,t,r)};var E=window.MediaStream;"undefined"==typeof E&&"undefined"!=typeof webkitMediaStream&&(E=webkitMediaStream),"undefined"==typeof E||"stop"in E.prototype||(E.prototype.stop=function(){this.getTracks().forEach(function(e){e.stop()})}),window.iOSDefaultAudioOutputDevice=window.iOSDefaultAudioOutputDevice||"speaker";var F={},b=window.RTCSessionDescription||window.mozRTCSessionDescription,H=window.RTCIceCandidate||window.mozRTCIceCandidate,S=window.MediaStreamTrack,T=function(){function e(e,r){console.log(" ===================== prefer codecs ",r);var a=t(e);return a.videoCodecNumbers?"vp8"===r&&a.vp8LineNumber===a.videoCodecNumbers[0]?e:"vp9"===r&&a.vp9LineNumber===a.videoCodecNumbers[0]?e:"h264"===r&&a.h264LineNumber===a.videoCodecNumbers[0]?e:(e=A(e,r,a),e):e}function A(e,A,t,r){var a="";if("vp8"===A){if(!t.vp8LineNumber)return e;a=t.vp8LineNumber}if("vp9"===A){if(!t.vp9LineNumber)return e;a=t.vp9LineNumber}if("h264"===A){if(!t.h264LineNumber)return e;a=t.h264LineNumber}var s=t.videoCodecNumbersOriginal.split("SAVPF")[0]+"SAVPF ",d=[a];return r&&(d=[]),t.videoCodecNumbers.forEach(function(e){e===a||d.push(e)}),s+=d.join(" "),e=e.replace(t.videoCodecNumbersOriginal,s),e}function t(e){console.log("[RTC Codechandler] splitLines ========== SDP ",e);var A={};return e.split("\n").forEach(function(e){0===e.indexOf("m=video")&&(A.videoCodecNumbers=[],e.split("SAVPF")[1].split(" ").forEach(function(t){t=t.trim(),t&&t.length&&(A.videoCodecNumbers.push(t),A.videoCodecNumbersOriginal=e)})),-1===e.indexOf("VP8/90000")||A.vp8LineNumber||(A.vp8LineNumber=e.replace("a=rtpmap:","").split(" ")[0]),-1===e.indexOf("VP9/90000")||A.vp9LineNumber||(A.vp9LineNumber=e.replace("a=rtpmap:","").split(" ")[0]),-1===e.indexOf("H264/90000")||A.h264LineNumber||(A.h264LineNumber=e.replace("a=rtpmap:","").split(" ")[0])}),console.log("[RTC Codechandler] ========== Info ",A),A}function r(e,A,t){return(console.log("[RTC Codechandler] setBAS --------------------- sdp before  ",e),!A)?e:"undefined"!=typeof isFirefox&&isFirefox?e:(t&&(A.screen?300>A.screen&&webrtcdev.warn("It seems that you are using wrong bandwidth value for screen. Screen sharing is expected to fail."):webrtcdev.warn("It seems that you are not using bandwidth for screen. Screen sharing is expected to fail.")),A.screen&&t&&(e=e.replace(/b=AS([^\r\n]+\r\n)/g,""),e=e.replace(/a=mid:video\r\n/g,"a=mid:video\r\nb=AS:"+A.screen+"\r\n")),(A.audio||A.video)&&(e=e.replace(/b=AS([^\r\n]+\r\n)/g,"")),A.audio&&(e=e.replace(/a=mid:audio\r\n/g,"a=mid:audio\r\nb=AS:"+A.audio+"\r\n")),A.screen?e=e.replace(/a=mid:video\r\n/g,"a=mid:video\r\nb=AS:"+A.screen+"\r\n"):A.video&&(e=e.replace(/a=mid:video\r\n/g,"a=mid:video\r\nb=AS:"+A.video+"\r\n")),console.log("[RTC Codechandler] setBAS --------------------- sdp after  ",e),e)}function a(e,A,t){return s(e,0,-1,A,t)}function s(e,A,t,r,a){for(var s=-1===t?e.length:t,d=A;d<s;++d)if(0===e[d].indexOf(r)&&(!a||-1!==e[d].toLowerCase().indexOf(a.toLowerCase())))return d;return null}function d(e){var A=e.match(/a=rtpmap:(\d+) \w+\/\d+/);return A&&2===A.length?A[1]:null}function l(e,A){A=A||{};var t=A.min,r=A.max,s=e.split("\r\n"),l=a(s,"a=rtpmap","VP8/90000"),c;if(l&&(c=d(s[l])),!c)return e;var B=a(s,"a=rtpmap","rtx/90000"),g;if(B&&(g=d(s[B])),!B)return e;var u=a(s,"a=fmtp:"+g.toString());if(null!==u){var m="\r\n";m+="a=fmtp:"+c+" x-google-min-bitrate="+(t||"228")+"; x-google-max-bitrate="+(r||"228"),s[u]=s[u].concat(m),e=s.join("\r\n")}return e}function c(e,A){A=A||{};var t=e.split("\r\n"),r=a(t,"a=rtpmap","opus/48000"),s;if(r&&(s=d(t[r])),!s)return e;var l=a(t,"a=fmtp:"+s.toString());if(null===l)return e;var c="";return c+="; stereo="+("undefined"==typeof A.stereo?"1":A.stereo),c+="; sprop-stereo="+("undefined"==typeof A["sprop-stereo"]?"1":A["sprop-stereo"]),"undefined"!=typeof A.maxaveragebitrate&&(c+="; maxaveragebitrate="+(A.maxaveragebitrate||1048576)),"undefined"!=typeof A.maxplaybackrate&&(c+="; maxplaybackrate="+(A.maxplaybackrate||1048576)),"undefined"!=typeof A.cbr&&(c+="; cbr="+("undefined"==typeof A.cbr?"1":A.cbr)),"undefined"!=typeof A.useinbandfec&&(c+="; useinbandfec="+A.useinbandfec),"undefined"!=typeof A.usedtx&&(c+="; usedtx="+A.usedtx),"undefined"!=typeof A.maxptime&&(c+="\r\na=maxptime:"+A.maxptime),t[l]=t[l].concat(c),e=t.join("\r\n"),e}return{removeVPX:function(e){var r=t(e);return e=A(e,"vp9",r,!0),e=A(e,"vp8",r,!0),e},addMediaGateway:function(e){console.log("[RTC codecHandler] ============================================== addMediaGateway - 54.193.51.199");let A=e.split("\n").map(e=>e.trim());return A.forEach(function(A){if(0===A.indexOf("c=IN IP4")){console.log("[RTC codecHandler]  Contact line - ",A);let r=A.substr(9).split(" ");console.log("[RTC codecHandler]  Contact line - ",r);var t=new RegExp(r,"g");console.log("[RTC codecHandler]  Contact line  regex-",t),e=e.replace(t,"54.193.51.199")}}),e},disableNACK:function(e){if(!e||"string"!=typeof e)throw"Invalid arguments.";return e=e.replace("a=rtcp-fb:126 nack\r\n",""),e=e.replace("a=rtcp-fb:126 nack pli\r\n","a=rtcp-fb:126 pli\r\n"),e=e.replace("a=rtcp-fb:97 nack\r\n",""),e=e.replace("a=rtcp-fb:97 nack pli\r\n","a=rtcp-fb:97 pli\r\n"),e},prioritize:function(e,A){if(A&&A.getSenders&&A.getSenders().length){if(!e||"string"!=typeof e)throw"Invalid arguments.";A.getSenders().forEach(function(A){for(var t=A.getParameters(),r=0;r<t.codecs.length;r++)if(t.codecs[r].mimeType==e){t.codecs.unshift(t.codecs.splice(r,1));break}A.setParameters(t)})}},removeNonG722:function(e){return e.replace(/m=audio ([0-9]+) RTP\/SAVPF ([0-9 ]*)/g,"m=audio $1 RTP/SAVPF 9")},setApplicationSpecificBandwidth:function(e,A,t){return r(e,A,t)},setVideoBitrates:function(e,A){return l(e,A)},setOpusAttributes:function(e,A){return c(e,A)},preferVP9:function(A){return e(A,"vp9")},preferCodec:e,forceStereoAudio:function(e){for(var A=e.split("\r\n"),t=null,r=0;r<A.length;r++)if(-1!==A[r].search("opus/48000")){var a=extractSdp(A[r],/:(\d+) opus\/48000/i);break}for(var r=0;r<A.length;r++)if(-1!==A[r].search("a=fmtp")){var s=extractSdp(A[r],/a=fmtp:(\d+)/);if(s===a){t=r;break}}return null===t?e:(A[t]=A[t].concat("; stereo=1; sprop-stereo=1"),e=A.join("\r\n"),e)}}}();window.BandwidthHandler=T;var I=function(){return{processCandidates:function(e,A){var t=A.candidate,r=e.candidates,a=r.stun,s=r.turn;if((g(r.reflexive)||(a=r.reflexive),g(r.relay)||(s=r.relay),r.host||!t.match(/typ host/g))&&(s||!t.match(/typ relay/g))&&(a||!t.match(/typ srflx/g))){var d=e.iceProtocols;if(d.udp||!t.match(/ udp /g))return d.tcp||!t.match(/ tcp /g)?(e.enableLogs&&webrtcdev.debug("Your candidate pairs:",t),{candidate:t,sdpMid:A.sdpMid,sdpMLineIndex:A.sdpMLineIndex}):void 0}}}}(),N=function(){return{getIceServers:function(){return[{urls:["stun:stun.l.google.com:19302","stun:stun.l.google.com:19302?transport=udp"]}]}}}();window.currentUserMediaRequest={streams:[],mutex:!1,queueRequests:[],remove:function(e){this.mutex=!1;var A=this.streams[e];if(A){A=A.stream;var t=A.currentUserMediaRequestOptions;this.queueRequests.indexOf(t)&&(delete this.queueRequests[this.queueRequests.indexOf(t)],this.queueRequests=c(this.queueRequests)),this.streams[e].stream=null,delete this.streams[e]}}};var R=function(){function e(e){return e?"string"==typeof e||"undefined"==typeof e?e:e.audio&&e.video?null:e.audio?"audio":e.video?"video":void 0:void 0}function A(A,r,s){function d(){if(s.streamEvents[A.streamid].mediaElement){var r=s.streamEvents[A.streamid].mediaElement;r.volume=0,t(200,5,function(){try{r.volume+=.2}catch(A){r.volume=1}})}}if(A&&A.addEventListener){if("undefined"==typeof r||!0==r){var l="ended";"oninactive"in A&&(l="inactive"),A.addEventListener(l,function(){R.onSyncNeeded(this.streamid,l)},!1)}A.mute=function(t,d){t=e(t),"undefined"!=typeof d&&(r=d),("undefined"==typeof t||"audio"==t)&&p(A,"audio").forEach(function(e){e.enabled=!1,s.streamEvents[A.streamid].isAudioMuted=!0}),("undefined"==typeof t||"video"==t)&&p(A,"video").forEach(function(e){e.enabled=!1}),("undefined"==typeof r||!0==r)&&R.onSyncNeeded(A.streamid,"mute",t),s.streamEvents[A.streamid].muteType=t||"both",a(A,"mute",t)},A.unmute=function(t,l){t=e(t),"undefined"!=typeof l&&(r=l),d(),("undefined"==typeof t||"audio"==t)&&p(A,"audio").forEach(function(e){e.enabled=!0,s.streamEvents[A.streamid].isAudioMuted=!1}),("undefined"==typeof t||"video"==t)&&(p(A,"video").forEach(function(e){e.enabled=!0}),"undefined"!=typeof t&&"video"==t&&s.streamEvents[A.streamid].isAudioMuted&&function e(t){t||(t=0),t++,100>t&&s.streamEvents[A.streamid].isAudioMuted&&(A.mute("audio"),setTimeout(function(){e(t)},50))}()),("undefined"==typeof r||!0==r)&&R.onSyncNeeded(A.streamid,"unmute",t),s.streamEvents[A.streamid].unmuteType=t||"both",a(A,"unmute",t)}}}function t(e,A,r,a){a=(a||0)+1;a>=A||setTimeout(function(){r(),t(e,A,r,a)},e)}return{setHandlers:A,onSyncNeeded:function(){}}}(),L={send:function(e){function A(e,s){var d={type:"text",uuid:g,sendingTime:m};e&&(s=e,d.packets=parseInt(s.length/l)),s.length>l?d.message=s.slice(0,l):(d.message=s,d.last=!0,d.isobject=B),r.send(d,a),c=s.slice(d.message.length),c.length&&setTimeout(function(){A(null,c)},t.chunkInterval||100)}var t=e.connection,r=e.channel,a=e.remoteUserId,d=e.text,l=t.chunkSize||1e3,c="",B=!1;u(d)||(B=!0,d=JSON.stringify(d));var g=s(),m=new Date().getTime();A(d)}},M=function(){return{handle:function(e){function A(e,A){if(-1!==e.position){var t=+e.position.toFixed(2).split(".")[1]||100;A.innerHTML=t+"%"}}var t={};e.onFileStart=function(A){var r=document.createElement("div");return r.title=A.name,r.innerHTML="<label>0%</label> <progress></progress>",A.remoteUserId&&(r.innerHTML+=" (Sharing with:"+A.remoteUserId+")"),e.filesContainer||(e.filesContainer=document.body||document.documentElement),e.filesContainer.insertBefore(r,e.filesContainer.firstChild),A.remoteUserId?void(!t[A.uuid]&&(t[A.uuid]={}),t[A.uuid][A.remoteUserId]={div:r,progress:r.querySelector("progress"),label:r.querySelector("label")},t[A.uuid][A.remoteUserId].progress.max=A.maxChunks):(t[A.uuid]={div:r,progress:r.querySelector("progress"),label:r.querySelector("label")},void(t[A.uuid].progress.max=A.maxChunks))},e.onFileProgress=function(e){var r=t[e.uuid];!r||e.remoteUserId&&(r=t[e.uuid][e.remoteUserId],!r)||(r.progress.value=e.currentPosition||e.maxChunks||r.progress.max,A(r.progress,r.label))},e.onFileEnd=function(e){var A=t[e.uuid];if(!A)return void console.error("No such progress-helper element exist.",e);if(!(e.remoteUserId&&(A=t[e.uuid][e.remoteUserId],!A))){var r=A.div;r.innerHTML=-1==e.type.indexOf("image")?"<a href=\""+e.url+"\" download=\""+e.name+"\">Download <strong style=\"color:red;\">"+e.name+"</strong> </a><br /><iframe src=\""+e.url+"\" title=\""+e.name+"\" style=\"width: 80%;border: 0;height: inherit;margin-top:1em;\"></iframe>":"<a href=\""+e.url+"\" download=\""+e.name+"\">Download <strong style=\"color:red;\">"+e.name+"</strong> </a><br /><img src=\""+e.url+"\" title=\""+e.name+"\" style=\"max-width: 80%;\">"}}}}}();(function(a){function c(e){if(a.socketAutoReConnect=!0,a.socket)return void(e&&e(a.socket));if("undefined"==typeof t)if("undefined"!=typeof FirebaseConnection)window.SocketConnection=FirebaseConnection;else if("undefined"!=typeof PubNubConnection)window.SocketConnection=PubNubConnection;else throw"SocketConnection.js seems missed.";new t(a,function(){e&&e(a.socket)})}function g(e,A){a.socket.emit("join-room",{sessionid:a.sessionid,session:a.session,mediaConstraints:a.mediaConstraints,sdpConstraints:a.sdpConstraints,streams:w(),extra:a.extra,password:"undefined"!=typeof a.password&&"object"!=typeof a.password?a.password:""},function(t,r){if(!0===t){if(a.enableLogs&&webrtcdev.log("isRoomJoined: ",t," roomid: ",a.sessionid),!!a.peers[a.sessionid])return;F.onNegotiationNeeded(e)}!1===t&&(a.enableLogs&&webrtcdev.warn("isRoomJoined: ",r," roomid: ",a.sessionid),setTimeout(function(){g(e,A)},3e3)),A(t,a.sessionid,r)})}function u(e){webrtcdev.log("Sending open-room signal to Signaller"),a.waitingForLocalMedia=!1,a.socket.emit("open-room",{sessionid:a.sessionid,session:a.session,mediaConstraints:a.mediaConstraints,sdpConstraints:a.sdpConstraints,streams:w(),extra:a.extra,identifier:a.publicRoomIdentifier,password:"undefined"!=typeof a.password&&"object"!=typeof a.password?a.password:""},function(A,t){!0===A&&(webrtcdev.log("[RTCMultiConn] isRoomOpened: ",A," roomid: ",a.sessionid),e(A,a.sessionid)),!1===A&&(webrtcdev.error("[RTCMultiConn] isRoomOpened: ",t," roomid: ",a.sessionid),e(A,a.sessionid,t))})}function w(){try{return a.streamEvents.selectAll("local").map(function(e){return{streamid:e.streamid,tracks:e.stream.getTracks().length}})}catch(A){return[]}}function h(e,A){if(a.dontCaptureUserMedia)return webrtcdev.error(" Join with dontcapturemedia"),void A();if(e.isDataOnly)return webrtcdev.error(" Join with isDataOnly"),void A();var t={};e.localPeerSdpConstraints.OfferToReceiveAudio&&(t.audio=a.mediaConstraints.audio),e.localPeerSdpConstraints.OfferToReceiveVideo&&(t.video=a.mediaConstraints.video);var r=e.session||a.session;return r.oneway&&"two-way"!==r.audio&&"two-way"!==r.video&&"two-way"!==r.screen?void A():void(r.oneway&&r.audio&&"two-way"===r.audio&&(r={audio:!0}),(r.audio||r.video||r.screen)&&(r.screen?a.invokeGetUserMedia({audio:m(a),video:!0,isScreen:!0},(r.audio||r.video)&&!m(a)?a.invokeGetUserMedia(null,A):A):(r.audio||r.video)&&A()))}function C(e,A){return e?void(A.audio&&p(e,"audio").forEach(function(e){e.applyConstraints(A.audio)}),A.video&&p(e,"video").forEach(function(e){e.applyConstraints(A.video)})):void(!a.enableLogs||webrtcdev.error("No stream to applyConstraints."))}function U(e,A,t){return A?void F.replaceTrack(e,A,t):void a.peers.getAllParticipants().forEach(function(A){F.replaceTrack(e,A,t)})}A=A||{useDefaultDevices:!0},a.channel=a.sessionid=(e||location.href.replace(/\/|:|#|\?|\$|\^|%|\.|`|~|!|\+|@|\[|\||]|\|*. /g,"").split("\n").join("").split("\r").join(""))+"",a.socketURL=a.socketURL||"/",webrtcdev.log("[RTCMultiConnection] connection channel ",a.channel);var F=new r(a),b={};F.onGettingLocalMedia=function(e,A){if(webrtcdev.log("[RTC ] onGettingLocalMedia"),A=A||function(){},b[e.streamid])return void A();b[e.streamid]=!0;try{e.type="local"}catch(A){webrtcdev.errro("[RTC] onGettingLocalMedia- eeror in setting Remote stream type ",A)}a.setStreamEndHandler(e),d(e,function(t){t.id=e.streamid,t.muted=!0,t.volume=0,-1===a.attachStreams.indexOf(e)&&a.attachStreams.push(e),"undefined"!=typeof R&&R.setHandlers(e,!0,a),a.streamEvents[e.streamid]={stream:e,type:"local",mediaElement:t,userid:a.userid,extra:a.extra,streamid:e.streamid,isAudioMuted:!0};try{a.onstream(a.streamEvents[e.streamid])}catch(e){webrtcdev.error("[RTC ]  onGettingLocalMedia ",e)}A()},a)},F.onGettingRemoteMedia=function(e,A){webrtcdev.log("[RTC ] onGettingRemoteMedia");try{e.type="remote"}catch(A){webrtcdev.error("[RTC ] onGettingRemoteMedia error in setting Remote stream type ",A)}a.setStreamEndHandler(e,"remote-stream"),d(e,function(t){t.id=e.streamid,"undefined"!=typeof R&&R.setHandlers(e,!1,a),a.streamEvents[e.streamid]={stream:e,type:"remote",userid:A,extra:a.peers[A]?a.peers[A].extra:{},mediaElement:t,streamid:e.streamid};try{a.onstream(a.streamEvents[e.streamid])}catch(e){webrtcdev.error("[RTC ] onGettingRemoteMedia ",e)}},a)},F.onRemovingRemoteMedia=function(e,A){var t=a.streamEvents[e.streamid];t||(t={stream:e,type:"remote",userid:A,extra:a.peers[A]?a.peers[A].extra:{},streamid:e.streamid,mediaElement:a.streamEvents[e.streamid]?a.streamEvents[e.streamid].mediaElement:null}),a.peersBackup[t.userid]&&(t.extra=a.peersBackup[t.userid].extra),a.onstreamended(t),delete a.streamEvents[e.streamid]},F.onNegotiationNeeded=function(e,A,t){t=t||function(){},A=A||e.remoteUserId,e=e||"";var r={remoteUserId:A,message:e,sender:a.userid};e.remoteUserId&&e.message&&e.sender&&(r=e),c(function(){a.socket.emit(a.socketMessageEvent,r,t)})},F.onUserLeft=function(e){a.deletePeer(e)},F.disconnectWith=function(e,A){a.socket&&a.socket.emit("disconnect-with",e,A||function(){}),a.deletePeer(e)},a.socketOptions={transport:"websocket"},a.openOrJoin=function(e,A){A=A||function(){},a.checkPresence(e,function(e,t){if(e){a.sessionid=t;var r=!1,s=!1,d=!!a.session.oneway,l=B(a.session);s={OfferToReceiveAudio:a.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:a.sdpConstraints.mandatory.OfferToReceiveVideo},r={OfferToReceiveAudio:d?!!a.session.audio:a.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:d?!!a.session.video||!!a.session.screen:a.sdpConstraints.mandatory.OfferToReceiveVideo};var c={remoteUserId:a.sessionid,message:{newParticipationRequest:!0,isOneWay:d,isDataOnly:l,localPeerSdpConstraints:r,remotePeerSdpConstraints:s},sender:a.userid};return void h(c.message,function(){g(c,A)})}return a.waitingForLocalMedia=!0,a.isInitiator=!0,a.sessionid=t||a.sessionid,B(a.session)?void u(A):void u(A)})},a.waitingForLocalMedia=!1,a.open=function(e,A){A=A||function(){},a.waitingForLocalMedia=!0,a.isInitiator=!0,a.sessionid=e||a.sessionid,c(function(){return B(a.session)?void u(A):void(a.session.screen?a.captureUserMedia(function(){u(A)}):u(A))})},a.peersBackup={},a.deletePeer=function(e){if(e&&a.peers[e]){var A={userid:e,extra:a.peers[e]?a.peers[e].extra:{}};if(a.peersBackup[A.userid]&&(A.extra=a.peersBackup[A.userid].extra),a.onleave(A),!!a.peers[e]){a.peers[e].streams.forEach(function(e){e.stop()});var t=a.peers[e].peer;if(t&&"closed"!==t.iceConnectionState)try{t.close()}catch(A){}a.peers[e]&&(a.peers[e].peer=null,delete a.peers[e])}}},a.rejoin=function(e){if(!a.isInitiator&&e&&Object.keys(e).length){var A={};a.peers[e.remoteUserId]&&(A=a.peers[e.remoteUserId].extra,a.deletePeer(e.remoteUserId)),e&&e.remoteUserId&&(a.join(e.remoteUserId),a.onReConnecting({userid:e.remoteUserId,extra:A}))}},a.join=function(e,A){a.sessionid=!!e&&(e.sessionid||e.remoteUserId||e)||a.sessionid,a.sessionid+="";var t=!1,r=!1,s=!1,d=!1;if(e&&e.session||!e||"string"==typeof e){var l=e?e.session||a.session:a.session;s=!!l.oneway,d=B(l),r={OfferToReceiveAudio:a.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:a.sdpConstraints.mandatory.OfferToReceiveVideo},t={OfferToReceiveAudio:s?!!a.session.audio:a.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:s?!!a.session.video||!!a.session.screen:a.sdpConstraints.mandatory.OfferToReceiveVideo}}A=A||{};var u=function(){};"function"==typeof A&&(u=A,A={}),"undefined"!=typeof A.localPeerSdpConstraints&&(t=A.localPeerSdpConstraints),"undefined"!=typeof A.remotePeerSdpConstraints&&(r=A.remotePeerSdpConstraints),"undefined"!=typeof A.isOneWay&&(s=A.isOneWay),"undefined"!=typeof A.isDataOnly&&(d=A.isDataOnly);var m={remoteUserId:a.sessionid,message:{newParticipationRequest:!0,isOneWay:s,isDataOnly:d,localPeerSdpConstraints:t,remotePeerSdpConstraints:r},sender:a.userid};return h(m.message,function(){c(function(){g(m,u)})}),m},a.publicRoomIdentifier="",a.getUserMedia=a.captureUserMedia=function(e,A){e=e||function(){};var t=A||a.session;return a.dontCaptureUserMedia||B(t)?(webrtcdev.error("[RTCConn] dont capture media flag is on or connection is Data only "),void e()):void((t.audio||t.video||t.screen)&&(t.screen?a.invokeGetUserMedia({audio:m(a),video:!0,isScreen:!0},function(r){if((t.audio||t.video)&&!m(a)){var d={};for(var l in t)"screen"!=l&&(d[l]=t[l]);return void a.invokeGetUserMedia(A,e,d)}e(r)}):(t.audio||t.video)&&a.invokeGetUserMedia(A,e,t)))},a.onbeforeunload=function(e,A){a.closeBeforeUnload&&(a.peers.getAllParticipants().forEach(function(e){F.onNegotiationNeeded({userLeft:!0},e),a.peers[e]&&a.peers[e].peer&&a.peers[e].peer.close(),delete a.peers[e]}),!A&&a.closeSocket(),a.isInitiator=!1)},window.ignoreBeforeUnload?a.closeBeforeUnload=!1:(a.closeBeforeUnload=!0,window.addEventListener("beforeunload",a.onbeforeunload,!1)),a.userid=s(),a.changeUserId=function(e,A){A=A||function(){},a.userid=e||s(),a.socket.emit("changed-uuid",a.userid,A)},a.extra={},a.attachStreams=[],a.session={audio:!0,video:!0},a.enableFileSharing=!1,a.bandwidth={screen:!1,audio:!1,video:!1},a.codecs={audio:"opus",video:"H264"},"undefined"!=typeof T&&(a.BandwidthHandler=a.CodecsHandler=T),a.processSdp=function(e){return(webrtcdev.log("[RtcConn ] processSdp -----------------------",e),webrtcdev.log("[RtcConn ] processSdp ----------------------- connection.codecs.video ",a.codecs.video),"Safari"===DetectRTC.browser.name)?e:("VP8"===a.codecs.video.toUpperCase()&&(e=T.preferCodec(e,"vp8")),"VP9"===a.codecs.video.toUpperCase()&&(e=T.preferCodec(e,"vp9")),"H264"===a.codecs.video.toUpperCase()&&(e=T.preferCodec(e,"h264")),"G722"===a.codecs.audio&&(e=T.removeNonG722(e)),e=T.addMediaGateway(e),webrtcdev.log("[RtcConn ] processSdp final - ",e),e)},a.mediaConstraints={audio:{mandatory:{},optional:a.bandwidth.audio?[{bandwidth:1024*(8*a.bandwidth.audio)||1048576}]:[]},video:{mandatory:{},optional:a.bandwidth.video?[{bandwidth:1024*(8*a.bandwidth.video)||1048576},{facingMode:"user"}]:[{facingMode:"user"}]}},"Firefox"===DetectRTC.browser.name&&(a.mediaConstraints={audio:!0,video:!0}),A.useDefaultDevices||DetectRTC.isMobileDevice||DetectRTC.load(function(){var e,A;if(DetectRTC.MediaDevices.forEach(function(t){"audioinput"===t.kind&&!1!==a.mediaConstraints.audio&&(e=t),"videoinput"===t.kind&&!1!==a.mediaConstraints.video&&(A=t)}),e){if("Firefox"===DetectRTC.browser.name)return void(!0===a.mediaConstraints.audio?a.mediaConstraints.audio={deviceId:e.id}:a.mediaConstraints.audio.deviceId=e.id);!0==a.mediaConstraints.audio&&(a.mediaConstraints.audio={mandatory:{},optional:[]}),a.mediaConstraints.audio.optional||(a.mediaConstraints.audio.optional=[]);var t=[{sourceId:e.id}];a.mediaConstraints.audio.optional=t.concat(a.mediaConstraints.audio.optional)}if(A){if("Firefox"===DetectRTC.browser.name)return void(!0===a.mediaConstraints.video?a.mediaConstraints.video={deviceId:A.id}:a.mediaConstraints.video.deviceId=A.id);!0==a.mediaConstraints.video&&(a.mediaConstraints.video={mandatory:{},optional:[]}),a.mediaConstraints.video.optional||(a.mediaConstraints.video.optional=[]);var t=[{sourceId:A.id}];a.mediaConstraints.video.optional=t.concat(a.mediaConstraints.video.optional)}}),a.sdpConstraints={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0},optional:[{VoiceActivityDetection:!1}]},a.sdpSemantics=null,a.iceCandidatePoolSize=null,a.bundlePolicy=null,a.rtcpMuxPolicy=null,a.iceTransportPolicy=null,a.optionalArgument={optional:[{DtlsSrtpKeyAgreement:!0},{googImprovedWifiBwe:!0},{googScreencastMinBitrate:300},{googIPv6:!0},{googDscp:!0},{googCpuUnderuseThreshold:55},{googCpuOveruseThreshold:85},{googSuspendBelowMinBitrate:!0},{googCpuOveruseDetection:!0}],mandatory:{}},a.iceServers=N.getIceServers(a),a.candidates={host:!0,stun:!0,turn:!0},a.iceProtocols={tcp:!0,udp:!0},a.onopen=function(e){webrtcdev.info("Data connection has been opened between you & ",e.userid)},a.onclose=function(e){webrtcdev.warn("Data connection has been closed between you & ",e.userid)},a.onerror=function(e){webrtcdev.error(e.userid,"data-error",e)},a.onmessage=function(e){webrtcdev.debug("data-message",e.userid,e.data)},a.send=function(e,A){a.peers.send(e,A)},a.close=a.disconnect=a.leave=function(){a.onbeforeunload(!1,!0)},a.closeEntireSession=function(e){e=e||function(){},a.socket.emit("close-entire-session",function A(){return a.getAllParticipants().length?void setTimeout(A,100):void(a.onEntireSessionClosed({sessionid:a.sessionid,userid:a.userid,extra:a.extra}),a.changeUserId(null,function(){a.close(),e()}))})},a.onEntireSessionClosed=function(e){a.enableLogs&&webrtcdev.info("Entire session is closed: ",e.sessionid,e.extra)},a.onstream=function(){webrtcdev.warn("[RTC] onstream")},a.onstreamended=function(){webrtcdev.warn("[RTC] onstreamended")},a.direction="many-to-many",a.removeStream=function(e,A){var t;return a.attachStreams.forEach(function(A){A.id===e&&(t=A)}),t?void(a.peers.getAllParticipants().forEach(function(e){if(!(A&&e!==A)){var r=a.peers[e];try{r.peer.removeStream(t)}catch(A){}}}),a.renegotiate()):void webrtcdev.warn("No such stream exist.",e)},a.addStream=function(e,A){function t(t){e.streamCallback&&e.streamCallback(t),a.renegotiate(A)}return!e.getTracks?B(e)?void a.renegotiate(A):void((e.audio||e.video||e.screen)&&(e.screen?"Edge"===DetectRTC.browser.name?navigator.getDisplayMedia({video:!0,audio:m(a)}).then(function(A){A.isScreen=!0,F.onGettingLocalMedia(A),(e.audio||e.video)&&!m(a)?a.invokeGetUserMedia(null,function(e){t(e)}):t(A)},function(){webrtcdev.error("Unable to capture screen on Edge. HTTPs and version 17+ is required.")}):a.invokeGetUserMedia({audio:m(a),video:!0,isScreen:!0},function(A){(e.audio||e.video)&&!m(a)?a.invokeGetUserMedia(null,function(e){t(e)}):t(A)}):(e.audio||e.video)&&a.invokeGetUserMedia(null,t))):(-1===a.attachStreams.indexOf(e)&&(!e.streamid&&(e.streamid=e.id),a.attachStreams.push(e)),void a.renegotiate(A))},a.invokeGetUserMedia=function(e,A,t){t||(t=a.session),e||(e=a.mediaConstraints),webrtcdev.log(" ======================= invokeGetUserMedia ============= ",t.audio,t.video,e),e.isScreen?Q({onGettingLocalMedia:function(t){var r=e.video;r&&(r.mediaSource||r.mozMediaSource?t.isScreen=!0:r.mandatory&&r.mandatory.chromeMediaSource&&(t.isScreen=!0)),t.isScreen||(t.isVideo=!!p(t,"video").length,t.isAudio=!t.isVideo&&p(t,"audio").length),F.onGettingLocalMedia(t,function(){"function"==typeof A&&A(t)})},onLocalMediaError:function(e,A){F.onLocalMediaError(e,A)},localMediaConstraints:e}):Q({onGettingLocalMedia:function(t){var r=e.video;r&&(r.mediaSource||r.mozMediaSource?t.isScreen=!0:r.mandatory&&r.mandatory.chromeMediaSource&&(t.isScreen=!0)),t.isScreen||(t.isVideo=!!p(t,"video").length,t.isAudio=!t.isVideo&&p(t,"audio").length),F.onGettingLocalMedia(t,function(){"function"==typeof A&&A(t)})},onLocalMediaError:function(e,A){F.onLocalMediaError(e,A)},localMediaConstraints:{audio:!!t.audio&&e.audio,video:!!t.video&&e.video}})},a.applyConstraints=function(e,A){if(!S||!S.prototype.applyConstraints)return void alert("track.applyConstraints is NOT supported in your browser.");if(A){var t;return a.streamEvents[A]&&(t=a.streamEvents[A].stream),void C(t,e)}a.attachStreams.forEach(function(A){C(A,e)})},a.replaceTrack=function(e,A,t){function r(r){a.replaceTrack(r,A,t||e.video||e.screen)}if(e=e||{},!RTCPeerConnection.prototype.getSenders)return void a.addStream(e);if(e instanceof S)return void U(e,A,t);if(e instanceof E)return p(e,"video").length&&U(p(e,"video")[0],A,!0),void(p(e,"audio").length&&U(p(e,"audio")[0],A,!1));if(B(e)){throw"connection.replaceTrack requires audio and/or video and/or screen."}(e.audio||e.video||e.screen)&&(e.screen?"Edge"===DetectRTC.browser.name?navigator.getDisplayMedia({video:!0,audio:m(a)}).then(function(A){A.isScreen=!0,F.onGettingLocalMedia(A),(e.audio||e.video)&&!m(a)?a.invokeGetUserMedia(null,r):r(A)},function(){webrtcdev.error("Unable to capture screen on Edge. HTTPs and version 17+ is required.")}):a.invokeGetUserMedia({audio:m(a),video:!0,isScreen:!0},(e.audio||e.video)&&!m(a)?a.invokeGetUserMedia(null,r):r):(e.audio||e.video)&&a.invokeGetUserMedia(null,r))},a.resetTrack=function(e,A){e||(e=a.getAllParticipants()),"string"==typeof e&&(e=[e]),e.forEach(function(e){var t=a.peers[e].peer;("undefined"==typeof A||!0===A)&&t.lastVideoTrack&&a.replaceTrack(t.lastVideoTrack,e,!0),("undefined"==typeof A||!1===A)&&t.lastAudioTrack&&a.replaceTrack(t.lastAudioTrack,e,!1)})},a.renegotiate=function(e){return e?void F.renegotiatePeer(e):void a.peers.getAllParticipants().forEach(function(e){F.renegotiatePeer(e)})},a.setStreamEndHandler=function(e,A){if(e&&e.addEventListener&&(A=!!A,!e.alreadySetEndHandler)){e.alreadySetEndHandler=!0;var t="ended";"oninactive"in e&&(t="inactive"),e.addEventListener(t,function(){if(e.idInstance&&currentUserMediaRequest.remove(e.idInstance),!A){var t=[];a.attachStreams.forEach(function(A){A.id!=e.id&&t.push(A)}),a.attachStreams=t}var r=a.streamEvents[e.streamid];if(r||(r={stream:e,streamid:e.streamid,type:A?"remote":"local",userid:a.userid,extra:a.extra,mediaElement:a.streamEvents[e.streamid]?a.streamEvents[e.streamid].mediaElement:null}),A&&a.peers[r.userid]){var s=a.peers[r.userid].peer,t=[];s.getRemoteStreams().forEach(function(A){A.id!=e.id&&t.push(A)}),a.peers[r.userid].streams=t}r.userid===a.userid&&"remote"===r.type||(a.peersBackup[r.userid]&&(r.extra=a.peersBackup[r.userid].extra),a.onstreamended(r),delete a.streamEvents[e.streamid])},!1)}},a.onMediaError=function(e,A){!a.enableLogs||webrtcdev.error(e,A)},a.autoCloseEntireSession=!1,a.filesContainer=a.videosContainer=document.body||document.documentElement,a.isInitiator=!1,a.shareFile=F.shareFile,"undefined"!=typeof M&&M.handle(a),"undefined"!=typeof TranslationHandler&&TranslationHandler.handle(a),a.token=s,a.onNewParticipant=function(e,A){a.acceptParticipationRequest(e,A)},a.acceptParticipationRequest=function(e,A){A.successCallback&&(A.successCallback(),delete A.successCallback),F.createNewPeer(e,A)},"undefined"!=typeof R&&(a.StreamsHandler=R),a.onleave=function(){},a.invokeSelectFileDialog=function(e){var A=new FileSelector;A.accept="*.*",A.selectSingleFile(e)},a.onmute=function(A){if(A&&A.mediaElement){if("both"===A.muteType||"video"===A.muteType){A.mediaElement.src=null;var e=A.mediaElement.pause();"undefined"==typeof e?A.mediaElement.poster=A.snapshot||"muted.png":e.then(function(){A.mediaElement.poster=A.snapshot||"muted.png"})}else"audio"===A.muteType&&(A.mediaElement.muted=!0);webrtcdev.log("[RtcConn] onmute")}},a.onunmute=function(A){A&&A.mediaElement&&A.stream&&("both"===A.unmuteType||"video"===A.unmuteType?(A.mediaElement.poster=null,A.mediaElement.srcObject=A.stream,A.mediaElement.play()):"audio"===A.unmuteType&&(A.mediaElement.muted=!1),webrtcdev.log("[RtcConn] onunmute"))},a.onExtraDataUpdated=function(e){e.status="online",a.onUserStatusChanged(e,!0)},a.getAllParticipants=function(e){return a.peers.getAllParticipants(e)},"undefined"!=typeof R&&(R.onSyncNeeded=function(e,A,t){a.peers.getAllParticipants().forEach(function(r){F.onNegotiationNeeded({streamid:e,action:A,streamSyncNeeded:!0,type:t||"both"},r)})}),a.connectSocket=function(e){c(e)},a.closeSocket=function(){try{io.sockets={}}catch(A){}a.socket&&("function"==typeof a.socket.disconnect&&a.socket.disconnect(),"function"==typeof a.socket.resetProps&&a.socket.resetProps(),a.socket=null)},a.getSocket=function(e){return!e&&a.enableLogs&&webrtcdev.warn("getSocket.callback paramter is required."),e=e||function(){},a.socket?e(a.socket):c(function(){e(a.socket)}),a.socket},a.getRemoteStreams=F.getRemoteStreams;var H=["selectFirst","selectAll","forEach"];a.streamEvents={selectFirst:function(e){return a.streamEvents.selectAll(e)[0]},selectAll:function(e){e||(e={local:!0,remote:!0,isScreen:!0,isAudio:!0,isVideo:!0}),"local"==e&&(e={local:!0}),"remote"==e&&(e={remote:!0}),"screen"==e&&(e={isScreen:!0}),"audio"==e&&(e={isAudio:!0}),"video"==e&&(e={isVideo:!0});var A=[];return Object.keys(a.streamEvents).forEach(function(t){var r=a.streamEvents[t];if(-1===H.indexOf(t)){var s=!0;e.local&&"local"===r.type&&(s=!1),e.remote&&"remote"===r.type&&(s=!1),e.isScreen&&r.stream.isScreen&&(s=!1),e.isVideo&&r.stream.isVideo&&(s=!1),e.isAudio&&r.stream.isAudio&&(s=!1),e.userid&&r.userid===e.userid&&(s=!1),!1==s&&A.push(r)}}),A}},a.socketMessageEvent="@@socketMessageEvent",a.socketCustomEvent="@@socketCustomEvent",a.DetectRTC=DetectRTC,a.setCustomSocketEvent=function(e){e&&(a.socketCustomEvent=e);a.socket&&a.socket.emit("set-custom-socket-event-listener",a.socketCustomEvent)},a.getNumberOfBroadcastViewers=function(e,A){a.socket&&e&&A&&a.socket.emit("get-number-of-users-in-specific-broadcast",e,A)},a.onNumberOfBroadcastViewersUpdated=function(e){a.enableLogs&&a.isInitiator&&webrtcdev.info("Number of broadcast (",e.broadcastId,") viewers",e.numberOfBroadcastViewers)},a.onUserStatusChanged=function(e,A){!a.enableLogs||A||webrtcdev.info(e.userid,e.status)},a.getUserMediaHandler=Q,a.multiPeersHandler=F,a.enableLogs=!0,a.setCustomSocketHandler=function(e){"undefined"!=typeof t&&(t=e)},a.chunkSize=40000,a.maxParticipantsAllowed=1e3,a.disconnectWith=F.disconnectWith,a.checkPresence=function(e,A){return e=e||a.sessionid,"SSEConnection"===t.name?void SSEConnection.checkPresence(e,function(e,t,r){return a.socket?void A(e,t):(e||(a.userid=t),void a.connectSocket(function(){A(e,t,r)}))}):a.socket?void a.socket.emit("check-presence",e+"",function(e,t,r){a.enableLogs&&webrtcdev.log("checkPresence.isRoomExist: ",e," roomid: ",t),A(e,t,r)}):void a.connectSocket(function(){a.checkPresence(e,A)})},a.onReadyForOffer=function(e,A){a.multiPeersHandler.createNewPeer(e,A)},a.setUserPreferences=function(e){return a.dontAttachStream&&(e.dontAttachLocalStream=!0),a.dontGetRemoteStream&&(e.dontGetRemoteStream=!0),e},a.updateExtraData=function(){a.socket.emit("extra-data-updated",a.extra)},a.enableScalableBroadcast=!1,a.maxRelayLimitPerUser=3,a.dontCaptureUserMedia=!1,a.dontAttachStream=!1,a.dontGetRemoteStream=!1,a.onReConnecting=function(e){a.enableLogs&&webrtcdev.info("ReConnecting with",e.userid,"...")},a.beforeAddingStream=function(e){return e},a.beforeRemovingStream=function(e){return e},a.modifyScreenConstraints=function(e){return e},a.onPeerStateChanged=function(e){a.enableLogs&&-1!==e.iceConnectionState.search(/closed|failed/gi)&&webrtcdev.error("Peer connection is closed between you & ",e.userid,e.extra,"state:",e.iceConnectionState)},a.isOnline=!0,l("online",function(){a.isOnline=!0}),l("offline",function(){a.isOnline=!1}),a.isLowBandwidth=!1,a.getExtraData=function(e,A){if(!e)throw"remoteUserId is required.";return"function"==typeof A?void a.socket.emit("get-remote-user-extra-data",e,function(e,t,r){A(e,t,r)}):a.peers[e]?a.peers[e].extra:a.peersBackup[e]?a.peersBackup[e].extra:{}},!A.autoOpenOrJoin||a.openOrJoin(a.sessionid),a.onUserIdAlreadyTaken=function(e){a.close(),a.closeSocket(),a.isInitiator=!1,a.userid=a.token(),a.join(a.sessionid),webrtcdev.warn("Userid already taken.",e,"Your new userid:",a.userid)},a.trickleIce=!0,a.version="6.0.4",a.onSettingLocalDescription=function(e){webrtcdev.info("Set local description for remote user",e.userid)},a.resetScreen=function(){sourceId=null,DetectRTC&&DetectRTC.screen&&delete DetectRTC.screen.sourceId,currentUserMediaRequest={streams:[],mutex:!1,queueRequests:[]}},a.autoCreateMediaElement=!1,a.password=null,a.setPassword=function(e,A){A=A||function(){},a.socket?a.socket.emit("set-password",e,A):(a.password=e,A(!0,a.sessionid,null))},a.onSocketDisconnect=function(){webrtcdev.warn("socket.io connection is closed")},a.onSocketError=function(){webrtcdev.warn("socket.io connection is failed")},a.errors={ROOM_NOT_AVAILABLE:"Session id not available",INVALID_PASSWORD:"Invalid password",USERID_NOT_AVAILABLE:"User ID does not exist",ROOM_PERMISSION_DENIED:"session permission denied",ROOM_FULL:"session capacity is full",DID_NOT_JOIN_ANY_ROOM:"Did not join any session yet",INVALID_SOCKET:"Invalid socket",PUBLIC_IDENTIFIER_MISSING:"publicRoomIdentifier is required",INVALID_ADMIN_CREDENTIAL:"Invalid username or password attempted"}})(this)};"undefined"!=typeof module&&(module.exports=exports=RTCMultiConnection),"function"==typeof define&&define.amd&&define("RTCMultiConnection",[],function(){return RTCMultiConnection}),function(e,A){"object"==typeof exports&&"object"==typeof module?module.exports=A():"function"==typeof define&&define.amd?define([],A):"object"==typeof exports?exports.html2canvas=A():e.html2canvas=A()}(this,function(){var e=Math.ceil,A=Math.PI,t=Math.floor,r=Math.abs,a=Math.round,s=Math.sqrt,d=Math.max,l=Math.min;return function(e){function A(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,A),a.l=!0,a.exports}var t={};return A.m=e,A.c=t,A.d=function(e,t,r){A.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},A.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return A.d(t,"a",t),t},A.o=function(e,A){return Object.prototype.hasOwnProperty.call(e,A)},A.p="",A(A.s=27)}([function(e,A){"";function t(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(A,"__esModule",{value:!0});var s=function(){function e(e,A){var t=[],r=!0,a=!1,s=void 0;try{for(var d=e[Symbol.iterator](),l;!(r=(l=d.next()).done)&&(t.push(l.value),!(A&&t.length===A));r=!0);}catch(e){a=!0,s=e}finally{try{!r&&d["return"]&&d["return"]()}finally{if(a)throw s}}return t}return function(A,t){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return e(A,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(){function e(e,A){for(var t=0,r;t<A.length;t++)r=A[t],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}return function(A,t,r){return t&&e(A.prototype,t),r&&e(A,r),A}}(),c=function(e){var A=e.match(/^#([a-f0-9]{3})$/i);return!!A&&[parseInt(A[1][0]+A[1][0],16),parseInt(A[1][1]+A[1][1],16),parseInt(A[1][2]+A[1][2],16),null]},B=function(e){var A=e.match(/^#([a-f0-9]{6})$/i);return!!A&&[parseInt(A[1].substring(0,2),16),parseInt(A[1].substring(2,4),16),parseInt(A[1].substring(4,6),16),null]},u=function(e){var A=e.match(/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/);return!!A&&[+A[1],+A[2],+A[3],null]},m=function(e){var A=e.match(/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/);return!!(A&&4<A.length)&&[+A[1],+A[2],+A[3],+A[4]]},p=function(e){return[l(e[0],255),l(e[1],255),l(e[2],255),3<e.length?e[3]:null]},w=function(e){var A=C[e.toLowerCase()];return!!A&&A},h=function(){function e(A){t(this,e);var d=Array.isArray(A)?p(A):c(A)||u(A)||m(A)||w(A)||B(A)||[0,0,0,null],l=s(d,4),h=l[0],r=l[1],g=l[2],C=l[3];this.r=h,this.g=r,this.b=g,this.a=C}return d(e,[{key:"isTransparent",value:function(){return 0===this.a}},{key:"toString",value:function(){return null!==this.a&&1!==this.a?"rgba("+this.r+","+this.g+","+this.b+","+this.a+")":"rgb("+this.r+","+this.g+","+this.b+")"}}]),e}();A.default=h;var C={transparent:[0,0,0,0],aliceblue:[240,248,255,null],antiquewhite:[250,235,215,null],aqua:[0,255,255,null],aquamarine:[127,255,212,null],azure:[240,255,255,null],beige:[245,245,220,null],bisque:[255,228,196,null],black:[0,0,0,null],blanchedalmond:[255,235,205,null],blue:[0,0,255,null],blueviolet:[138,43,226,null],brown:[165,42,42,null],burlywood:[222,184,135,null],cadetblue:[95,158,160,null],chartreuse:[127,255,0,null],chocolate:[210,105,30,null],coral:[255,127,80,null],cornflowerblue:[100,149,237,null],cornsilk:[255,248,220,null],crimson:[220,20,60,null],cyan:[0,255,255,null],darkblue:[0,0,139,null],darkcyan:[0,139,139,null],darkgoldenrod:[184,134,11,null],darkgray:[169,169,169,null],darkgreen:[0,100,0,null],darkgrey:[169,169,169,null],darkkhaki:[189,183,107,null],darkmagenta:[139,0,139,null],darkolivegreen:[85,107,47,null],darkorange:[255,140,0,null],darkorchid:[153,50,204,null],darkred:[139,0,0,null],darksalmon:[233,150,122,null],darkseagreen:[143,188,143,null],darkslateblue:[72,61,139,null],darkslategray:[47,79,79,null],darkslategrey:[47,79,79,null],darkturquoise:[0,206,209,null],darkviolet:[148,0,211,null],deeppink:[255,20,147,null],deepskyblue:[0,191,255,null],dimgray:[105,105,105,null],dimgrey:[105,105,105,null],dodgerblue:[30,144,255,null],firebrick:[178,34,34,null],floralwhite:[255,250,240,null],forestgreen:[34,139,34,null],fuchsia:[255,0,255,null],gainsboro:[220,220,220,null],ghostwhite:[248,248,255,null],gold:[255,215,0,null],goldenrod:[218,165,32,null],gray:[128,128,128,null],green:[0,128,0,null],greenyellow:[173,255,47,null],grey:[128,128,128,null],honeydew:[240,255,240,null],hotpink:[255,105,180,null],indianred:[205,92,92,null],indigo:[75,0,130,null],ivory:[255,255,240,null],khaki:[240,230,140,null],lavender:[230,230,250,null],lavenderblush:[255,240,245,null],lawngreen:[124,252,0,null],lemonchiffon:[255,250,205,null],lightblue:[173,216,230,null],lightcoral:[240,128,128,null],lightcyan:[224,255,255,null],lightgoldenrodyellow:[250,250,210,null],lightgray:[211,211,211,null],lightgreen:[144,238,144,null],lightgrey:[211,211,211,null],lightpink:[255,182,193,null],lightsalmon:[255,160,122,null],lightseagreen:[32,178,170,null],lightskyblue:[135,206,250,null],lightslategray:[119,136,153,null],lightslategrey:[119,136,153,null],lightsteelblue:[176,196,222,null],lightyellow:[255,255,224,null],lime:[0,255,0,null],limegreen:[50,205,50,null],linen:[250,240,230,null],magenta:[255,0,255,null],maroon:[128,0,0,null],mediumaquamarine:[102,205,170,null],mediumblue:[0,0,205,null],mediumorchid:[186,85,211,null],mediumpurple:[147,112,219,null],mediumseagreen:[60,179,113,null],mediumslateblue:[123,104,238,null],mediumspringgreen:[0,250,154,null],mediumturquoise:[72,209,204,null],mediumvioletred:[199,21,133,null],midnightblue:[25,25,112,null],mintcream:[245,255,250,null],mistyrose:[255,228,225,null],moccasin:[255,228,181,null],navajowhite:[255,222,173,null],navy:[0,0,128,null],oldlace:[253,245,230,null],olive:[128,128,0,null],olivedrab:[107,142,35,null],orange:[255,165,0,null],orangered:[255,69,0,null],orchid:[218,112,214,null],palegoldenrod:[238,232,170,null],palegreen:[152,251,152,null],paleturquoise:[175,238,238,null],palevioletred:[219,112,147,null],papayawhip:[255,239,213,null],peachpuff:[255,218,185,null],peru:[205,133,63,null],pink:[255,192,203,null],plum:[221,160,221,null],powderblue:[176,224,230,null],purple:[128,0,128,null],rebeccapurple:[102,51,153,null],red:[255,0,0,null],rosybrown:[188,143,143,null],royalblue:[65,105,225,null],saddlebrown:[139,69,19,null],salmon:[250,128,114,null],sandybrown:[244,164,96,null],seagreen:[46,139,87,null],seashell:[255,245,238,null],sienna:[160,82,45,null],silver:[192,192,192,null],skyblue:[135,206,235,null],slateblue:[106,90,205,null],slategray:[112,128,144,null],slategrey:[112,128,144,null],snow:[255,250,250,null],springgreen:[0,255,127,null],steelblue:[70,130,180,null],tan:[210,180,140,null],teal:[0,128,128,null],thistle:[216,191,216,null],tomato:[255,99,71,null],turquoise:[64,224,208,null],violet:[238,130,238,null],wheat:[245,222,179,null],white:[255,255,255,null],whitesmoke:[245,245,245,null],yellow:[255,255,0,null],yellowgreen:[154,205,50,null]},Q=A.TRANSPARENT=new h([0,0,0,0])},function(e,A){"";function t(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(A,"__esModule",{value:!0});var r=function(){function e(e,A){for(var t=0,r;t<A.length;t++)r=A[t],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}return function(A,t,r){return t&&e(A.prototype,t),r&&e(A,r),A}}(),a=A.LENGTH_TYPE={PX:0,PERCENTAGE:1},s=function(){function e(A){t(this,e),this.type="%"===A.substr(A.length-1)?a.PERCENTAGE:a.PX;var r=parseFloat(A);isNaN(r)&&console.error("Invalid value given for Length: \""+A+"\""),this.value=isNaN(r)?0:r}return r(e,[{key:"isPercentage",value:function(){return this.type===a.PERCENTAGE}},{key:"getAbsoluteValue",value:function(e){return this.isPercentage()?e*(this.value/100):this.value}}],[{key:"create",value:function(A){return new e(A)}}]),e}();A.default=s;var d=function e(A){var t=A.parent;return t?e(t):parseFloat(A.style.font.fontSize)},l=A.calculateLengthFromValueWithUnit=function(e,A,t){switch(t){case"px":case"%":return new s(A+t);case"em":case"rem":var r=new s(A);return r.value*="em"===t?parseFloat(e.style.font.fontSize):d(e),r;default:return new s("0");}}},function(e,A,t){"";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(A,"__esModule",{value:!0}),A.parseBoundCurves=A.calculatePaddingBoxPath=A.calculateBorderBoxPath=A.parsePathForBorder=A.parseDocumentSize=A.calculateContentBox=A.calculatePaddingBox=A.parseBounds=A.Bounds=void 0;var c=function(){function e(e,A){for(var t=0,r;t<A.length;t++)r=A[t],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}return function(A,t,r){return t&&e(A.prototype,t),r&&e(A,r),A}}(),B=t(7),g=r(B),u=t(32),m=r(u),p=0,w=1,h=2,C=3,Q=0,U=1,E=A.Bounds=function(){function e(A,t,r,s){a(this,e),this.left=A,this.top=t,this.width=r,this.height=s}return c(e,null,[{key:"fromClientRect",value:function(A,t,r){return new e(A.left+t,A.top+r,A.width,A.height)}}]),e}(),F=A.parseBounds=function(e,A,t){return E.fromClientRect(e.getBoundingClientRect(),A,t)},b=A.calculatePaddingBox=function(e,A){return new E(e.left+A[C].borderWidth,e.top+A[p].borderWidth,e.width-(A[w].borderWidth+A[C].borderWidth),e.height-(A[p].borderWidth+A[h].borderWidth))},H=A.calculateContentBox=function(e,A,t){var r=A[p].value,a=A[w].value,s=A[h].value,d=A[C].value;return new E(e.left+d+t[C].borderWidth,e.top+r+t[p].borderWidth,e.width-(t[w].borderWidth+t[C].borderWidth+d+a),e.height-(t[p].borderWidth+t[h].borderWidth+r+s))},S=A.parseDocumentSize=function(e){var A=e.body,t=e.documentElement;if(!A||!t)throw new Error("Unable to get document size");var r=d(d(A.scrollWidth,t.scrollWidth),d(A.offsetWidth,t.offsetWidth),d(A.clientWidth,t.clientWidth)),a=d(d(A.scrollHeight,t.scrollHeight),d(A.offsetHeight,t.offsetHeight),d(A.clientHeight,t.clientHeight));return new E(0,0,r,a)},T=A.parsePathForBorder=function(e,A){switch(A){case p:return I(e.topLeftOuter,e.topLeftInner,e.topRightOuter,e.topRightInner);case w:return I(e.topRightOuter,e.topRightInner,e.bottomRightOuter,e.bottomRightInner);case h:return I(e.bottomRightOuter,e.bottomRightInner,e.bottomLeftOuter,e.bottomLeftInner);case C:default:return I(e.bottomLeftOuter,e.bottomLeftInner,e.topLeftOuter,e.topLeftInner);}},I=function(e,A,t,r){var a=[];return e instanceof m.default?a.push(e.subdivide(.5,!1)):a.push(e),t instanceof m.default?a.push(t.subdivide(.5,!0)):a.push(t),r instanceof m.default?a.push(r.subdivide(.5,!0).reverse()):a.push(r),A instanceof m.default?a.push(A.subdivide(.5,!1).reverse()):a.push(A),a},N=A.calculateBorderBoxPath=function(e){return[e.topLeftOuter,e.topRightOuter,e.bottomRightOuter,e.bottomLeftOuter]},R=A.calculatePaddingBoxPath=function(e){return[e.topLeftInner,e.topRightInner,e.bottomRightInner,e.bottomLeftInner]},L=A.parseBoundCurves=function(e,A,t){var r=t[M.TOP_LEFT][Q].getAbsoluteValue(e.width),a=t[M.TOP_LEFT][U].getAbsoluteValue(e.height),s=t[M.TOP_RIGHT][Q].getAbsoluteValue(e.width),c=t[M.TOP_RIGHT][U].getAbsoluteValue(e.height),B=t[M.BOTTOM_RIGHT][Q].getAbsoluteValue(e.width),u=t[M.BOTTOM_RIGHT][U].getAbsoluteValue(e.height),m=t[M.BOTTOM_LEFT][Q].getAbsoluteValue(e.width),E=t[M.BOTTOM_LEFT][U].getAbsoluteValue(e.height),F=[];F.push((r+s)/e.width),F.push((m+B)/e.width),F.push((a+E)/e.height),F.push((c+u)/e.height);var b=d.apply(Math,F);1<b&&(r/=b,a/=b,s/=b,c/=b,B/=b,u/=b,m/=b,E/=b);var H=e.width-s,S=e.height-u,T=e.width-B,I=e.height-E;return{topLeftOuter:0<r||0<a?D(e.left,e.top,r,a,M.TOP_LEFT):new g.default(e.left,e.top),topLeftInner:0<r||0<a?D(e.left+A[C].borderWidth,e.top+A[p].borderWidth,d(0,r-A[C].borderWidth),d(0,a-A[p].borderWidth),M.TOP_LEFT):new g.default(e.left+A[C].borderWidth,e.top+A[p].borderWidth),topRightOuter:0<s||0<c?D(e.left+H,e.top,s,c,M.TOP_RIGHT):new g.default(e.left+e.width,e.top),topRightInner:0<s||0<c?D(e.left+l(H,e.width+A[C].borderWidth),e.top+A[p].borderWidth,H>e.width+A[C].borderWidth?0:s-A[C].borderWidth,c-A[p].borderWidth,M.TOP_RIGHT):new g.default(e.left+e.width-A[w].borderWidth,e.top+A[p].borderWidth),bottomRightOuter:0<B||0<u?D(e.left+T,e.top+S,B,u,M.BOTTOM_RIGHT):new g.default(e.left+e.width,e.top+e.height),bottomRightInner:0<B||0<u?D(e.left+l(T,e.width-A[C].borderWidth),e.top+l(S,e.height+A[p].borderWidth),d(0,B-A[w].borderWidth),u-A[h].borderWidth,M.BOTTOM_RIGHT):new g.default(e.left+e.width-A[w].borderWidth,e.top+e.height-A[h].borderWidth),bottomLeftOuter:0<m||0<E?D(e.left,e.top+I,m,E,M.BOTTOM_LEFT):new g.default(e.left,e.top+e.height),bottomLeftInner:0<m||0<E?D(e.left+A[C].borderWidth,e.top+I,d(0,m-A[C].borderWidth),E-A[h].borderWidth,M.BOTTOM_LEFT):new g.default(e.left+A[C].borderWidth,e.top+e.height-A[h].borderWidth)}},M={TOP_LEFT:0,TOP_RIGHT:1,BOTTOM_RIGHT:2,BOTTOM_LEFT:3},D=function(e,A,t,r,a){var d=4*((s(2)-1)/3),l=t*d,c=r*d,B=e+t,u=A+r;switch(a){case M.TOP_LEFT:return new m.default(new g.default(e,u),new g.default(e,u-c),new g.default(B-l,A),new g.default(B,A));case M.TOP_RIGHT:return new m.default(new g.default(e,A),new g.default(e+l,A),new g.default(B,u-c),new g.default(B,u));case M.BOTTOM_RIGHT:return new m.default(new g.default(B,A),new g.default(B,A+c),new g.default(e+l,u),new g.default(e,u));case M.BOTTOM_LEFT:default:return new m.default(new g.default(B,u),new g.default(B-l,u),new g.default(e,A+c),new g.default(e,A));}}},function(e,A){"";Object.defineProperty(A,"__esModule",{value:!0});var t=A.contains=function(e,A){return 0!=(e&A)},r=A.distance=function(e,A){return s(e*e+A*A)},a=A.copyCSSStyles=function(e,A){for(var t=e.length-1,r;0<=t;t--)r=e.item(t),"content"!==r&&A.style.setProperty(r,e.getPropertyValue(r));return A},d=A.SMALL_IMAGE="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},function(e,A,t){"";function r(e){return e&&e.__esModule?e:{default:e}}function s(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(A,"__esModule",{value:!0}),A.parseBackgroundImage=A.parseBackground=A.calculateBackgroundRepeatPath=A.calculateBackgroundPosition=A.calculateBackgroungPositioningArea=A.calculateBackgroungPaintingArea=A.calculateGradientBackgroundSize=A.calculateBackgroundSize=A.BACKGROUND_ORIGIN=A.BACKGROUND_CLIP=A.BACKGROUND_SIZE=A.BACKGROUND_REPEAT=void 0;var d=t(0),l=r(d),c=t(1),B=r(c),g=t(31),u=r(g),m=t(7),p=r(m),w=t(2),h=t(17),C=A.BACKGROUND_REPEAT={REPEAT:0,NO_REPEAT:1,REPEAT_X:2,REPEAT_Y:3},Q=A.BACKGROUND_SIZE={AUTO:0,CONTAIN:1,COVER:2,LENGTH:3},U=A.BACKGROUND_CLIP={BORDER_BOX:0,PADDING_BOX:1,CONTENT_BOX:2},E=A.BACKGROUND_ORIGIN=U,F="auto",b=function e(A){s(this,e);"contain"===A?this.size=Q.CONTAIN:"cover"===A?this.size=Q.COVER:"auto"===A?this.size=Q.AUTO:this.value=new B.default(A)},H=A.calculateBackgroundSize=function(e,A,t){var r=0,a=0,s=e.size;if(s[0].size===Q.CONTAIN||s[0].size===Q.COVER){var d=t.width/t.height,l=A.width/A.height;return d<l==(s[0].size===Q.COVER)?new u.default(t.height*l,t.height):new u.default(t.width,t.width/l)}return s[0].value&&(r=s[0].value.getAbsoluteValue(t.width)),s[0].size===Q.AUTO&&s[1].size===Q.AUTO?a=A.height:s[1].size===Q.AUTO?a=r/A.width*A.height:s[1].value&&(a=s[1].value.getAbsoluteValue(t.height)),s[0].size===Q.AUTO&&(r=a/A.height*A.width),new u.default(r,a)},S=A.calculateGradientBackgroundSize=function(e,A){var t=e.size,r=t[0].value?t[0].value.getAbsoluteValue(A.width):A.width,a=t[1].value?t[1].value.getAbsoluteValue(A.height):t[0].value?r:A.height;return new u.default(r,a)},T=new b(F),I=A.calculateBackgroungPaintingArea=function(e,A){switch(A){case U.BORDER_BOX:return(0,w.calculateBorderBoxPath)(e);case U.PADDING_BOX:default:return(0,w.calculatePaddingBoxPath)(e);}},N=A.calculateBackgroungPositioningArea=function(e,A,t,r){var a=(0,w.calculatePaddingBox)(A,r);switch(e){case E.BORDER_BOX:return A;case E.CONTENT_BOX:var s=t[h.PADDING_SIDES.LEFT].getAbsoluteValue(A.width),d=t[h.PADDING_SIDES.RIGHT].getAbsoluteValue(A.width),l=t[h.PADDING_SIDES.TOP].getAbsoluteValue(A.width),c=t[h.PADDING_SIDES.BOTTOM].getAbsoluteValue(A.width);return new w.Bounds(a.left+s,a.top+l,a.width-s-d,a.height-l-c);case E.PADDING_BOX:default:return a;}},R=A.calculateBackgroundPosition=function(e,A,t){return new p.default(e[0].getAbsoluteValue(t.width-A.width),e[1].getAbsoluteValue(t.height-A.height))},L=A.calculateBackgroundRepeatPath=function(e,A,t,r,s){var d=e.repeat;return d===C.REPEAT_X?[new p.default(a(s.left),a(r.top+A.y)),new p.default(a(s.left+s.width),a(r.top+A.y)),new p.default(a(s.left+s.width),a(t.height+r.top+A.y)),new p.default(a(s.left),a(t.height+r.top+A.y))]:d===C.REPEAT_Y?[new p.default(a(r.left+A.x),a(s.top)),new p.default(a(r.left+A.x+t.width),a(s.top)),new p.default(a(r.left+A.x+t.width),a(s.height+s.top)),new p.default(a(r.left+A.x),a(s.height+s.top))]:d===C.NO_REPEAT?[new p.default(a(r.left+A.x),a(r.top+A.y)),new p.default(a(r.left+A.x+t.width),a(r.top+A.y)),new p.default(a(r.left+A.x+t.width),a(r.top+A.y+t.height)),new p.default(a(r.left+A.x),a(r.top+A.y+t.height))]:[new p.default(a(s.left),a(s.top)),new p.default(a(s.left+s.width),a(s.top)),new p.default(a(s.left+s.width),a(s.height+s.top)),new p.default(a(s.left),a(s.height+s.top))]},M=A.parseBackground=function(e,A){return{backgroundColor:new l.default(e.backgroundColor),backgroundImage:K(e,A),backgroundClip:D(e.backgroundClip),backgroundOrigin:O(e.backgroundOrigin)}},D=function(e){return"padding-box"===e?U.PADDING_BOX:"content-box"===e?U.CONTENT_BOX:U.BORDER_BOX},O=function(e){return"padding-box"===e?E.PADDING_BOX:"content-box"===e?E.CONTENT_BOX:E.BORDER_BOX},k=function(e){switch(e.trim()){case"no-repeat":return C.NO_REPEAT;case"repeat-x":case"repeat no-repeat":return C.REPEAT_X;case"repeat-y":case"no-repeat repeat":return C.REPEAT_Y;case"repeat":return C.REPEAT;}return console.error("Invalid background-repeat value \""+e+"\""),C.REPEAT},K=function(e,A){var t=V(e.backgroundImage).map(function(e){if("url"===e.method){var t=A.loadImage(e.args[0]);e.args=t?[t]:[]}return e}),r=e.backgroundPosition.split(","),a=e.backgroundRepeat.split(","),s=e.backgroundSize.split(",");return t.map(function(e,A){var t=(s[A]||F).trim().split(" ").map(_),d=(r[A]||F).trim().split(" ").map(P);return{source:e,repeat:k("string"==typeof a[A]?a[A]:a[0]),size:2>t.length?[t[0],T]:[t[0],t[1]],position:2>d.length?[d[0],d[0]]:[d[0],d[1]]}})},_=function(e){return"auto"===e?T:new b(e)},P=function(e){return"bottom"===e||"right"===e?new B.default("100%"):"left"===e||"top"===e?new B.default("0%"):"auto"===e?new B.default("0"):new B.default(e)},V=A.parseBackgroundImage=function(e){var A=[],t=[],r="",a=null,s="",d=0,l=0,c=function(){var e="";if(r){"\""===s.substr(0,1)&&(s=s.substr(1,s.length-2)),s&&t.push(s.trim());var a=r.indexOf("-",1)+1;"-"===r.substr(0,1)&&0<a&&(e=r.substr(0,a).toLowerCase(),r=r.substr(a)),r=r.toLowerCase(),"none"!==r&&A.push({prefix:e,method:r,args:t})}t=[],r=s=""};return e.split("").forEach(function(e){if(!(0===d&&/^\s$/.test(e))){switch(e){case"\"":a?a===e&&(a=null):a=e;break;case"(":if(a)break;else{if(0===d)return void(d=1);l++}break;case")":if(a)break;else if(1===d){if(0===l)return d=0,void c();l--}break;case",":if(a)break;else{if(0===d)return void c();if(1===d&&0===l&&!r.match(/^url$/i))return t.push(s.trim()),void(s="")}}0===d?r+=e:s+=e}}),c(),A}},function(e,A){"";Object.defineProperty(A,"__esModule",{value:!0});A.PATH={VECTOR:0,BEZIER_CURVE:1,CIRCLE:2}},function(e,A,t){"";function r(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(A,"__esModule",{value:!0});var a=function(){function e(e,A){for(var t=0,r;t<A.length;t++)r=A[t],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}return function(A,t,r){return t&&e(A.prototype,t),r&&e(A,r),A}}(),s=t(0),d=function(e){return e&&e.__esModule?e:{default:e}}(s),l=t(3),c=t(4),B=t(12),g=t(33),u=t(34),m=t(35),p=t(36),w=t(37),h=t(38),C=t(8),Q=t(39),U=t(40),E=t(18),F=t(17),b=t(19),H=t(11),S=t(41),T=t(20),I=t(42),N=t(43),R=t(44),L=t(45),M=t(2),D=t(21),O=t(14),k=["INPUT","TEXTAREA","SELECT"],K=function(){function e(A,t,a,s){var l=this;r(this,e),this.parent=t,this.tagName=A.tagName,this.index=s,this.childNodes=[],this.listItems=[],"number"==typeof A.start&&(this.listStart=A.start);var K=A.ownerDocument.defaultView,P=K.pageXOffset,V=K.pageYOffset,z=K.getComputedStyle(A,null),G=(0,u.parseDisplay)(z.display),X="radio"===A.type||"checkbox"===A.type,J=(0,b.parsePosition)(z.position);if(this.style={background:X?D.INPUT_BACKGROUND:(0,c.parseBackground)(z,a),border:X?D.INPUT_BORDERS:(0,B.parseBorder)(z),borderRadius:(A instanceof K.HTMLInputElement||A instanceof HTMLInputElement)&&X?(0,D.getInputBorderRadius)(A):(0,g.parseBorderRadius)(z),color:X?D.INPUT_COLOR:new d.default(z.color),display:G,float:(0,m.parseCSSFloat)(z.float),font:(0,p.parseFont)(z),letterSpacing:(0,w.parseLetterSpacing)(z.letterSpacing),listStyle:G===u.DISPLAY.LIST_ITEM?(0,C.parseListStyle)(z):null,lineBreak:(0,h.parseLineBreak)(z.lineBreak),margin:(0,Q.parseMargin)(z),opacity:parseFloat(z.opacity),overflow:-1===k.indexOf(A.tagName)?(0,U.parseOverflow)(z.overflow):U.OVERFLOW.HIDDEN,overflowWrap:(0,E.parseOverflowWrap)(z.overflowWrap?z.overflowWrap:z.wordWrap),padding:(0,F.parsePadding)(z),position:J,textDecoration:(0,H.parseTextDecoration)(z),textShadow:(0,S.parseTextShadow)(z.textShadow),textTransform:(0,T.parseTextTransform)(z.textTransform),transform:(0,I.parseTransform)(z),visibility:(0,N.parseVisibility)(z.visibility),wordBreak:(0,R.parseWordBreak)(z.wordBreak),zIndex:(0,L.parseZIndex)(J===b.POSITION.STATIC?"auto":z.zIndex)},this.isTransformed()&&(A.style.transform="matrix(1,0,0,1,0,0)"),G===u.DISPLAY.LIST_ITEM){var Y=(0,O.getListOwner)(this);if(Y){var W=Y.listItems.length;Y.listItems.push(this),this.listIndex=A.hasAttribute("value")&&"number"==typeof A.value?A.value:0===W?"number"==typeof Y.listStart?Y.listStart:1:Y.listItems[W-1].listIndex+1}}"IMG"===A.tagName&&A.addEventListener("load",function(){l.bounds=(0,M.parseBounds)(A,P,V),l.curvedBounds=(0,M.parseBoundCurves)(l.bounds,l.style.border,l.style.borderRadius)}),this.image=_(A,a),this.bounds=X?(0,D.reformatInputBounds)((0,M.parseBounds)(A,P,V)):(0,M.parseBounds)(A,P,V),this.curvedBounds=(0,M.parseBoundCurves)(this.bounds,this.style.border,this.style.borderRadius),this.name=""+A.tagName.toLowerCase()+(A.id?"#"+A.id:"")+A.className.toString().split(" ").map(function(e){return e.length?"."+e:""}).join("")}return a(e,[{key:"getClipPaths",value:function(){var e=this.parent?this.parent.getClipPaths():[],A=this.style.overflow!==U.OVERFLOW.VISIBLE;return A?e.concat([(0,M.calculatePaddingBoxPath)(this.curvedBounds)]):e}},{key:"isInFlow",value:function(){return this.isRootElement()&&!this.isFloating()&&!this.isAbsolutelyPositioned()}},{key:"isVisible",value:function(){return!(0,l.contains)(this.style.display,u.DISPLAY.NONE)&&0<this.style.opacity&&this.style.visibility===N.VISIBILITY.VISIBLE}},{key:"isAbsolutelyPositioned",value:function(){return this.style.position!==b.POSITION.STATIC&&this.style.position!==b.POSITION.RELATIVE}},{key:"isPositioned",value:function(){return this.style.position!==b.POSITION.STATIC}},{key:"isFloating",value:function(){return this.style.float!==m.FLOAT.NONE}},{key:"isRootElement",value:function(){return null===this.parent}},{key:"isTransformed",value:function(){return null!==this.style.transform}},{key:"isPositionedWithZIndex",value:function(){return this.isPositioned()&&!this.style.zIndex.auto}},{key:"isInlineLevel",value:function(){return(0,l.contains)(this.style.display,u.DISPLAY.INLINE)||(0,l.contains)(this.style.display,u.DISPLAY.INLINE_BLOCK)||(0,l.contains)(this.style.display,u.DISPLAY.INLINE_FLEX)||(0,l.contains)(this.style.display,u.DISPLAY.INLINE_GRID)||(0,l.contains)(this.style.display,u.DISPLAY.INLINE_LIST_ITEM)||(0,l.contains)(this.style.display,u.DISPLAY.INLINE_TABLE)}},{key:"isInlineBlockOrInlineTable",value:function(){return(0,l.contains)(this.style.display,u.DISPLAY.INLINE_BLOCK)||(0,l.contains)(this.style.display,u.DISPLAY.INLINE_TABLE)}}]),e}();A.default=K;var _=function(e,A){if(e instanceof e.ownerDocument.defaultView.SVGSVGElement||e instanceof SVGSVGElement){var t=new XMLSerializer;return A.loadImage("data:image/svg+xml,"+encodeURIComponent(t.serializeToString(e)))}switch(e.tagName){case"IMG":var r=e;return A.loadImage(r.currentSrc||r.src);case"CANVAS":return A.loadCanvas(e);case"IFRAME":var a=e.getAttribute("data-html2canvas-internal-iframe-key");if(a)return a;}return null}},function(e,A,t){"";function r(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(A,"__esModule",{value:!0});var a=t(5);A.default=function e(A,t){r(this,e),this.type=a.PATH.VECTOR,this.x=A,this.y=t,isNaN(A)&&console.error("Invalid x value given for Vector"),isNaN(t)&&console.error("Invalid y value given for Vector")}},function(e,A,t){"";Object.defineProperty(A,"__esModule",{value:!0}),A.parseListStyle=A.parseListStyleType=A.LIST_STYLE_TYPE=A.LIST_STYLE_POSITION=void 0;var r=t(4),a=A.LIST_STYLE_POSITION={INSIDE:0,OUTSIDE:1},s=A.LIST_STYLE_TYPE={NONE:-1,DISC:0,CIRCLE:1,SQUARE:2,DECIMAL:3,CJK_DECIMAL:4,DECIMAL_LEADING_ZERO:5,LOWER_ROMAN:6,UPPER_ROMAN:7,LOWER_GREEK:8,LOWER_ALPHA:9,UPPER_ALPHA:10,ARABIC_INDIC:11,ARMENIAN:12,BENGALI:13,CAMBODIAN:14,CJK_EARTHLY_BRANCH:15,CJK_HEAVENLY_STEM:16,CJK_IDEOGRAPHIC:17,DEVANAGARI:18,ETHIOPIC_NUMERIC:19,GEORGIAN:20,GUJARATI:21,GURMUKHI:22,HEBREW:22,HIRAGANA:23,HIRAGANA_IROHA:24,JAPANESE_FORMAL:25,JAPANESE_INFORMAL:26,KANNADA:27,KATAKANA:28,KATAKANA_IROHA:29,KHMER:30,KOREAN_HANGUL_FORMAL:31,KOREAN_HANJA_FORMAL:32,KOREAN_HANJA_INFORMAL:33,LAO:34,LOWER_ARMENIAN:35,MALAYALAM:36,MONGOLIAN:37,MYANMAR:38,ORIYA:39,PERSIAN:40,SIMP_CHINESE_FORMAL:41,SIMP_CHINESE_INFORMAL:42,TAMIL:43,TELUGU:44,THAI:45,TIBETAN:46,TRAD_CHINESE_FORMAL:47,TRAD_CHINESE_INFORMAL:48,UPPER_ARMENIAN:49,DISCLOSURE_OPEN:50,DISCLOSURE_CLOSED:51},d=A.parseListStyleType=function(e){switch(e){case"disc":return s.DISC;case"circle":return s.CIRCLE;case"square":return s.SQUARE;case"decimal":return s.DECIMAL;case"cjk-decimal":return s.CJK_DECIMAL;case"decimal-leading-zero":return s.DECIMAL_LEADING_ZERO;case"lower-roman":return s.LOWER_ROMAN;case"upper-roman":return s.UPPER_ROMAN;case"lower-greek":return s.LOWER_GREEK;case"lower-alpha":return s.LOWER_ALPHA;case"upper-alpha":return s.UPPER_ALPHA;case"arabic-indic":return s.ARABIC_INDIC;case"armenian":return s.ARMENIAN;case"bengali":return s.BENGALI;case"cambodian":return s.CAMBODIAN;case"cjk-earthly-branch":return s.CJK_EARTHLY_BRANCH;case"cjk-heavenly-stem":return s.CJK_HEAVENLY_STEM;case"cjk-ideographic":return s.CJK_IDEOGRAPHIC;case"devanagari":return s.DEVANAGARI;case"ethiopic-numeric":return s.ETHIOPIC_NUMERIC;case"georgian":return s.GEORGIAN;case"gujarati":return s.GUJARATI;case"gurmukhi":return s.GURMUKHI;case"hebrew":return s.HEBREW;case"hiragana":return s.HIRAGANA;case"hiragana-iroha":return s.HIRAGANA_IROHA;case"japanese-formal":return s.JAPANESE_FORMAL;case"japanese-informal":return s.JAPANESE_INFORMAL;case"kannada":return s.KANNADA;case"katakana":return s.KATAKANA;case"katakana-iroha":return s.KATAKANA_IROHA;case"khmer":return s.KHMER;case"korean-hangul-formal":return s.KOREAN_HANGUL_FORMAL;case"korean-hanja-formal":return s.KOREAN_HANJA_FORMAL;case"korean-hanja-informal":return s.KOREAN_HANJA_INFORMAL;case"lao":return s.LAO;case"lower-armenian":return s.LOWER_ARMENIAN;case"malayalam":return s.MALAYALAM;case"mongolian":return s.MONGOLIAN;case"myanmar":return s.MYANMAR;case"oriya":return s.ORIYA;case"persian":return s.PERSIAN;case"simp-chinese-formal":return s.SIMP_CHINESE_FORMAL;case"simp-chinese-informal":return s.SIMP_CHINESE_INFORMAL;case"tamil":return s.TAMIL;case"telugu":return s.TELUGU;case"thai":return s.THAI;case"tibetan":return s.TIBETAN;case"trad-chinese-formal":return s.TRAD_CHINESE_FORMAL;case"trad-chinese-informal":return s.TRAD_CHINESE_INFORMAL;case"upper-armenian":return s.UPPER_ARMENIAN;case"disclosure-open":return s.DISCLOSURE_OPEN;case"disclosure-closed":return s.DISCLOSURE_CLOSED;case"none":default:return s.NONE;}},l=A.parseListStyle=function(e){var A=(0,r.parseBackgroundImage)(e.getPropertyValue("list-style-image"));return{listStyleType:d(e.getPropertyValue("list-style-type")),listStyleImage:A.length?A[0]:null,listStylePosition:c(e.getPropertyValue("list-style-position"))}},c=function(e){switch(e){case"inside":return a.INSIDE;case"outside":default:return a.OUTSIDE;}}},function(e,A,t){"";function r(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}function a(e,A,t){return 0<e.length?A+t.toUpperCase():e}Object.defineProperty(A,"__esModule",{value:!0});var s=function(){function e(e,A){for(var t=0,r;t<A.length;t++)r=A[t],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}return function(A,t,r){return t&&e(A.prototype,t),r&&e(A,r),A}}(),d=t(20),l=t(22),c=function(){function e(A,t,a){r(this,e),this.text=A,this.parent=t,this.bounds=a}return s(e,null,[{key:"fromTextNode",value:function(A,t){var r=B(A.data,t.style.textTransform);return new e(r,t,(0,l.parseTextBounds)(r,t,A))}}]),e}();A.default=c;var B=function(e,A){return A===d.TEXT_TRANSFORM.LOWERCASE?e.toLowerCase():A===d.TEXT_TRANSFORM.CAPITALIZE?e.replace(/(^|\s|:|-|\(|\))([a-z])/g,a):A===d.TEXT_TRANSFORM.UPPERCASE?e.toUpperCase():e}},function(e,A,t){"";Object.defineProperty(A,"__esModule",{value:!0});var r=t(23),s=function(e){if(e.createRange){var A=e.createRange();if(A.getBoundingClientRect){var t=e.createElement("boundtest");t.style.height="123px",t.style.display="block",e.body.appendChild(t),A.selectNode(t);var r=A.getBoundingClientRect(),s=a(r.height);if(e.body.removeChild(t),123===s)return!0}}return!1},d=function(e,A){var t=new Image,r=e.createElement("canvas"),a=r.getContext("2d");return new Promise(function(s){t.src=A;var d=function(){try{a.drawImage(t,0,0),r.toDataURL()}catch(A){return s(!1)}return s(!0)};t.onload=d,t.onerror=function(){return s(!1)},!0===t.complete&&setTimeout(function(){d()},500)})},l=function(){return"undefined"!=typeof new Image().crossOrigin},c=function(){return"string"==typeof new XMLHttpRequest().responseType},B=function(e){var A=new Image,t=e.createElement("canvas"),r=t.getContext("2d");A.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(A,0,0),t.toDataURL()}catch(A){return!1}return!0},g=function(e){return 0===e[0]&&255===e[1]&&0===e[2]&&255===e[3]},u=function(e){var A=e.createElement("canvas"),t=100;A.width=t,A.height=t;var a=A.getContext("2d");a.fillStyle="rgb(0, 255, 0)",a.fillRect(0,0,t,t);var s=new Image,d=A.toDataURL();s.src=d;var l=(0,r.createForeignObjectSVG)(t,t,0,0,s);return a.fillStyle="red",a.fillRect(0,0,t,t),(0,r.loadSerializedSVG)(l).then(function(A){a.drawImage(A,0,0);var s=a.getImageData(0,0,t,t).data;a.fillStyle="red",a.fillRect(0,0,t,t);var l=e.createElement("div");return l.style.backgroundImage="url("+d+")",l.style.height=t+"px",g(s)?(0,r.loadSerializedSVG)((0,r.createForeignObjectSVG)(t,t,0,0,l)):Promise.reject(!1)}).then(function(e){return a.drawImage(e,0,0),g(a.getImageData(0,0,t,t).data)}).catch(function(){return!1})},m={get SUPPORT_RANGE_BOUNDS(){'';var e=s(document);return Object.defineProperty(m,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_SVG_DRAWING(){'';var e=B(document);return Object.defineProperty(m,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_BASE64_DRAWING(){'';return function(e){var A=d(document,e);return Object.defineProperty(m,"SUPPORT_BASE64_DRAWING",{value:function(){return A}}),A}},get SUPPORT_FOREIGNOBJECT_DRAWING(){'';var e="function"==typeof Array.from&&"function"==typeof window.fetch?u(document):Promise.resolve(!1);return Object.defineProperty(m,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){'';var e=l();return Object.defineProperty(m,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){'';var e=c();return Object.defineProperty(m,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){'';var e=("withCredentials"in new XMLHttpRequest);return Object.defineProperty(m,"SUPPORT_CORS_XHR",{value:e}),e}};A.default=m},function(e,A,t){"";Object.defineProperty(A,"__esModule",{value:!0}),A.parseTextDecoration=A.TEXT_DECORATION_LINE=A.TEXT_DECORATION=A.TEXT_DECORATION_STYLE=void 0;var r=t(0),a=function(e){return e&&e.__esModule?e:{default:e}}(r),s=A.TEXT_DECORATION_STYLE={SOLID:0,DOUBLE:1,DOTTED:2,DASHED:3,WAVY:4},d=A.TEXT_DECORATION={NONE:null},l=A.TEXT_DECORATION_LINE={UNDERLINE:1,OVERLINE:2,LINE_THROUGH:3,BLINK:4},c=function(e){return"underline"===e?l.UNDERLINE:"overline"===e?l.OVERLINE:"line-through"===e?l.LINE_THROUGH:l.BLINK},B=function(e){return"none"===e?null:e.split(" ").map(c)},g=function(e){return"double"===e?s.DOUBLE:"dotted"===e?s.DOTTED:"dashed"===e?s.DASHED:"wavy"===e?s.WAVY:s.SOLID},u=A.parseTextDecoration=function(e){var A=B(e.textDecorationLine?e.textDecorationLine:e.textDecoration);if(null===A)return d.NONE;var t=e.textDecorationColor?new a.default(e.textDecorationColor):null,r=g(e.textDecorationStyle);return{textDecorationLine:A,textDecorationColor:t,textDecorationStyle:r}}},function(e,A,t){"";Object.defineProperty(A,"__esModule",{value:!0}),A.parseBorder=A.BORDER_SIDES=A.BORDER_STYLE=void 0;var r=t(0),a=function(e){return e&&e.__esModule?e:{default:e}}(r),s=A.BORDER_STYLE={NONE:0,SOLID:1},d=A.BORDER_SIDES={TOP:0,RIGHT:1,BOTTOM:2,LEFT:3},l=Object.keys(d).map(function(e){return e.toLowerCase()}),c=function(e){return"none"===e?s.NONE:s.SOLID},B=A.parseBorder=function(e){return l.map(function(A){var t=new a.default(e.getPropertyValue("border-"+A+"-color")),r=c(e.getPropertyValue("border-"+A+"-style")),s=parseFloat(e.getPropertyValue("border-"+A+"-width"));return{borderColor:t,borderStyle:r,borderWidth:isNaN(s)?0:s}})}},function(e,A){"";Object.defineProperty(A,"__esModule",{value:!0});for(var t=A.toCodePoints=function(e){for(var A=[],t=0,r=e.length;t<r;){var a=e.charCodeAt(t++);if(55296<=a&&56319>=a&&t<r){var s=e.charCodeAt(t++);56320==(64512&s)?A.push(((1023&a)<<10)+(1023&s)+65536):(A.push(a),t--)}else A.push(a)}return A},r=A.fromCodePoint=function(){var e=String.fromCodePoint;if(e)return e.apply(String,arguments);var A=arguments.length;if(!A)return"";for(var t=[],r=-1,a="";++r<A;){var s=arguments.length<=r?void 0:arguments[r];65535>=s?t.push(s):(s-=65536,t.push((s>>10)+55296,s%1024+56320)),(r+1===A||16384<t.length)&&(a+=String.fromCharCode.apply(String,t),t.length=0)}return a},a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s="undefined"==typeof Uint8Array?[]:new Uint8Array(256),d=0;d<a.length;d++)s[a.charCodeAt(d)]=d;var l=A.decode=function(e){var A=.75*e.length,t=e.length,r=0,a,d,l,c,B;"="===e[e.length-1]&&(A--,"="===e[e.length-2]&&A--);var g="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint8Array.prototype.slice?new ArrayBuffer(A):Array(A),u=Array.isArray(g)?g:new Uint8Array(g);for(a=0;a<t;a+=4)d=s[e.charCodeAt(a)],l=s[e.charCodeAt(a+1)],c=s[e.charCodeAt(a+2)],B=s[e.charCodeAt(a+3)],u[r++]=d<<2|l>>4,u[r++]=(15&l)<<4|c>>2,u[r++]=(3&c)<<6|63&B;return g},c=A.polyUint16Array=function(e){for(var A=e.length,t=[],r=0;r<A;r+=2)t.push(e[r+1]<<8|e[r]);return t},B=A.polyUint32Array=function(e){for(var A=e.length,t=[],r=0;r<A;r+=4)t.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return t}},function(e,A,a){"";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(A,"__esModule",{value:!0}),A.createCounterText=A.inlineListItemElement=A.getListOwner=void 0;var d=a(3),l=a(6),c=s(l),B=a(9),g=s(B),u=a(8),m=a(24),p=["OL","UL","MENU"],w=A.getListOwner=function(e){var A=e.parent;if(!A)return null;do{var t=-1!==p.indexOf(A.tagName);if(t)return A;A=A.parent}while(A);return e.parent},h=A.inlineListItemElement=function(e,A,t){var r=A.style.listStyle;if(r){var a=e.ownerDocument.defaultView.getComputedStyle(e,null),s=e.ownerDocument.createElement("html2canvaswrapper");switch((0,d.copyCSSStyles)(a,s),s.style.position="absolute",s.style.bottom="auto",s.style.display="block",s.style.letterSpacing="normal",r.listStylePosition){case u.LIST_STYLE_POSITION.OUTSIDE:s.style.left="auto",s.style.right=e.ownerDocument.defaultView.innerWidth-A.bounds.left-A.style.margin[1].getAbsoluteValue(A.bounds.width)+7+"px",s.style.textAlign="right";break;case u.LIST_STYLE_POSITION.INSIDE:s.style.left=A.bounds.left-A.style.margin[3].getAbsoluteValue(A.bounds.width)+"px",s.style.right="auto",s.style.textAlign="left";}var l=void 0,B=A.style.margin[0].getAbsoluteValue(A.bounds.width),m=r.listStyleImage;if(!m)"number"==typeof A.listIndex&&(l=e.ownerDocument.createTextNode(K(A.listIndex,r.listStyleType,!0)),s.appendChild(l),s.style.top=A.bounds.top-B+"px");else if("url"===m.method){var p=e.ownerDocument.createElement("img");p.src=m.args[0],s.style.top=A.bounds.top-B+"px",s.style.width="auto",s.style.height="auto",s.appendChild(p)}else{var w=.5*parseFloat(A.style.font.fontSize);s.style.top=A.bounds.top-B+A.bounds.height-1.5*w+"px",s.style.width=w+"px",s.style.height=w+"px",s.style.backgroundImage=a.listStyleImage}var h=e.ownerDocument.body;h.appendChild(s),l?(A.childNodes.push(g.default.fromTextNode(l,A)),h.removeChild(s)):A.childNodes.push(new c.default(s,A,t,0))}},C={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Q={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u0554","\u0553","\u0552","\u0551","\u0550","\u054F","\u054E","\u054D","\u054C","\u054B","\u054A","\u0549","\u0548","\u0547","\u0546","\u0545","\u0544","\u0543","\u0542","\u0541","\u0540","\u053F","\u053E","\u053D","\u053C","\u053B","\u053A","\u0539","\u0538","\u0537","\u0536","\u0535","\u0534","\u0533","\u0532","\u0531"]},U={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["\u05D9\u05F3","\u05D8\u05F3","\u05D7\u05F3","\u05D6\u05F3","\u05D5\u05F3","\u05D4\u05F3","\u05D3\u05F3","\u05D2\u05F3","\u05D1\u05F3","\u05D0\u05F3","\u05EA","\u05E9","\u05E8","\u05E7","\u05E6","\u05E4","\u05E2","\u05E1","\u05E0","\u05DE","\u05DC","\u05DB","\u05D9\u05D8","\u05D9\u05D7","\u05D9\u05D6","\u05D8\u05D6","\u05D8\u05D5","\u05D9","\u05D8","\u05D7","\u05D6","\u05D5","\u05D4","\u05D3","\u05D2","\u05D1","\u05D0"]},E={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u10F5","\u10F0","\u10EF","\u10F4","\u10EE","\u10ED","\u10EC","\u10EB","\u10EA","\u10E9","\u10E8","\u10E7","\u10E6","\u10E5","\u10E4","\u10F3","\u10E2","\u10E1","\u10E0","\u10DF","\u10DE","\u10DD","\u10F2","\u10DC","\u10DB","\u10DA","\u10D9","\u10D8","\u10D7","\u10F1","\u10D6","\u10D5","\u10D4","\u10D3","\u10D2","\u10D1","\u10D0"]},F=function(e,A,t,r,a,s){return e<A||e>t?K(e,a,0<s.length):r.integers.reduce(function(A,t,a){for(;e>=t;)e-=t,A+=r.values[a];return A},"")+s},b=function(e,A,t,r){var a="";do t||e--,a=r(e)+a,e/=A;while(e*A>=A);return a},H=function(e,A,a,s,d){var l=a-A+1;return(0>e?"-":"")+(b(r(e),l,s,function(e){return(0,m.fromCodePoint)(t(e%l)+A)})+d)},S=function(e,A){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:". ",s=A.length;return b(r(e),s,!1,function(e){return A[t(e%s)]})+a},T=1,I=2,N=4,R=8,L=function(e,A,a,s,l,c){if(-9999>e||9999<e)return K(e,u.LIST_STYLE_TYPE.CJK_DECIMAL,0<l.length);var B=r(e),g=l;if(0===B)return A[0]+g;for(var m=0,p;0<B&&4>=m;m++)p=B%10,0===p&&(0,d.contains)(c,T)&&""!==g?g=A[p]+g:1<p||1===p&&0===m||1===p&&1===m&&(0,d.contains)(c,I)||1===p&&1===m&&(0,d.contains)(c,N)&&100<e||1===p&&1<m&&(0,d.contains)(c,R)?g=A[p]+(0<m?a[m-1]:"")+g:1===p&&0<m&&(g=a[m-1]+g),B=t(B/10);return(0>e?s:"")+g},M="\u5341\u767E\u5343\u842C",D="\u62FE\u4F70\u4EDF\u842C",O="\u30DE\u30A4\u30CA\u30B9",k="\uB9C8\uC774\uB108\uC2A4 ",K=A.createCounterText=function(e,A,t){var r=t?". ":"",a=t?"\u3001":"",s=t?", ":"";switch(A){case u.LIST_STYLE_TYPE.DISC:return"\u2022";case u.LIST_STYLE_TYPE.CIRCLE:return"\u25E6";case u.LIST_STYLE_TYPE.SQUARE:return"\u25FE";case u.LIST_STYLE_TYPE.DECIMAL_LEADING_ZERO:var d=H(e,48,57,!0,r);return 4>d.length?"0"+d:d;case u.LIST_STYLE_TYPE.CJK_DECIMAL:return S(e,"\u3007\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D",a);case u.LIST_STYLE_TYPE.LOWER_ROMAN:return F(e,1,3999,C,u.LIST_STYLE_TYPE.DECIMAL,r).toLowerCase();case u.LIST_STYLE_TYPE.UPPER_ROMAN:return F(e,1,3999,C,u.LIST_STYLE_TYPE.DECIMAL,r);case u.LIST_STYLE_TYPE.LOWER_GREEK:return H(e,945,969,!1,r);case u.LIST_STYLE_TYPE.LOWER_ALPHA:return H(e,97,122,!1,r);case u.LIST_STYLE_TYPE.UPPER_ALPHA:return H(e,65,90,!1,r);case u.LIST_STYLE_TYPE.ARABIC_INDIC:return H(e,1632,1641,!0,r);case u.LIST_STYLE_TYPE.ARMENIAN:case u.LIST_STYLE_TYPE.UPPER_ARMENIAN:return F(e,1,9999,Q,u.LIST_STYLE_TYPE.DECIMAL,r);case u.LIST_STYLE_TYPE.LOWER_ARMENIAN:return F(e,1,9999,Q,u.LIST_STYLE_TYPE.DECIMAL,r).toLowerCase();case u.LIST_STYLE_TYPE.BENGALI:return H(e,2534,2543,!0,r);case u.LIST_STYLE_TYPE.CAMBODIAN:case u.LIST_STYLE_TYPE.KHMER:return H(e,6112,6121,!0,r);case u.LIST_STYLE_TYPE.CJK_EARTHLY_BRANCH:return S(e,"\u5B50\u4E11\u5BC5\u536F\u8FB0\u5DF3\u5348\u672A\u7533\u9149\u620C\u4EA5",a);case u.LIST_STYLE_TYPE.CJK_HEAVENLY_STEM:return S(e,"\u7532\u4E59\u4E19\u4E01\u620A\u5DF1\u5E9A\u8F9B\u58EC\u7678",a);case u.LIST_STYLE_TYPE.CJK_IDEOGRAPHIC:case u.LIST_STYLE_TYPE.TRAD_CHINESE_INFORMAL:return L(e,"\u96F6\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D",M,"\u8CA0",a,I|N|R);case u.LIST_STYLE_TYPE.TRAD_CHINESE_FORMAL:return L(e,"\u96F6\u58F9\u8CB3\u53C3\u8086\u4F0D\u9678\u67D2\u634C\u7396",D,"\u8CA0",a,T|I|N|R);case u.LIST_STYLE_TYPE.SIMP_CHINESE_INFORMAL:return L(e,"\u96F6\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D",M,"\u8D1F",a,I|N|R);case u.LIST_STYLE_TYPE.SIMP_CHINESE_FORMAL:return L(e,"\u96F6\u58F9\u8D30\u53C1\u8086\u4F0D\u9646\u67D2\u634C\u7396",D,"\u8D1F",a,T|I|N|R);case u.LIST_STYLE_TYPE.JAPANESE_INFORMAL:return L(e,"\u3007\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D","\u5341\u767E\u5343\u4E07",O,a,0);case u.LIST_STYLE_TYPE.JAPANESE_FORMAL:return L(e,"\u96F6\u58F1\u5F10\u53C2\u56DB\u4F0D\u516D\u4E03\u516B\u4E5D","\u62FE\u767E\u5343\u4E07",O,a,T|I|N);case u.LIST_STYLE_TYPE.KOREAN_HANGUL_FORMAL:return L(e,"\uC601\uC77C\uC774\uC0BC\uC0AC\uC624\uC721\uCE60\uD314\uAD6C","\uC2ED\uBC31\uCC9C\uB9CC",k,s,T|I|N);case u.LIST_STYLE_TYPE.KOREAN_HANJA_INFORMAL:return L(e,"\u96F6\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D","\u5341\u767E\u5343\u842C",k,s,0);case u.LIST_STYLE_TYPE.KOREAN_HANJA_FORMAL:return L(e,"\u96F6\u58F9\u8CB3\u53C3\u56DB\u4E94\u516D\u4E03\u516B\u4E5D","\u62FE\u767E\u5343",k,s,T|I|N);case u.LIST_STYLE_TYPE.DEVANAGARI:return H(e,2406,2415,!0,r);case u.LIST_STYLE_TYPE.GEORGIAN:return F(e,1,19999,E,u.LIST_STYLE_TYPE.DECIMAL,r);case u.LIST_STYLE_TYPE.GUJARATI:return H(e,2790,2799,!0,r);case u.LIST_STYLE_TYPE.GURMUKHI:return H(e,2662,2671,!0,r);case u.LIST_STYLE_TYPE.HEBREW:return F(e,1,10999,U,u.LIST_STYLE_TYPE.DECIMAL,r);case u.LIST_STYLE_TYPE.HIRAGANA:return S(e,"\u3042\u3044\u3046\u3048\u304A\u304B\u304D\u304F\u3051\u3053\u3055\u3057\u3059\u305B\u305D\u305F\u3061\u3064\u3066\u3068\u306A\u306B\u306C\u306D\u306E\u306F\u3072\u3075\u3078\u307B\u307E\u307F\u3080\u3081\u3082\u3084\u3086\u3088\u3089\u308A\u308B\u308C\u308D\u308F\u3090\u3091\u3092\u3093");case u.LIST_STYLE_TYPE.HIRAGANA_IROHA:return S(e,"\u3044\u308D\u306F\u306B\u307B\u3078\u3068\u3061\u308A\u306C\u308B\u3092\u308F\u304B\u3088\u305F\u308C\u305D\u3064\u306D\u306A\u3089\u3080\u3046\u3090\u306E\u304A\u304F\u3084\u307E\u3051\u3075\u3053\u3048\u3066\u3042\u3055\u304D\u3086\u3081\u307F\u3057\u3091\u3072\u3082\u305B\u3059");case u.LIST_STYLE_TYPE.KANNADA:return H(e,3302,3311,!0,r);case u.LIST_STYLE_TYPE.KATAKANA:return S(e,"\u30A2\u30A4\u30A6\u30A8\u30AA\u30AB\u30AD\u30AF\u30B1\u30B3\u30B5\u30B7\u30B9\u30BB\u30BD\u30BF\u30C1\u30C4\u30C6\u30C8\u30CA\u30CB\u30CC\u30CD\u30CE\u30CF\u30D2\u30D5\u30D8\u30DB\u30DE\u30DF\u30E0\u30E1\u30E2\u30E4\u30E6\u30E8\u30E9\u30EA\u30EB\u30EC\u30ED\u30EF\u30F0\u30F1\u30F2\u30F3",a);case u.LIST_STYLE_TYPE.KATAKANA_IROHA:return S(e,"\u30A4\u30ED\u30CF\u30CB\u30DB\u30D8\u30C8\u30C1\u30EA\u30CC\u30EB\u30F2\u30EF\u30AB\u30E8\u30BF\u30EC\u30BD\u30C4\u30CD\u30CA\u30E9\u30E0\u30A6\u30F0\u30CE\u30AA\u30AF\u30E4\u30DE\u30B1\u30D5\u30B3\u30A8\u30C6\u30A2\u30B5\u30AD\u30E6\u30E1\u30DF\u30B7\u30F1\u30D2\u30E2\u30BB\u30B9",a);case u.LIST_STYLE_TYPE.LAO:return H(e,3792,3801,!0,r);case u.LIST_STYLE_TYPE.MONGOLIAN:return H(e,6160,6169,!0,r);case u.LIST_STYLE_TYPE.MYANMAR:return H(e,4160,4169,!0,r);case u.LIST_STYLE_TYPE.ORIYA:return H(e,2918,2927,!0,r);case u.LIST_STYLE_TYPE.PERSIAN:return H(e,1776,1785,!0,r);case u.LIST_STYLE_TYPE.TAMIL:return H(e,3046,3055,!0,r);case u.LIST_STYLE_TYPE.TELUGU:return H(e,3174,3183,!0,r);case u.LIST_STYLE_TYPE.THAI:return H(e,3664,3673,!0,r);case u.LIST_STYLE_TYPE.TIBETAN:return H(e,3872,3881,!0,r);case u.LIST_STYLE_TYPE.DECIMAL:default:return H(e,48,57,!0,r);}}},function(r,s,l){"";function c(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(s,"__esModule",{value:!0});var B=function(){function e(e,A){for(var t=0,r;t<A.length;t++)r=A[t],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}return function(A,t,r){return t&&e(A.prototype,t),r&&e(A,r),A}}(),g=l(5),u=l(11),m=function(e,A){var t=d.apply(null,e.colorStops.map(function(e){return e.stop})),r=1/d(1,t);e.colorStops.forEach(function(e){A.addColorStop(r*e.stop,e.color.toString())})},p=function(){function r(e){c(this,r),this.canvas=e?e:document.createElement("canvas")}return B(r,[{key:"render",value:function(e){this.ctx=this.canvas.getContext("2d"),this.options=e,this.canvas.width=t(e.width*e.scale),this.canvas.height=t(e.height*e.scale),this.canvas.style.width=e.width+"px",this.canvas.style.height=e.height+"px",this.ctx.scale(this.options.scale,this.options.scale),this.ctx.translate(-e.x,-e.y),this.ctx.textBaseline="bottom",e.logger.log("Canvas renderer initialized ("+e.width+"x"+e.height+" at "+e.x+","+e.y+") with scale "+this.options.scale)}},{key:"clip",value:function(e,A){var t=this;e.length&&(this.ctx.save(),e.forEach(function(e){t.path(e),t.ctx.clip()})),A(),e.length&&this.ctx.restore()}},{key:"drawImage",value:function(e,A,t){this.ctx.drawImage(e,A.left,A.top,A.width,A.height,t.left,t.top,t.width,t.height)}},{key:"drawShape",value:function(e,A){this.path(e),this.ctx.fillStyle=A.toString(),this.ctx.fill()}},{key:"fill",value:function(e){this.ctx.fillStyle=e.toString(),this.ctx.fill()}},{key:"getTarget",value:function(){return this.canvas.getContext("2d").setTransform(1,0,0,1,0,0),Promise.resolve(this.canvas)}},{key:"path",value:function(e){var t=this;this.ctx.beginPath(),Array.isArray(e)?e.forEach(function(e,A){var r=e.type===g.PATH.VECTOR?e:e.start;0===A?t.ctx.moveTo(r.x,r.y):t.ctx.lineTo(r.x,r.y),e.type===g.PATH.BEZIER_CURVE&&t.ctx.bezierCurveTo(e.startControl.x,e.startControl.y,e.endControl.x,e.endControl.y,e.end.x,e.end.y)}):this.ctx.arc(e.x+e.radius,e.y+e.radius,e.radius,0,2*A,!0),this.ctx.closePath()}},{key:"rectangle",value:function(e,A,t,r,a){this.ctx.fillStyle=a.toString(),this.ctx.fillRect(e,A,t,r)}},{key:"renderLinearGradient",value:function(e,A){var t=this.ctx.createLinearGradient(e.left+A.direction.x1,e.top+A.direction.y1,e.left+A.direction.x0,e.top+A.direction.y0);m(A,t),this.ctx.fillStyle=t,this.ctx.fillRect(e.left,e.top,e.width,e.height)}},{key:"renderRadialGradient",value:function(e,A){var t=this,r=e.left+A.center.x,a=e.top+A.center.y,s=this.ctx.createRadialGradient(r,a,0,r,a,A.radius.x);if(s)if(m(A,s),this.ctx.fillStyle=s,A.radius.x!==A.radius.y){var d=e.left+.5*e.width,l=e.top+.5*e.height,c=A.radius.y/A.radius.x,B=1/c;this.transform(d,l,[1,0,0,c,0,0],function(){return t.ctx.fillRect(e.left,B*(e.top-l)+l,e.width,e.height*B)})}else this.ctx.fillRect(e.left,e.top,e.width,e.height)}},{key:"renderRepeat",value:function(e,A,t,r,a){this.path(e),this.ctx.fillStyle=this.ctx.createPattern(this.resizeImage(A,t),"repeat"),this.ctx.translate(r,a),this.ctx.fill(),this.ctx.translate(-r,-a)}},{key:"renderTextNode",value:function(A,t,r,s,d){var l=this;this.ctx.font=[r.fontStyle,r.fontVariant,r.fontWeight,r.fontSize,r.fontFamily].join(" "),A.forEach(function(A){if(l.ctx.fillStyle=t.toString(),d&&A.text.trim().length?d.slice(0).reverse().forEach(function(e){l.ctx.shadowColor=e.color.toString(),l.ctx.shadowOffsetX=e.offsetX*l.options.scale,l.ctx.shadowOffsetY=e.offsetY*l.options.scale,l.ctx.shadowBlur=e.blur,l.ctx.fillText(A.text,A.bounds.left,A.bounds.top+A.bounds.height)}):l.ctx.fillText(A.text,A.bounds.left,A.bounds.top+A.bounds.height),null!==s){var c=s.textDecorationColor||t;s.textDecorationLine.forEach(function(t){switch(t){case u.TEXT_DECORATION_LINE.UNDERLINE:var s=l.options.fontMetrics.getMetrics(r),d=s.baseline;l.rectangle(A.bounds.left,a(A.bounds.top+d),A.bounds.width,1,c);break;case u.TEXT_DECORATION_LINE.OVERLINE:l.rectangle(A.bounds.left,a(A.bounds.top),A.bounds.width,1,c);break;case u.TEXT_DECORATION_LINE.LINE_THROUGH:var B=l.options.fontMetrics.getMetrics(r),g=B.middle;l.rectangle(A.bounds.left,e(A.bounds.top+g),A.bounds.width,1,c);}})}})}},{key:"resizeImage",value:function(e,A){if(e.width===A.width&&e.height===A.height)return e;var t=this.canvas.ownerDocument.createElement("canvas");t.width=A.width,t.height=A.height;var r=t.getContext("2d");return r.drawImage(e,0,0,e.width,e.height,0,0,A.width,A.height),t}},{key:"setOpacity",value:function(e){this.ctx.globalAlpha=e}},{key:"transform",value:function(e,A,t,r){this.ctx.save(),this.ctx.translate(e,A),this.ctx.transform(t[0],t[1],t[2],t[3],t[4],t[5]),this.ctx.translate(-e,-A),r(),this.ctx.restore()}}]),r}();s.default=p},function(e,A){"";function t(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(A,"__esModule",{value:!0});var r=function(){function e(e,A){for(var t=0,r;t<A.length;t++)r=A[t],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}return function(A,t,r){return t&&e(A.prototype,t),r&&e(A,r),A}}(),a=function(){function e(A,r,a){t(this,e),this.enabled="undefined"!=typeof window&&A,this.start=a?a:Date.now(),this.id=r}return r(e,[{key:"child",value:function(A){return new e(this.enabled,A,this.start)}},{key:"log",value:function(){if(this.enabled&&window.console&&window.console.log){for(var e=arguments.length,A=Array(e),t=0;t<e;t++)A[t]=arguments[t];Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-this.start+"ms",this.id?"html2canvas ("+this.id+"):":"html2canvas:"].concat([].slice.call(A,0)))}}},{key:"error",value:function(){if(this.enabled&&window.console&&window.console.error){for(var e=arguments.length,A=Array(e),t=0;t<e;t++)A[t]=arguments[t];Function.prototype.bind.call(window.console.error,window.console).apply(window.console,[Date.now()-this.start+"ms",this.id?"html2canvas ("+this.id+"):":"html2canvas:"].concat([].slice.call(A,0)))}}}]),e}();A.default=a},function(e,A,t){"";Object.defineProperty(A,"__esModule",{value:!0}),A.parsePadding=A.PADDING_SIDES=void 0;var r=t(1),a=function(e){return e&&e.__esModule?e:{default:e}}(r),s=A.PADDING_SIDES={TOP:0,RIGHT:1,BOTTOM:2,LEFT:3},d=["top","right","bottom","left"],l=A.parsePadding=function(e){return d.map(function(A){return new a.default(e.getPropertyValue("padding-"+A))})}},function(e,A){"";Object.defineProperty(A,"__esModule",{value:!0});var t=A.OVERFLOW_WRAP={NORMAL:0,BREAK_WORD:1},r=A.parseOverflowWrap=function(e){switch(e){case"break-word":return t.BREAK_WORD;case"normal":default:return t.NORMAL;}}},function(e,A){"";Object.defineProperty(A,"__esModule",{value:!0});var t=A.POSITION={STATIC:0,RELATIVE:1,ABSOLUTE:2,FIXED:3,STICKY:4},r=A.parsePosition=function(e){return"relative"===e?t.RELATIVE:"absolute"===e?t.ABSOLUTE:"fixed"===e?t.FIXED:"sticky"===e?t.STICKY:t.STATIC}},function(e,A){"";Object.defineProperty(A,"__esModule",{value:!0});var t=A.TEXT_TRANSFORM={NONE:0,LOWERCASE:1,UPPERCASE:2,CAPITALIZE:3},r=A.parseTextTransform=function(e){return"uppercase"===e?t.UPPERCASE:"lowercase"===e?t.LOWERCASE:"capitalize"===e?t.CAPITALIZE:t.NONE}},function(e,A,t){"";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(A,"__esModule",{value:!0}),A.reformatInputBounds=A.inlineSelectElement=A.inlineTextAreaElement=A.inlineInputElement=A.getInputBorderRadius=A.INPUT_BACKGROUND=A.INPUT_BORDERS=A.INPUT_COLOR=void 0;var a=t(9),s=r(a),d=t(4),c=t(12),B=t(50),g=r(B),u=t(7),m=r(u),p=t(0),w=r(p),h=t(1),C=r(h),Q=t(2),U=t(22),E=t(3),F=A.INPUT_COLOR=new w.default([42,42,42]),b=new w.default([165,165,165]),H=new w.default([222,222,222]),S={borderWidth:1,borderColor:b,borderStyle:c.BORDER_STYLE.SOLID},T=A.INPUT_BORDERS=[S,S,S,S],I=A.INPUT_BACKGROUND={backgroundColor:H,backgroundImage:[],backgroundClip:d.BACKGROUND_CLIP.PADDING_BOX,backgroundOrigin:d.BACKGROUND_ORIGIN.PADDING_BOX},N=new C.default("50%"),R=[N,N],L=[R,R,R,R],M=new C.default("3px"),D=[M,M],O=[D,D,D,D],k=A.getInputBorderRadius=function(e){return"radio"===e.type?L:O},K=A.inlineInputElement=function(e,A){if(!("radio"===e.type||"checkbox"===e.type))z(G(e),e,A,!1);else if(e.checked){var t=l(A.bounds.width,A.bounds.height);A.childNodes.push("checkbox"===e.type?[new m.default(A.bounds.left+.39363*t,A.bounds.top+.79*t),new m.default(A.bounds.left+.16*t,A.bounds.top+.5549*t),new m.default(A.bounds.left+.27347*t,A.bounds.top+.44071*t),new m.default(A.bounds.left+.39694*t,A.bounds.top+.5649*t),new m.default(A.bounds.left+.72983*t,A.bounds.top+.23*t),new m.default(A.bounds.left+.84*t,A.bounds.top+.34085*t),new m.default(A.bounds.left+.39363*t,A.bounds.top+.79*t)]:new g.default(A.bounds.left+t/4,A.bounds.top+t/4,t/4))}},_=A.inlineTextAreaElement=function(e,A){z(e.value,e,A,!0)},P=A.inlineSelectElement=function(e,A){var t=e.options[e.selectedIndex||0];z(t?t.text||"":"",e,A,!1)},V=A.reformatInputBounds=function(e){return e.width>e.height?(e.left+=(e.width-e.height)/2,e.width=e.height):e.width<e.height&&(e.top+=(e.height-e.width)/2,e.height=e.width),e},z=function(e,A,t,r){var a=A.ownerDocument.body;if(0<e.length&&a){var d=A.ownerDocument.createElement("html2canvaswrapper");(0,E.copyCSSStyles)(A.ownerDocument.defaultView.getComputedStyle(A,null),d),d.style.position="absolute",d.style.left=t.bounds.left+"px",d.style.top=t.bounds.top+"px",r||(d.style.whiteSpace="nowrap");var l=A.ownerDocument.createTextNode(e);d.appendChild(l),a.appendChild(d),t.childNodes.push(s.default.fromTextNode(l,t)),a.removeChild(d)}},G=function(e){var A="password"===e.type?Array(e.value.length+1).join("\u2022"):e.value;return 0===A.length?e.placeholder||"":A}},function(e,A,t){"";function r(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(A,"__esModule",{value:!0}),A.parseTextBounds=A.TextBounds=void 0;var a=t(2),s=t(11),d=t(10),l=function(e){return e&&e.__esModule?e:{default:e}}(d),c=t(24),B=A.TextBounds=function e(A,t){r(this,e),this.text=A,this.bounds=t},g=A.parseTextBounds=function(e,A,t){for(var r=0!==A.style.letterSpacing,a=r?(0,c.toCodePoints)(e).map(function(e){return(0,c.fromCodePoint)(e)}):(0,c.breakWords)(e,A),d=a.length,g=t.parentNode?t.parentNode.ownerDocument.defaultView:null,p=g?g.pageXOffset:0,w=g?g.pageYOffset:0,h=[],C=0,Q=0,U;Q<d;Q++){if(U=a[Q],!(A.style.textDecoration!==s.TEXT_DECORATION.NONE||0<U.trim().length))l.default.SUPPORT_RANGE_BOUNDS||(t=t.splitText(U.length));else if(l.default.SUPPORT_RANGE_BOUNDS)h.push(new B(U,m(t,C,U.length,p,w)));else{var E=t.splitText(U.length);h.push(new B(U,u(t,p,w))),t=E}C+=U.length}return h},u=function(e,A,t){var r=e.ownerDocument.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(r,e);var d=(0,a.parseBounds)(r,A,t);return r.firstChild&&s.replaceChild(r.firstChild,r),d}return new a.Bounds(0,0,0,0)},m=function(e,A,t,r,s){var d=e.ownerDocument.createRange();return d.setStart(e,A),d.setEnd(e,A+t),a.Bounds.fromClientRect(d.getBoundingClientRect(),r,s)}},function(e,A){"";function r(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(A,"__esModule",{value:!0});var a=function(){function e(e,A){for(var t=0,r;t<A.length;t++)r=A[t],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}return function(A,t,r){return t&&e(A.prototype,t),r&&e(A,r),A}}(),s=function(){function e(A){r(this,e),this.element=A}return a(e,[{key:"render",value:function(e){var A=this;this.options=e,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.width=t(e.width)*e.scale,this.canvas.height=t(e.height)*e.scale,this.canvas.style.width=e.width+"px",this.canvas.style.height=e.height+"px",e.logger.log("ForeignObject renderer initialized ("+e.width+"x"+e.height+" at "+e.x+","+e.y+") with scale "+e.scale);var r=l(d(e.windowWidth,e.width)*e.scale,d(e.windowHeight,e.height)*e.scale,e.scrollX*e.scale,e.scrollY*e.scale,this.element);return c(r).then(function(t){return e.backgroundColor&&(A.ctx.fillStyle=e.backgroundColor.toString(),A.ctx.fillRect(0,0,e.width*e.scale,e.height*e.scale)),A.ctx.drawImage(t,-e.x*e.scale,-e.y*e.scale),A.canvas})}}]),e}();A.default=s;var l=A.createForeignObjectSVG=function(e,A,t,r,a){var s=document.createElementNS("http://www.w3.org/2000/svg","svg"),d=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");return s.setAttributeNS(null,"width",e),s.setAttributeNS(null,"height",A),d.setAttributeNS(null,"width","100%"),d.setAttributeNS(null,"height","100%"),d.setAttributeNS(null,"x",t),d.setAttributeNS(null,"y",r),d.setAttributeNS(null,"externalResourcesRequired","true"),s.appendChild(d),d.appendChild(a),s},c=A.loadSerializedSVG=function(e){return new Promise(function(A,t){var r=new Image;r.onload=function(){return A(r)},r.onerror=t,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})}},function(e,A,t){"";Object.defineProperty(A,"__esModule",{value:!0}),A.breakWords=A.fromCodePoint=A.toCodePoints=void 0;var r=t(46);Object.defineProperty(A,"toCodePoints",{enumerable:!0,get:function(){return r.toCodePoints}}),Object.defineProperty(A,"fromCodePoint",{enumerable:!0,get:function(){return r.fromCodePoint}});var a=t(18),s=A.breakWords=function(e,A){for(var t=(0,r.LineBreaker)(e,{lineBreak:A.style.lineBreak,wordBreak:A.style.overflowWrap===a.OVERFLOW_WRAP.BREAK_WORD?"break-word":A.style.wordBreak}),s=[],d=void 0;!(d=t.next()).done;)s.push(d.value.slice());return s}},function(e,A,t){"";function r(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(A,"__esModule",{value:!0}),A.FontMetrics=void 0;var a=function(){function e(e,A){for(var t=0,r;t<A.length;t++)r=A[t],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}return function(A,t,r){return t&&e(A.prototype,t),r&&e(A,r),A}}(),s=t(3),d="Hidden Text",l=A.FontMetrics=function(){function e(A){r(this,e),this._data={},this._document=A}return a(e,[{key:"_parseMetrics",value:function(e){var A=this._document.createElement("div"),t=this._document.createElement("img"),r=this._document.createElement("span"),a=this._document.body;if(!a)throw new Error("No document found for font metrics");A.style.visibility="hidden",A.style.fontFamily=e.fontFamily,A.style.fontSize=e.fontSize,A.style.margin="0",A.style.padding="0",a.appendChild(A),t.src=s.SMALL_IMAGE,t.width=1,t.height=1,t.style.margin="0",t.style.padding="0",t.style.verticalAlign="baseline",r.style.fontFamily=e.fontFamily,r.style.fontSize=e.fontSize,r.style.margin="0",r.style.padding="0",r.appendChild(this._document.createTextNode(d)),A.appendChild(r),A.appendChild(t);var l=t.offsetTop-r.offsetTop+2;A.removeChild(r),A.appendChild(this._document.createTextNode(d)),A.style.lineHeight="normal",t.style.verticalAlign="super";var c=t.offsetTop-A.offsetTop+2;return a.removeChild(A),{baseline:l,middle:c}}},{key:"getMetrics",value:function(e){var A=e.fontFamily+" "+e.fontSize;return void 0===this._data[A]&&(this._data[A]=this._parseMetrics(e)),this._data[A]}}]),e}()},function(e,A,t){"";Object.defineProperty(A,"__esModule",{value:!0}),A.Proxy=void 0;var r=t(10),a=function(e){return e&&e.__esModule?e:{default:e}}(r),s=A.Proxy=function(e,A){if(!A.proxy)return Promise.reject("No proxy defined");var t=A.proxy;return new Promise(function(r,s){var d=a.default.SUPPORT_CORS_XHR&&a.default.SUPPORT_RESPONSE_TYPE?"blob":"text",l=a.default.SUPPORT_CORS_XHR?new XMLHttpRequest:new XDomainRequest;if(l.onload=function(){if(!(l instanceof XMLHttpRequest))r(l.responseText);else if(200!==l.status)s("Failed to proxy resource "+e.substring(0,256)+" with status code "+l.status);else if("text"===d)r(l.response);else{var A=new FileReader;A.addEventListener("load",function(){return r(A.result)},!1),A.addEventListener("error",function(A){return s(A)},!1),A.readAsDataURL(l.response)}},l.onerror=s,l.open("GET",t+"?url="+encodeURIComponent(e)+"&responseType="+d),"text"!=d&&l instanceof XMLHttpRequest&&(l.responseType=d),A.imageTimeout){var c=A.imageTimeout;l.timeout=c,l.ontimeout=function(){return s("Timed out ("+c+"ms) proxying "+e.substring(0,256))}}l.send()})}},function(e,A,t){"";function r(e){return e&&e.__esModule?e:{default:e}}var a=Object.assign||function(e){for(var A=1,t;A<arguments.length;A++)for(var r in t=arguments[A],t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},s=t(15),d=r(s),l=t(16),c=r(l),B=t(28),g=function(e,A){var t=A||{},r=new c.default("boolean"!=typeof t.logging||t.logging);r.log("html2canvas 1.0.0-alpha.12"),"function"==typeof t.onrendered&&r.error("onrendered option is deprecated, html2canvas returns a Promise with the canvas as the value");var s=e.ownerDocument;if(!s)return Promise.reject("Provided element is not within a Document");var l=s.defaultView,g={async:!0,allowTaint:!1,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,scale:l.devicePixelRatio||1,target:new d.default(t.canvas),useCORS:!1,windowWidth:l.innerWidth,windowHeight:l.innerHeight,scrollX:l.pageXOffset,scrollY:l.pageYOffset},u=(0,B.renderElement)(e,a({},g,t),r);return u.catch(function(A){throw r.error(A),A})};g.CanvasRenderer=d.default,e.exports=g},function(A,t,r){"";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.renderElement=void 0;var s=function(){function e(e,A){var t=[],r=!0,a=!1,s=void 0;try{for(var d=e[Symbol.iterator](),l;!(r=(l=d.next()).done)&&(t.push(l.value),!(A&&t.length===A));r=!0);}catch(e){a=!0,s=e}finally{try{!r&&d["return"]&&d["return"]()}finally{if(a)throw s}}return t}return function(A,t){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return e(A,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=r(16),l=a(d),c=r(29),B=r(51),g=a(B),u=r(23),m=a(u),p=r(10),w=a(p),h=r(2),C=r(54),Q=r(25),U=r(0),E=a(U),F=t.renderElement=function A(t,r,a){var d=t.ownerDocument,l=new h.Bounds(r.scrollX,r.scrollY,r.windowWidth,r.windowHeight),B=d.documentElement?new E.default(getComputedStyle(d.documentElement).backgroundColor):U.TRANSPARENT,u=d.body?new E.default(getComputedStyle(d.body).backgroundColor):U.TRANSPARENT,p=t===d.documentElement?B.isTransparent()?u.isTransparent()?r.backgroundColor?new E.default(r.backgroundColor):null:u:B:r.backgroundColor?new E.default(r.backgroundColor):null;return(r.foreignObjectRendering?w.default.SUPPORT_FOREIGNOBJECT_DRAWING:Promise.resolve(!1)).then(function(B){return B?function(A){return a.log("Document cloned, using foreignObject rendering"),A.inlineFonts(d).then(function(){return A.resourceLoader.ready()}).then(function(){var s=new m.default(A.documentElement),l=d.defaultView,c=l.pageXOffset,B=l.pageYOffset,g="HTML"===t.tagName||"BODY"===t.tagName,u=g?(0,h.parseDocumentSize)(d):(0,h.parseBounds)(t,c,B),w=u.width,C=u.height,Q=u.left,U=u.top;return s.render({backgroundColor:p,logger:a,scale:r.scale,x:"number"==typeof r.x?r.x:Q,y:"number"==typeof r.y?r.y:U,width:"number"==typeof r.width?r.width:e(w),height:"number"==typeof r.height?r.height:e(C),windowWidth:r.windowWidth,windowHeight:r.windowHeight,scrollX:r.scrollX,scrollY:r.scrollY})})}(new C.DocumentCloner(t,r,a,!0,A)):(0,C.cloneWindow)(d,l,t,r,a,A).then(function(A){var t=s(A,3),l=t[0],B=t[1],u=t[2];a.log("Document cloned, using computed rendering");var m=(0,c.NodeParser)(B,u,a),w=B.ownerDocument;return p===m.container.style.background.backgroundColor&&(m.container.style.background.backgroundColor=U.TRANSPARENT),u.ready().then(function(A){var t=new Q.FontMetrics(w);a.log("Starting renderer");var s=w.defaultView,c=s.pageXOffset,u=s.pageYOffset,C="HTML"===B.tagName||"BODY"===B.tagName,U=C?(0,h.parseDocumentSize)(d):(0,h.parseBounds)(B,c,u),E=U.width,F=U.height,b=U.left,H=U.top,S={backgroundColor:p,fontMetrics:t,imageStore:A,logger:a,scale:r.scale,x:"number"==typeof r.x?r.x:b,y:"number"==typeof r.y?r.y:H,width:"number"==typeof r.width?r.width:e(E),height:"number"==typeof r.height?r.height:e(F)};if(Array.isArray(r.target))return Promise.all(r.target.map(function(e){var A=new g.default(e,S);return A.render(m)}));var T=new g.default(r.target,S),I=T.render(m);return!0===r.removeContainer&&(l.parentNode?l.parentNode.removeChild(l):a.log("Cannot detach cloned iframe as it is not in the DOM anymore")),I})})})}},function(e,A,t){"";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(A,"__esModule",{value:!0}),A.NodeParser=void 0;var a=t(30),s=r(a),d=t(6),l=r(d),c=t(9),B=r(c),g=t(21),u=t(14),m=t(8),p=A.NodeParser=function(e,A,t){t.log("Starting node parsing");var r=0,a=new l.default(e,null,A,r++),d=new s.default(a,null,!0);return h(e,a,d,A,r),t.log("Finished parsing node tree"),d},w=["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"],h=function e(A,t,r,a,d){if(5e4<d)throw new Error("Recursion error while parsing node tree");for(var c=A.firstChild,p;c;c=p){p=c.nextSibling;var h=c.ownerDocument.defaultView;if(c instanceof h.Text||c instanceof Text||h.parent&&c instanceof h.parent.Text)0<c.data.trim().length&&t.childNodes.push(B.default.fromTextNode(c,t));else if(c instanceof h.HTMLElement||c instanceof HTMLElement||h.parent&&c instanceof h.parent.HTMLElement){if(-1===w.indexOf(c.nodeName)){var U=new l.default(c,t,a,d++);if(U.isVisible()){"INPUT"===c.tagName?(0,g.inlineInputElement)(c,U):"TEXTAREA"===c.tagName?(0,g.inlineTextAreaElement)(c,U):"SELECT"===c.tagName?(0,g.inlineSelectElement)(c,U):U.style.listStyle&&U.style.listStyle.listStyleType!==m.LIST_STYLE_TYPE.NONE&&(0,u.inlineListItemElement)(c,U,a);var E="TEXTAREA"!==c.tagName,F=C(U,c);if(F||Q(U)){var b=F||U.isPositioned()?r.getRealParentStackingContext():r,H=new s.default(U,b,F);b.contexts.push(H),E&&e(c,U,H,a,d)}else r.children.push(U),E&&e(c,U,r,a,d)}}}else if(c instanceof h.SVGSVGElement||c instanceof SVGSVGElement||h.parent&&c instanceof h.parent.SVGSVGElement){var S=new l.default(c,t,a,d++),T=C(S,c);if(T||Q(S)){var I=T||S.isPositioned()?r.getRealParentStackingContext():r,N=new s.default(S,I,T);I.contexts.push(N)}else r.children.push(S)}}},C=function(e,A){return e.isRootElement()||e.isPositionedWithZIndex()||1>e.style.opacity||e.isTransformed()||U(e,A)},Q=function(e){return e.isPositioned()||e.isFloating()},U=function(e,A){return"BODY"===A.nodeName&&e.parent instanceof l.default&&e.parent.style.background.backgroundColor.isTransparent()}},function(e,A,t){"";function r(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(A,"__esModule",{value:!0});var a=function(){function e(e,A){for(var t=0,r;t<A.length;t++)r=A[t],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}return function(A,t,r){return t&&e(A.prototype,t),r&&e(A,r),A}}(),s=t(6),d=function(e){return e&&e.__esModule?e:{default:e}}(s),l=t(19),c=function(){function e(A,t,a){r(this,e),this.container=A,this.parent=t,this.contexts=[],this.children=[],this.treatAsRealStackingContext=a}return a(e,[{key:"getOpacity",value:function(){return this.parent?this.container.style.opacity*this.parent.getOpacity():this.container.style.opacity}},{key:"getRealParentStackingContext",value:function(){return!this.parent||this.treatAsRealStackingContext?this:this.parent.getRealParentStackingContext()}}]),e}();A.default=c},function(e,A){"";function t(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(A,"__esModule",{value:!0});A.default=function e(A,r){t(this,e),this.width=A,this.height=r}},function(e,A,t){"";function r(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(A,"__esModule",{value:!0});var a=function(){function e(e,A){for(var t=0,r;t<A.length;t++)r=A[t],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}return function(A,t,r){return t&&e(A.prototype,t),r&&e(A,r),A}}(),s=t(5),d=t(7),l=function(e){return e&&e.__esModule?e:{default:e}}(d),c=function(e,A,r){return new l.default(e.x+(A.x-e.x)*r,e.y+(A.y-e.y)*r)},B=function(){function e(A,t,a,d){r(this,e),this.type=s.PATH.BEZIER_CURVE,this.start=A,this.startControl=t,this.endControl=a,this.end=d}return a(e,[{key:"subdivide",value:function(A,t){var r=c(this.start,this.startControl,A),a=c(this.startControl,this.endControl,A),s=c(this.endControl,this.end,A),d=c(r,a,A),l=c(a,s,A),B=c(d,l,A);return t?new e(this.start,r,d,B):new e(B,l,s,this.end)}},{key:"reverse",value:function(){return new e(this.end,this.endControl,this.startControl,this.start)}}]),e}();A.default=B},function(e,A,t){"";Object.defineProperty(A,"__esModule",{value:!0}),A.parseBorderRadius=void 0;var r=function(){function e(e,A){var t=[],r=!0,a=!1,s=void 0;try{for(var d=e[Symbol.iterator](),l;!(r=(l=d.next()).done)&&(t.push(l.value),!(A&&t.length===A));r=!0);}catch(e){a=!0,s=e}finally{try{!r&&d["return"]&&d["return"]()}finally{if(a)throw s}}return t}return function(A,t){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return e(A,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=t(1),s=function(e){return e&&e.__esModule?e:{default:e}}(a),d=["top-left","top-right","bottom-right","bottom-left"],l=A.parseBorderRadius=function(e){return d.map(function(A){var t=e.getPropertyValue("border-"+A+"-radius"),a=t.split(" ").map(s.default.create),d=r(a,2),l=d[0],c=d[1];return"undefined"==typeof c?[l,l]:[l,c]})}},function(e,A){"";Object.defineProperty(A,"__esModule",{value:!0});var t=A.DISPLAY={NONE:1,BLOCK:2,INLINE:4,RUN_IN:8,FLOW:16,FLOW_ROOT:32,TABLE:64,FLEX:128,GRID:256,RUBY:512,SUBGRID:1024,LIST_ITEM:2048,TABLE_ROW_GROUP:4096,TABLE_HEADER_GROUP:8192,TABLE_FOOTER_GROUP:16384,TABLE_ROW:32768,TABLE_CELL:65536,TABLE_COLUMN_GROUP:131072,TABLE_COLUMN:262144,TABLE_CAPTION:524288,RUBY_BASE:1048576,RUBY_TEXT:2097152,RUBY_BASE_CONTAINER:4194304,RUBY_TEXT_CONTAINER:8388608,CONTENTS:16777216,INLINE_BLOCK:33554432,INLINE_LIST_ITEM:67108864,INLINE_TABLE:134217728,INLINE_FLEX:268435456,INLINE_GRID:536870912},r=function(e){return"block"===e?t.BLOCK:"inline"===e?t.INLINE:"run-in"===e?t.RUN_IN:"flow"===e?t.FLOW:"flow-root"===e?t.FLOW_ROOT:"table"===e?t.TABLE:"flex"===e?t.FLEX:"grid"===e?t.GRID:"ruby"===e?t.RUBY:"subgrid"===e?t.SUBGRID:"list-item"===e?t.LIST_ITEM:"table-row-group"===e?t.TABLE_ROW_GROUP:"table-header-group"===e?t.TABLE_HEADER_GROUP:"table-footer-group"===e?t.TABLE_FOOTER_GROUP:"table-row"===e?t.TABLE_ROW:"table-cell"===e?t.TABLE_CELL:"table-column-group"===e?t.TABLE_COLUMN_GROUP:"table-column"===e?t.TABLE_COLUMN:"table-caption"===e?t.TABLE_CAPTION:"ruby-base"===e?t.RUBY_BASE:"ruby-text"===e?t.RUBY_TEXT:"ruby-base-container"===e?t.RUBY_BASE_CONTAINER:"ruby-text-container"===e?t.RUBY_TEXT_CONTAINER:"contents"===e?t.CONTENTS:"inline-block"===e?t.INLINE_BLOCK:"inline-list-item"===e?t.INLINE_LIST_ITEM:"inline-table"===e?t.INLINE_TABLE:"inline-flex"===e?t.INLINE_FLEX:"inline-grid"===e?t.INLINE_GRID:t.NONE},a=function(e,A){return e|r(A)},s=A.parseDisplay=function(e){return e.split(" ").reduce(a,0)}},function(e,A){"";Object.defineProperty(A,"__esModule",{value:!0});var t=A.FLOAT={NONE:0,LEFT:1,RIGHT:2,INLINE_START:3,INLINE_END:4},r=A.parseCSSFloat=function(e){return"left"===e?t.LEFT:"right"===e?t.RIGHT:"inline-start"===e?t.INLINE_START:"inline-end"===e?t.INLINE_END:t.NONE}},function(e,A){"";Object.defineProperty(A,"__esModule",{value:!0});var t=function(e){switch(e){case"normal":return 400;case"bold":return 700;}var A=parseInt(e,10);return isNaN(A)?400:A},r=A.parseFont=function(e){var A=e.fontFamily,r=e.fontSize,a=e.fontStyle,s=e.fontVariant,d=t(e.fontWeight);return{fontFamily:A,fontSize:r,fontStyle:a,fontVariant:s,fontWeight:d}}},function(e,A){"";Object.defineProperty(A,"__esModule",{value:!0});A.parseLetterSpacing=function(e){if("normal"===e)return 0;var A=parseFloat(e);return isNaN(A)?0:A}},function(e,A){"";Object.defineProperty(A,"__esModule",{value:!0});var t=A.LINE_BREAK={NORMAL:"normal",STRICT:"strict"},r=A.parseLineBreak=function(e){switch(e){case"strict":return t.STRICT;case"normal":default:return t.NORMAL;}}},function(e,A,t){"";Object.defineProperty(A,"__esModule",{value:!0}),A.parseMargin=void 0;var r=t(1),a=function(e){return e&&e.__esModule?e:{default:e}}(r),s=["top","right","bottom","left"],d=A.parseMargin=function(e){return s.map(function(A){return new a.default(e.getPropertyValue("margin-"+A))})}},function(e,A){"";Object.defineProperty(A,"__esModule",{value:!0});var t=A.OVERFLOW={VISIBLE:0,HIDDEN:1,SCROLL:2,AUTO:3},r=A.parseOverflow=function(e){switch(e){case"hidden":return t.HIDDEN;case"scroll":return t.SCROLL;case"auto":return t.AUTO;case"visible":default:return t.VISIBLE;}}},function(e,A,t){"";Object.defineProperty(A,"__esModule",{value:!0}),A.parseTextShadow=void 0;var r=t(0),a=function(e){return e&&e.__esModule?e:{default:e}}(r),s=A.parseTextShadow=function(e){if("none"===e||"string"!=typeof e)return null;for(var A="",t=!1,r=[],s=[],d=0,l=null,B=function(){A.length&&(t?r.push(parseFloat(A)):l=new a.default(A)),t=!1,A=""},g=function(){r.length&&null!==l&&s.push({color:l,offsetX:r[0]||0,offsetY:r[1]||0,blur:r[2]||0}),r.splice(0,r.length),l=null},u=0,m;u<e.length;u++)m=e[u],"("===m?(A+=m,d++):")"===m?(A+=m,d--):","===m?0===d?(B(),g()):A+=m:" "===m?0===d?B():A+=m:(0===A.length&&/^([+-]|\d|\.)$/i.test(m)&&(t=!0),A+=m);return B(),g(),0===s.length?null:s}},function(e,A,t){"";Object.defineProperty(A,"__esModule",{value:!0}),A.parseTransform=void 0;var r=t(1),a=function(e){return e&&e.__esModule?e:{default:e}}(r),s=function(e){return parseFloat(e.trim())},d=A.parseTransform=function(e){var A=c(e.transform||e.webkitTransform||e.mozTransform||e.msTransform||e.oTransform);return null===A?null:{transform:A,transformOrigin:l(e.transformOrigin||e.webkitTransformOrigin||e.mozTransformOrigin||e.msTransformOrigin||e.oTransformOrigin)}},l=function(e){if("string"!=typeof e){var A=new a.default("0");return[A,A]}var t=e.split(" ").map(a.default.create);return[t[0],t[1]]},c=function(e){if("none"===e||"string"!=typeof e)return null;var A=e.match(/(matrix|matrix3d)\((.+)\)/);if(A){if("matrix"===A[1]){var t=A[2].split(",").map(s);return[t[0],t[1],t[2],t[3],t[4],t[5]]}var r=A[2].split(",").map(s);return[r[0],r[1],r[4],r[5],r[12],r[13]]}return null}},function(e,A){"";Object.defineProperty(A,"__esModule",{value:!0});var t=A.VISIBILITY={VISIBLE:0,HIDDEN:1,COLLAPSE:2},r=A.parseVisibility=function(e){switch(e){case"hidden":return t.HIDDEN;case"collapse":return t.COLLAPSE;case"visible":default:return t.VISIBLE;}}},function(e,A){"";Object.defineProperty(A,"__esModule",{value:!0});var t=A.WORD_BREAK={NORMAL:"normal",BREAK_ALL:"break-all",KEEP_ALL:"keep-all"},r=A.parseWordBreak=function(e){switch(e){case"break-all":return t.BREAK_ALL;case"keep-all":return t.KEEP_ALL;case"normal":default:return t.NORMAL;}}},function(e,A){"";Object.defineProperty(A,"__esModule",{value:!0});A.parseZIndex=function(e){var A="auto"===e;return{auto:A,order:A?0:parseInt(e,10)}}},function(e,A,t){"";Object.defineProperty(A,"__esModule",{value:!0});var r=t(13);Object.defineProperty(A,"toCodePoints",{enumerable:!0,get:function(){return r.toCodePoints}}),Object.defineProperty(A,"fromCodePoint",{enumerable:!0,get:function(){return r.fromCodePoint}});var a=t(47);Object.defineProperty(A,"LineBreaker",{enumerable:!0,get:function(){return a.LineBreaker}})},function(e,A,t){"";function r(e){if(Array.isArray(e)){for(var A=0,t=Array(e.length);A<e.length;A++)t[A]=e[A];return t}return Array.from(e)}function a(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(A,"__esModule",{value:!0}),A.LineBreaker=A.inlineBreakOpportunities=A.lineBreakAtIndex=A.codePointsToCharacterClasses=A.UnicodeTrie=A.BREAK_ALLOWED=A.BREAK_NOT_ALLOWED=A.BREAK_MANDATORY=A.classes=A.LETTER_NUMBER_MODIFIER=void 0;var s=function(){function e(e,A){for(var t=0,r;t<A.length;t++)r=A[t],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}return function(A,t,r){return t&&e(A.prototype,t),r&&e(A,r),A}}(),d=function(){function e(e,A){var t=[],r=!0,a=!1,s=void 0;try{for(var d=e[Symbol.iterator](),l;!(r=(l=d.next()).done)&&(t.push(l.value),!(A&&t.length===A));r=!0);}catch(e){a=!0,s=e}finally{try{!r&&d["return"]&&d["return"]()}finally{if(a)throw s}}return t}return function(A,t){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return e(A,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=t(48),c=t(49),B=function(e){return e&&e.__esModule?e:{default:e}}(c),g=t(13),u=A.LETTER_NUMBER_MODIFIER=50,m=1,p=2,w=3,h=4,C=5,Q=7,U=8,E=9,F=10,b=11,H=12,S=13,T=14,I=15,N=16,R=17,L=18,M=19,D=20,O=21,k=22,K=23,_=24,P=25,V=26,z=27,G=28,X=29,J=30,Y=31,W=32,q=33,Z=34,ee=35,Ae=36,te=37,ne=38,re=39,ae=40,oe=41,ie=42,se=43,de=A.classes={BK:m,CR:p,LF:w,CM:h,NL:C,SG:6,WJ:Q,ZW:U,GL:E,SP:F,ZWJ:b,B2:H,BA:S,BB:T,HY:I,CB:N,CL:R,CP:L,EX:M,IN:D,NS:O,OP:k,QU:K,IS:_,NU:P,PO:V,PR:z,SY:G,AI:X,AL:J,CJ:Y,EB:W,EM:q,H2:Z,H3:ee,HL:Ae,ID:te,JL:ne,JV:re,JT:ae,RI:oe,SA:ie,XX:se},le=A.BREAK_MANDATORY="!",ce=A.BREAK_NOT_ALLOWED="\xD7",Be=A.BREAK_ALLOWED="\xF7",ge=A.UnicodeTrie=(0,l.createTrieFromBase64)(B.default),ue=[J,Ae],me=[m,p,w,C],pe=[F,U],we=[z,V],he=me.concat(pe),fe=[ne,re,ae,Z,ee],Ce=[I,S],Qe=A.codePointsToCharacterClasses=function(e){var A=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"strict",t=[],r=[],a=[];return e.forEach(function(e,s){var d=ge.get(e);if(d>u?(a.push(!0),d-=u):a.push(!1),-1!==["normal","auto","loose"].indexOf(A)&&-1!==[8208,8211,12316,12448].indexOf(e))return r.push(s),t.push(N);if(d===h||d===b){if(0===s)return r.push(s),t.push(J);var l=t[s-1];return-1===he.indexOf(l)?(r.push(r[s-1]),t.push(l)):(r.push(s),t.push(J))}return r.push(s),d===Y?t.push("strict"===A?O:te):d===ie?t.push(J):d===X?t.push(J):d===se?131072<=e&&196605>=e||196608<=e&&262141>=e?t.push(te):t.push(J):void t.push(d)}),[r,t,a]},Ue=function(e,A,t,r){var a=r[t];if(Array.isArray(e)?-1!==e.indexOf(a):e===a)for(var s=t;s<=r.length;){s++;var d=r[s];if(d===A)return!0;if(d!==F)break}if(a===F)for(var l=t;0<l;){l--;var c=r[l];if(Array.isArray(e)?-1!==e.indexOf(c):e===c)for(var B=t;B<=r.length;){B++;var g=r[B];if(g===A)return!0;if(g!==F)break}if(c!==F)break}return!1},Ee=function(e,A){for(var t=e;0<=t;){var r=A[t];if(r===F)t--;else return r}return 0},Fe=function(e,A,t,r,a){if(0===t[r])return ce;var s=r-1;if(Array.isArray(a)&&!0===a[s])return ce;var d=s-1,l=s+1,c=A[s],B=0<=d?A[d]:0,g=A[l];if(c===p&&g===w)return ce;if(-1!==me.indexOf(c))return le;if(-1!==me.indexOf(g))return ce;if(-1!==pe.indexOf(g))return ce;if(Ee(s,A)===U)return Be;if(ge.get(e[s])===b&&(g===te||g===W||g===q))return ce;if(c===Q||g===Q)return ce;if(c===E)return ce;if(-1===[F,S,I].indexOf(c)&&g===E)return ce;if(-1!==[R,L,M,_,G].indexOf(g))return ce;if(Ee(s,A)===k)return ce;if(Ue(K,k,s,A))return ce;if(Ue([R,L],O,s,A))return ce;if(Ue(H,H,s,A))return ce;if(c===F)return Be;if(c===K||g===K)return ce;if(g===N||c===N)return Be;if(-1!==[S,I,O].indexOf(g)||c===T)return ce;if(B===Ae&&-1!==Ce.indexOf(c))return ce;if(c===G&&g===Ae)return ce;if(g===D&&-1!==ue.concat(D,M,P,te,W,q).indexOf(c))return ce;if(-1!==ue.indexOf(g)&&c===P||-1!==ue.indexOf(c)&&g===P)return ce;if(c===z&&-1!==[te,W,q].indexOf(g)||-1!==[te,W,q].indexOf(c)&&g===V)return ce;if(-1!==ue.indexOf(c)&&-1!==we.indexOf(g)||-1!==we.indexOf(c)&&-1!==ue.indexOf(g))return ce;if(-1!==[z,V].indexOf(c)&&(g===P||-1!==[k,I].indexOf(g)&&A[l+1]===P)||-1!==[k,I].indexOf(c)&&g===P||c===P&&-1!==[P,G,_].indexOf(g))return ce;if(-1!==[P,G,_,R,L].indexOf(g))for(var u=s,m;0<=u;){if(m=A[u],m===P)return ce;if(-1!==[G,_].indexOf(m))u--;else break}if(-1!==[z,V].indexOf(g))for(var h=-1===[R,L].indexOf(c)?s:d,C;0<=h;){if(C=A[h],C===P)return ce;if(-1!==[G,_].indexOf(C))h--;else break}if(ne===c&&-1!==[ne,re,Z,ee].indexOf(g)||-1!==[re,Z].indexOf(c)&&-1!==[re,ae].indexOf(g)||-1!==[ae,ee].indexOf(c)&&g===ae)return ce;if(-1!==fe.indexOf(c)&&-1!==[D,V].indexOf(g)||-1!==fe.indexOf(g)&&c===z)return ce;if(-1!==ue.indexOf(c)&&-1!==ue.indexOf(g))return ce;if(c===_&&-1!==ue.indexOf(g))return ce;if(-1!==ue.concat(P).indexOf(c)&&g===k||-1!==ue.concat(P).indexOf(g)&&c===L)return ce;if(c===oe&&g===oe){for(var X=t[s],J=1;0<X&&(X--,A[X]===oe);)J++;if(0!=J%2)return ce}return c===W&&g===q?ce:Be},be=A.lineBreakAtIndex=function(e,A){if(0===A)return ce;if(A>=e.length)return le;var t=Qe(e),r=d(t,2),a=r[0],s=r[1];return Fe(e,s,a,A)},ve=function(e,A){A||(A={lineBreak:"normal",wordBreak:"normal"});var t=Qe(e,A.lineBreak),r=d(t,3),a=r[0],s=r[1],l=r[2];("break-all"===A.wordBreak||"break-word"===A.wordBreak)&&(s=s.map(function(e){return-1===[P,J,ie].indexOf(e)?e:te}));var c="keep-all"===A.wordBreak?l.map(function(A,t){return A&&19968<=e[t]&&40959>=e[t]}):null;return[a,s,c]},ye=A.inlineBreakOpportunities=function(e,A){var t=(0,g.toCodePoints)(e),r=ce,a=ve(t,A),s=d(a,3),l=s[0],c=s[1],B=s[2];return t.forEach(function(e,A){r+=(0,g.fromCodePoint)(e)+(A>=t.length-1?le:Fe(t,c,l,A+1,B))}),r},He=function(){function e(A,t,r,s){a(this,e),this._codePoints=A,this.required=t===le,this.start=r,this.end=s}return s(e,[{key:"slice",value:function(){return g.fromCodePoint.apply(void 0,r(this._codePoints.slice(this.start,this.end)))}}]),e}(),Se=A.LineBreaker=function(e,A){var t=(0,g.toCodePoints)(e),r=ve(t,A),a=d(r,3),s=a[0],l=a[1],c=a[2],B=t.length,u=0,m=0;return{next:function(){if(m>=B)return{done:!0};for(var e=ce;m<B&&(e=Fe(t,l,s,++m,c))===ce;);if(e!==ce||m===B){var A=new He(t,e,u,m);return u=m,{value:A,done:!1}}return{done:!0}}}}},function(A,t,r){"";function a(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Trie=t.createTrieFromBase64=t.UTRIE2_INDEX_2_MASK=t.UTRIE2_INDEX_2_BLOCK_LENGTH=t.UTRIE2_OMITTED_BMP_INDEX_1_LENGTH=t.UTRIE2_INDEX_1_OFFSET=t.UTRIE2_UTF8_2B_INDEX_2_LENGTH=t.UTRIE2_UTF8_2B_INDEX_2_OFFSET=t.UTRIE2_INDEX_2_BMP_LENGTH=t.UTRIE2_LSCP_INDEX_2_LENGTH=t.UTRIE2_DATA_MASK=t.UTRIE2_DATA_BLOCK_LENGTH=t.UTRIE2_LSCP_INDEX_2_OFFSET=t.UTRIE2_SHIFT_1_2=t.UTRIE2_INDEX_SHIFT=t.UTRIE2_SHIFT_1=t.UTRIE2_SHIFT_2=void 0;var s=function(){function e(e,A){for(var t=0,r;t<A.length;t++)r=A[t],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}return function(A,t,r){return t&&e(A.prototype,t),r&&e(A,r),A}}(),d=r(13),l=t.UTRIE2_SHIFT_2=5,c=t.UTRIE2_SHIFT_1=11,B=t.UTRIE2_INDEX_SHIFT=2,g=t.UTRIE2_SHIFT_1_2=c-l,u=t.UTRIE2_LSCP_INDEX_2_OFFSET=65536>>l,m=t.UTRIE2_DATA_BLOCK_LENGTH=1<<l,p=t.UTRIE2_DATA_MASK=m-1,w=t.UTRIE2_LSCP_INDEX_2_LENGTH=1024>>l,h=t.UTRIE2_INDEX_2_BMP_LENGTH=u+w,C=t.UTRIE2_UTF8_2B_INDEX_2_OFFSET=h,Q=t.UTRIE2_UTF8_2B_INDEX_2_LENGTH=32,U=t.UTRIE2_INDEX_1_OFFSET=C+Q,E=t.UTRIE2_OMITTED_BMP_INDEX_1_LENGTH=65536>>c,F=t.UTRIE2_INDEX_2_BLOCK_LENGTH=1<<g,b=t.UTRIE2_INDEX_2_MASK=F-1,H=t.createTrieFromBase64=function(A){var t=(0,d.decode)(A),r=Array.isArray(t)?(0,d.polyUint32Array)(t):new Uint32Array(t),a=Array.isArray(t)?(0,d.polyUint16Array)(t):new Uint16Array(t),s=24,l=a.slice(s/2,r[4]/2),c=2===r[5]?a.slice((s+r[4])/2):r.slice(e((s+r[4])/4));return new S(r[0],r[1],r[2],r[3],l,c)},S=t.Trie=function(){function e(A,t,r,s,d,l){a(this,e),this.initialValue=A,this.errorValue=t,this.highStart=r,this.highValueIndex=s,this.index=d,this.data=l}return s(e,[{key:"get",value:function(e){var A;if(0<=e){if(55296>e||56319<e&&65535>=e)return A=this.index[e>>l],A=(A<<B)+(e&p),this.data[A];if(65535>=e)return A=this.index[u+(e-55296>>l)],A=(A<<B)+(e&p),this.data[A];if(e<this.highStart)return A=U-E+(e>>c),A=this.index[A],A+=e>>l&b,A=this.index[A],A=(A<<B)+(e&p),this.data[A];if(1114111>=e)return this.data[this.highValueIndex]}return this.errorValue}}]),e}()},function(e){"";e.exports="KwAAAAAAAAAACA4AIDoAAPAfAAACAAAAAAAIABAAGABAAEgAUABYAF4AZgBeAGYAYABoAHAAeABeAGYAfACEAIAAiACQAJgAoACoAK0AtQC9AMUAXgBmAF4AZgBeAGYAzQDVAF4AZgDRANkA3gDmAOwA9AD8AAQBDAEUARoBIgGAAIgAJwEvATcBPwFFAU0BTAFUAVwBZAFsAXMBewGDATAAiwGTAZsBogGkAawBtAG8AcIBygHSAdoB4AHoAfAB+AH+AQYCDgIWAv4BHgImAi4CNgI+AkUCTQJTAlsCYwJrAnECeQKBAk0CiQKRApkCoQKoArACuALAAsQCzAIwANQC3ALkAjAA7AL0AvwCAQMJAxADGAMwACADJgMuAzYDPgOAAEYDSgNSA1IDUgNaA1oDYANiA2IDgACAAGoDgAByA3YDfgOAAIQDgACKA5IDmgOAAIAAogOqA4AAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAK8DtwOAAIAAvwPHA88D1wPfAyAD5wPsA/QD/AOAAIAABAQMBBIEgAAWBB4EJgQuBDMEIAM7BEEEXgBJBCADUQRZBGEEaQQwADAAcQQ+AXkEgQSJBJEEgACYBIAAoASoBK8EtwQwAL8ExQSAAIAAgACAAIAAgACgAM0EXgBeAF4AXgBeAF4AXgBeANUEXgDZBOEEXgDpBPEE+QQBBQkFEQUZBSEFKQUxBTUFPQVFBUwFVAVcBV4AYwVeAGsFcwV7BYMFiwWSBV4AmgWgBacFXgBeAF4AXgBeAKsFXgCyBbEFugW7BcIFwgXIBcIFwgXQBdQF3AXkBesF8wX7BQMGCwYTBhsGIwYrBjMGOwZeAD8GRwZNBl4AVAZbBl4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAGMGXgBqBnEGXgBeAF4AXgBeAF4AXgBeAF4AXgB5BoAG4wSGBo4GkwaAAIADHgR5AF4AXgBeAJsGgABGA4AAowarBrMGswagALsGwwbLBjAA0wbaBtoG3QbaBtoG2gbaBtoG2gblBusG8wb7BgMHCwcTBxsHCwcjBysHMAc1BzUHOgdCB9oGSgdSB1oHYAfaBloHaAfaBlIH2gbaBtoG2gbaBtoG2gbaBjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHbQdeAF4ANQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQd1B30HNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B4MH2gaKB68EgACAAIAAgACAAIAAgACAAI8HlwdeAJ8HpweAAIAArwe3B14AXgC/B8UHygcwANAH2AfgB4AA6AfwBz4B+AcACFwBCAgPCBcIogEYAR8IJwiAAC8INwg/CCADRwhPCFcIXwhnCEoDGgSAAIAAgABvCHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIhAiLCI4IMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAANQc1BzUHNQc1BzUHNQc1BzUHNQc1B54INQc1B6II2gaqCLIIugiAAIAAvgjGCIAAgACAAIAAgACAAIAAgACAAIAAywiHAYAA0wiAANkI3QjlCO0I9Aj8CIAAgACAAAIJCgkSCRoJIgknCTYHLwk3CZYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiAAIAAAAFAAXgBeAGAAcABeAHwAQACQAKAArQC9AJ4AXgBeAE0A3gBRAN4A7AD8AMwBGgEAAKcBNwEFAUwBXAF4QkhCmEKnArcCgAHHAsABz4LAAcABwAHAAd+C6ABoAG+C/4LAAcABwAHAAc+DF4MAAcAB54M3gweDV4Nng3eDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEeDqABVg6WDqABoQ6gAaABoAHXDvcONw/3DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DncPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB7cPPwlGCU4JMACAAIAAgABWCV4JYQmAAGkJcAl4CXwJgAkwADAAMAAwAIgJgACLCZMJgACZCZ8JowmrCYAAswkwAF4AXgB8AIAAuwkABMMJyQmAAM4JgADVCTAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAqwYWBNkIMAAwADAAMADdCeAJ6AnuCR4E9gkwAP4JBQoNCjAAMACAABUK0wiAAB0KJAosCjQKgAAwADwKQwqAAEsKvQmdCVMKWwowADAAgACAALcEMACAAGMKgABrCjAAMAAwADAAMAAwADAAMAAwADAAMAAeBDAAMAAwADAAMAAwADAAMAAwADAAMAAwAIkEPQFzCnoKiQSCCooKkAqJBJgKoAqkCokEGAGsCrQKvArBCjAAMADJCtEKFQHZCuEK/gHpCvEKMAAwADAAMACAAIwE+QowAIAAPwEBCzAAMAAwADAAMACAAAkLEQswAIAAPwEZCyELgAAOCCkLMAAxCzkLMAAwADAAMAAwADAAXgBeAEELMAAwADAAMAAwADAAMAAwAEkLTQtVC4AAXAtkC4AAiQkwADAAMAAwADAAMAAwADAAbAtxC3kLgAuFC4sLMAAwAJMLlwufCzAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAApwswADAAMACAAIAAgACvC4AAgACAAIAAgACAALcLMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAvwuAAMcLgACAAIAAgACAAIAAyguAAIAAgACAAIAA0QswADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAANkLgACAAIAA4AswADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACJCR4E6AswADAAhwHwC4AA+AsADAgMEAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMACAAIAAGAwdDCUMMAAwAC0MNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQw1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHPQwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADUHNQc1BzUHNQc1BzUHNQc2BzAAMAA5DDUHNQc1BzUHNQc1BzUHNQc1BzUHNQdFDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAATQxSDFoMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAF4AXgBeAF4AXgBeAF4AYgxeAGoMXgBxDHkMfwxeAIUMXgBeAI0MMAAwADAAMAAwAF4AXgCVDJ0MMAAwADAAMABeAF4ApQxeAKsMswy7DF4Awgy9DMoMXgBeAF4AXgBeAF4AXgBeAF4AXgDRDNkMeQBqCeAM3Ax8AOYM7Az0DPgMXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgCgAAANoAAHDQ4NFg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAeDSYNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAC4NMABeAF4ANg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAD4NRg1ODVYNXg1mDTAAbQ0wADAAMAAwADAAMAAwADAA2gbaBtoG2gbaBtoG2gbaBnUNeg3CBYANwgWFDdoGjA3aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gaUDZwNpA2oDdoG2gawDbcNvw3HDdoG2gbPDdYN3A3fDeYN2gbsDfMN2gbaBvoN/g3aBgYODg7aBl4AXgBeABYOXgBeACUG2gYeDl4AJA5eACwO2w3aBtoGMQ45DtoG2gbaBtoGQQ7aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B1EO2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQdZDjUHNQc1BzUHNQc1B2EONQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHaA41BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B3AO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B2EO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBkkOeA6gAKAAoAAwADAAMAAwAKAAoACgAKAAoACgAKAAgA4wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAD//wQABAAEAAQABAAEAAQABAAEAA0AAwABAAEAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAKABMAFwAeABsAGgAeABcAFgASAB4AGwAYAA8AGAAcAEsASwBLAEsASwBLAEsASwBLAEsAGAAYAB4AHgAeABMAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAFgAbABIAHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYADQARAB4ABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkAFgAaABsAGwAbAB4AHQAdAB4ATwAXAB4ADQAeAB4AGgAbAE8ATwAOAFAAHQAdAB0ATwBPABcATwBPAE8AFgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwArAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAAQABAANAA0ASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAUAArACsAKwArACsAKwArACsABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAGgAaAFAAUABQAFAAUABMAB4AGwBQAB4AKwArACsABAAEAAQAKwBQAFAAUABQAFAAUAArACsAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUAArAFAAUAArACsABAArAAQABAAEAAQABAArACsAKwArAAQABAArACsABAAEAAQAKwArACsABAArACsAKwArACsAKwArAFAAUABQAFAAKwBQACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwAEAAQAUABQAFAABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQAKwArAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeABsAKwArACsAKwArACsAKwBQAAQABAAEAAQABAAEACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAKwArACsAKwArACsAKwArAAQABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwAEAFAAKwBQAFAAUABQAFAAUAArACsAKwBQAFAAUAArAFAAUABQAFAAKwArACsAUABQACsAUAArAFAAUAArACsAKwBQAFAAKwArACsAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQAKwArACsABAAEAAQAKwAEAAQABAAEACsAKwBQACsAKwArACsAKwArAAQAKwArACsAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAB4AHgAeAB4AHgAeABsAHgArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArAFAAUABQACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAB4AUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArACsAKwArACsAKwArAFAAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwArAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAKwBcAFwAKwBcACsAKwBcACsAKwArACsAKwArAFwAXABcAFwAKwBcAFwAXABcAFwAXABcACsAXABcAFwAKwBcACsAXAArACsAXABcACsAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgArACoAKgBcACsAKwBcAFwAXABcAFwAKwBcACsAKgAqACoAKgAqACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAFwAXABcAFwAUAAOAA4ADgAOAB4ADgAOAAkADgAOAA0ACQATABMAEwATABMACQAeABMAHgAeAB4ABAAEAB4AHgAeAB4AHgAeAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUAANAAQAHgAEAB4ABAAWABEAFgARAAQABABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAAQABAAEAAQABAANAAQABABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsADQANAB4AHgAeAB4AHgAeAAQAHgAeAB4AHgAeAB4AKwAeAB4ADgAOAA0ADgAeAB4AHgAeAB4ACQAJACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgAeAB4AHgBcAFwAXABcAFwAXAAqACoAKgAqAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAKgAqACoAKgAqACoAKgBcAFwAXAAqACoAKgAqAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAXAAqAEsASwBLAEsASwBLAEsASwBLAEsAKgAqACoAKgAqACoAUABQAFAAUABQAFAAKwBQACsAKwArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQACsAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwAEAAQABAAeAA0AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAEQArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAADQANAA0AUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAA0ADQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoADQANABUAXAANAB4ADQAbAFwAKgArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAB4AHgATABMADQANAA4AHgATABMAHgAEAAQABAAJACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAUABQAFAAUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwAeACsAKwArABMAEwBLAEsASwBLAEsASwBLAEsASwBLAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwBcAFwAXABcAFwAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcACsAKwArACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwAeAB4AXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsABABLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKgAqACoAKgAqACoAKgBcACoAKgAqACoAKgAqACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAUABQAFAAUABQAFAAUAArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4ADQANAA0ADQAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAHgAeAB4AHgBQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwANAA0ADQANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwBQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsABAAEAAQAHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAABABQAFAAUABQAAQABAAEAFAAUAAEAAQABAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAKwBQACsAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAKwArAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAKwAeAB4AHgAeAB4AHgAeAA4AHgArAA0ADQANAA0ADQANAA0ACQANAA0ADQAIAAQACwAEAAQADQAJAA0ADQAMAB0AHQAeABcAFwAWABcAFwAXABYAFwAdAB0AHgAeABQAFAAUAA0AAQABAAQABAAEAAQABAAJABoAGgAaABoAGgAaABoAGgAeABcAFwAdABUAFQAeAB4AHgAeAB4AHgAYABYAEQAVABUAFQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgANAB4ADQANAA0ADQAeAA0ADQANAAcAHgAeAB4AHgArAAQABAAEAAQABAAEAAQABAAEAAQAUABQACsAKwBPAFAAUABQAFAAUAAeAB4AHgAWABEATwBQAE8ATwBPAE8AUABQAFAAUABQAB4AHgAeABYAEQArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGgAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgBQABoAHgAdAB4AUAAeABoAHgAeAB4AHgAeAB4AHgAeAB4ATwAeAFAAGwAeAB4AUABQAFAAUABQAB4AHgAeAB0AHQAeAFAAHgBQAB4AUAAeAFAATwBQAFAAHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AUABQAFAAUABPAE8AUABQAFAAUABQAE8AUABQAE8AUABPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAE8ATwBPAE8ATwBPAE8ATwBPAE8AUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAATwAeAB4AKwArACsAKwAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB0AHQAeAB4AHgAdAB0AHgAeAB0AHgAeAB4AHQAeAB0AGwAbAB4AHQAeAB4AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB0AHgAdAB4AHQAdAB0AHQAdAB0AHgAdAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAdAB0AHQAdAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAlACUAHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB0AHQAeAB4AHgAeAB0AHQAdAB4AHgAdAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB0AHQAeAB4AHQAeAB4AHgAeAB0AHQAeAB4AHgAeACUAJQAdAB0AJQAeACUAJQAlACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHQAdAB0AHgAdACUAHQAdAB4AHQAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHQAdAB0AHQAlAB4AJQAlACUAHQAlACUAHQAdAB0AJQAlAB0AHQAlAB0AHQAlACUAJQAeAB0AHgAeAB4AHgAdAB0AJQAdAB0AHQAdAB0AHQAlACUAJQAlACUAHQAlACUAIAAlAB0AHQAlACUAJQAlACUAJQAlACUAHgAeAB4AJQAlACAAIAAgACAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeABcAFwAXABcAFwAXAB4AEwATACUAHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACUAJQBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwArACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAE8ATwBPAE8ATwBPAE8ATwAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeACsAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUAArACsAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQBQAFAAUABQACsAKwArACsAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAABAAEAAQAKwAEAAQAKwArACsAKwArAAQABAAEAAQAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsABAAEAAQAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsADQANAA0ADQANAA0ADQANAB4AKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAUABQAFAAUABQAA0ADQANAA0ADQANABQAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwANAA0ADQANAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAeAAQABAAEAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLACsADQArAB4AKwArAAQABAAEAAQAUABQAB4AUAArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwAEAAQABAAEAAQABAAEAAQABAAOAA0ADQATABMAHgAeAB4ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0AUABQAFAAUAAEAAQAKwArAAQADQANAB4AUAArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXABcAA0ADQANACoASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUAArACsAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANACsADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEcARwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwAeAAQABAANAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAEAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUAArACsAUAArACsAUABQACsAKwBQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAeAB4ADQANAA0ADQAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAArAAQABAArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAEAAQABAAEAAQABAAEACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAFgAWAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAKwBQACsAKwArACsAKwArAFAAKwArACsAKwBQACsAUAArAFAAKwBQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQACsAUAArAFAAKwBQACsAUABQACsAUAArACsAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAUABQAFAAUAArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUAArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAlACUAJQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeACUAJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeACUAJQAlACUAJQAeACUAJQAlACUAJQAgACAAIAAlACUAIAAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIQAhACEAIQAhACUAJQAgACAAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAIAAlACUAJQAlACAAJQAgACAAIAAgACAAIAAgACAAIAAlACUAJQAgACUAJQAlACUAIAAgACAAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeACUAHgAlAB4AJQAlACUAJQAlACAAJQAlACUAJQAeACUAHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAIAAgACAAIAAgAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFwAXABcAFQAVABUAHgAeAB4AHgAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAlACAAIAAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsA"},function(e,A,t){"";function r(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(A,"__esModule",{value:!0});var a=t(5);A.default=function e(A,t,s){r(this,e),this.type=a.PATH.CIRCLE,this.x=A,this.y=t,this.radius=s,isNaN(A)&&console.error("Invalid x value given for Circle"),isNaN(t)&&console.error("Invalid y value given for Circle"),isNaN(s)&&console.error("Invalid radius value given for Circle")}},function(e,A,t){"";function r(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(A,"__esModule",{value:!0});var s=function(){function e(e,A){var t=[],r=!0,a=!1,s=void 0;try{for(var d=e[Symbol.iterator](),l;!(r=(l=d.next()).done)&&(t.push(l.value),!(A&&t.length===A));r=!0);}catch(e){a=!0,s=e}finally{try{!r&&d["return"]&&d["return"]()}finally{if(a)throw s}}return t}return function(A,t){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return e(A,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(){function e(e,A){for(var t=0,r;t<A.length;t++)r=A[t],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}return function(A,t,r){return t&&e(A.prototype,t),r&&e(A,r),A}}(),l=t(2),c=t(25),B=t(52),g=t(9),u=function(e){return e&&e.__esModule?e:{default:e}}(g),m=t(4),p=t(12),w=function(){function e(A,t){r(this,e),this.target=A,this.options=t,A.render(t)}return d(e,[{key:"renderNode",value:function(e){e.isVisible()&&(this.renderNodeBackgroundAndBorders(e),this.renderNodeContent(e))}},{key:"renderNodeContent",value:function(e){var A=this,t=function(){if(e.childNodes.length&&e.childNodes.forEach(function(t){if(t instanceof u.default){var r=t.parent.style;A.target.renderTextNode(t.bounds,r.color,r.font,r.textDecoration,r.textShadow)}else A.target.drawShape(t,e.style.color)}),e.image){var t=A.options.imageStore.get(e.image);if(t){var r=(0,l.calculateContentBox)(e.bounds,e.style.padding,e.style.border),a="number"==typeof t.width&&0<t.width?t.width:r.width,s="number"==typeof t.height&&0<t.height?t.height:r.height;0<a&&0<s&&A.target.clip([(0,l.calculatePaddingBoxPath)(e.curvedBounds)],function(){A.target.drawImage(t,new l.Bounds(0,0,a,s),r)})}}},r=e.getClipPaths();r.length?this.target.clip(r,t):t()}},{key:"renderNodeBackgroundAndBorders",value:function(e){var A=this,t=!e.style.background.backgroundColor.isTransparent()||e.style.background.backgroundImage.length,r=e.style.border.some(function(e){return e.borderStyle!==p.BORDER_STYLE.NONE&&!e.borderColor.isTransparent()}),a=function(){var r=(0,m.calculateBackgroungPaintingArea)(e.curvedBounds,e.style.background.backgroundClip);t&&A.target.clip([r],function(){e.style.background.backgroundColor.isTransparent()||A.target.fill(e.style.background.backgroundColor),A.renderBackgroundImage(e)}),e.style.border.forEach(function(t,r){t.borderStyle===p.BORDER_STYLE.NONE||t.borderColor.isTransparent()||A.renderBorder(t,r,e.curvedBounds)})};if(t||r){var s=e.parent?e.parent.getClipPaths():[];s.length?this.target.clip(s,a):a()}}},{key:"renderBackgroundImage",value:function(e){var A=this;e.style.background.backgroundImage.slice(0).reverse().forEach(function(t){"url"===t.source.method&&t.source.args.length?A.renderBackgroundRepeat(e,t):/gradient/i.test(t.source.method)&&A.renderBackgroundGradient(e,t)})}},{key:"renderBackgroundRepeat",value:function(e,A){var t=this.options.imageStore.get(A.source.args[0]);if(t){var r=(0,m.calculateBackgroungPositioningArea)(e.style.background.backgroundOrigin,e.bounds,e.style.padding,e.style.border),s=(0,m.calculateBackgroundSize)(A,t,r),d=(0,m.calculateBackgroundPosition)(A.position,s,r),l=(0,m.calculateBackgroundRepeatPath)(A,d,s,r,e.bounds),c=a(r.left+d.x),B=a(r.top+d.y);this.target.renderRepeat(l,t,s,c,B)}}},{key:"renderBackgroundGradient",value:function(e,A){var t=(0,m.calculateBackgroungPositioningArea)(e.style.background.backgroundOrigin,e.bounds,e.style.padding,e.style.border),r=(0,m.calculateGradientBackgroundSize)(A,t),s=(0,m.calculateBackgroundPosition)(A.position,r,t),d=new l.Bounds(a(t.left+s.x),a(t.top+s.y),r.width,r.height),c=(0,B.parseGradient)(e,A.source,d);if(c)switch(c.type){case B.GRADIENT_TYPE.LINEAR_GRADIENT:this.target.renderLinearGradient(d,c);break;case B.GRADIENT_TYPE.RADIAL_GRADIENT:this.target.renderRadialGradient(d,c);}}},{key:"renderBorder",value:function(e,A,t){this.target.drawShape((0,l.parsePathForBorder)(t,A),e.borderColor)}},{key:"renderStack",value:function(e){var A=this;if(e.container.isVisible()){var t=e.getOpacity();t!==this._opacity&&(this.target.setOpacity(e.getOpacity()),this._opacity=t);var r=e.container.style.transform;null===r?this.renderStackContent(e):this.target.transform(e.container.bounds.left+r.transformOrigin[0].value,e.container.bounds.top+r.transformOrigin[1].value,r.transform,function(){return A.renderStackContent(e)})}}},{key:"renderStackContent",value:function(e){var A=C(e),t=s(A,5),r=t[0],a=t[1],d=t[2],l=t[3],c=t[4],B=h(e),g=s(B,2),u=g[0],m=g[1];this.renderNodeBackgroundAndBorders(e.container),r.sort(Q).forEach(this.renderStack,this),this.renderNodeContent(e.container),m.forEach(this.renderNode,this),l.forEach(this.renderStack,this),c.forEach(this.renderStack,this),u.forEach(this.renderNode,this),a.forEach(this.renderStack,this),d.sort(Q).forEach(this.renderStack,this)}},{key:"render",value:function(e){var A=this;this.options.backgroundColor&&this.target.rectangle(this.options.x,this.options.y,this.options.width,this.options.height,this.options.backgroundColor),this.renderStack(e);var t=this.target.getTarget();return t.then(function(e){return A.options.logger.log("Render completed"),e})}}]),e}();A.default=w;var h=function(e){for(var A=[],t=[],r=e.children.length,a=0,s;a<r;a++)s=e.children[a],s.isInlineLevel()?A.push(s):t.push(s);return[A,t]},C=function(e){for(var A=[],t=[],r=[],a=[],s=[],d=e.contexts.length,l=0,c;l<d;l++)c=e.contexts[l],c.container.isPositioned()||1>c.container.style.opacity||c.container.isTransformed()?0>c.container.style.zIndex.order?A.push(c):0<c.container.style.zIndex.order?r.push(c):t.push(c):c.container.isFloating()?a.push(c):s.push(c);return[A,t,r,a,s]},Q=function(e,A){if(e.container.style.zIndex.order>A.container.style.zIndex.order)return 1;return e.container.style.zIndex.order<A.container.style.zIndex.order?-1:e.container.index>A.container.index?1:-1}},function(e,t,a){"";function s(e){return e&&e.__esModule?e:{default:e}}function c(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.transformWebkitRadialGradientArgs=t.parseGradient=t.RadialGradient=t.LinearGradient=t.RADIAL_GRADIENT_SHAPE=t.GRADIENT_TYPE=void 0;var B=function(){function e(e,A){var t=[],r=!0,a=!1,s=void 0;try{for(var d=e[Symbol.iterator](),l;!(r=(l=d.next()).done)&&(t.push(l.value),!(A&&t.length===A));r=!0);}catch(e){a=!0,s=e}finally{try{!r&&d["return"]&&d["return"]()}finally{if(a)throw s}}return t}return function(A,t){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return e(A,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=a(6),u=s(g),m=a(53),p=a(0),w=s(p),h=a(1),C=s(h),Q=a(3),U=t.GRADIENT_TYPE={LINEAR_GRADIENT:0,RADIAL_GRADIENT:1},E=t.RADIAL_GRADIENT_SHAPE={CIRCLE:0,ELLIPSE:1},F={left:new C.default("0%"),top:new C.default("0%"),center:new C.default("50%"),right:new C.default("100%"),bottom:new C.default("100%")},b=t.LinearGradient=function e(A,t){c(this,e),this.type=U.LINEAR_GRADIENT,this.colorStops=A,this.direction=t},H=t.RadialGradient=function e(A,t,r,a){c(this,e),this.type=U.RADIAL_GRADIENT,this.colorStops=A,this.shape=t,this.center=r,this.radius=a},S=t.parseGradient=function(e,A,t){var r=A.args,a=A.method,s=A.prefix;if("linear-gradient"===a)return I(r,t,!!s);return"gradient"===a&&"linear"===r[0]?I(["to bottom"].concat(_(r.slice(3))),t,!!s):"radial-gradient"===a?N(e,"-webkit-"===s?K(r):r,t):"gradient"===a&&"radial"===r[0]?N(e,_(K(r.slice(1))),t):void 0},T=function(e,A,t){for(var r=[],a=A;a<e.length;a++){var s=e[a],d=/(px)|%|( 0)$/i.test(s),l=s.lastIndexOf(" "),c=new w.default(d?s.substring(0,l):s),B=d?new C.default(s.substring(l+1)):a===A?new C.default("0%"):a===e.length-1?new C.default("100%"):null;r.push({color:c,stop:B})}for(var g=r.map(function(e){var A=e.color,r=e.stop,a=0===t?0:r?r.getAbsoluteValue(t)/t:null;return{color:A,stop:a}}),u=g[0].stop,m=0;m<g.length;m++)if(null!==u){var p=g[m].stop;if(null===p){for(var h=m;null===g[h].stop;)h++;for(var Q=h-m+1,U=g[h].stop,E=(U-u)/Q;m<h;m++)u=g[m].stop=u+E}else u=p}return g},I=function(e,t,a){var s=(0,m.parseAngle)(e[0]),d=/^(to )?(left|top|right|bottom)( (left|top|right|bottom))?$/i.test(e[0]),c=d||null!==s||/^([+-]?\d*\.?\d+)% ([+-]?\d*\.?\d+)%$/i.test(e[0]),B=c?null===s?d?M(e[0],t):D(e[0],t):R(a?s-.5*A:s,t):R(Math.PI,t),g=c?1:0,u=l((0,Q.distance)(r(B.x0)+r(B.x1),r(B.y0)+r(B.y1)),2*t.width,2*t.height);return new b(T(e,g,u),B)},N=function(e,A,t){var r=A[0].match(/^\s*(circle|ellipse)?\s*((?:([\d.]+)(px|r?em|%)\s*(?:([\d.]+)(px|r?em|%))?)|closest-side|closest-corner|farthest-side|farthest-corner)?\s*(?:at\s*(?:(left|center|right)|([\d.]+)(px|r?em|%))\s+(?:(top|center|bottom)|([\d.]+)(px|r?em|%)))?(?:\s|$)/i),a=r&&("circle"===r[1]||r[3]!==void 0&&r[5]===void 0)?E.CIRCLE:E.ELLIPSE,s={},d={};r&&(r[3]!==void 0&&(s.x=(0,h.calculateLengthFromValueWithUnit)(e,r[3],r[4]).getAbsoluteValue(t.width)),r[5]!==void 0&&(s.y=(0,h.calculateLengthFromValueWithUnit)(e,r[5],r[6]).getAbsoluteValue(t.height)),r[7]?d.x=F[r[7].toLowerCase()]:r[8]!==void 0&&(d.x=(0,h.calculateLengthFromValueWithUnit)(e,r[8],r[9])),r[10]?d.y=F[r[10].toLowerCase()]:r[11]!==void 0&&(d.y=(0,h.calculateLengthFromValueWithUnit)(e,r[11],r[12])));var c={x:d.x===void 0?t.width/2:d.x.getAbsoluteValue(t.width),y:d.y===void 0?t.height/2:d.y.getAbsoluteValue(t.height)},B=k(r&&r[2]||"farthest-corner",a,c,s,t);return new H(T(A,r?1:0,l(B.x,B.y)),a,c,B)},R=function(e,A){var t=Math.cos,a=Math.sin,s=A.width,d=A.height,l=r(s*a(e))+r(d*t(e)),c=l/2,B=.5*s+a(e)*c,g=.5*d-t(e)*c;return{x0:B,x1:s-B,y0:g,y1:d-g}},L=function(e){return Math.acos(e.width/2/((0,Q.distance)(e.width,e.height)/2))},M=function(e,t){switch(e){case"bottom":case"to top":return R(0,t);case"left":case"to right":return R(A/2,t);case"right":case"to left":return R(3*A/2,t);case"top right":case"right top":case"to bottom left":case"to left bottom":return R(A+L(t),t);case"top left":case"left top":case"to bottom right":case"to right bottom":return R(A-L(t),t);case"bottom left":case"left bottom":case"to top right":case"to right top":return R(L(t),t);case"bottom right":case"right bottom":case"to top left":case"to left top":return R(2*A-L(t),t);case"top":case"to bottom":default:return R(Math.PI,t);}},D=function(e,t){var r=e.split(" ").map(parseFloat),a=B(r,2),s=a[0],d=a[1],l=s/100*t.width/(d/100*t.height);return R(Math.atan(isNaN(l)?1:l)+A/2,t)},O=function(e,A,t,r){var a=[{x:0,y:0},{x:0,y:e.height},{x:e.width,y:0},{x:e.width,y:e.height}];return a.reduce(function(e,a){var s=(0,Q.distance)(A-a.x,t-a.y);return(r?s<e.optimumDistance:s>e.optimumDistance)?{optimumCorner:a,optimumDistance:s}:e},{optimumDistance:r?1/0:-Infinity,optimumCorner:null}).optimumCorner},k=function(e,A,t,a,s){var B=t.x,g=t.y,u=0,m=0;switch(e){case"closest-side":A===E.CIRCLE?u=m=l(r(B),r(B-s.width),r(g),r(g-s.height)):A===E.ELLIPSE&&(u=l(r(B),r(B-s.width)),m=l(r(g),r(g-s.height)));break;case"closest-corner":if(A===E.CIRCLE)u=m=l((0,Q.distance)(B,g),(0,Q.distance)(B,g-s.height),(0,Q.distance)(B-s.width,g),(0,Q.distance)(B-s.width,g-s.height));else if(A===E.ELLIPSE){var p=l(r(g),r(g-s.height))/l(r(B),r(B-s.width)),c=O(s,B,g,!0);u=(0,Q.distance)(c.x-B,(c.y-g)/p),m=p*u}break;case"farthest-side":A===E.CIRCLE?u=m=d(r(B),r(B-s.width),r(g),r(g-s.height)):A===E.ELLIPSE&&(u=d(r(B),r(B-s.width)),m=d(r(g),r(g-s.height)));break;case"farthest-corner":if(A===E.CIRCLE)u=m=d((0,Q.distance)(B,g),(0,Q.distance)(B,g-s.height),(0,Q.distance)(B-s.width,g),(0,Q.distance)(B-s.width,g-s.height));else if(A===E.ELLIPSE){var w=d(r(g),r(g-s.height))/d(r(B),r(B-s.width)),h=O(s,B,g,!1);u=(0,Q.distance)(h.x-B,(h.y-g)/w),m=w*u}break;default:u=a.x||0,m=a.y===void 0?u:a.y;}return{x:u,y:m}},K=t.transformWebkitRadialGradientArgs=function(e){var A="",t="",r="",a="",s=0,d=/^(left|center|right|\d+(?:px|r?em|%)?)(?:\s+(top|center|bottom|\d+(?:px|r?em|%)?))?$/i,l=/^\d+(px|r?em|%)?(?:\s+\d+(px|r?em|%)?)?$/i,c=e[s].match(d);c&&s++;var B=e[s].match(/^(circle|ellipse)?\s*(closest-side|closest-corner|farthest-side|farthest-corner|contain|cover)?$/i);B&&(A=B[1]||"",r=B[2]||"","contain"===r?r="closest-side":"cover"===r&&(r="farthest-corner"),s++);var g=e[s].match(l);g&&s++;var u=e[s].match(d);u&&s++;var m=e[s].match(l);m&&s++;var p=u||c;p&&p[1]&&(a=p[1]+(/^\d+$/.test(p[1])?"px":""),p[2]&&(a+=" "+p[2]+(/^\d+$/.test(p[2])?"px":"")));var w=m||g;return w&&(t=w[0],!w[1]&&(t+="px")),!a||A||t||r||(t=a,a=""),a&&(a="at "+a),[[A,r,t,a].filter(function(e){return!!e}).join(" ")].concat(e.slice(s))},_=function(e){return e.map(function(e){return e.match(/^(from|to|color-stop)\((?:([\d.]+)(%)?,\s*)?(.+?)\)$/i)}).map(function(A,t){if(!A)return e[t];switch(A[1]){case"from":return A[4]+" 0%";case"to":return A[4]+" 100%";case"color-stop":return"%"===A[3]?A[4]+" "+A[2]:A[4]+" "+100*parseFloat(A[2])+"%";}})}},function(e,t){"";Object.defineProperty(t,"__esModule",{value:!0});t.parseAngle=function(e){var t=e.match(/([+-]?\d*\.?\d+)(deg|grad|rad|turn)/i);if(t){var r=parseFloat(t[1]);switch(t[2].toLowerCase()){case"deg":return A*r/180;case"grad":return A/200*r;case"rad":return r;case"turn":return 2*A*r;}}return null}},function(A,t,r){"";function a(e){return e&&e.__esModule?e:{default:e}}function s(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.cloneWindow=t.DocumentCloner=void 0;var d=function(){function e(e,A){var t=[],r=!0,a=!1,s=void 0;try{for(var d=e[Symbol.iterator](),l;!(r=(l=d.next()).done)&&(t.push(l.value),!(A&&t.length===A));r=!0);}catch(e){a=!0,s=e}finally{try{!r&&d["return"]&&d["return"]()}finally{if(a)throw s}}return t}return function(A,t){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return e(A,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,A){for(var t=0,r;t<A.length;t++)r=A[t],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}return function(A,t,r){return t&&e(A.prototype,t),r&&e(A,r),A}}(),c=r(2),B=r(26),g=r(55),u=a(g),m=r(3),p=r(4),w=r(15),h=a(w),C=r(56),Q="data-html2canvas-ignore",U=t.DocumentCloner=function(){function e(A,t,r,a,d){s(this,e),this.referenceElement=A,this.scrolledElements=[],this.copyStyles=a,this.inlineImages=a,this.logger=r,this.options=t,this.renderer=d,this.resourceLoader=new u.default(t,r,window),this.pseudoContentData={counters:{},quoteDepth:0},this.documentElement=this.cloneNode(A.ownerDocument.documentElement)}return l(e,[{key:"inlineAllImages",value:function(e){var A=this;if(this.inlineImages&&e){var t=e.style;Promise.all((0,p.parseBackgroundImage)(t.backgroundImage).map(function(e){return"url"===e.method?A.resourceLoader.inlineImage(e.args[0]).then(function(e){return e&&"string"==typeof e.src?"url(\""+e.src+"\")":"none"}).catch(function(t){A.logger.log("Unable to load image",t)}):Promise.resolve(""+e.prefix+e.method+"("+e.args.join(",")+")")})).then(function(e){1<e.length&&(t.backgroundColor=""),t.backgroundImage=e.join(",")}),e instanceof HTMLImageElement&&this.resourceLoader.inlineImage(e.src).then(function(A){if(A&&e instanceof HTMLImageElement&&e.parentNode){var t=e.parentNode,r=(0,m.copyCSSStyles)(e.style,A.cloneNode(!1));t.replaceChild(r,e)}}).catch(function(t){A.logger.log("Unable to load image",t)})}}},{key:"inlineFonts",value:function(e){var A=this;return Promise.all(Array.from(e.styleSheets).map(function(t){return t.href?fetch(t.href).then(function(e){return e.text()}).then(function(e){return F(e,t.href)}).catch(function(t){return A.logger.log("Unable to load stylesheet",t),[]}):E(t,e)})).then(function(e){return e.reduce(function(e,A){return e.concat(A)},[])}).then(function(e){return Promise.all(e.map(function(e){return fetch(e.formats[0].src).then(function(e){return e.blob()}).then(function(e){return new Promise(function(A,t){var r=new FileReader;r.onerror=t,r.onload=function(){var e=r.result;A(e)},r.readAsDataURL(e)})}).then(function(A){return e.fontFace.setProperty("src","url(\""+A+"\")"),"@font-face {"+e.fontFace.cssText+" "})}))}).then(function(t){var r=e.createElement("style");r.textContent=t.join("\n"),A.documentElement.appendChild(r)})}},{key:"createElementClone",value:function(e){var A=this;if(this.copyStyles&&e instanceof HTMLCanvasElement){var t=e.ownerDocument.createElement("img");try{return t.src=e.toDataURL(),t}catch(A){this.logger.log("Unable to clone canvas contents, canvas is tainted")}}if(e instanceof HTMLIFrameElement){var r=e.cloneNode(!1),a=k();r.setAttribute("data-html2canvas-internal-iframe-key",a);var s=(0,c.parseBounds)(e,0,0),d=s.width,l=s.height;return this.resourceLoader.cache[a]=K(e,this.options).then(function(e){return A.renderer(e,{async:A.options.async,allowTaint:A.options.allowTaint,backgroundColor:"#ffffff",canvas:null,imageTimeout:A.options.imageTimeout,logging:A.options.logging,proxy:A.options.proxy,removeContainer:A.options.removeContainer,scale:A.options.scale,foreignObjectRendering:A.options.foreignObjectRendering,useCORS:A.options.useCORS,target:new h.default,width:d,height:l,x:0,y:0,windowWidth:e.ownerDocument.defaultView.innerWidth,windowHeight:e.ownerDocument.defaultView.innerHeight,scrollX:e.ownerDocument.defaultView.pageXOffset,scrollY:e.ownerDocument.defaultView.pageYOffset},A.logger.child(a))}).then(function(A){return new Promise(function(t,a){var s=document.createElement("img");s.onload=function(){return t(A)},s.onerror=a,s.src=A.toDataURL(),r.parentNode&&r.parentNode.replaceChild((0,m.copyCSSStyles)(e.ownerDocument.defaultView.getComputedStyle(e),s),r)})}),r}if(e instanceof HTMLStyleElement&&e.sheet&&e.sheet.cssRules){var B=[].slice.call(e.sheet.cssRules,0).reduce(function(e,t){try{return t&&t.cssText?e+t.cssText:e}catch(r){return A.logger.log("Unable to access cssText property",t.name),e}},""),g=e.cloneNode(!1);return g.textContent=B,g}return e.cloneNode(!1)}},{key:"cloneNode",value:function(e){var A=e.nodeType===Node.TEXT_NODE?document.createTextNode(e.nodeValue):this.createElementClone(e),t=e.ownerDocument.defaultView,r=e instanceof t.HTMLElement?t.getComputedStyle(e):null,a=e instanceof t.HTMLElement?t.getComputedStyle(e,":before"):null,s=e instanceof t.HTMLElement?t.getComputedStyle(e,":after"):null;this.referenceElement===e&&A instanceof t.HTMLElement&&(this.clonedReferenceElement=A),A instanceof t.HTMLBodyElement&&M(A);for(var d=(0,C.parseCounterReset)(r,this.pseudoContentData),l=(0,C.resolvePseudoContent)(e,a,this.pseudoContentData),c=e.firstChild;c;c=c.nextSibling)c.nodeType===Node.ELEMENT_NODE&&("SCRIPT"===c.nodeName||c.hasAttribute(Q)||"function"==typeof this.options.ignoreElements&&this.options.ignoreElements(c))||(!this.copyStyles||"STYLE"!==c.nodeName)&&A.appendChild(this.cloneNode(c));var B=(0,C.resolvePseudoContent)(e,s,this.pseudoContentData);if((0,C.popCounters)(d,this.pseudoContentData),e instanceof t.HTMLElement&&A instanceof t.HTMLElement)switch(a&&this.inlineAllImages(S(e,A,a,l,T)),s&&this.inlineAllImages(S(e,A,s,B,I)),r&&this.copyStyles&&!(e instanceof HTMLIFrameElement)&&(0,m.copyCSSStyles)(r,A),this.inlineAllImages(A),(0!==e.scrollTop||0!==e.scrollLeft)&&this.scrolledElements.push([A,e.scrollLeft,e.scrollTop]),e.nodeName){case"CANVAS":this.copyStyles||H(e,A);break;case"TEXTAREA":case"SELECT":A.value=e.value;}return A}}]),e}(),E=function(e,A){return(e.cssRules?Array.from(e.cssRules):[]).filter(function(e){return e.type===CSSRule.FONT_FACE_RULE}).map(function(e){for(var t=(0,p.parseBackgroundImage)(e.style.getPropertyValue("src")),r=[],s=0;s<t.length;s++)if("url"===t[s].method&&t[s+1]&&"format"===t[s+1].method){var d=A.createElement("a");d.href=t[s].args[0],A.body&&A.body.appendChild(d);var a={src:d.href,format:t[s+1].args[0]};r.push(a)}return{formats:r.filter(function(e){return /^woff/i.test(e.format)}),fontFace:e.style}}).filter(function(e){return e.formats.length})},F=function(e,A){var t=document.implementation.createHTMLDocument(""),r=document.createElement("base");r.href=A;var a=document.createElement("style");return a.textContent=e,t.head&&t.head.appendChild(r),t.body&&t.body.appendChild(a),a.sheet?E(a.sheet,t):[]},b=function(e,A,t){e.defaultView&&(A!==e.defaultView.pageXOffset||t!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(A,t)},H=function(e,A){try{if(A){A.width=e.width,A.height=e.height;var t=e.getContext("2d"),r=A.getContext("2d");t?r.putImageData(t.getImageData(0,0,e.width,e.height),0,0):r.drawImage(e,0,0)}}catch(A){}},S=function(e,A,t,r,a){if(t&&t.content&&"none"!==t.content&&"-moz-alt-content"!==t.content&&"none"!==t.display){var s=A.ownerDocument.createElement("html2canvaspseudoelement");if((0,m.copyCSSStyles)(t,s),r)for(var d=r.length,l=0,c;l<d;l++)switch(c=r[l],c.type){case C.PSEUDO_CONTENT_ITEM_TYPE.IMAGE:var B=A.ownerDocument.createElement("img");B.src=(0,p.parseBackgroundImage)("url("+c.value+")")[0].args[0],B.style.opacity="1",s.appendChild(B);break;case C.PSEUDO_CONTENT_ITEM_TYPE.TEXT:s.appendChild(A.ownerDocument.createTextNode(c.value));}return s.className=N+" "+R,A.className+=a===T?" "+N:" "+R,a===T?A.insertBefore(s,A.firstChild):A.appendChild(s),s}},T=":before",I=":after",N="___html2canvas___pseudoelement_before",R="___html2canvas___pseudoelement_after",L="{\n    content: \"\" !important;\n    display: none !important;\n}",M=function(e){D(e,"."+N+T+L+"\n         ."+R+I+L)},D=function(e,A){var t=e.ownerDocument.createElement("style");t.innerHTML=A,e.appendChild(t)},O=function(e){var A=d(e,3),t=A[0],r=A[1],a=A[2];t.scrollLeft=r,t.scrollTop=a},k=function(){return e(Date.now()+1e7*Math.random()).toString(16)},K=function(A,t){try{return Promise.resolve(A.contentWindow.document.documentElement)}catch(r){return t.proxy?(0,B.Proxy)(A.src,t).then(function(e){var A=e.match(/^data:text\/(.+);(base64)?,(.*)$/i);return A?"base64"===A[2]?window.atob(decodeURIComponent(A[3])):decodeURIComponent(A[3]):Promise.reject()}).then(function(e){return _(A.ownerDocument,(0,c.parseBounds)(A,0,0)).then(function(A){var t=A.contentWindow,r=t.document;r.open(),r.write(e);var a=P(A).then(function(){return r.documentElement});return r.close(),a})}):Promise.reject()}},_=function(e,A){var t=e.createElement("iframe");return(t.className="html2canvas-container",t.style.visibility="hidden",t.style.position="fixed",t.style.left="-10000px",t.style.top="0px",t.style.border="0",t.width=A.width.toString(),t.height=A.height.toString(),t.scrolling="no",t.setAttribute(Q,"true"),!e.body)?Promise.reject("Body element not found in Document that is getting rendered"):(e.body.appendChild(t),Promise.resolve(t))},P=function(e){var A=e.contentWindow,t=A.document;return new Promise(function(r){A.onload=e.onload=t.onreadystatechange=function(){var A=setInterval(function(){0<t.body.childNodes.length&&"complete"===t.readyState&&(clearInterval(A),r(e))},50)}})},V=t.cloneWindow=function(e,A,t,r,a,s){var d=new U(t,r,a,!1,s),l=e.defaultView.pageXOffset,c=e.defaultView.pageYOffset;return _(e,A).then(function(a){var s=a.contentWindow,B=s.document,g=P(a).then(function(){d.scrolledElements.forEach(O),s.scrollTo(A.left,A.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(s.scrollY!==A.top||s.scrollX!==A.left)&&(B.documentElement.style.top=-A.top+"px",B.documentElement.style.left=-A.left+"px",B.documentElement.style.position="absolute");var l=Promise.resolve([a,d.clonedReferenceElement,d.resourceLoader]),c=r.onclone;return d.clonedReferenceElement instanceof s.HTMLElement||d.clonedReferenceElement instanceof e.defaultView.HTMLElement||d.clonedReferenceElement instanceof HTMLElement?"function"==typeof c?Promise.resolve().then(function(){return c(B)}).then(function(){return l}):l:Promise.reject("Error finding the "+t.nodeName+" in the cloned document")});return B.open(),B.write(z(document.doctype)+"<html></html>"),b(t.ownerDocument,l,c),B.replaceChild(B.adoptNode(d.documentElement),B.documentElement),B.close(),g})},z=function(e){var A="";return e&&(A+="<!DOCTYPE ",e.name&&(A+=e.name),e.internalSubset&&(A+=e.internalSubset),e.publicId&&(A+="\""+e.publicId+"\""),e.systemId&&(A+="\""+e.systemId+"\""),A+=">"),A}},function(e,A,t){"";function r(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(A,"__esModule",{value:!0}),A.ResourceStore=void 0;var a=function(){function e(e,A){for(var t=0,r;t<A.length;t++)r=A[t],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}return function(A,t,r){return t&&e(A.prototype,t),r&&e(A,r),A}}(),s=t(10),d=function(e){return e&&e.__esModule?e:{default:e}}(s),l=t(26),c=function(){function e(A,t,a){r(this,e),this.options=A,this._window=a,this.origin=this.getOrigin(a.location.href),this.cache={},this.logger=t,this._index=0}return a(e,[{key:"loadImage",value:function(e){var A=this;if(this.hasResourceInCache(e))return e;if(m(e))return this.cache[e]=w(e,this.options.imageTimeout||0),e;if(!p(e)||d.default.SUPPORT_SVG_DRAWING){if(!0===this.options.allowTaint||g(e)||this.isSameOrigin(e))return this.addImage(e,e,!1);if(!this.isSameOrigin(e)){if("string"==typeof this.options.proxy)return this.cache[e]=(0,l.Proxy)(e,this.options).then(function(e){return w(e,A.options.imageTimeout||0)}),e;if(!0===this.options.useCORS&&d.default.SUPPORT_CORS_IMAGES)return this.addImage(e,e,!0)}}}},{key:"inlineImage",value:function(e){var A=this;return g(e)?w(e,this.options.imageTimeout||0):this.hasResourceInCache(e)?this.cache[e]:this.isSameOrigin(e)||"string"!=typeof this.options.proxy?this.xhrImage(e):this.cache[e]=(0,l.Proxy)(e,this.options).then(function(e){return w(e,A.options.imageTimeout||0)})}},{key:"xhrImage",value:function(e){var A=this;return this.cache[e]=new Promise(function(t,r){var a=new XMLHttpRequest;if(a.onreadystatechange=function(){if(4===a.readyState)if(200!==a.status)r("Failed to fetch image "+e.substring(0,256)+" with status code "+a.status);else{var A=new FileReader;A.addEventListener("load",function(){var e=A.result;t(e)},!1),A.addEventListener("error",function(A){return r(A)},!1),A.readAsDataURL(a.response)}},a.responseType="blob",A.options.imageTimeout){var s=A.options.imageTimeout;a.timeout=s,a.ontimeout=function(){return r("Timed out ("+s+"ms) fetching "+e.substring(0,256))}}a.open("GET",e,!0),a.send()}).then(function(e){return w(e,A.options.imageTimeout||0)}),this.cache[e]}},{key:"loadCanvas",value:function(e){var A=this._index++ +"";return this.cache[A]=Promise.resolve(e),A}},{key:"hasResourceInCache",value:function(e){return"undefined"!=typeof this.cache[e]}},{key:"addImage",value:function(e,A,t){var r=this;this.logger.log("Added image "+e.substring(0,256));var a=function(e){return new Promise(function(a,s){var d=new Image;if(d.onload=function(){return a(d)},(!e||t)&&(d.crossOrigin="anonymous"),d.onerror=s,d.src=A,!0===d.complete&&setTimeout(function(){a(d)},500),r.options.imageTimeout){var l=r.options.imageTimeout;setTimeout(function(){return s("Timed out ("+l+"ms) fetching "+A.substring(0,256))},l)}})};return this.cache[e]=u(A)&&!p(A)?d.default.SUPPORT_BASE64_DRAWING(A).then(a):a(!0),e}},{key:"isSameOrigin",value:function(e){return this.getOrigin(e)===this.origin}},{key:"getOrigin",value:function(e){var A=this._link||(this._link=this._window.document.createElement("a"));return A.href=e,A.href=A.href,A.protocol+A.hostname+A.port}},{key:"ready",value:function(){var A=this,t=Object.keys(this.cache),r=t.map(function(e){return A.cache[e].catch(function(t){return A.logger.log("Unable to load image",t),null})});return Promise.all(r).then(function(e){return A.logger.log("Finished loading "+e.length+" images",e),new B(t,e)})}}]),e}();A.default=c;var B=A.ResourceStore=function(){function e(A,t){r(this,e),this._keys=A,this._resources=t}return a(e,[{key:"get",value:function(e){var A=this._keys.indexOf(e);return-1===A?null:this._resources[A]}}]),e}(),g=function(e){return /^data:image\/.*/i.test(e)},u=function(e){return /^data:image\/.*;base64,/i.test(e)},m=function(e){return"blob"===e.substr(0,4)},p=function(e){return"svg"===e.substr(-3).toLowerCase()||/^data:image\/svg\+xml/i.test(e)},w=function(e,A){return new Promise(function(t,r){var a=new Image;a.onload=function(){return t(a)},a.onerror=r,a.src=e,!0===a.complete&&setTimeout(function(){t(a)},500),A&&setTimeout(function(){return r("Timed out ("+A+"ms) loading image")},A)})}},function(e,A,t){"";Object.defineProperty(A,"__esModule",{value:!0}),A.parseContent=A.resolvePseudoContent=A.popCounters=A.parseCounterReset=A.TOKEN_TYPE=A.PSEUDO_CONTENT_ITEM_TYPE=void 0;var r=function(){function e(e,A){var t=[],r=!0,a=!1,s=void 0;try{for(var d=e[Symbol.iterator](),l;!(r=(l=d.next()).done)&&(t.push(l.value),!(A&&t.length===A));r=!0);}catch(e){a=!0,s=e}finally{try{!r&&d["return"]&&d["return"]()}finally{if(a)throw s}}return t}return function(A,t){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return e(A,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=t(14),s=t(8),d=A.PSEUDO_CONTENT_ITEM_TYPE={TEXT:0,IMAGE:1},l=A.TOKEN_TYPE={STRING:0,ATTRIBUTE:1,URL:2,COUNTER:3,COUNTERS:4,OPENQUOTE:5,CLOSEQUOTE:6},c=A.parseCounterReset=function(e,A){if(!e||!e.counterReset||"none"===e.counterReset)return[];for(var t=[],a=e.counterReset.split(/\s*,\s*/),s=a.length,d=0;d<s;d++){var l=a[d].split(/\s+/),c=r(l,2),B=c[0],g=c[1];t.push(B);var u=A.counters[B];u||(u=A.counters[B]=[]),u.push(parseInt(g||0,10))}return t},B=A.popCounters=function(e,A){for(var t=e.length,r=0;r<t;r++)A.counters[e[r]].pop()},g=A.resolvePseudoContent=function(e,A,t){if(!A||!A.content||"none"===A.content||"-moz-alt-content"===A.content||"none"===A.display)return null;var a=u(A.content),c=a.length,B=[],g="",m=A.counterIncrement;if(m&&"none"!==m){var h=m.split(/\s+/),C=r(h,2),Q=C[0],U=C[1],E=t.counters[Q];E&&(E[E.length-1]+=void 0===U?1:parseInt(U,10))}for(var F=0,b;F<c;F++)switch(b=a[F],b.type){case l.STRING:g+=b.value||"";break;case l.ATTRIBUTE:e instanceof HTMLElement&&b.value&&(g+=e.getAttribute(b.value)||"");break;case l.COUNTER:var H=t.counters[b.name||""];H&&(g+=w([H[H.length-1]],"",b.format));break;case l.COUNTERS:var S=t.counters[b.name||""];S&&(g+=w(S,b.glue,b.format));break;case l.OPENQUOTE:g+=p(A,!0,t.quoteDepth),t.quoteDepth++;break;case l.CLOSEQUOTE:t.quoteDepth--,g+=p(A,!1,t.quoteDepth);break;case l.URL:g&&(B.push({type:d.TEXT,value:g}),g=""),B.push({type:d.IMAGE,value:b.value||""});}return g&&B.push({type:d.TEXT,value:g}),B},u=A.parseContent=function(e,A){if(A&&A[e])return A[e];for(var t=[],r=e.length,a=!1,s=!1,d=!1,B="",g="",u=[],p=0,w;p<r;p++){switch(w=e.charAt(p),w){case"'":case"\"":s?B+=w:(a=!a,!d&&!a&&(t.push({type:l.STRING,value:B}),B=""));break;case"\\":s?(B+=w,s=!1):s=!0;break;case"(":a?B+=w:(d=!0,g=B,B="",u=[]);break;case")":if(a)B+=w;else if(d){switch(B&&u.push(B),g){case"attr":0<u.length&&t.push({type:l.ATTRIBUTE,value:u[0]});break;case"counter":if(0<u.length){var h={type:l.COUNTER,name:u[0]};1<u.length&&(h.format=u[1]),t.push(h)}break;case"counters":if(0<u.length){var C={type:l.COUNTERS,name:u[0]};1<u.length&&(C.glue=u[1]),2<u.length&&(C.format=u[2]),t.push(C)}break;case"url":0<u.length&&t.push({type:l.URL,value:u[0]});}d=!1,B=""}break;case",":a?B+=w:d&&(u.push(B),B="");break;case" ":case"\t":a?B+=w:B&&(m(t,B),B="");break;default:B+=w;}"\\"!==w&&(s=!1)}return B&&m(t,B),A&&(A[e]=t),t},m=function(e,A){"open-quote"===A?e.push({type:l.OPENQUOTE}):"close-quote"===A?e.push({type:l.CLOSEQUOTE}):void 0},p=function(e,A,t){var r=e.quotes?e.quotes.split(/\s+/):["'\"'","'\"'"],a=2*t;return a>=r.length&&(a=r.length-2),A||++a,r[a].replace(/^["']|["']$/g,"")},w=function(e,A,t){for(var r=e.length,d="",l=0;l<r;l++)0<l&&(d+=A||""),d+=(0,a.createCounterText)(e[l],(0,s.parseListStyleType)(t||"decimal"),!1);return d}}])});var webrtcdevcon=function(){var tt=Math.pow,nt=Math.log,rt=Math.ceil,at=Math.floor,ot=String.fromCharCode,it=Math.round,st=Math.sqrt,dt=Math.min;function A(A,e){return A?"<video src=\""+A+"\" autoplay></vide>":"<img src=\""+e+"\">"}function t(A){if(0==A)return"0 Bytes";var e=parseInt(at(nt(A)/nt(1024)));return it(A/tt(1024,e),2)+" "+["Bytes","KB","MB","GB","TB"][e]}function r(e){var A=document.createElement("script");A.src=e,A.async=!0,document.documentElement.appendChild(A)}async function a(){let e=null;try{if(e=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}),0<e.getVideoTracks().length)return webrtcdev.log("--------------------------------- Video Permission obtained "),void(Tt=!0)}catch(e){webrtcdev.error(e.name+": "+e.message)}Tt=!1}async function s(){let e=null;try{if(e=await navigator.mediaDevices.getUserMedia({audio:!0,video:!1}),0<e.getAudioTracks().length)return webrtcdev.log("--------------------------------- Audio Permission obtained "),void(St=!0)}catch(e){webrtcdev.error(e.name+": "+e.message)}St=!1}function d(e){try{return document.getElementById(e)}catch(A){return webrtcdev.error(A),""}}function l(e){try{if(document.getElementsByName(e))return document.getElementsByName(e)[0]}catch(A){return webrtcdev.error(A),""}}function c(e){if(!e)return void webrtcdev.error("show elem undefined");try{webrtcdev.log(" [init] show elem",e," , type ",typeof e," , nodetype ",e.nodeType),"object"==typeof e&&e.nodeType!==void 0?(e.removeAttribute("hidden"),e.setAttribute("style","display:block!important")):d(e)?(e=d(e),e.removeAttribute("hidden"),e.setAttribute("style","display:block")):l(e)?(e=l(e),e[0].removeAttribute("hidden"),e[0].setAttribute("style","display:block")):webrtcdev.warn("elem not found ",e)}catch(e){webrtcdev.error("showeleem",e)}}function B(e){try{"object"==typeof e&&e.nodeType!==void 0?(e.setAttribute("hidden",!0),e.setAttribute("style","display:none!important")):d(e)&&(d(e).setAttribute("hidden",!0),d(e).setAttribute("style","display:none"))}catch(A){webrtcdev.error(e,A)}}function g(e){return!!d(e)}function u(e){let A=An;switch(webrtcdev.log("[webcallviewmanager] - updateWebCallView with ",e.userid," peerinfo",e," peerinfo role ",e.role," | myrole :",A),A){case"inspector":for(var t=0,r=0;r<Lt.length;r++)webrtcdev.log(" [webcallviewmanager] Remote Video index array ",r," || ",Lt[r],document.getElementsByName(Lt[r]),document.getElementsByName(Lt[r]).src),Lt[r].src&&t++;let a=document.createElement("video");Lt[t]=a,document.getElementById(rn.videoContainer).appendChild(a);let s=Lt[t];for(let A in webrtcdev.log(" [webcallviewmanager] updateWebCallView role-inspector , attaching stream",s,e.stream),sA(s,e.stream).then(()=>{s.hidden&&(removid.hidden=!1),s.id=e.videoContainer,s.className=rn.videoClass,rn.userDisplay&&e.name&&te(s,e),rn.userMetaDisplay&&e.userid&&ne(s,e);var A=document.getElementsByName(Nt)[0];for(r in A&&(A.hidden=!0),rn.videoarr){var t=document.getElementsByName(rn.videoarr[r])[0];t&&t.setAttribute("style","display:none")}}),document.getElementsByClassName("timeBox"))document.getElementsByClassName("timeBox")[A].hidden=!0;break;case"participant":case"host":case"guest":webrtcdev.info("[webcallviewdevmanager] updateWebCallView - role - ",e.role," peerinfo type - ",e.type," peerinfo Vid - ",e.vid),"local"==e.type&&-1<e.vid.indexOf("videolocal")?m(e):"remote"==e.type&&-1<e.vid.indexOf("videoremote")?w(e).then(()=>{Zn("join",Ut,ct)}):webrtcdev.error("[webcallviewdevmanager] updateWebCallView-  PeerInfo vid did not match either case ",e.vid);break;default:webrtcdev.error("[webcallviewdevmanager] updateWebCallView- No role found to update webcall view ",A);}}function m(e){if(Nt&&document.getElementsByName(Nt)[0]){let A=document.getElementsByName(Nt)[0];sA(A,e.stream).then(()=>{webrtcdev.log("[webcallviewdevmanager] updateWaitingWebCallView - Done attaching local stream to element",A),A.muted=!0,A.className=nn.videoClass,nn.userDisplay&&e.name&&te(A,e),nn.userMetaDisplay&&e.userid&&ne(A,e)})}else alert(" Please Add a video container in config for single video"),webrtcdev.error("[webcallviewdevmanager] updateWaitingWebCallView - No local video container in localobj -> ",nn)}function p(e){return webrtcdev.log("[webcallviewdevmanager] updateLocalWebCallView - local video reattachMediaStream / attachMediaStream"),new Promise(function(){if(Nt&&Rt){let A=document.getElementsByName(Nt)[0],t=document.getElementsByName(Rt)[0];if(0>=t.played.length){let r;A.srcObject?0<A.played.length?(webrtcdev.log("[webcallviewdevmanager] updateLocalWebCallView - local video is playing, just reattach stream to add in session"),r=dA(t,A)):(webrtcdev.log("[webcallviewdevmanager] updateLocalWebCallView - local video is not playing, use webcallpeers for stream to add in session"),r=sA(t,e.stream)):r=Promise.resolve("done"),r.then(()=>{webrtcdev.log("[ webcallviewdevmanager ] updateLocalWebCallView - Done attaching local stream to local element"),nn.userDisplay&&e.name&&te(t,e),nn.userMetaDisplay&&e.userid&&ne(t,e),t.id=e.videoContainer,t.className=rn.videoClass,t.muted=!0,W(t,e)})}else webrtcdev.info("[webcallviewdevmanager] updateLocalWebCallView - not updating self video as it is already playing ",t.played.length)}else webrtcdev.error("[webcallviewdevmanager] updateLocalWebCallView - Local video container not defined "),alert(" Please Add a video container in config for video call ")})}function w(e){return webrtcdev.log("[webcallviewdevmanager] updateRemoteWebCalView - remote video attachMediaStream"),new Promise(function(A){if(yt&&Lt){let t=Q(e,Lt);C(e,Lt,t).then(e=>{webrtcdev.log("[ webcallviewdevmanager ] updateRemoteWebCalView video -",e),sA(e,e.stream)}).then(()=>{webrtcdev.log("[ webcallviewdevmanager ] updateRemoteWebCalView - Done attaching remote stream to remote element"),c(Lt[t].video),rn.userDisplay&&e.name&&te(Lt[t].video,e),rn.userMetaDisplay&&e.userid&&ne(Lt[t].video,peerInfo),Lt[t].video.id=e.videoContainer,Lt[t].video.className=rn.videoClass,W(Lt[t].video,e),A()})}else webrtcdev.error("[webcallviewdevmanager] updateRemoteWebCalView - remote Video containers not defined ",Lt),alert("remote Video containers not defined"),A()})}function h(e){if(webrtcdev.warn("[webcallviewmanager] destroyWebCallView peerInfo",e),e.videoContainer&&document.getElementById(e.videoContainer)){let A=document.getElementById(e.videoContainer);for(v in A||webrtcdev.warn("[webcallviewmanager] destroywebcallview - video not found for the peer who left"),lA(A),Lt)if(Lt[v].userid==e.userid){Lt[v]=Lt[v].video.getAttribute("name");break}webrtcdev.warn("[webcallviewmanager] destroywebcallview - remoteVideos after destroy webcallview and dettach stream ",Lt),A.setAttribute("hidden",!0)}if("single"!=xt.props.fileList){let A=document.getElementById("fileListingRow");if(2<=A.childElementCount){webrtcdev.warn("[webcallviewmanager] destroywebcallview - more than 1 file listing rows present, remove the ones for peers that are no longer in session  ");let t=A.childNodes;for(x in t){if(!t[x].id)break;let r=t[x].id.split("widget-filelisting-box");if(e.userid==r[1]){webrtcdev.warn("[webcallviewmanager] destroywebcallview - File list boxes belonging to userid ",r[1]," need to be removed  "),A.removeChild(t[x]);break}}}let t=d("fileSharingRow");if(2<=t.childElementCount){webrtcdev.warn("[webcallviewmanager] destroyWebCallView - more than 1 file listing rows present , remove the ones for peers that are no longer in session  ");let A=t.childNodes;for(x in A){if(!A[x].id)break;let r=A[x].id.split("widget-filesharing-box");if(e.userid==r[1]){webrtcdev.warn("[webcallviewmanager] destroywebcallview - File list boxes belonging to userid ",r[1]," need to be removed  "),t.removeChild(A[x]);break}}}}let A="";for(i in Bt)"remote"==Bt[i].type&&(A+=Bt[i].userid);webrtcdev.log("Active Remote Peers  ",A)}function C(e,A,t){try{if("unlimited"==rn.maxAllowed){webrtcdev.log("[webcallviewmanager ] updateRemoteVideos - remote video is unlimited , creating video for remoteVideos array ");let r=document.createElement("video");A[t]={userid:e.userid,stream:e.stream,video:r},document.getElementById(rn.dynamicVideos.videoContainer).appendChild(r)}else{if(webrtcdev.log("[webcallviewmanager] updateRemoteVideos - Max-capacity is limited to size -",rn.maxAllowed),webrtcdev.log("[webcallviewmanager] updateRemoteVideos - remoteVideos -",A),t>A.length)return void webrtcdev.error("[webcallviewmanager] current index is larger than remote video length ");let r=document.getElementsByName(A[t]);webrtcdev.log("[webcallviewmanager] updateRemoteVideos - update remote video : ",r),r&&0<=r.length?r[0]&&(A[t]={userid:e.userid,stream:e.stream,video:r[0]},webrtcdev.log("[webcallviewmanager] updateRemoteVideos - RemoteVideos["+t+"] updated ",A[t],e.stream)):A[t].userid==e.userid&&""==A[t].stream?(webrtcdev.warn("[webcallviewmanager] updateRemoteVideos - since remvideo holder already exists with '' stream just overwrite the stream "),A[t].stream=e.stream):(webrtcdev.warn("[webcallviewmanager] updateRemoteVideos - since remvideo holder doesnt exist just overwrite the last remote with the video "),A[A.length-1]={userid:e.userid,stream:e.stream,video:r[0]},webrtcdev.log("[webcallviewmanager ] updateRemoteVideos - RemoteVideos["+A.length-1+"] updated ",A[t]))}webrtcdev.log("[webcallviewmanager ] updateRemoteVideos - remoteVideos after updating ",A[t])}catch(e){webrtcdev.error("[webcallviewmanager ] updateRemoteVideos - ",e)}finally{return Promise.resolve(A[t])}}function Q(e,A){let t=0;for(t in A)if(A[t].userid==e.userid)return webrtcdev.log("[webcallviewdevmanager] findEmptyRemoteVideoIndex - Remote Video dom exist already for the userid ",e.userid," checking for srcobject on ",A[t]),A[t].video.id==e.videoContainer?A[t].video.srcObject&&A[t].video.srcObject.active?(webrtcdev.info("[webcallviewdevmanager] findEmptyRemoteVideoIndex - Peer already has a playing video ",A[t]),t):""==A[t].stream?(webrtcdev.info("[webcallviewdevmanager] findEmptyRemoteVideoIndex - Peer already has a video but without active stream",A[t]),t):(webrtcdev.info("[webcallviewdevmanager] findEmptyRemoteVideoIndex - Peer already has a video reuse that ",A[t]),t):(webrtcdev.info("[webcallviewdevmanager] findEmptyRemoteVideoIndex - Remote Video doesnt have an id yet "),t);for(t in t=0,A)if(!A[t].stream&&!A[t].video){let e=document.getElementsByName(A[t])[0];if(!e.srcObject)return webrtcdev.log("[webcallviewdevmanager] findEmptyRemoteVideoIndex - Remote Video is not appended by json  ",e," thus can be empty"),t;webrtcdev.log("[webcallviewdevmanager] findEmptyRemoteVideoIndex -  Remote video is played or srcObject exists ",e,"cannot be empty , continue to next iteration ")}else webrtcdev.log("[webcallviewdevmanager] findEmptyRemoteVideoIndex - This Remote video space ",A[t],"is waiting for a diff peer video , skip to next ");return webrtcdev.log("[webcallviewmanager] findEmptyRemoteVideoIndex - Last element is empty video ",A[t],"index ",t),t}function U(e){const A=document.createElement("span");A.setAttribute("data-provides","fileinput"),A.className=e.button.class,A.innerHTML=e.button.html,A.onclick=function(){const e=new FileSelector;e.selectSingleFile(function(e){CA(e)})};const t=document.createElement("li");t.appendChild(A),document.getElementById("topIconHolder_ul").appendChild(t)}function E(e){let A=document.getElementById(e.button.id);A.onclick=function(){const e=new FileSelector;e.selectSingleFile(function(e){CA(e)})}}function F(e,A,t,r,a,s,d,l){try{if(!A)return void webrtcdev.error(" [filehsraingJs] Progress helpler cannot be added for one peer as its absent");if(!A.fileList.container||!document.getElementById(A.fileList.container))return void webrtcdev.error("[filehsraingJs dommodifier] Progress helpler cannot be added , missing fileListcontainer ");webrtcdev.log("[filehsraingJs dommodifier] progress helper attributes  attributes : uuid -",e,"peerinfo - ",A,"filename - ",t,"file size - ",r,"progress helper class - ",s,"file to - ",l,"file from - ",d);let c=e+"_"+d+"_"+l;webrtcdev.log("[filehsraingJs dommodifier]  addProgressHelper - progressid ",c);let B=document.createElement("ul");if(B.id=c,B.title=t+" size - "+a.size+" type - "+a.type+" last modified on -"+a.lastModifiedDate,B.setAttribute("type","progressbar"),B.setAttribute("class","row"),Mt){const e=document.createElement("li");e.innerHTML=t+"size - "+a.size+" type - "+a.type+" last modified on -"+a.lastModifiedDate+" from :"+d+" --> to :"+l+"</br>",B.appendChild(e)}let g=document.createElement("li");g.setAttribute("class",s),g.innerHTML="<label>0%</label><progress></progress>",B.appendChild(g),Rn[c]={div:g,progress:g.querySelector("progress"),label:g.querySelector("label")},Rn[c].progress.max=r;let u=document.createElement("li");u.id="stopuploadButton"+c,u.innerHTML="<i class=\"fa fa-trash-o\"></i>",u.onclick=function(e){webrtcdev.log("[filehsraingJs dommodifier]  addProgressHelper - remove progressid ",c," dom : ",document.getElementById(c)),L(c),QA(c,t,a,l,d),e.target.remove(),M(c),pt==t?pt==t&&(pt=""):(lt.send({type:"shareFileStopUpload",_element:c,_filename:t}),pt=t)},B.appendChild(u),parentDom=document.getElementById(A.fileList.container),parentDom.insertBefore(B,parentDom.firstChild)}catch(e){webrtcdev.error("[filehsraingJs dommodifier]  problem in addProgressHelper  ",e)}}function b(A,e){if(-1!=A.position){const t=+A.position.toFixed(2).split(".")[1]||100;e.innerHTML=t+"%"}}function H(e,A,t,r,a){let s;const d=A.fileShare.container,l=A.fileList.container;try{if(!xt.active)return;webrtcdev.log("[filesharing dommodifierjs] displayList - uuid: ",e," peerinfo :",A,"file url : ",t," file name : ",r," file type :",a);let d=null;"sessionRecording"==a&&(r=r.videoname+"_"+r.audioname,d=r);let c=document.querySelectorAll("ul[id^=\""+e+"\"]");if(0<c.length)for(x in c)webrtcdev.log("[filesharing dommodifier js] displayList remove progress bar index - ",x," file dom - ",c[x]),"object"==typeof c[x]&&("progressbar"==c[x].type||-1<c[x].indexOf("progressbar"))?A.fileList.container&&document.getElementById(A.fileList.container)?(s=document.getElementById(A.fileList.container),webrtcdev.log("[filehsraingJs dommodifier]  displayList, set up parent dom ",s),s.removeChild(c[x])):(webrtcdev.log("[filesharing dommodifier js] displayList, Not sure what does this do ",c[x]),s=c[x].parentNode.parentNode):webrtcdev.warn("[filesharing dommodifier js] displayList - cannot remove since , elem is not of type progressbar  ",c[x]);else s=document.getElementById(l)||document.body,webrtcdev.warn("[ filesharing dommodifier js] displayList , progress bar area doesnt exist, set parent dom to ",l,document.getElementById(l)," or to document body")}catch(e){webrtcdev.error(" [filesharing dommodifier js] Display list exception ",e)}webrtcdev.log(" c displayList set up parent dom  ",s);let c=document.createElement("ul");c.id=r+e,c.type=A.type,c.innerHTML="",c.className="row";let g=document.createElement("li");g.innerHTML=r,g.title=a+" shared by "+A.name,g.className="filenameClass",g.id="name"+r+e;let u=document.createElement("li");if(u.id="downloadButton"+r+e,u.title="Download",xt.filelist.saveicon){let e=document.createElement("img");e.src=xt.filelist.downloadicon,u.appendChild(e)}else u.innerHTML="<i class=\"fa fa-download\"></i>";u.onclick=function(){webrtcdev.log("[filesharing dommodifier js] download  filename ",r),D(e,d,t,r,a)};let m=document.createElement("li");if(m.id="saveButton"+r+e,m.title="Save",m.setAttribute("data-toggle","modal"),m.setAttribute("data-target","#saveModal"),xt.filelist.saveicon){let e=document.createElement("img");e.src=xt.filelist.saveicon,m.appendChild(e)}else m.innerHTML="<i class=\"fa fa-floppy-o\"></i>";m.onclick=function(){Y(a)};let p=document.createElement("li");if(p.id="showButton"+r+e,p.title="Show",xt.filelist.saveicon){let e=document.createElement("img");e.src=xt.filelist.showicon,p.appendChild(e)}else p.innerHTML="<i class=\"fa fa-eye-slash\"></i>";let w=0;ut=r,gt="",p.onclick=function(){w++,N(e,d,t,r,a,p,w)};let h=document.createElement("li");h.id="removeButton"+r+e,h.title="Remove",h.innerHTML="<i class=\"fa fa-trash-o\"></i>",h.onclick=function(){if(mt!=r){const A=r+e;L(d,r),lt.send({type:"shareFileRemove",_element:A,_filename:r}),M(A),mt=r,webrtcdev.log("[filesharing dommodifier js] filedom to be hidden : ",c),c.setAttribute("style","display:none!important")}else mt==r&&(mt="")},A.userid!=ct&&B(h),"inspector"==An&&((!0).hidden=!0,p.hidden=!0,m.hidden=!0,c.appendChild(g),h.hidden=!0),c.appendChild(g),c.appendChild(u),c.appendChild(p),c.appendChild(m),!0&&c.appendChild(h),webrtcdev.log("[filesharing dom modifier JS ] filedom ",c," | parentdom ",s),s?(s.appendChild(c),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"file",action:"onFileListed"}}))):webrtcdev.error("[filesharing dom modifier JS ] filedom's parent dom not found ")}function S(e,A,t){webrtcdev.log(" [filehsaring domodifier]  - getFileElementDisplayByType ","file type :",e,"file url : ",A,", file name : ",t);let r;if(-1<e.indexOf("msword")||-1<e.indexOf("officedocument")){let e=document.createElement("div");e.className="alert alert-warning",e.innerHTML="Microsoft and Libra word file cannot be opened in browser. Click bottom DOWNLOAD in UF box . File shows up below the UF box. Click arrow on right, then select OPEN  . File Opens in New Window, then 'Save As'.",r=e}else if(-1<e.indexOf("image")){let e=document.createElement("img");e.src=A,e.title=t,e.id="display"+t,r=e}else if("sessionRecording"==e){let e=e.videoname+"_"+e.audioname;const t=document.createElement("div");t.setAttribute("background-color","black"),t.id="display"+e,t.title=e;let a=document.createElement("video");a.src=A.videofileurl,a.setAttribute("type","audvideo/webm"),a.setAttribute("name","videofile"),a.controls="controls",a.title=e.videoname+".webm";let s=document.createElement("audio");s.src=A.audiofileurl,s.setAttribute("type","audio/wav"),s.controls="controls",s.title=e.videoname+".wav",t.appendChild(a),t.appendChild(s),r=t,a.play(),s.play()}else if(-1<e.indexOf("videoScreenRecording")){webrtcdev.log("[filehsaring domodifier] getFileElementDisplayByType - videoScreenRecording  fileurl ",A);let e=document.createElement("video");e.src=A,e.setAttribute("controls","controls"),e.style.width="100%",e.title=t,e.id="display"+t,r=e}else if(-1<e.indexOf("video")){webrtcdev.log("[filehsaring domodifier] getFileElementDisplayByType - videoRecording ",A);let e=document.createElement("video");e.src=A,e.setAttribute("controls","controls"),e.style.width="100%",e.title=t,e.id="display"+t,r=e}else if(-1<e.indexOf("audio")){webrtcdev.log("[filehsaring domodifier] getFileElementDisplayByType - audio ",A);let e=document.createElement("audio");e.src=A,e.controls="controls",e.title=t,e.id="display"+t,r=e}else{webrtcdev.log("[filehsaring domodifier] getFileElementDisplayByType - iframe ",A);let e=document.createElement("iframe");e.style.width="100%",e.src=A,e.className="viewerIframeClass",e.title=t,e.id="display"+t,r=e}return r}function T(e,A,t,r,a){webrtcdev.log(" [filehsaring dommodifier] displayFile  - uuid: ",e," peerinfo :",A," , file url : ",t," ,  file name : ",r," ,  file type :",a);try{if(!A||!A.fileShare)return;let e=document.getElementById(A.fileShare.container),s=S(a,t,r);if(e)R(A.fileShare.container,t,r,a);else if("inspector"==An)for(j in Bt){const e=++j,A=document.getElementById(Bt[e].fileShare.container);if(A){R(Bt[e].fileShare.container,t,r,a);break}}else document.body.appendChild(s)}catch(e){webrtcdev.error("[filehsaring dommodifier ] displayFile  has a problem ",e)}}function I(e){const A=document.getElementById(e);for(let t in Bt)if(A.getAttribute("lastClickedBy")===Bt[t].userid)return void A.setAttribute("lastClickedBy","");""==A.getAttribute("lastClickedBy")&&(A.setAttribute("lastClickedBy",lt.userid),lt.send({type:"buttonclick",buttonName:e}))}function N(e,A,t,r,a,s,d){webrtcdev.log(" [filehsaring js]  - show/hide elementDisplay ",A),webrtcdev.log(" [filehsaring js]  - show/hide button ",r," || ",d),1==d%2?(R(A,t,r,a),s.innerHTML="<i class=\"fa fa-eye-slash\"></i>",webrtcdev.log(" [filehsaring js]  Executed script to show the file")):0==d%2&&(L(A,r),s.innerHTML="<i class=\"fa fa-eye\"></i>",webrtcdev.log(" [filehsaring js]  Executed script to hide the file "))}function R(e,A,t,r){webrtcdev.log("[filehsaring js]  showFile container - ",e,document.getElementById(e));const a=S(r,A,t);webrtcdev.log("[filehsaring js]  showFile  filedom - ",a),g(e)?(document.getElementById(e).innerHTML="",c(e),document.getElementById(e).appendChild(a)):webrtcdev.warn(" [filehsaring js] cant show file as parent DOM fir fileDisplay container doesnt exist ")}function L(e){webrtcdev.log("[filehsaring js]  hidefile ",e),g(e)?(document.getElementById(e).innerHTML="",B(e),webrtcdev.log("[filehsaring js] hidefile done")):webrtcdev.warn(" [filehsaring js]  file is not displayed to hide  ")}function M(e){webrtcdev.log("[filehsaring js]  removeFile ",e),document.getElementById(e).remove()}function D(e,A,t,r,a){if(webrtcdev.log(" downloadButton _filename ",r,"  filetype ",a),"sessionRecording"==a){const e=document.createElement("a");document.body.appendChild(e),e.style="display: none",e.href=t.audiofileurl,e.download=peerinfo.filearray[0]+".wav",e.click(),window.URL.revokeObjectURL(t.audiofileurl);const A=document.createElement("a");document.body.appendChild(A),A.style="display: none",A.href=t.videofileurl,A.download=peerinfo.filearray[1]+".webm",A.click(),window.URL.revokeObjectURL(t.videofileurl)}else{const e=document.createElement("a");document.body.appendChild(e),e.style="display: none",e.href=t,e.download=r,e.click(),window.URL.revokeObjectURL(t)}}function O(e,A,t){try{if(webrtcdev.log(" [ filehsreing js ]  createFileSharingBox ",e,A),document.getElementById(e.fileShare.outerbox))return;const r=document.createElement("div");r.className="single"==t?"col-md-12 fileviewing-box":"col-md-6 fileviewing-box",r.id=e.fileShare.outerbox;let a=document.createElement("p"),s,d;if(a.id=e.fileShare.container+"controlBar","single"!=t&&a.appendChild(document.createTextNode(e.name)),"none"!=xt.fileshare.minicon){if(s=document.createElement("span"),xt.fileshare.minicon){let e=xt.fileshare.minicon;webrtcdev.log(" [fileShare JS ] creating custom minicon",e);let A=document.createElement("img");A.src=e,s.appendChild(A)}else{"<i class=\"fa fa-minus-square\"></i>".innerHTML="<i class=\"fa fa-minus-square\"></i>",webrtcdev.log(" [fileShare JS ] creating default minicon ","<i class=\"fa fa-minus-square\"></i>")}s.id=e.fileShare.minButton,s.title="Minimize",s.style.display="none",s.setAttribute("lastClickedBy",""),s.onclick=function(){G(e.userid,s.id,e.fileShare.outerbox),B(s),c(d),s.setAttribute("lastClickedBy",e.userid)},a.appendChild(s)}else webrtcdev.warn(" [fileShare JS ] minicon is none");if("none"!=xt.fileshare.maxicon){if(d=document.createElement("span"),xt.fileshare.maxicon){let e=xt.fileshare.maxicon;webrtcdev.log(" [fileShare JS ] creating custom maxicon",e);let A=document.createElement("img");A.src=e,d.appendChild(A)}else{d.innerHTML="<i class=\"fa fa-external-link-square\"></i>",webrtcdev.log(" [fileShare JS ] creating default maxicon","<i class=\"fa fa-external-link-square\"></i>")}d.id=e.fileShare.maxButton,d.title="Maximize",d.style.display="block",d.setAttribute("lastClickedBy",""),d.onclick=function(){for(x in J(e.userid,d.id,e.fileShare.outerbox),Bt)Bt[x].fileShare.outerbox!=e.fileShare.outerbox&&X(Bt[x].userid,d.id,Bt[x].fileShare.outerbox);B(d),c(s),d.setAttribute("lastClickedBy",e.userid)},a.appendChild(d)}else webrtcdev.warn(" [fileShare JS ] maxicon is none");let l=document.createElement("span");if(xt.fileshare.closeicon){let e=document.createElement("img");e.src=xt.fileshare.closeicon,l.appendChild(e)}else l.innerHTML="<i class=\"fa fa-times-circle\"></i>";l.id=e.fileShare.closeButton,l.title="Close",l.setAttribute("lastClickedBy",""),l.onclick=function(){z(e.userid,l.id,e.fileShare.container)},a.appendChild(l);let g=0;let u=document.createElement("span");if(xt.fileshare.rotateicon){let e=document.createElement("img");e.src=xt.fileshare.rotateicon,u.appendChild(e)}else u.innerHTML="<i class=\"fa fa-mail-forward\"></i>";u.id=e.fileShare.rotateButton,u.title="Rotate",u.onclick=function(){let A=document.getElementById(e.fileShare.container),t=A.firstChild;webrtcdev.log(" [filehsraing ] rotateButton dom ",t,t.nodeName,"dom parent ",A),g=(g+90)%360,t.setAttribute("angle",g),t?"VIDEO"==t.nodeName?k(t,A):"IMG"==t.nodeName?_(t,A):"IFRAME"==t.nodeName?K(t,A):t.setAttribute("orientation",""):webrtcdev.error(" [filehsraing ] rotateButton  , dom doesnt exist")},a.appendChild(u);let m=document.createElement("div");if(m.className="filesharingWidget-"+t,m.id=e.fileShare.container,Mt){let e=document.createElement("span");e.innerHTML="<br/>"+m.id+"<br/>",r.appendChild(e)}r.appendChild(a),r.appendChild(m),A.appendChild(r)}catch(A){webrtcdev.error(" createFileSharingBox ",A)}}function k(e,A){const t=e.getAttribute("angle")||0;e.videoWidth>e.videoHeight?(e.setAttribute("style","height:"+A.clientWidth+"px;margin-left: 0px"),orientation="landscape"):orientation="portrait",e.setAttribute("orientation",orientation),e.className="col rotate"+t+e.getAttribute("orientation")}function K(e,A){const t=e.getAttribute("angle")||0;e.setAttribute("style","height:"+A.clientWidth+"px !important;width:100%"),e.setAttribute("orientation","portrait"),e.className="col rotate"+t+e.getAttribute("orientation")}function _(e){let A;const t=e.getAttribute("angle")||0;A=e.width>e.height?"landscape":"portrait",e.setAttribute("orientation",A),e.className="col rotate"+t+e.getAttribute("orientation")}function P(e,A,t){try{if(d(e.fileList.outerbox))return;const r=document.createElement("div");r.className="single"==t?"col-sm-12 filesharing-box":"col-sm-6 filesharing-box",r.id=e.fileList.outerbox;let a=document.createElement("div");a.id="widget-filelisting-container-header",a.setAttribute("style","background-color:"+e.color),"single"!=t&&a.appendChild(document.createTextNode(e.name+"     "));let s,l;"none"!=xt.filelist.minicon&&(s=document.createElement("span"),s.innerHTML="<i class=\"fa fa-minus\" ></i>",s.id=e.fileShare.minButton,s.setAttribute("lastClickedBy",""),s.onclick=function(){X(e.userid,s.id,e.fileList.container),B(s),c(l)},a.appendChild(s)),"none"!=xt.filelist.maxicon&&(l=document.createElement("span"),l.innerHTML="<i class=\"fa fa-plus\" ></i>",l.id=e.fileShare.maxButton,l.setAttribute("lastClickedBy",""),l.onclick=function(){J(e.userid,l.id,e.fileList.container),B(l),c(s)},a.appendChild(l),B(l));const g=document.createElement("div");g.id=e.fileList.container;let u=document.createElement("div");if(Mt){let e=document.createElement("span");e.innerHTML=g.id,r.appendChild(e)}r.appendChild(a),r.appendChild(g),r.appendChild(u),A.appendChild(r)}catch(e){webrtcdev.error("[filesharing dom modifier] createFileListingBox ",e)}}function V(e){if(webrtcdev.log("[filesharing dommodifier] createFileSharingDiv for - ",e),"inspector"!=e.role||"inspector"==An){if(!d(e.fileShare.outerbox)){let A=d(xt.fileShareContainer);O(e,A,xt.props.fileShare)}if(!d(e.fileList.outerbox)){let A=d(xt.fileListContainer);P(e,A,xt.props.fileList)}}}function z(e,A,t){d(t).innerHTML=""}function G(){for(x in Bt)c(Bt[x].fileShare.outerbox),document.getElementById(Bt[x].fileShare.outerbox).className="col-md-6 fileviewing-box"}function X(e,A,t){B(t),document.getElementById(t).className="col-md-6 fileviewing-box"}function J(e,A,t){c(t),document.getElementById(t).className="col-md-12 fileviewing-box"}function Y(e){webrtcdev.log(" create Modal popup for filetype ",e);const A=d("mainDiv");d("saveModal")&&A.removeChild(document.getElementById("saveModal"));const t=document.createElement("div");t.className="modal fade",t.setAttribute("role","dialog"),t.id="saveModal";const r=document.createElement("div");r.className="modal-dialog";const a=document.createElement("div");a.className="modal-content";const s=document.createElement("div");s.className="modal-header";const l=document.createElement("button");l.className="close",l.setAttribute("data-dismiss","modal"),l.innerHTML="&times;";const c=document.createElement("h4");c.className="modal-title",c.innerHTML="Save File",c.setAttribute("float","left"),s.appendChild(c),s.appendChild(l);const B=document.createElement("div");B.className="modal-body",B.innerHTML="";const g=document.createElement("div");let u;switch(e){case"blobcanvas":c.innerHTML="Save Drawing",u=document.createElement("div"),u.innerHTML="Right Click on Save, pop up window gives following info: Right Click on Draw image, Click Save As when window opens up.",g.appendChild(u);break;case"application/pdf":c.innerHTML="Save PDF",u=document.createElement("div"),u.innerHTML="Click DOWNLOAD on top of the doc . Click SAVE AS when window opens up";const A=document.createElement("img");A.src="images/savefile.PNG",g.appendChild(u),g.appendChild(A);break;case"image/jpeg":case"image/png":case"video/mov":case"video/webm":case"imagesnapshot":c.innerHTML="Save Picture / Video",u=document.createElement("div"),u.innerHTML="Right Click on the FILE . Click SAVE AS when window opens up",g.appendChild(u);break;case"audio/mp3":c.innerHTML="Save Music File",u=document.createElement("div"),u.innerHTML="Right Click on the FILE (play display line). Click SAVE AS when window opens up",g.appendChild(u);break;case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":case"application/vnd.ms-excel":case"application/vnd.openxmlformats-officedocument.presentationml.presentation":case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":case"video/x-ms-wmv":c.innerHTML="Save Microsoft Office / Libra / Open Office Documents",u=document.createElement("div"),u.innerHTML="Click bottom DOWNLOAD in Uploaded Files box . File shows up below the Uploaded Files box. Click arrow on right, then select OPEN  . File Opens in New Window, then 'Save As'.",g.appendChild(u);break;case"sessionRecording":c.innerHTML="Save Session Recording",u=document.createElement("div"),u.innerHTML="Extract the video and audio recording from the dowloaded compresed file and play together ",g.appendChild(u);break;default:u=document.createElement("div"),u.innerHTML="Document is Unrecognizable, cannot be saved, but can be shared with Remote. Use/Click Screen Share for Remote to view your screen. Then open the document on your screen.",g.appendChild(u);}B.appendChild(g),a.appendChild(s),a.appendChild(B),r.appendChild(a),t.appendChild(r),A.appendChild(t)}function W(e,A){let t=A.stream,r=A.streamid,a=A.controlBarName,s=A.fileSharingContainer;var d=e.parentNode;if(webrtcdev.log(" [media dom modifier] attachControlButtons to the parent Node of video  ",d),d){let e=d.childNodes;for(i in e){let A=e[i];"DIV"==A.nodeName&&A.id&&-1<A.id.indexOf("control")&&(webrtcdev.warn("[media dom modifier] control bar exists already, delete the previous one , before adding new one",A),d.removeChild(A))}}let l=document.createElement("div");if(l.id=a,l.className="local"==A.type?"localVideoControlBarClass":"remoteVideoControlBarClass",Mt){let A=document.createElement("div");A.innerHTML=e.id,l.appendChild(A)}if(Wt.active&&(Wt.audio.active&&l.appendChild(ee(Wt,a,A)),Wt.video.active&&l.appendChild(Ae(Wt,a,A))),_t.active&&l.appendChild(qe(a,A)),Pt.active&&l.appendChild(cA(Pt,a,A)),Yt.active&&l.appendChild(LA(a,A)),jt.active){l.appendChild(q(jt,a,A,r,t)),nameBoxid="#videoheaders"+A.userid;let e=document.querySelectorAll(nameBoxid);for(n in e)e[n].appendChild&&e[n].appendChild(Z(jt,a,A,r,t))}d.appendChild(l)}function q(e,A,t){let r=document.createElement("span");return r.id=A+"fullscreeButton",r.setAttribute("title","Full Screen"),r.className=e.max.button.class_off,r.innerHTML=e.max.button.html_off,r.onclick=function(){if(r.className==e.max.button.class_off){let A=document.getElementById(t.videoContainer);A.webkitRequestFullScreen(),r.className=e.max.button.class_on,r.innerHTML=e.max.button.html_on}else r.className=e.max.button.class_off,r.innerHTML=e.max.button.html_off},r}function Z(e,A,t){var r=document.createElement("span");r.id=A+"minmizevideoButton",r.setAttribute("title","Minimize Video"),r.className=e.min.button.class_off,r.innerHTML=e.min.button.html_off;var a=document.getElementById(t.videoContainer);return r.onclick=function(){r.className==e.min.button.class_off?(B(a),r.className=e.min.button.class_on,r.innerHTML=e.min.button.html_on):(c(a),r.className=e.min.button.class_off,r.innerHTML=e.min.button.html_off)},webrtcdev.log("[_media_dommodifier ] createMinimizeVideoButton - button",r," vid ",a),r}function ee(e,A,t){let r=document.createElement("span");return r.id=A+"audioButton",r.setAttribute("data-val","mute"),r.setAttribute("title","Toggle Audio"),r.className=e.audio.button.class_on,r.innerHTML=e.audio.button.html_on,r.onclick=function(){r.className==e.audio.button.class_on?(t.stream.mute({audio:!0}),r.className=e.audio.button.class_off,r.innerHTML=e.audio.button.html_off):(t.stream.unmute({audio:!0}),lt.streamEvents.selectFirst("local").mediaElement.muted=!0,r.className=e.audio.button.class_on,r.innerHTML=e.audio.button.html_on),I(r.id)},r}function Ae(e,A,t){let r=document.createElement("span");return r.id=A+"videoButton",r.setAttribute("title","Toggle Video"),r.setAttribute("data-container","body"),r.className=e.video.button.class_on,r.innerHTML=e.video.button.html_on,r.onclick=function(){r.className==e.video.button.class_on?(t.stream.mute({video:!0}),r.innerHTML=e.video.button.html_off,r.className=e.video.button.class_off):(t.stream.unmute({video:!0}),r.innerHTML=e.video.button.html_on,r.className=e.video.button.class_on),I(r.id)},r}function te(e,A){if(webrtcdev.log("[media_dommanager] attachUserDetails - ",A.userid,":",A.type," to video DOM ",e),0<e.parentNode.querySelectorAll(".videoHeaderClass").length)if(webrtcdev.warn("[media_dommanager] attachUserDetails - video header already present ",e.parentNode.querySelectorAll(".videoHeaderClass")),0<e.parentNode.querySelectorAll("videoheaders"+A.userid).length)return void webrtcdev.warn("[media_dommanager] user's video header already present ","videoheaders"+A.userid);else{webrtcdev.warn("[media_dommanager] attachUserDetails - video header already present for diff user , overwrite with ","videoheaders"+A.userid);let t=e.parentNode.querySelectorAll(".videoHeaderClass")[0];t.remove()}let t=document.createElement("div");t.className="videoHeaderClass",t.innerHTML=A.name,t.id="videoheaders"+A.userid,e.parentNode.insertBefore(t,e.parentNode.firstChild)}function ne(e,A){webrtcdev.log("[media_dommanager] attachMetaUserDetails - ",A.userid,":",A.type);let t=document.createElement("span");t.setAttribute("style","background-color:"+A.color),t.innerHTML=A.userid+":"+A.type+"<br/>",e.parentNode.insertBefore(t,e.parentNode.firstChild)}function re(e,A){if(e&&"undefined"!=e)if(document.getElementById("alertBox")){var t=document.createElement("div");t.className="warning"==A?"alert alert-warning fade in":"crtical"==A?"alert alert-crtical":"alert alert-success fade in",t.innerHTML="<a href=\"#\" class=\"close\" data-dismiss=\"alert\" aria-label=\"close\">&times;</a>"+e,document.getElementById("alertBox").hidden=!1,document.getElementById("alertBox").appendChild(t),setTimeout(function(){document.getElementById("alertBox").hidden=!0},3e3)}else alert(e)}function ae(e){if(e&&"undefined"!=e&&Mt)if(document.getElementById("alertBox")){var A=document.createElement("div");A.className="alert alert-warning fade in",A.innerHTML="<a href=\"#\" class=\"close\" data-dismiss=\"alert\" aria-label=\"close\">&times;</a>"+e,document.getElementById("alertBox").hidden=!1,document.getElementById("alertBox").innerHTML="",document.getElementById("alertBox").appendChild(A),setTimeout(function(){document.getElementById("alertBox").hidden=!0},3e3)}else alert(e)}function oe(){if(typeof Notification!=null)try{Notification.requestPermission().then(function(e){webrtcdev.log("[notify.js] notification requestPermission ",e)})}catch(e){webrtcdev.error("[notify.js] notification requestPermission ",e)}}function ie(e){webrtcdev.log("[screenshare dommodifier] create ScreenshareButton ",e),ln=document.createElement("span"),ln.className=e.button.shareButton.class_off,ln.innerHTML=e.button.shareButton.html_off,ln.id="screenShareButton",ln.onclick=function(){if(ln.className==e.button.shareButton.class_off){let A=new Date().getUTCMilliseconds();un="screenshare_"+Ut+"_"+A,Ne(un),ln.className=e.button.shareButton.class_on,ln.innerHTML=e.button.shareButton.html_on}else ln.className==e.button.shareButton.class_on?(ln.className=e.button.shareButton.class_off,ln.innerHTML=e.button.shareButton.html_off,Le()):webrtcdev.log("[screenshare js] createScreenshareButton , classname is neither on nor off",ln.className)};let A=document.createElement("li");return A.appendChild(ln),d("topIconHolder_ul").appendChild(A),ln}function se(e){webrtcdev.log("assignScreenShareButton",e);let A=d(e.id);return A.onclick=function(){if(A.className==e.class_off){let t=new Date().getUTCMilliseconds();un="screenshare_"+Ut+"_"+t,Ne(un),A.className=e.class_on,A.innerHTML=e.html_on}else A.className==e.class_on?(A.className=e.class_off,A.innerHTML=e.html_off,Le()):webrtcdev.warn("[screenshare js] createScreenshareButton,classname neither on nor off",e.className)},A}function de(e,A){if(!d("alertBox"))alert(e);else if(d("alertBox").innerHTML="","screenshareBegin"==A){let e=document.createElement("div");De(),e.className="alert alert-info",e.innerHTML="<a href=\"#\" class=\"close\" data-dismiss=\"alert\" aria-label=\"close\">&times;</a>You have begun sharing screen , waiting for peer to view",d("alertBox").appendChild(e),setTimeout(function(){let e=document.createElement("div");De(),e.className="alert alert-danger",e.innerHTML="<a href=\"#\" class=\"close\" data-dismiss=\"alert\" aria-label=\"close\">&times;</a>Peer was not able to view screen , please retry",d("alertBox").appendChild(e)},2e4)}else if("screclass_offenshareStartedViewing"==A);else if("screenshareError"==A){let e=document.createElement("div");De(),e.className="alert alert-danger",e.innerHTML="<a href=\"#\" class=\"close\" data-dismiss=\"alert\" aria-label=\"close\">&times;</a>There was a error while sharing screen , please contact support ",d("alertBox").appendChild(e)}else;}function le(e){let A=document.getElementById(e.button.id);A.onclick=function(){A.className==e.button.class_on?(A.className=e.button.class_off,A.innerHTML=e.button.html_off,uA()):A.className==e.button.class_off&&(A.className=e.button.class_on,A.innerHTML=e.button.html_on,mA())}}function ce(){var e=document.createElement("span");e.className=Kt.button.class_off,e.innerHTML=Kt.button.html_off,e.onclick=function(){if(e.className==Kt.button.class_off){var A=document.body;recorder=ze(A,{type:"canvas",showMousePointer:!0});var t=document.createElement("canvas");t.id="screenrecordCanvas",t.setAttribute("style","z-index:-1");var r=t.getContext("2d");t.style.top=0,t.style.left=0,(document.body||document.documentElement).appendChild(t);var a=!1,s=!1;(function e(){return a?void html2canvas(elementToShare,{grabMouse:!0,onrendered:function(A){r.clearRect(0,0,t.width,t.height),r.drawImage(A,0,0,t.width,t.height);s||setTimeout(e,1)}}):setTimeout(e,500)})(),recorder=ze(t,{type:"canvas"}),e.className=Kt.button.class_on,e.innerHTML=Kt.button.html_on,recorder.startRecording(),s=!1,a=!0,setTimeout(function(){e.disabled=!1},500)}else e.className==Kt.button.class_on&&(e.className=Kt.button.class_off,e.innerHTML=Kt.button.html_off,isStoppedRecoridng=!0,recorder.stopRecording(function(){var e=document.getElementById("screenrecordCanvas");e.parentNode.removeChild(e);var A=recorder.getBlob(),t=document.createElement("video");t.src=Qn.createObjectURL(A),t.setAttribute("style","height: 100%; position: absolute; top:0;"),document.body.appendChild(t),t.controls=!0,t.play()}))};var A=document.createElement("li");A.appendChild(e),document.getElementById("topIconHolder_ul").appendChild(A)}function Be(e){if(webrtcdev.log("[chat dom modifier] create Chat Box ",e),!e)return;let A=document.createElement("div"),t=document.createElement("input");t.setAttribute("type","text"),t.className="form-control chatInputClass",t.id="chatInput",t.onkeypress=function(A){13==A.keyCode&&(eA(t.value),t.value="")};let r=document.createElement("span");r.className="btn btn-primary",r.innerHTML="Enter",r.onclick=function(){let e=document.getElementById("chatInput");eA(e.value),e.value=""};let a=document.createElement("div");a.className="whoTypingClass",a.id="whoTyping",A.appendChild(t),A.appendChild(r),A.appendChild(a),document.getElementById(e.container.id).appendChild(A);let s=document.createElement("div");s.className="chatMessagesClass",s.setAttribute("contenteditable",!0),s.id=e.chatBox.id,document.getElementById(e.container.id).appendChild(s)}function ge(e){var A=document.getElementById(e.inputBox.text_id);if(webrtcdev.log(" chchatInputat ",A),!A||null==A)return void webrtcdev.warn("[chatdom modifier ] chatinput not defiend - ",e.inputBox.text_id);if(A.onkeypress=function(t){if(13==t.keyCode){var e=Gn(ct);webrtcdev.log(" chat ",ct,e),eA(A.value,e),A.value=""}},document.getElementById(e.inputBox.sendbutton_id)){let A=document.getElementById(e.inputBox.sendbutton_id);A.onclick=function(){var A=Gn(ct),t=document.getElementById(e.inputBox.text_id);eA(t.value,A),t.value=""}}if(document.getElementById(e.inputBox.minbutton_id)){var t=document.getElementById(e.inputBox.minbutton_id);t.onclick=function(){document.getElementById(e.container.id).hidden?c(e.container.id):B(e.container.id)}}}function ue(e){document.getElementById("whoTyping").innerHTML=e}function me(e){document.getElementById(e.button.id)?document.getElementById(e.button.id).click():webrtcdev.error("[draw dom modifier] Received sync board event but no button id found")}function pe(e){let A=document.createElement("span");A.className=e.button.class_off,A.innerHTML=e.button.html_off,A.onclick=()=>{if(A.className==e.button.class_off){A.className=e.button.class_on,A.innerHTML=e.button.html_on,c(e.drawCanvasContainer);let t={event:"open",from:"remote",board:e.drawCanvasContainer,button:e.button};lt.send({type:"canvas",board:t}),vA(e)}else A.className==e.button.class_on&&(A.className=e.button.class_off,A.innerHTML=e.button.html_off,B(e.drawCanvasContainer))};var t=document.createElement("li");t.appendChild(A),document.getElementById("topIconHolder_ul").appendChild(t)}function we(e){webrtcdev.log("[draw] dom modifier] drawCanvasobj ",e);let A=document.getElementById(e.button.id);A.className=e.button.class_off,A.innerHTML=e.button.html_off,A.onclick=function(){A.className==e.button.class_off?(c(e.drawCanvasContainer),webrtcdev.log("[draw dom modifier] Draw Board Opened "),A.className=e.button.class_on,A.innerHTML=e.button.html_on,FA()):A.className==e.button.class_on&&(webrtcdev.log("[draw dom modifier] Draw Board Closed "),B(e.drawCanvasContainer),A.className=e.button.class_off,A.innerHTML=e.button.html_off,bA())}}function he(e){if(e.container.minbutton_id&&d(e.container.minbutton_id)){var A=d(e.container.minbutton_id);A.onclick=function(){d(e.container.id).hidden=!d(e.container.id).hidden}}}function fe(){webrtcdev.log("[timerjs] startForwardTimer");var e=Vn,A=Pn,t=parseInt(e.innerHTML,10),r=parseInt(A.innerHTML,10);Qe(e,t,A,r)}function Ce(){webrtcdev.log("[timerjs] startBackwardTimer",_n,Pn,Vn);let e=Vn,A=Pn,t=parseInt(e.innerHTML,10),r=parseInt(A.innerHTML,10);Ue(e,t,A,r)}function Qe(e,A,t,r){setInterval(function(){A++,Vn.innerHTML=A,60==A&&(A=0,r++,Pn.innerHTML=r)},1e3)}function Ue(e,A,t,r){var a=setInterval(function(){A--,Vn.innerHTML=A,0==A&&(A=60,r--,Pn.innerHTML=r,0>r&&clearInterval(a))},1e3)}function Ee(){if(Dt.span.currentTimeZone&&l(Dt.span.currentTimeZone)){let e=l(Dt.span.currentTimeZone);e.innerHTML=JA()}else webrtcdev.error(" [timer js ] timerobj.span.currentTimeZone DOM doesnt exist ")}function Fe(e){if(0>=Dt.span.remoteTimeZone.length)return void webrtcdev.warn("[timer js] showRemoteTimeZone - no remoteTimeZone span found ");if(d("remoteTimeZone_"+e.userid))return void webrtcdev.warn("[timer js] showRemoteTimeZone - remoteTimeZone_"+e.userid," already exists , do not append Time zone");for(x in Dt.span.remoteTimeZone){let A=x+1;if(A>Bt.length)return;let t;Dt.span.remoteTimeZone[x]?(webrtcdev.info("[timer js] showRemoteTimeZone - timerobj.span.remoteTimeZone",Dt.span.remoteTimeZone[x]," exist for remote"),t=l(Dt.span.remoteTimeZone[x])):(webrtcdev.info("[timer js] showRemoteTimeZone - timerobj.span.remoteTimeZone getting created for local and remotes"),t=document.createElement("li")),t.id="remoteTimeZone_"+e.userid,t.innerHTML=e.zone+" , "}}function be(){try{if(Dt.span.currentTime&&l(Dt.span.currentTime)){let e=l(Dt.span.currentTime);e.innerHTML=new Date().toLocaleTimeString();setTimeout(be,1e3)}else webrtcdev.error("[timer js ] startTime - No place for timerobj.span.currentTime_id")}catch(e){webrtcdev.error("[timer js ]",e)}}function ve(e){let A=document.createElement("ul");A.id="remoteTimerArea_"+e;let t=Gn(e);if(d(t.videoContainer)){let e=d(t.videoContainer).parentNode;return e.appendChild(A),A}return null}function ye(e){if(0>=Dt.span.remoteTime.length)return void webrtcdev.warn("[timer js] showRemoteTimeZone - no remoteTimeZone span found ");let A={hour:"numeric",minute:"numeric",second:"numeric",hour12:!1,timeZone:e.zone},t;if(Dt.span.remoteTime[x])webrtcdev.info(" [timer js] startPeersTime - timerobj.span.remoteTime dom ",Dt.span.remoteTime[x]," exist for remotes"),t=l(Dt.span.remoteTime[x]),t.id="remoteTime_"+e.userid,t.innerHTML=new Date().toLocaleString("en-US",A);else{if(webrtcdev.info(" timerobj.span.remoteTime - timerobj.span.remoteTime dom  ",Dt.span.remoteTime[x]," does not exist, creating it"),d("remoteTimeDate_"+e.userid))return;t=document.createElement("span"),t.id="remoteTime_"+e.userid,t.innerHTML=new Date().toLocaleString("en-US",A);var r;r=d("remoteTimerArea_"+e.userid)?d("remoteTimerArea_"+e.userid):ve(e.userid),r.appendChild(t)}}function He(){getWebrtcdevStats.then(e=>{lt.send({type:"stats",message:e})})}function Se(e,A){webrtcdev.info("[stats] getWebrtcdevStats - remote userid ",e,A)}function Te(){webrtcdev.info("[stats] codec Audio ",lt.codecs.audio),webrtcdev.info("[stats] Codec Video ",lt.codecs.video)}function Ie(e){return localStorage.setItem("screenRoomid ",e),webrtcdev.log("[screenshare JS] webrtcdevPrepareScreenShare - screenRoomid : ",e),webrtcdev.log("[screenshare JS] webrtcdevPrepareScreenShare - filling up iceServers : ",Et),cn=new RTCMultiConnection,cn.channel=e,cn.socketURL=Ft.signaller,cn.session={screen:!0,oneway:!0},cn.sdpConstraints.mandatory={OfferToReceiveAudio:!1,OfferToReceiveVideo:!0},cn.iceServers=bt.iceServers,cn.mediaConstraints={audio:!1,video:{frameRate:20,height:240,width:320}},cn.onMediaError=function(e,A){webrtcdev.error("[screenshareJS] on stream in _screenshare :",e,A),ae(e.name)},cn.onstream=function(A){if(webrtcdev.log("[screenshareJS] on stream in _screenshare :",A),Mt){let A=document.createElement("span");A.innerHTML="<br/>"+e+"<br/>",d(Zt.screenshareContainer).appendChild(A)}if("remote"==A.type&&"local"!=A.type){ae("started streaming remote's screen"),webrtcdev.log("[screensharejs] on stream remote "),A.stream.streamid?(webrtcdev.log("[screensharejs] remote screen event.stream.streamId "+A.stream.streamId),gn=A.stream.streamid):A.streamid&&(webrtcdev.log("[screensharejs] remote screen event.streamid "+A.streamid),gn=A.streamid);let t=document.getElementById(Zt.screenshareContainer).querySelectorAll("video");for(x in t)t[x].playing||(t[x].hidden=!0);let r=document.createElement("video");r.muted=!0,r.id="video_"+e;let a=A.stream;sA(r,a).then(()=>{d(Zt.screenshareContainer).appendChild(r)}),c(Zt.screenshareContainer),lt.send({type:"screenshare",screenid:e,message:"screenshareStartedViewing"})}else ae("started streaming local screen"),webrtcdev.log("[screenshareJS] on stream local "),lt.send({type:"screenshare",screenid:e,screenStreamid:gn,message:"startscreenshare"});window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"screenshare",action:"onScreenShareStarted"}}))},cn.onstreamended=function(e){e&&webrtcdev.log("[screenshare JS] onstreamended -",e);let A=Zt.button.shareButton.id;A&&document.getElementById(A)&&(document.getElementById(A).className=Zt.button.shareButton.class_off,document.getElementById(A).innerHTML=Zt.button.shareButton.html_off),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"screenshare",action:"onScreenShareEnded"}}))},cn.onopen=function(){webrtcdev.log("[screensharejs] scrConn onopen - ",cn.connectionType)},cn.onerror=function(e){webrtcdev.error("[screensharejs] scrConn error - ",e)},cn.onEntireSessionClosed=function(e){webrtcdev.log("[screensharejs] scrConn onEntireSessionClosed - ",e)},cn.socketMessageEvent="scrRTCMultiConnection-Message",cn.socketCustomEvent="scrRTCMultiConnection-Custom-Message",cn}function Ne(e){return webrtcdev.log("[screenshareJS] webrtcdevSharescreen, preparing screenshare by initiating ScrConn , scrroomid - ",e),new Promise(A=>{cn=Ie(e),A(e)}).then(function(e){socket?(webrtcdev.log("[screenshare JS] open-channel-screenshare on - ",socket.io.uri),socket.emit("open-channel-screenshare",{channel:e,sender:ct,maxAllowed:100}),re("Making a new session for screenshare"+e)):webrtcdev.error("[screenshare JS] parent socket doesnt exist "),socket.on("open-channel-screenshare-resp",function(A){webrtcdev.log("[screenshare JS] open-channel-screenshare-response -",A),A.status&&A.channel==e&&cn.open(e,function(){webrtcdev.log("[screenshare JS] webrtcdevSharescreen, opened up room for screen share ")})})})}function Re(e,A){return webrtcdev.log("[screenshareJS] connectScrWebRTC, first preparing screenshare by initiating ScrConn , scrroomid - ",A),new Promise(e=>{Ie(A),e(A)}).then(function(A){webrtcdev.log("[screenshare JS] connectScrWebRTC -> ",e,A),"join"==e?(cn.join(A),re("Connected with existing Screenshare channel "+A)):(re("Connection type not found for Screenshare "),webrtcdev.error("[screenshare JS] connectScrWebRTC - Connection type not found for Screenshare "))})}function Le(){try{lt.send({type:"screenshare",message:"stoppedscreenshare"}),cn.closeEntireSession(),webrtcdev.log("[screenshare JS] Sender stopped: screenRoomid ",un,"| Screen stopped ",cn,"| container ",d(Zt.screenshareContainer)),Bn&&(Bn.stop(),Bn=null);let e=cn.streamEvents.selectFirst();e&&(webrtcdev.error("[screensharejs] webrtcdevStopShareScreen - stoppping the stream"),e.stream.getTracks().forEach(e=>e.stop())),Me()}catch(e){webrtcdev.error("[screensharejs] webrtcdevStopShareScreen - ",e)}}function Me(e){try{cn.onstreamended(),cn.removeStream(e),cn.close(),cn=null;let A=document.getElementById(Zt.screenshareContainer).querySelectorAll("video");for(x in A)A[x].playing||(A[x].hidden=!0);Zt.screenshareContainer&&d(Zt.screenshareContainer)&&(d(Zt.screenshareContainer).innerHTML="")}catch(e){webrtcdev.error("[screensharejs] webrtcdevStopShareScreen - ",e)}}function De(){d("alertBox").hidden=!1,d("alertBox").innerHTML=""}function Oe(e){if(!e)throw"MediaStream is mandatory.";this.start=function(t){var r=mn?window.StereoRecorder:window.MediaRecorderWrapper;-1!=this.mimeType.indexOf("video")&&(r=mn?window.WhammyRecorder:window.MediaRecorderWrapper),"image/gif"===this.mimeType&&(r=window.GifRecorder),A=new r(e),A.ondataavailable=this.ondataavailable,A.onstop=this.onstop,A.onStartedDrawingNonBlankFrames=this.onStartedDrawingNonBlankFrames,A=ke(A,this),A.start(t)},this.onStartedDrawingNonBlankFrames=function(){},this.clearOldRecordedFrames=function(){A&&A.clearOldRecordedFrames()},this.stop=function(){A&&A.stop()},this.ondataavailable=function(e){webrtcdev.log("ondataavailable..",e)},this.onstop=function(e){webrtcdev.warn("stopped..",e)};var A}function r(e,A){var t=window.MediaStreamRecorderScriptsDir,a=document.createElement("script");a.src=t+e,a.onload=A||function(){},document.documentElement.appendChild(a)}function ke(e,A){for(var r in A=xe(A),A)"function"!=typeof A[r]&&(e[r]=A[r]);return e}function xe(e){var A={};for(var t in e)if(-1!=t.indexOf("-")){var r=t.split("-"),a=r[0]+r[1].split("")[0].toUpperCase()+r[1].substr(1);A[a]=e[t]}else A[t]=e[t];return A}function Ke(e,A){function r(e,A){for(var t=e.length+A.length,r=new Float32Array(t),a=0,s=0;s<t;)r[s++]=e[a],r[s++]=A[a],a++;return r}function a(e,A){for(var t=new Float32Array(A),r=0,a=e.length,s=0,d;s<a;s++)d=e[s],t.set(d,r),r+=d.length;return t}function s(e,A,t){for(var r=t.length,a=0;a<r;a++)e.setUint8(A+a,t.charCodeAt(a))}var d=[],l=[],c=!1,B=0,g=44100,u=A.mono?1:2,m,p,w,h,C;this.record=function(){c=!0,d.length=l.length=0,B=0},this.requestData=function(){if(0==B)return void(U=!1);U=!0;var e=d.slice(0),c=l.slice(0),m=B;d.length=l.length=[],B=0,U=!1;var p=a(e,m),w=a(e,m);if(2===u)var h=r(p,w);else var h=p;var C=new ArrayBuffer(44+2*h.length),Q=new DataView(C);s(Q,0,"RIFF"),Q.setUint32(4,44+2*h.length,!0),s(Q,8,"WAVE"),s(Q,12,"fmt "),Q.setUint32(16,16,!0),Q.setUint16(20,1,!0),Q.setUint16(22,u,!0),Q.setUint32(24,g,!0),Q.setUint32(28,4*g,!0),Q.setUint16(32,2*u,!0),Q.setUint16(34,16,!0),s(Q,36,"data"),Q.setUint32(40,2*h.length,!0);for(var E=h.length,F=44,b=0;b<E;b++)Q.setInt16(F,h[b]*(32767*1),!0),F+=2;var H=new Blob([Q],{type:"audio/wav"});webrtcdev.debug("audio recorded blob size:",t(H.size)),A.ondataavailable(H)},this.stop=function(){c=!1,this.requestData()};var h=pn.AudioContext;pn.AudioContextConstructor||(pn.AudioContextConstructor=new h);var C=pn.AudioContextConstructor;pn.VolumeGainNode||(pn.VolumeGainNode=C.createGain());var p=pn.VolumeGainNode;pn.AudioInput||(pn.AudioInput=C.createMediaStreamSource(e));var w=pn.AudioInput;w.connect(p);var Q=A.bufferSize||2048;if(0==A.bufferSize&&(Q=0),C.createJavaScriptNode)m=C.createJavaScriptNode(Q,u,u);else if(C.createScriptProcessor)m=C.createScriptProcessor(Q,u,u);else throw"WebAudio API has no support on this browser.";Q=m.bufferSize,webrtcdev.debug("using audio buffer-size:",Q);var U=!1;window.scriptprocessornode=m,1==u&&webrtcdev.debug("It seems mono audio. All right-channels are skipped."),m.onaudioprocess=function(A){if(c&&!U){var e=A.inputBuffer.getChannelData(0);if(d.push(new Float32Array(e)),2==u){var t=A.inputBuffer.getChannelData(1);l.push(new Float32Array(t))}B+=Q}},p.connect(m),m.connect(C.destination)}function _e(e,A){function r(){if(!B){if(d)return setTimeout(r,100);var e=new Date().getTime()-w;return e?void(w=new Date().getTime(),u.drawImage(p,0,0,g.width,g.height),!B&&l.push({duration:e,image:g.toDataURL("image/webp")}),!c&&!a(l[l.length-1])&&(c=!0,A.onStartedDrawingNonBlankFrames()),setTimeout(r,10)):r()}}function a(e,A,t){var r=document.createElement("canvas");r.width=g.width,r.height=g.height;var a=r.getContext("2d"),s={r:0,g:0,b:0},d=st(tt(255,2)+tt(255,2)+tt(255,2)),l=A&&0<=A&&1>=A?A:0,c=t&&0<=t&&1>=t?t:0,B=new Image,u,m,p;B.src=e.image,a.drawImage(B,0,0,g.width,g.height);var w=a.getImageData(0,0,g.width,g.height);u=0,m=w.data.length,p=w.data.length/4;for(var h=0;h<m;h+=4){var C={r:w.data[h],g:w.data[h+1],b:w.data[h+2]},Q=st(tt(C.r-s.r,2)+tt(C.g-s.g,2)+tt(C.b-s.b,2));Q<=d*l&&u++}return!(p-u<=p*c)}function s(e,A,t,r){var a=document.createElement("canvas");a.width=g.width,a.height=g.height;for(var s=a.getContext("2d"),d=[],l=A&&0<A&&A<=e.length?A:e.length,c={r:0,g:0,b:0},B=st(tt(255,2)+tt(255,2)+tt(255,2)),u=t&&0<=t&&1>=t?t:0,m=r&&0<=r&&1>=r?r:0,p=!1,w=0;w<l;w++){var h,C,Q;if(!p){var U=new Image;U.src=e[w].image,s.drawImage(U,0,0,g.width,g.height);var E=s.getImageData(0,0,g.width,g.height);h=0,C=E.data.length,Q=E.data.length/4;for(var F=0;F<C;F+=4){var b={r:E.data[F],g:E.data[F+1],b:E.data[F+2]},H=st(tt(b.r-c.r,2)+tt(b.g-c.g,2)+tt(b.b-c.b,2));H<=B*u&&h++}}!p&&Q-h<=Q*m||(-1===A&&(p=!0),d.push(e[w]))}return d=d.concat(e.slice(l)),0>=d.length&&d.push(e[e.length-1]),d}this.record=function(){this.width||(this.width=320),this.height||(this.height=240),this.video&&this.video instanceof HTMLVideoElement&&(!this.width&&(this.width=p.videoWidth||320),!this.height&&(this.height=p.videoHeight||240)),this.video||(this.video={width:this.width,height:this.height}),this.canvas||(this.canvas={width:this.width,height:this.height}),g.width=this.canvas.width,g.height=this.canvas.height,this.video&&this.video instanceof HTMLVideoElement?p=this.video.cloneNode():(p=document.createElement("video"),p.src=Qn.createObjectURL(e),p.width=this.video.width,p.height=this.video.height),p.muted=!0,p.play(),w=new Date().getTime(),h=new wn.Video,webrtcdev.log("canvas resolutions",g.width,"*",g.height),webrtcdev.log("video width/height",p.width||g.width,"*",p.height||g.height),r()},this.clearOldRecordedFrames=function(){l=[]};var d=!1;this.requestData=function(){if(!l.length)return void(d=!1);d=!0;var e=l.slice(0);l=[],h.frames=s(e,-1);var r=h.compile();A.ondataavailable(r),webrtcdev.debug("video recorded blob size:",t(r.size)),d=!1};var l=[],c=!1,B=!1;this.stop=function(){B=!0,this.requestData()};var g=document.createElement("canvas"),u=g.getContext("2d"),m=this,p,w,h}function Pe(e){this.start=function(r){for(var a in r=r||1e3,A=new _e(e,this),this)"function"!=typeof this[a]&&(A[a]=this[a]);A.record(),t=setInterval(function(){A.requestData()},r)},this.stop=function(){A&&(A.stop(),clearTimeout(t))},this.clearOldRecordedFrames=function(){A&&A.clearOldRecordedFrames()},this.ondataavailable=function(){};var A,t}function Ve(e){function A(){Date.now();var e=new Blob([new Uint8Array(B.stream().bin)],{type:"image/gif"});t.ondataavailable(e),B.stream().bin=[]}if(!window.GIFEncoder)throw"Please link: https://cdn.webrtc-experiment.com/gif-recorder.js";this.start=function(e){function t(e){d=hn(t),typeof c===void 0&&(c=e);90>e-c||(a.drawImage(s,0,0,u,m),B.addFrame(a),c=e)}e=e||1e3;var u=this.videoWidth||320,m=this.videoHeight||240;r.width=s.width=u,r.height=s.height=m,B=new GIFEncoder,B.setRepeat(0),B.setDelay(this.frameRate||200),B.setQuality(this.quality||1),B.start(),l=Date.now(),d=hn(t),g=setTimeout(A,e)};this.stop=function(){d&&(fn(d),clearTimeout(g),A())},this.ondataavailable=function(){},this.onstop=function(){};var t=this,r=document.createElement("canvas"),a=r.getContext("2d"),s=document.createElement("video");s.muted=!0,s.autoplay=!0,s.src=Qn.createObjectURL(e),s.play();var d=null,l,c,B,g}function t(e){if(0===e)return"0 Bytes";var A=parseInt(at(nt(e)/nt(1000)),10);return(e/tt(1000,A)).toPrecision(3)+" "+["Bytes","KB","MB","GB","TB"][A]}function ze(e,A){function r(){return(A.disableLogs||webrtcdev.debug("started recording "+A.type+" stream."),w)?(w.clearRecordedData(),w.resume(),u.recordingDuration&&g(),u):(a(function(){u.recordingDuration&&g()}),u)}function a(t){t&&(A.initCallback=function(){t(),t=A.initCallback=null});var r=new Xe(e,A);w=new r(e,A),w.record(),A.disableLogs||webrtcdev.debug("Initialized recorderType:",w.constructor.name,"for output-type:",A.type)}function s(e){function r(r){for(var s in w)u&&(u[s]=w[s]),a&&(a[s]=w[s]);var d=w.blob;if(!d)if(r)w.blob=d=r;else throw"Recording failed.";if(e){var l=Qn.createObjectURL(d);e(l)}d&&!A.disableLogs&&webrtcdev.debug(d.type,"->",t(d.size)),A.autoWriteToDisk&&B(function(e){var t={};t[A.type+"Blob"]=e,yn.Store(t)})}if(!w)return webrtcdev.warn(m);var a=this;A.disableLogs||webrtcdev.warn("Stopped recording "+A.type+" stream."),"gif"===A.type?(w.stop(),r()):w.stop(r)}function d(){return w?void(w.pause(),!A.disableLogs&&webrtcdev.debug("Paused recording.")):webrtcdev.warn(m)}function l(){return w?void(w.resume(),!A.disableLogs&&webrtcdev.debug("Resumed recording.")):webrtcdev.warn(m)}function c(e){postMessage(new FileReaderSync().readAsDataURL(e))}function B(e,t){function r(e){var A=Qn.createObjectURL(new Blob([e.toString(),"this.onmessage =  function (e) {"+e.name+"(e.data);}"],{type:"application/javascript"})),t=new Worker(A);return Qn.revokeObjectURL(A),t}if(!e)throw"Pass a callback function over getDataURL.";var a=t?t.blob:(w||{}).blob;if(!a)return A.disableLogs||webrtcdev.warn("Blob encoder did not finish its job yet."),void setTimeout(function(){B(e,t)},1e3);if("undefined"!=typeof Worker&&!navigator.mozGetUserMedia){var s=r(c);s.onmessage=function(A){e(A.data)},s.postMessage(a)}else{var d=new FileReader;d.readAsDataURL(a),d.onload=function(A){e(A.target.result)}}}function g(){setTimeout(function(){s(u.onRecordingStopped)},u.recordingDuration)}if(!e)throw"MediaStream is mandatory.";A=A||{type:"video"},A=new Ge(e,A);var u=this,m="It seems that \"startRecording\" is not invoked for "+A.type+" recorder.",p={startRecording:r,stopRecording:s,pauseRecording:d,resumeRecording:l,initRecorder:a,setRecordingDuration:function(e,A){if("undefined"==typeof e)throw"milliseconds is required.";if("number"!=typeof e)throw"milliseconds must be a number.";return u.recordingDuration=e,u.onRecordingStopped=A||function(){},{onRecordingStopped:function(e){u.onRecordingStopped=e}}},clearRecordedData:function(){return w?void(w.clearRecordedData(),!A.disableLogs&&webrtcdev.debug("Cleared old recorded data.")):webrtcdev.warn(m)},getBlob:function(){return w?w.blob:webrtcdev.warn(m)},getDataURL:B,toURL:function(){return w?Qn.createObjectURL(w.blob):webrtcdev.warn(m)},save:function(e){return w?void Ye(w.blob,e):webrtcdev.warn(m)},getFromDisk:function(e){return w?void ze.getFromDisk(A.type,e):webrtcdev.warn(m)},setAdvertisementArray:function(e){A.advertisement=[];for(var t=e.length,r=0;r<t;r++)A.advertisement.push({duration:r,image:e[r]})},blob:null,bufferSize:0,sampleRate:0,buffer:null,view:null},w;if(!this)return u=p,p;for(var h in p)this[h]=p[h];return u=this,p}function Ge(e,A){return A.recorderType&&!A.type&&(A.recorderType===Pe||A.recorderType===je?A.type="video":A.recorderType===Ve?A.type="gif":A.recorderType===Ke?A.type="audio":A.recorderType===Oe&&(e.getAudioTracks().length&&e.getVideoTracks().length?A.type="video":e.getAudioTracks().length&&!e.getVideoTracks().length?A.type="audio":!e.getAudioTracks().length&&e.getVideoTracks().length&&(A.type="audio"))),"undefined"!=typeof Oe&&"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&(!A.mimeType&&(A.mimeType="video/webm"),!A.type&&(A.type=A.mimeType.split("/")[0]),!A.bitsPerSecond),A.type||(A.mimeType&&(A.type=A.mimeType.split("/")[0]),!A.type&&(A.type="audio")),A}function Xe(e,A){var t;return(Fn||Un||En)&&(t=Ke),"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&!Fn&&(t=Oe),"video"===A.type&&(Fn||En)&&(t=Pe),"gif"===A.type&&(t=Ve),"canvas"===A.type&&(t=je),We()&&t!==je&&t!==Ve&&"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&e.getVideoTracks().length&&(t=Oe),A.recorderType&&(t=A.recorderType),A.disableLogs||!t||!t.name||webrtcdev.debug("Using recorderType:",t.name||t.constructor.name),t}function Je(e){this.addStream=function(A){A&&(e=A)},this.mediaType={audio:!0,video:!0},this.startRecording=function(){var A=this.mediaType,t=this.mimeType||{audio:null,video:null,gif:null},r;if("function"!=typeof A.audio&&We()&&e.getAudioTracks&&!e.getAudioTracks().length&&(A.audio=!1),"function"!=typeof A.video&&We()&&e.getVideoTracks&&!e.getVideoTracks().length&&(A.video=!1),!A.audio&&!A.video)throw"MediaStream must have either audio or video tracks.";if(!A.audio||(r=null,"function"==typeof A.audio&&(r=A.audio),this.audioRecorder=new ze(e,{type:"audio",bufferSize:this.bufferSize,sampleRate:this.sampleRate,numberOfAudioChannels:this.numberOfAudioChannels||2,disableLogs:this.disableLogs,recorderType:r,mimeType:t.audio}),!A.video&&this.audioRecorder.startRecording()),!!A.video){r=null,"function"==typeof A.video&&(r=A.video);var a=e;if(We()&&!!A.audio&&"function"==typeof A.audio){var s=e.getVideoTracks()[0];navigator.mozGetUserMedia?(a=new bn,a.addTrack(s),r&&r===Pe&&(r=Oe)):a=new bn([s])}this.videoRecorder=new ze(a,{type:"video",video:this.video,canvas:this.canvas,frameInterval:this.frameInterval||10,disableLogs:this.disableLogs,recorderType:r,mimeType:t.video}),A.audio||this.videoRecorder.startRecording()}if(!!A.audio&&!!A.video){var d=this;We()?(d.audioRecorder=null,d.videoRecorder.startRecording()):d.videoRecorder.initRecorder(function(){d.audioRecorder.initRecorder(function(){d.videoRecorder.startRecording(),d.audioRecorder.startRecording()})})}!A.gif||(r=null,"function"==typeof A.gif&&(r=A.gif),this.gifRecorder=new ze(e,{type:"gif",frameRate:this.frameRate||200,quality:this.quality||10,disableLogs:this.disableLogs,recorderType:r,mimeType:t.gif}),this.gifRecorder.startRecording())},this.stopRecording=function(e){e=e||function(){},this.audioRecorder&&this.audioRecorder.stopRecording(function(A){e(A,"audio")}),this.videoRecorder&&this.videoRecorder.stopRecording(function(A){e(A,"video")}),this.gifRecorder&&this.gifRecorder.stopRecording(function(A){e(A,"gif")})},this.pauseRecording=function(){this.audioRecorder&&this.audioRecorder.pauseRecording(),this.videoRecorder&&this.videoRecorder.pauseRecording(),this.gifRecorder&&this.gifRecorder.pauseRecording()},this.resumeRecording=function(){this.audioRecorder&&this.audioRecorder.resumeRecording(),this.videoRecorder&&this.videoRecorder.resumeRecording(),this.gifRecorder&&this.gifRecorder.resumeRecording()},this.getBlob=function(e){var A={};return this.audioRecorder&&(A.audio=this.audioRecorder.getBlob()),this.videoRecorder&&(A.video=this.videoRecorder.getBlob()),this.gifRecorder&&(A.gif=this.gifRecorder.getBlob()),e&&e(A),A},this.getDataURL=function(e){function A(e,A){if("undefined"!=typeof Worker){var r=t(function(e){postMessage(new FileReaderSync().readAsDataURL(e))});r.onmessage=function(e){A(e.data)},r.postMessage(e)}else{var a=new FileReader;a.readAsDataURL(e),a.onload=function(e){A(e.target.result)}}}function t(e){var A=Qn.createObjectURL(new Blob([e.toString(),"this.onmessage =  function (e) {"+e.name+"(e.data);}"],{type:"application/javascript"})),t=new Worker(A),r;if("undefined"!=typeof Qn)r=Qn;else if("undefined"!=typeof webkitURL)r=webkitURL;else throw"Neither URL nor webkitURL detected.";return r.revokeObjectURL(A),t}this.getBlob(function(t){t.audio&&t.video?A(t.audio,function(r){A(t.video,function(A){e({audio:r,video:A})})}):t.audio?A(t.audio,function(A){e({audio:A})}):t.video&&A(t.video,function(A){e({video:A})})})},this.writeToDisk=function(){ze.writeToDisk({audio:this.audioRecorder,video:this.videoRecorder,gif:this.gifRecorder})},this.save=function(e){e=e||{audio:!0,video:!0,gif:!0},!!e.audio&&this.audioRecorder&&this.audioRecorder.save("string"==typeof e.audio?e.audio:""),!!e.video&&this.videoRecorder&&this.videoRecorder.save("string"==typeof e.video?e.video:""),!!e.gif&&this.gifRecorder&&this.gifRecorder.save("string"==typeof e.gif?e.gif:"")}}function t(e){if(0===e)return"0 Bytes";var A=parseInt(at(nt(e)/nt(1000)),10);return(e/tt(1000,A)).toPrecision(3)+" "+["Bytes","KB","MB","GB","TB"][A]}function Ye(e,A){if(!e)throw"Blob object is required.";if(!e.type)try{e.type="video/webm"}catch(A){}var t=(e.type||"video/webm").split("/")[1];if(A&&-1!==A.indexOf(".")){var r=A.split(".");A=r[0],t=r[1]}var a=(A||it(9999999999*Math.random())+888888888)+"."+t;if("undefined"!=typeof navigator.msSaveOrOpenBlob)return navigator.msSaveOrOpenBlob(e,a);if("undefined"!=typeof navigator.msSaveBlob)return navigator.msSaveBlob(e,a);var s=document.createElement("a");s.href=Qn.createObjectURL(e),s.target="_blank",s.download=a,!navigator.mozGetUserMedia||(s.onclick=function(){(document.body||document.documentElement).removeChild(s)},(document.body||document.documentElement).appendChild(s));var d=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});s.dispatchEvent(d),navigator.mozGetUserMedia||Qn.revokeObjectURL(s.href)}function We(){var e=!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),A=!!window.chrome&&!e,t="undefined"!=typeof window.InstallTrigger;if(t)return!0;var r=navigator.appVersion,a=navigator.userAgent,s=""+parseFloat(navigator.appVersion),d=parseInt(navigator.appVersion,10),l,c;return(A||e)&&(l=a.indexOf("Chrome"),s=a.substring(l+7)),-1!==(c=s.indexOf(";"))&&(s=s.substring(0,c)),-1!==(c=s.indexOf(" "))&&(s=s.substring(0,c)),d=parseInt(""+s,10),isNaN(d)&&(s=""+parseFloat(navigator.appVersion),d=parseInt(navigator.appVersion,10)),49<=d}function Oe(A,t){function r(){if("active"in A){if(!A.active)return!1;}else if("ended"in A&&A.ended)return!1;return!0}var a=this;if(t=t||{mimeType:"video/webm"},"audio"===t.type){if(A.getVideoTracks().length&&A.getAudioTracks().length){var s;navigator.mozGetUserMedia?(s=new bn,s.addTrack(A.getAudioTracks()[0])):s=new bn(A.getAudioTracks()),A=s}t.mimeType&&-1!==t.mimeType.toString().toLowerCase().indexOf("audio")||(t.mimeType=Fn?"audio/webm":"audio/ogg"),t.mimeType&&"audio/ogg"!==t.mimeType.toString().toLowerCase()&&!!navigator.mozGetUserMedia&&(t.mimeType="audio/ogg")}this.record=function(){a.blob=null;var e=t;t.disableLogs||webrtcdev.log("Passing following config over MediaRecorder API.",e),d&&(d=null),Fn&&!We()&&(e="video/vp8");try{d=new MediaRecorder(A,e)}catch(t){d=new MediaRecorder(A)}"canRecordMimeType"in d&&!1===d.canRecordMimeType(t.mimeType)&&!t.disableLogs&&webrtcdev.warn("MediaRecorder API seems unable to record mimeType:",t.mimeType),d.ignoreMutedMedia=t.ignoreMutedMedia||!1,d.ondataavailable=function(A){a.dontFireOnDataAvailableEvent||!A.data||!A.data.size||100>A.data.size||a.blob||(a.blob=t.getNativeBlob?A.data:new Blob([A.data],{type:t.mimeType||"video/webm"}),a.recordingCallback&&(a.recordingCallback(a.blob),a.recordingCallback=null))},d.onerror=function(e){t.disableLogs||("InvalidState"===e.name?webrtcdev.error("The MediaRecorder is not in a state in which the proposed operation is allowed to be executed."):"OutOfMemory"===e.name?webrtcdev.error("The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute."):"IllegalStreamModification"===e.name?webrtcdev.error("A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute."):"OtherRecordingError"===e.name?webrtcdev.error("Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute."):"GenericError"===e.name?webrtcdev.error("The UA cannot provide the codec or recording option that has been requested.",e):webrtcdev.error("MediaRecorder Error",e)),"inactive"!==d.state&&"stopped"!==d.state&&d.stop()},d.start(36e5),t.onAudioProcessStarted&&t.onAudioProcessStarted(),t.initCallback&&t.initCallback()},this.stop=function(e){d&&(this.recordingCallback=function(A){d=null,e&&e(A)},"recording"===d.state&&d.stop())},this.pause=function(){d&&("recording"!==d.state||d.pause())},this.resume=function(){if(this.dontFireOnDataAvailableEvent){this.dontFireOnDataAvailableEvent=!1;var e=t.disableLogs;return t.disableLogs=!0,this.record(),void(t.disableLogs=e)}d&&("paused"!==d.state||d.resume())},this.clearRecordedData=function(){d&&(this.pause(),this.dontFireOnDataAvailableEvent=!0,this.stop())};var a=this,d;(function e(){return d?!1===r()?(t.disableLogs||webrtcdev.log("MediaStream seems stopped."),void a.stop()):void setTimeout(e,1e3):void 0})()}function Ke(e,A){function t(){if("active"in e){if(!e.active)return!1;}else if("ended"in e&&e.ended)return!1;return!0}function r(e,A){function t(e,A){function t(e,A){for(var t=new Float64Array(A),r=0,a=e.length,s=0,d;s<a;s++)d=e[s],t.set(d,r),r+=d.length;return t}function r(e,A){for(var t=e.length+A.length,r=new Float64Array(t),a=0,s=0;s<t;)r[s++]=e[a],r[s++]=A[a],a++;return r}function a(e,A,t){for(var r=t.length,a=0;a<r;a++)e.setUint8(A+a,t.charCodeAt(a))}var s=e.numberOfAudioChannels,d=e.leftBuffers.slice(0),l=e.rightBuffers.slice(0),c=e.sampleRate,B=e.internalInterleavedLength;2===s&&(d=t(d,B),l=t(l,B)),1===s&&(d=t(d,B));var g;2===s&&(g=r(d,l)),1===s&&(g=d);var u=g.length,m=new ArrayBuffer(44+2*u),p=new DataView(m);a(p,0,"RIFF"),p.setUint32(4,44+2*u,!0),a(p,8,"WAVE"),a(p,12,"fmt "),p.setUint32(16,16,!0),p.setUint16(20,1,!0),p.setUint16(22,s,!0),p.setUint32(24,c,!0),p.setUint32(28,2*c,!0),p.setUint16(32,2*s,!0),p.setUint16(34,16,!0),a(p,36,"data"),p.setUint32(40,2*u,!0);for(var w=44,h=0;h<u;h++)p.setInt16(w,g[h]*(32767*1),!0),w+=2;return A?A({buffer:m,view:p}):void postMessage({buffer:m,view:p})}if(!Fn)return void t(e,function(e){A(e.buffer,e.view)});var r=a(t);r.onmessage=function(e){A(e.data.buffer,e.data.view),Qn.revokeObjectURL(r.workerURL)},r.postMessage(e)}function a(e){var A=Qn.createObjectURL(new Blob([e.toString(),";this.onmessage =  function (e) {"+e.name+"(e.data);}"],{type:"application/javascript"})),t=new Worker(A);return t.workerURL=A,t}function s(r){if(!U){if(!1===t()&&(!A.disableLogs&&webrtcdev.log("MediaStream seems stopped."),m.disconnect(),B=!1),!B)return void w.disconnect();E||(E=!0,A.onAudioProcessStarted&&A.onAudioProcessStarted(),A.initCallback&&A.initCallback());var e=r.inputBuffer.getChannelData(0);if(l.push(new Float32Array(e)),2===u){var a=r.inputBuffer.getChannelData(1);c.push(new Float32Array(a))}g+=C}}if(!e.getAudioTracks().length)throw"Your stream has no audio tracks.";A=A||{};var d=this,l=[],c=[],B=!1,g=0,u=2,m;!0===A.leftChannel&&(u=1),1===A.numberOfAudioChannels&&(u=1),A.disableLogs||webrtcdev.debug("StereoAudioRecorder is set to record number of channels: ",u),this.record=function(){if(!1===t())throw"Please make sure MediaStream is active.";l.length=c.length=0,g=0,w&&w.connect(m),E=U=!1,B=!0},this.stop=function(e){B=!1,r({sampleRate:Q,numberOfAudioChannels:u,internalInterleavedLength:g,leftBuffers:l,rightBuffers:1===u?[]:c},function(A,t){d.blob=new Blob([t],{type:"audio/wav"}),d.buffer=new ArrayBuffer(t.buffer.byteLength),d.view=t,d.sampleRate=Q,d.bufferSize=C,d.length=g,e&&e(),E=!1})},vn.AudioContextConstructor||(vn.AudioContextConstructor=new vn.AudioContext);var p=vn.AudioContextConstructor,w=p.createMediaStreamSource(e),h=[0,256,512,1024,2048,4096,8192,16384],C="undefined"==typeof A.bufferSize?4096:A.bufferSize;if(-1!==h.indexOf(C)||A.disableLogs||webrtcdev.warn("Legal values for buffer-size are "+JSON.stringify(h,null,"\t")),p.createJavaScriptNode)m=p.createJavaScriptNode(C,u,u);else if(p.createScriptProcessor)m=p.createScriptProcessor(C,u,u);else throw"WebAudio API has no support on this browser.";w.connect(m),A.bufferSize||(C=m.bufferSize);var Q="undefined"==typeof A.sampleRate?p.sampleRate||44100:A.sampleRate;(22050>Q||96e3<Q)&&!A.disableLogs&&webrtcdev.warn("sample-rate must be under range 22050 and 96000."),A.disableLogs||(webrtcdev.log("sample-rate",Q),webrtcdev.log("buffer-size",C));var U=!1;this.pause=function(){U=!0},this.resume=function(){if(!1===t())throw"Please make sure MediaStream is active.";return B?void(U=!1):(A.disableLogs||webrtcdev.info("Seems recording has been restarted."),void this.record())},this.clearRecordedData=function(){this.pause(),l.length=c.length=0,g=0};var E=!1;m.onaudioprocess=s,m.connect(p.destination)}function je(e,A){function t(){var A=document.createElement("canvas"),t=A.getContext("2d");return A.width=e.width,A.height=e.height,t.drawImage(e,0,0),A}function r(){if(u)return m=new Date().getTime(),setTimeout(r,500);if("canvas"===e.nodeName.toLowerCase()){var a=new Date().getTime()-m;return m=new Date().getTime(),p.frames.push({image:t(),duration:a}),void(g&&setTimeout(r,A.frameInterval))}html2canvas(e,{grabMouse:"undefined"==typeof A.showMousePointer||A.showMousePointer,onrendered:function(e){var t=new Date().getTime()-m;return t?void(m=new Date().getTime(),p.frames.push({image:e.toDataURL("image/webp",1),duration:t}),g&&setTimeout(r,A.frameInterval)):setTimeout(r,A.frameInterval)}})}if("undefined"==typeof html2canvas&&"canvas"!==e.nodeName.toLowerCase())throw"Please link: https://cdn.webrtc-experiment.com/screenshot.js";A=A||{},A.frameInterval||(A.frameInterval=10);var a=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach(function(e){e in document.createElement("canvas")&&(a=!0)});var s=(!!window.webkitRTCPeerConnection||!!window.webkitGetUserMedia)&&!!window.chrome,d=50,l=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);s&&l&&l[2]&&(d=parseInt(l[2],10)),s&&52>d&&(a=!1);var c,B;if(!a)!navigator.mozGetUserMedia||A.disableLogs||webrtcdev.error("Canvas recording is NOT supported in Firefox.");else if(A.disableLogs||webrtcdev.debug("Your browser supports both MediRecorder API and canvas.captureStream!"),e instanceof HTMLCanvasElement)c=e;else if(e instanceof CanvasRenderingContext2D)c=e.canvas;else throw"Please pass either HTMLCanvasElement or CanvasRenderingContext2D.";var g;this.record=function(){if(g=!0,a){var e;"captureStream"in c?e=c.captureStream(25):"mozCaptureStream"in c?e=c.mozCaptureStream(25):"webkitCaptureStream"in c&&(e=c.webkitCaptureStream(25));try{var t=new bn;t.addTrack(e.getVideoTracks()[0]),e=t}catch(A){}if(!e)throw"captureStream API are NOT available.";B=new Oe(e,{mimeType:"video/webm"}),B.record()}else p.frames=[],m=new Date().getTime(),r();A.initCallback&&A.initCallback()},this.getWebPImages=function(t){if("canvas"!==e.nodeName.toLowerCase())return void t();var r=p.frames.length;p.frames.forEach(function(e,t){var a=r-t;A.disableLogs||webrtcdev.debug(a+"/"+r+" frames remaining"),A.onEncodingCallback&&A.onEncodingCallback(a,r);var s=e.image.toDataURL("image/webp",1);p.frames[t].image=s}),A.disableLogs||webrtcdev.debug("Generating WebM"),t()},this.stop=function(e){g=!1;var t=this;return a&&B?void B.stop(e):void this.getWebPImages(function(){p.compile(function(r){A.disableLogs||webrtcdev.debug("Recording finished!"),t.blob=r,t.blob.forEach&&(t.blob=new Blob([],{type:"video/webm"})),e&&e(t.blob),p.frames=[]})})};var u=!1;this.pause=function(){u=!0},this.resume=function(){u=!1,g||this.record()},this.clearRecordedData=function(){this.pause(),p.frames=[]};var m=new Date().getTime(),p=new wn.Video(100)}function Pe(e,A){function t(e){e="undefined"==typeof e?10:e;var A=new Date().getTime()-g;return A?d?(g=new Date().getTime(),setTimeout(t,100)):void(g=new Date().getTime(),B.paused&&B.play(),c.drawImage(B,0,0,l.width,l.height),u.frames.push({duration:A,image:l.toDataURL("image/webp")}),!s&&setTimeout(t,e,e)):setTimeout(t,e,e)}function r(e){var A=-1,t=e.length,r=function(){return A++,A===t?void e.callback():void e.functionToLoop(r,A)};r()}function a(e,A,t,a,s){var d=document.createElement("canvas");d.width=l.width,d.height=l.height;var c=d.getContext("2d"),B=[],g=A&&0<A&&A<=e.length?A:e.length,u={r:0,g:0,b:0},m=st(tt(255,2)+tt(255,2)+tt(255,2)),p=t&&0<=t&&1>=t?t:0,w=a&&0<=a&&1>=a?a:0,h=!1;r({length:g,functionToLoop:function(t,r){var a=function(){!h&&g-s<=g*w||(-1===A&&(h=!0),B.push(e[r])),t()},s,d,g;if(!h){var C=new Image;C.onload=function(){c.drawImage(C,0,0,l.width,l.height);var e=c.getImageData(0,0,l.width,l.height);s=0,d=e.data.length,g=e.data.length/4;for(var A=0;A<d;A+=4){var t={r:e.data[A],g:e.data[A+1],b:e.data[A+2]},r=st(tt(t.r-u.r,2)+tt(t.g-u.g,2)+tt(t.b-u.b,2));r<=m*p&&s++}a()},C.src=e[r].image}else a()},callback:function(){B=B.concat(e.slice(g)),0>=B.length&&B.push(e[e.length-1]),s(B)}})}A=A||{},A.frameInterval||(A.frameInterval=10),A.disableLogs||webrtcdev.log("Using frames-interval:",A.frameInterval),this.record=function(){A.width||(A.width=320),A.height||(A.height=240),A.video||(A.video={width:A.width,height:A.height}),A.canvas||(A.canvas={width:A.width,height:A.height}),l.width=A.canvas.width,l.height=A.canvas.height,c=l.getContext("2d"),A.video&&A.video instanceof HTMLVideoElement?(B=A.video.cloneNode(),A.initCallback&&A.initCallback()):(B=document.createElement("video"),"undefined"==typeof B.srcObject?B.src=Qn.createObjectURL(e):B.srcObject=e,B.onloadedmetadata=function(){A.initCallback&&A.initCallback()},B.width=A.video.width,B.height=A.video.height),B.muted=!0,B.play(),g=new Date().getTime(),u=new wn.Video,A.disableLogs||(webrtcdev.log("canvas resolutions",l.width,"*",l.height),webrtcdev.log("video width/height",B.width||l.width,"*",B.height||l.height)),t(A.frameInterval)};var s=!1;this.stop=function(e){s=!0;var t=this;setTimeout(function(){a(u.frames,-1,null,null,function(r){u.frames=r,A.advertisement&&A.advertisement.length&&(u.frames=A.advertisement.concat(u.frames)),u.compile(function(A){t.blob=A,t.blob.forEach&&(t.blob=new Blob([],{type:"video/webm"})),e&&e(t.blob)})})},10)};var d=!1;this.pause=function(){d=!0},this.resume=function(){d=!1,s&&this.record()},this.clearRecordedData=function(){this.pause(),u.frames=[]};var l=document.createElement("canvas"),c=l.getContext("2d"),B,g,u}function Ve(e,A){if("undefined"==typeof GIFEncoder)throw"Please link: https://cdn.webrtc-experiment.com/gif-recorder.js";A=A||{};var t=e instanceof CanvasRenderingContext2D||e instanceof HTMLCanvasElement;this.record=function(){function e(c){return r?setTimeout(function(){e(c)},100):void(l=hn(e),void 0===typeof g&&(g=c),90>c-g||(!t&&d.paused&&d.play(),!t&&s.drawImage(d,0,0,a.width,a.height),A.onGifPreview&&A.onGifPreview(a.toDataURL("image/png")),u.addFrame(s),g=c))}t||(!A.width&&(A.width=d.offsetWidth||320),!this.height&&(A.height=d.offsetHeight||240),!A.video&&(A.video={width:A.width,height:A.height}),!A.canvas&&(A.canvas={width:A.width,height:A.height}),a.width=A.canvas.width,a.height=A.canvas.height,d.width=A.video.width,d.height=A.video.height),u=new GIFEncoder,u.setRepeat(0),u.setDelay(A.frameRate||200),u.setQuality(A.quality||10),u.start(),c=Date.now();this;l=hn(e),A.initCallback&&A.initCallback()},this.stop=function(){l&&fn(l),B=Date.now(),this.blob=new Blob([new Uint8Array(u.stream().bin)],{type:"image/gif"}),u.stream().bin=[]};var r=!1;this.pause=function(){r=!0},this.resume=function(){r=!1},this.clearRecordedData=function(){u&&(this.pause(),u.stream().bin=[])};var a=document.createElement("canvas"),s=a.getContext("2d");if(t&&(e instanceof CanvasRenderingContext2D?(s=e,a=s.canvas):e instanceof HTMLCanvasElement&&(s=e.getContext("2d"),a=e)),!t){var d=document.createElement("video");d.muted=!0,d.autoplay=!0,"undefined"==typeof d.srcObject?d.src=Qn.createObjectURL(e):d.srcObject=e,d.play()}var l=null,c,B,g,u}function qe(e,A){var t=document.createElement("div");return t.id=e+"snapshotButton",t.setAttribute("title","Snapshot"),t.className=_t.button.class_on,t.innerHTML=_t.button.html_on,t.onclick=function(){Ze(A,function(e){var A="snapshot"+new Date().getTime(),t;t=ct?Gn(ct):Gn(lt.userid),t.filearray.push(A);var r=document.createElement("div");r.value=t.filearray.length,xt.active?($e(e,"imagesnapshot",A),H(t.uuid,t,e,A,"imagesnapshot"),T(t.uuid,t,e,A,"imagesnapshot")):T(t.uuid,t,e,A,"imagesnapshot")})},t}function Ze(e,A){try{return e.videoContainer?function(e){if(e){var t=document.createElement("canvas");t.width=e.videoWidth||e.clientWidth,t.height=e.videoHeight||e.clientHeight;var r=t.getContext("2d");r.drawImage(e,0,0,t.width,t.height),A(t.toDataURL("image/png"))}else A("")}(document.getElementById(e.videoContainer)):"empty"}catch(A){webrtcdev.error(" [Snapshot - take snapshot] ",A)}}function $e(e,A,t){lt.send({type:A,message:e,name:t})}function eA(e,A){tA({header:lt.extra.username,message:e,userinfo:A,color:lt.extra.color}),lt.send({type:"chat",userinfo:A,message:e})}function AA(e){return e.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,"<a href='$1' target='_blank'>$1</a>")}function tA(A){""!=A.message&&" "!=A.message&&rA("chat-message self msg-avatar",A.userinfo,A.message,kt.chatBox.id)}function nA(A){""!=A.message&&" "!=A.message&&rA("chat-message user msg-avatar",A.userinfo,A.message,kt.chatBox.id)}function rA(e,A,r,a){var s=document.createElement("div");s.id=" chat-msg-"+Hn++,webrtcdev.log(" userinfo  on chat ------------------- ",A,ct),s.className=e+" chat-msg ",webrtcdev.log("addNewMessagelocal",A),Ze(A,function(e){let A=document.createElement("img");A.src=e;let a=document.createElement("span");a.className="msg-avatar",a.appendChild(A);let d=document.createElement("span");d.className="cm-msg-text ",d.innerHTML=AA(r),s.appendChild(a),s.appendChild(d)}),document.getElementById(a).insertBefore(s,document.getElementById(a).firstChild)}function aA(){return new Promise(function(e){let A=navigator.mediaDevices;A&&A.enumerateDevices||(webrtcdev.warn(" detectwebcam cant detect devices "),e(!1)),webrtcdev.log(" detectwebcam mediaDevices object - ",A),A.enumerateDevices().then(A=>{webrtcdev.log(" detectwebcam individual devices - ",A),e(A.some(e=>"videoinput"===e.kind))})})}function oA(){return new Promise(function(e){let A=navigator.mediaDevices;A&&A.enumerateDevices||e(!1),A.enumerateDevices().then(A=>{e(A.some(e=>"audioinput"===e.kind))})})}function iA(e,A,t){webrtcdev.log("[mediacontrol js] getCamMedia - role :",An),webrtcdev.log("[mediacontrol js] getCamMedia - outgoingVideo "+A+" outgoingAudio "+t);var r={audio:{},video:{frameRate:20,height:240,width:320,facingMode:"user"}};"inspector"==An?(e.dontCaptureUserMedia=!0,webrtcdev.warn("[_mediacontrol.js] getCamMedia  - Joining as inspector without camera Video")):A&&t?(webrtcdev.log("[startJS] getCamMedia - default mediaConstraints :",e.mediaConstraints),webrtcdev.log("[mediacontrol.js] getCamMedia  - Capture Full Media "),e.getUserMedia()):!A&&t?(r.video=!1,e.mediaConstraints=r,webrtcdev.log("[startJS] getCamMedia - default mediaConstraints :",e.mediaConstraints),webrtcdev.warn("[mediacontrol.js] getCamMedia  - Dont Capture Webcam only Mic "),e.getUserMedia()):A&&!t?(r.audio=!1,e.mediaConstraints=r,webrtcdev.log("[startJS] getCamMedia - default mediaConstraints :",e.mediaConstraints),webrtcdev.warn("[_mediacontrol.js] getCamMedia  - Dont Capture Mic only webcam "),e.getUserMedia()):!A&&!t&&(r.video=!1,r.audio=!1,e.mediaConstraints=r,e.dontCaptureUserMedia=!0,webrtcdev.error(" [_mediacontrol.js] getCamMedia - dont Capture outgoing video ",A," and outgoung Audio ",t),webrtcdev.log("[startJS] getCamMedia - default mediaConstraints :",e.mediaConstraints),e.onMediaError("onNoCameraCard",""),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"session",action:"onNoCameraCard"}})))}function sA(e,A){try{webrtcdev.log("[Mediacontrol] attachMediaStream - remvid ",e);var t="";if(0<document.getElementsByName(e).length)return webrtcdev.error("[Mediacontrol] attachMediaStream - remvid is already playing "),Promise.resolve();if(e.video)t=e.video;else if("VIDEO"==e.nodeName)t=e;else return webrtcdev.error("[ Mediacontrol] attachMediaStream - element  not found"),Promise.reject("video not found to attach stream");if(webrtcdev.log("[Mediacontrol] attachMediaStream - element ",t),webrtcdev.log("[Mediacontrol] attachMediaStream - stream ",A),A&&(A.isVideo||A.isScreen))try{t.srcObject=A}catch(e){webrtcdev.error("[Mediacontrol] attachMediaStream - ",e),t.src=Qn.createObjectURL(A)}finally{return webrtcdev.info("[Mediacontrol] attachMediaStream - added srcObject for ",A.type," valid stream ",A.streamid," to element ",t),t.play().then(()=>{webrtcdev.log("[Mediacontrol] attachMediaStream - element started playing ",t)}).catch(e=>{if(webrtcdev.error("[Mediacontrol] attachMediaStream - video play error ",e),"NotAllowedError"==e.name&&e.message.includes("play() failed")){let e=confirm("Play failed due to auto play policy, starting video on mute, click on video to unmute");(e||!e)&&(t.muted=!0,t.autoplay=!0,t.addEventListener("click",function(){t.muted=!1}),t.play().then(()=>{webrtcdev.info("[Mediacontrol] attachMediaStream - retry  ok ")}).catch(e=>{webrtcdev.error("[Mediacontrol] attachMediaStream - error",e)}))}else"NotAllowedError"==e.name&&e.message.includes("The play() request was interrupted by a call to pause()")?setTimeout(function(){t.play().then(()=>{webrtcdev.info("[Mediacontrol] attachMediaStream - retry  ok ")}).catch(e=>{webrtcdev.error("[Mediacontrol] attachMediaStream - error",e)})},3e3):"AbortError"==e.name&&e.message.includes("The play() request was interrupted by a new load request")?(t.pause(),setTimeout(function(){t.play().then(()=>{webrtcdev.info("[Mediacontrol] attachMediaStream - retry  ok ")}).catch(e=>{webrtcdev.error("[Mediacontrol] attachMediaStream - error",e)})},3e3)):setTimeout(function(){t.play().then(()=>{webrtcdev.info("[Mediacontrol] attachMediaStream - retry  ok ")}).catch(e=>{webrtcdev.error("[Mediacontrol] attachMediaStream - error",e)})},3e3)})}else{if(""==A)return t.srcObject=null,webrtcdev.warn("[ Mediacontrol - attachMediaStream ] Media Stream empty '' attached to ",t," as stream is not valid ",A),Promise.resolve();throw webrtcdev.error("[Mediacontrol] attachMediaStream - stream is not recognized ",A),"unrecognized media stream"}}catch(e){return webrtcdev.error("[Mediacontrol] attachMediaStream - error",e),Promise.reject(new Error("attachMediaStream failed"))}}function dA(e,A){try{return e.srcObject&&e.srcObject.active?(webrtcdev.log("[Mediacontrol] reattachMediaStream - element has srcObject and is active "),Promise.resolve(1)):(e.srcObject=A.srcObject,webrtcdev.log("[Mediacontrol] reattachMediaStream - added src object for valid stream ",e),e.play().then(()=>{webrtcdev.log("[Mediacontrol] reattachMediaStream - element started playing ",e)}).catch(A=>{if(webrtcdev.error("[Mediacontrol] reattachMediaStream - video play error ",A),"NotAllowedError"==A.name&&A.message.includes("play() failed")){let A=confirm("Play failed due to auto play policy, starting video on mute, click on video to unmute");(A||!A)&&(e.muted=!0,e.autoplay=!0,e.addEventListener("click",function(){e.muted=!1}),e.play())}else"NotAllowedError"==A.name&&A.message.includes("The play() request was interrupted by a call to pause()")&&alert("Play failed, video was paused ")}))}catch(e){return webrtcdev.error("[media control] reattachMediaStream err ",e),Promise.reject(new Error("reattachMediaStream failed"))}}function lA(e){webrtcdev.warn("[ Mediacontrol] dettachMediaStream  on vid ",e);try{if("srcObject"in e){const A=e.srcObject;if(A&&""!=A){const t=A.getTracks();t.forEach(function(e){e.stop()}),e.srcObject=null}else webrtcdev.warn("[ Mediacontrol] dettachMediaStream  no stream present on remote's video")}else e.src=""}catch(A){webrtcdev.error("[ Mediacontrol] dettachMediaStream  error ",A)}finally{e.id=null}}function cA(e,A,t){let r=document.createElement("div");return r.id=A+"recordButton",r.setAttribute("title","Record"),r.className=e.button.class_off,r.innerHTML=e.button.html_off,r.onclick=function(){r.className==e.button.class_on?(r.className=e.button.class_off,r.innerHTML=e.button.html_off,gA(t)):r.className==e.button.class_off&&(r.className=e.button.class_on,r.innerHTML=e.button.html_on,BA(t))},r}function BA(e){let A=e.streamid,t=e.stream;t||webrtcdev.error("[recordjs] startRecord - stream is missing for peer ",e),webrtcdev.log("[recordjs] stop - stream",t);let r=ze(t,{type:"video",recorderType:Oe});r.startRecording(),Sn[A]=r}function gA(e){let A=e.streamid,t=e.stream;t||webrtcdev.error("[recordjs] stopRecord - stream is missing for peer ",e),webrtcdev.log("[recordjs] stop - stream",t),Sn[A]||webrtcdev.log("wrong stream id ");let r=Sn[A];r.stopRecording(function(){let e=r.getBlob(),A="recordedvideo"+new Date().getTime();var t;t=ct?Gn(ct):Gn(lt.userid),t.filearray.push(A);let a=document.createElement("div");a.value=t.filearray.length;let s=Qn.createObjectURL(e);xt.active?(H(t.uuid,t,s,A,"videoRecording"),T(t.uuid,t,s,A,"videoRecording")):T(t.uuid,t,s,A,"videoRecording")})}async function uA(){webrtcdev.log("[screenrecord js] webrtcdevRecordScreen");try{Tn=await navigator.mediaDevices.getDisplayMedia({audio:!0,video:{mediaSource:"screen",mandatory:{maxWidth:1920<window.screen.width?window.screen.width:1920,maxHeight:1080<window.screen.height?window.screen.height:1080},optional:[]}}),webrtcdev.log("[screenrecord js] stream",Tn)}catch(e){webrtcdev.error("[screenrecord js] Error in webrtcdevRecordScreen ",e)}Tn.addEventListener("inactive",A=>{webrtcdev.log("Capture stream inactive - stop recording!"),mA(A)});try{In=new MediaRecorder(Tn,{mimeType:"video/webm"}),In.addEventListener("dataavailable",e=>{e.data&&0<e.data.size&&Nn.push(e.data)}),In.start(10),webrtcdev.log("[screenrecord js] mediaRecorder",In)}catch(e){webrtcdev.error("[screenrecord js] Error in mediaRecorder ",e)}}function mA(e){webrtcdev.log("webrtcdevStopRecordScreen",e),In.stop(),In=null,Tn.getTracks().forEach(e=>e.stop()),Tn=null;let A=window.URL.createObjectURL(new Blob(Nn,{type:"video/webm"}));pA(A)}function pA(e){var A=null;A=e instanceof Blob?Qn.createObjectURL(blob):e;var t=ct?Gn(ct):Gn(lt.userid);var r="recordedvideo"+new Date().getTime();t.filearray.push(r);var a=document.createElement("div");a.value=t.filearray.length,H(t.uuid,t,A,r,"videoScreenRecording"),T(t.uuid,t,A,r,"videoScreenRecording")}function wA(e){webrtcdev.log("[flesharing JS] on File start ",e),webrtcdev.log("[flesharing JS] on File start description  , name :",e.name," from -> ",e.userid," to ->",e.remoteUserId);let A=e.uuid+"_"+e.userid+"_"+e.remoteUserId,t=Gn(e.userid);t.filearray.includes("name : file.name")||(t.filearray.push({pid:A,name:e.name,status:"progress",from:e.userid,to:e.remoteUserId}),F(e.uuid,t,e.name,e.maxChunks,e,"fileBoxClass",e.userid,e.remoteUserId)),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"file",action:"onFileShareStart"}}))}function hA(A){try{if(A.currentPosition>A.maxChunks)return;let e=A.uuid+"_"+A.userid+"_"+A.remoteUserId,t=Rn[e];t&&(t.progress.value=A.currentPosition||A.maxChunks||t.progress.max,b(t.progress,t.label))}catch(e){webrtcdev.error("[flesharing JS] Problem in onFileProgress ",e)}}function fA(e){webrtcdev.log("[flesharing JS] On file End description , file :",e," from -> ",e.userid," to ->",e.remoteUserId),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"file",action:"onFileShareEnded"}}));let A=e.uuid+"_"+e.userid+"_"+e.remoteUserId,t=e.name;var r=Gn(e.userid);if(null!=r)for(x in r.filearray)r.filearray[x].name==t&&r.filearray[x].pid==A&&(r.filearray[x].status="finished",B("stopuploadButton"+A));webrtcdev.log("[flesharing JS] onFileEnd - Display on File Viewer and List -",e.url,t,e.type),T(e.uuid,r,e.url,t,e.type),webrtcdev.log("[flesharing JS] onFileEnd - Display List -",t+e.uuid,document.getElementById(t+e.uuid));ct==e.userid&&document.getElementById(t+e.uuid)||(H(e.uuid,r,e.url,t,e.type),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"file",action:"onFileShareEnded"}})))}function CA(e){webrtcdev.log(" [filehsraing js] Send file - ",e),lt.send(e)}function QA(e,A,t){webrtcdev.log(" [filehsraing js] Stop Sending file - ",t);var r=Gn(t.userid);for(y in r.filearray)r.filearray[y].pid==e&&(r.filearray[y].status="stop",webrtcdev.log(" [filesharing js ] stopSendFile - filename ",r.filearray[y].name," | status ",r.filearray[y].status))}function UA(){try{lt.send({type:"syncOldFiles"})}catch(A){webrtcdev.error("[filesharing js ] syncOldFiles",A)}}function EA(){var e=[];for(x in Bt){webrtcdev.log("[flesharing JS] Checking Old Files in index ",x);var A=Bt[x];if(A.filearray&&0<A.filearray.length)for(y in A.filearray){for(o in e)if(e[o].name==A.filearray[y].name)break;webrtcdev.log("[filehsraing js] user.filearray[y]",A.filearray[y]),e.push(A.filearray[y])}}setTimeout(function(){if(0<e.length)for(f in webrtcdev.log("[filehsraing js] sendOldFiles ",e),e)CA(e[f])},2e4)}function FA(){Ln=!0;let e={event:"open",from:"remote",board:Vt.drawCanvasContainer,button:Vt.button};lt.send({type:"canvas",board:e}),webrtcdev.log("[drawJS] send canvas data on rtc"),vA(Vt),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"drawboard",action:"onDrawBoardActive"}})),webrtcdev.log("[drawJS] send ondrawboard active data on webrtcdev")}function bA(){Ln=!1;let e={event:"close",from:"remote",board:Vt.drawCanvasContainer,button:Vt.button};lt.send({type:"canvas",board:e}),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"drawboard",action:"onDrawBoardTerminate"}}))}function vA(e){if(webrtcdev.log("[drawjs] drawCanvasobj.drawCanvasContainer ",e.drawCanvasContainer),0>document.getElementById(e.drawCanvasContainer).innerHTML.indexOf("iframe"))try{Mn.addSyncListener(function(e){lt.send({type:"canvas",draw:e})}),Mn.setSelected("pencil"),Mn.setTools({pencil:!0,eraser:!0}),Mn.appendTo(document.getElementById(e.drawCanvasContainer))}catch(A){webrtcdev.error(" Canvas drawing not supported ",A)}else webrtcdev.log("[drawjs] CanvasDesigner already started iframe is attached ")}function yA(e){let A=document.createElement("span");A.className=e.button.class,A.innerHTML=e.button.html,A.onclick=function(){let A=confirm("Do you want to reconnet ?");!0==A&&($(this).html("<img src=\"http://www.bba-reman.com/images/fbloader.gif\" />"),setTimeout(function(){$(this).html(e.button.html)},3e3))};let t=document.createElement("li");t.appendChild(A),document.getElementById("topIconHolder_ul").appendChild(t)}function HA(e,A){document.getElementById(e).onclick=function(){var t=confirm("Do you want to reconnect ?");if(!0==t){if(!lt.peers[lt.connectionDescription.remoteUserId])return;lt.peers[lt.connectionDescription.remoteUserId].peer.close(),lt.rejoin(lt.connectionDescription),$(this).html("<img src=\"http://www.bba-reman.com/images/fbloader.gif\" />"),setTimeout(function(){document.getElementById(e).innerHTML=A.button.html},3e3)}else;}}function SA(){document.body.setAttribute("style","pointer-events: none;")}function TA(e,A,t){e.style.position="absolute",e.style.left=A+"px",e.style.top=t+"px"}function IA(){document.getElementById("cursor1").setAttribute("style","display:block"),document.onmousemove=function(A){kn=A.pageX+10,xn=A.pageY},Kn=setInterval(RA,500)}function NA(){document.getElementById("cursor1").setAttribute("style","display:none"),lt.send({type:"pointer",action:"stopCursor"}),clearInterval(Kn)}function RA(){var e=document.getElementById("cursor1");e.hidden=!1,TA(e,kn,xn),lt.send({type:"pointer",action:"startCursor",corX:kn,corY:xn})}function LA(e){var A=document.createElement("span");return A.id=e+"cursorButton",A.setAttribute("data-val","mute"),A.setAttribute("title","Cursor"),A.className=Yt.button.class_on,A.innerHTML=Yt.button.html_on,A.onclick=function(){var e=A.id,t;t=ct?Gn(ct):Gn(lt.userid),-1<e.indexOf(t.controlBarName)?A.className==Yt.button.class_on?(IA(),A.className=Yt.button.class_off,A.innerHTML=Yt.button.html_off):A.className==Yt.button.class_off&&(NA(),A.className=Yt.button.class_on,A.innerHTML=Yt.button.html_on):alert(" Use Local Pointer button ")},A}function MA(){var e=document.createElement("span");for(x in e.className=Gt.button.class_off,e.innerHTML=Gt.button.html_off,Gt.languages)document.getElementById("CodeStyles").innerHTML=document.getElementById("CodeStyles").innerHTML+Gt.languages[x];document.getElementById("codeArea").value;Xt=CodeMirror.fromTextArea(document.getElementById("codeArea"),{mode:"text/javascript",styleActiveLine:!0,lineNumbers:!1,lineWrapping:!0}),Xt.setOption("theme","mdn-like"),e.onclick=function(){e.className==Gt.button.class_off?(e.className=Gt.button.class_on,e.innerHTML=Gt.button.html_on,xA(),document.getElementById(Gt.codeeditorContainer).hidden=!1):e.className==Gt.button.class_on&&(e.className=Gt.button.class_off,e.innerHTML=Gt.button.html_off,KA(),document.getElementById(Gt.codeeditorContainer).hidden=!0)};var A=document.createElement("li");A.appendChild(e),document.getElementById("topIconHolder_ul").appendChild(A)}function DA(e){if(37==e.which||38==e.which||39==e.which||40==e.which||17==e.which||18==e.which||16==e.which)return!0;var A={option:"text",codeContent:Xt.getValue()};webrtcdev.log(" sending ",A),rtcMultiConnection.send({type:"codeeditor",data:A})}function OA(){$("#CodeStyles option:selected").each(function(){var e=CodeMirror.findModeByMIME($(this).attr("mime"));e&&(mode=e.mode,spec=$(this).attr("mime"),Xt.setOption("mode",spec),CodeMirror.autoLoadMode(Xt,mode))});var e={option:"menu",codeMode:mode,codeSpec:spec};webrtcdev.log(" sending ",e),rtcMultiConnection.send({type:"codeeditor",data:e})}function kA(e){if(webrtcdev.log("codeeditor ",e),"text"==e.option){var A=Xt.getCursor();Xt.setValue(e.codeContent),Xt.setCursor(A)}else"menu"==e.option&&(Xt.setOption("mode",evt.data.codeSpec),CodeMirror.autoLoadMode(Xt,evt.data.codeMode))}function xA(){document.getElementById(Gt.codeeditorContainer).addEventListener("keyup",DA,!1),document.getElementById("CodeStyles").addEventListener("change",OA,!1)}function KA(){document.getElementById(Gt.codeeditorContainer).removeEventListener("keyup",DA,!1)}function _A(e){var A=document.createElement("span");A.className=e.button.class_off,A.innerHTML=e.button.html_off,A.onclick=function(){A.className==e.button.class_off?(A.className=e.button.class_on,A.innerHTML=e.button.html_on,zA(),document.getElementById(e.texteditorContainer).hidden=!1):A.className==e.button.class_on&&(A.className=e.button.class_off,A.innerHTML=e.button.html_off,GA(),document.getElementById(e.texteditorContainer).hidden=!0)};var t=document.createElement("li");t.appendChild(A),document.getElementById("topIconHolder_ul").appendChild(t)}function PA(e){if(37==e.which||38==e.which||39==e.which||40==e.which||17==e.which||18==e.which||16==e.which)return!0;var A={option:"text",content:document.getElementById(zt.texteditorContainer).value};webrtcdev.log(" sending ",document.getElementById(zt.texteditorContainer).value),rtcMultiConnection.send({type:"texteditor",data:A})}function VA(e){webrtcdev.log("texteditor ",e),"text"==e.option&&(document.getElementById(zt.texteditorContainer).value=e.content)}function zA(){document.getElementById(zt.texteditorContainer).addEventListener("keyup",PA,!1)}function GA(){document.getElementById(zt.texteditorContainer).removeEventListener("keyup",PA,!1)}function XA(e){webrtcdev.log("[ timerobj] startsessionTimer ",e),e.counter.hours&&e.counter.minutes&&e.counter.seconds?(_n=d(e.counter.hours),Pn=d(e.counter.minutes),Vn=d(e.counter.seconds),"forward"==e.type?(fe(),_n.innerHTML=0,Pn.innerHTML=0,Vn.innerHTML=0):"backward"==e.type&&(_n.innerHTML=0,Pn.innerHTML=3,Vn.innerHTML=0,Ce())):webrtcdev.error(" [timerobj] counter DOM elemnents not found ")}function JA(){try{return Dn=Intl.DateTimeFormat().resolvedOptions().timeZone,Bt[0].zone=Dn,Dn}catch(e){webrtcdev.error("[timer js ]",e)}}function YA(){try{var e={type:"timer",userid:Bt[0].userid,time:new Date().toJSON(),zone:Bt[0].zone};webrtcdev.log("[timerjs] shareTimePeer ",e),lt.send(e)}catch(A){webrtcdev.error(A)}}function WA(e,A){try{webrtcdev.log("[timerjs] peerTimeZone - ",e,A);let t=Gn(A);if(!t)return;qA(A,"zone",e),Fe(t),webrtcdev.log("[timerjs] peerTimeZone , updated peerinfo with zone -  ",t)}catch(e){webrtcdev.error("[timerjs] ",e)}}function jA(){return lt.peers.getAllParticipants()}function qA(e,A,t){try{if(webrtcdev.log("[peerinfomanager] appendToPeerValue - update peer - "+e+" by key - "+A+" with value ",t),!A||!t)return;let r=Gn(e);webrtcdev.log("[peerinfomanager] appendToPeerValue peerInfo before  updating ",r,r[A]),(r[A]||r.hasOwnProperty(A))&&(webrtcdev.log("[peerinfomanager] appendToPeerValue - key "+A+" already exists in peerinfo with value  "+r[A]),ZA(e,A)),r[A]=t;let a=Xn(r.userid);Bt[a]=r,webrtcdev.log("[peerinfomanager] appendToPeerValue - update webcallpeers index "+a,Bt[a])}catch(A){webrtcdev.error("[peerinfomanager] appendToPeerValue errorr - ",A)}}function ZA(e,A){webrtcdev.log("[peerinfomanager] removefromPeerValue "+e+" key "+A);let t=Gn(e);return delete t[A]}function $A(e){try{for(x in webrtcdev.log("[peerinfomanager] removePeerInfo - remove userid: ",e),Bt)if(Bt[x].userid==e)return void Bt.splice(x,1)}catch(A){webrtcdev.error("[peerinfomanager] appendToPeerValue errorr - ",A)}}function et(e,A,t,r,a,s){if(webrtcdev.log("[peerinfomanager] updatePeerInfo-  "+e+A+t+r+a+s),!e)return void webrtcdev.error("[peerinfomanager] updatePeerInfo - userid is null / undefined, cannot create PeerInfo");let d=Gn(e);d?(webrtcdev.log("[peerinfomanager] updatePeerInfo - UserID is already existing in webcallpeers, update the fields only "),d.videoContainer=d.videoContainer||"video"+e,d.videoHeight=d.videoHeight||null,d.videoClassName=d.videoClassName||null,d.userid=d.userid||e,d.name=d.name||A,d.color=d.color||t,d.email=d.email||r,d.role=d.role||a||"participant",d.type=d.type||s,d.controlBarName=d.controlBarName||"control-video"+e,d.filearray=d.filearray||[],d.vid=d.vid||"video"+s+"_"+e):(d={videoContainer:"video"+e,videoHeight:null,videoClassName:null,userid:e,name:A,color:t,email:r,role:a||"participant",type:s,controlBarName:"control-video"+e,filearray:[],vid:"video"+s+"_"+e},Bt.push(d),webrtcdev.log("[peerinfomanager] updatedPeerInfo -  newly created peerinfo")),xt.active&&(d.fileShare="single"==xt.props.fileShare?{outerbox:"widget-filesharing-box",container:"widget-filesharing-container",minButton:"widget-filesharing-minbutton",maxButton:"widget-filesharing-maxbutton",rotateButton:"widget-filesharing-rotatebutton",closeButton:"widget-filesharing-closebutton"}:{outerbox:"widget-filesharing-box"+e,container:"widget-filesharing-container"+e,minButton:"widget-filesharing-minbutton"+e,maxButton:"widget-filesharing-maxbutton"+e,rotateButton:"widget-filesharing-rotatebutton"+e,closeButton:"widget-filesharing-closebutton"+e},d.fileList="single"==xt.props.fileList?{outerbox:"widget-filelisting-box",container:"widget-filelisting-container"}:{outerbox:"widget-filelisting-box"+e,container:"widget-filelisting-container"+e});let l=Xn(d.userid);Bt[l]=d,webrtcdev.log("[peerinfomanager] updatePeerInfo "+l,Bt[l])}function At(e,A,t){webrtcdev.log("[sessionmanager] startSocketSession , set selfuserid ",e.userid),ct||(ct=e.userid);try{webrtcdev.log("[sessionmanager] StartSession"+t," on address ",A),socket=io.connect(A),console.log(" socket ",socket)}catch(e){throw webrtcdev.error(" problem in socket connection",e)," problem in socket connection"}return t?void(socket.on("connect",function(A){webrtcdev.log("[sessionmanager] connected to signaller ",A),socket.emit("presence",{channel:t}),socket.on("disconnected",function(e){webrtcdev.error("[sessionmanager] Disconnected from signaller ",e),re("Disconnected from signaller "),"io server disconnect"===e&&(webrtcdev.error("[sessionmanager] Disconnected initiated by signaller , attempt to re-connect "),socket.connect())})}),socket.on("presence",function(e){Mt&&showUserStats(),webrtcdev.log("[sessionmanager] ======================= presence for sessionid ==================",e),e?qn(t,ct):jn(t,ct,rn.maxAllowed||10)}),socket.on("open-channel-resp",function(A){webrtcdev.log("[sessionmanager] --------------open-channel-resp---------------------  ",A),A.status&&A.channel==t?(webrtcdev.log("[sessionmanager] open-channel-resp - "," Session video:",Tt," audio: ",St," data: ",It," OfferToReceiveAudio: ",vt," OfferToReceiveVideo: ",yt),new Promise(function(A){iA(e,Tt,St),setTimeout(A,3e3,"")}).then(()=>{let t=A.channel;e.openOrJoin(t,function(e){webrtcdev.log(" [sessionmanager] open-channel-resp - openOrJoin session id  ",t,"response ",e),e?(webrtcdev.info(" [sessionmanager] open-channel-resp - openOrJoin ok,  userid ",ct," with role ",An),et(ct,wt,ft,ht,An,"local")):webrtcdev.error(" [sessionmanager] open-channel-resp Errored from signaller ")})}).catch(e=>{webrtcdev.error(" [sessionmanager] Handle rejected promise ("+e+")")})):(alert("Could not open this channel, Server refused"),webrtcdev.error(" [sessionmanager] Could not open this channel, Server refused")),A.message&&re(A.msgtype+" : "+A.message)}),socket.on("join-channel-resp",function(A){webrtcdev.log("[sessionmanager] --------------join-channel-resp---------------------  ",A),A.status&&A.channel==t?(webrtcdev.log(" [ join-channel-resp ] "," Session video:",Tt," audio: ",St," data: ",It," OfferToReceiveAudio: ",vt," OfferToReceiveVideo: ",yt),new Promise(function(A){iA(e,Tt,St),setTimeout(A,3e3,"")}).then(()=>{let t=A.channel;e.openOrJoin(t,function(e){webrtcdev.info("[sessionmanager] join-channel-resp - openOrJoin session ",t," response - ",e),e?(webrtcdev.info(" [sessionmanager] join-channel-resp - openOrJoin ok,  userid ",ct," with role ",An),et(ct,wt,ft,ht,An,"local")):webrtcdev.error(" [sessionmanager] join-channel-resp -  openOrJoin  Errored from signaller ")})}).catch(e=>{webrtcdev.error("[sessionmanager] join-channel-resp -  Handle rejected promise ("+e+")")}),A.message&&re(A.msgtype+" : "+A.message)):(webrtcdev.error("[sessionmanager] Could not join this channel, Server refused"),alert("Could not join this channel, Server refused. Please end this session and create another session"))}),socket.on("channel-event",function(e){webrtcdev.log("[sessionmanager] --------------channel-event---------------------  ",e),"new-join"==e.type&&"error"!=e.msgtype?webrtcdev.log("[session manager] - new-join-channel "):webrtcdev.warn("[session manager] - unhandled channel event ")}),socket.on("event",function(e){console.log("event",e)}),socket.on("disconnect",function(){console.error("disconneted ")})):(re("Invalid session"),void webrtcdev.error("[sessionmanager] Session id undefined "))}var lt=null,ct=null,Bt=[],gt=null,ut=null,mt=null,pt=null,wt="",ht="",ft="",Ct="",Qt="",Ut=null,Et=[];this.sessionid="";var Ft={socketAddr:location.hostname+":8083/",signaller:location.hostname+":8085/"},bt=[],vt=!0,yt=!0,Ht=!0,St=!0,Tt=!0,It=!0,Nt=null,Rt=null,Lt;this.remoteVideos=Lt=[];var Mt=!1,Dt=!1,Ot=!1,kt=!1,xt=!1,Kt=!1,_t=!1,Pt=!1,Vt=!1,zt=!1,Gt=!1,Xt=null,Jt=!1,Yt=!1,Wt=!1,jt=!1,qt=!1,Zt=!1,$t=!1,en=!1,An="participant",tn=null,bt="none",nn={},rn={},an=[],on=null,sn;this.connectionStatus=on,this.version="6.0.4",this.makesessionid=function(e){let A="";return(webrtcdev.log("[Init] Location  ",location.href),webrtcdev.log("[Init] Existing charecters after # ",location.href.replace("#","").length),location.href.replace("#","").length&&(A=-1<location.href.indexOf("?")?location.hash.substring(0,location.hash.indexOf("?")).replace(/\/|:|#|\?|\$|\^|%|\.|`|~|!|\+|@|\[|\||]|\|*. /g,"").split("\n").join("").split("\r").join(""):location.hash.replace(/\/|:|#|\?|\$|\^|%|\.|`|~|!|\+|@|\[|\||]|\|*. /g,"").split("\n").join("").split("\r").join(""),A))?A:(webrtcdev.log("Session id not Found in URL ,  Check for auto - reload if  ",e),"reload"!=e||location.hash.replace("#","").length?(A=prompt("Enter session ",""),A):void(location.href=location.href.split("#")[0]+"#"+(100*Math.random()).toString().replace(".",""),location.reload()))},this.issafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),this.setsession=function(e,A,t,r,a,s){return this.sessionid=Ut=session.sessionid,a.socketAddr&&(Ft.socketAddr=a.socketAddr),a.signaller&&(Ft.signaller=a.signaller),nn=e,rn=A,bt=session.turn,s&&(s.debug&&(Mt=s.debug||!1),s.chat&&(kt=s.chat||null),s.fileShare&&(xt=s.fileShare||null),s.screenrecord&&(Kt=s.screenrecord||null),s.screenshare&&(Zt=s.screenshare||null),s.snapshot&&(_t=s.snapshot||null),s.videoRecord&&(Pt=s.videoRecord||null),s.reconnect&&(Jt=s.reconnect||null),s.drawCanvas&&(Vt=s.drawCanvas||null),s.texteditor&&(zt=s.texteditor||null),s.codeeditor&&(Gt=s.codeeditor||null),s.mute&&(Wt=s.mute||null),s.timer&&(Dt=s.timer||null),s.listenin&&(qt=s.listenin||null),s.cursor&&(Yt=s.cursor||null),s.minmax&&(jt=s.minmax||null),s.help&&($t=s.help||null),s.statistics&&(en=s.statistics||null)),{sessionid:Ut,outgoing:r,incoming:t,socketAddr:Ft.socketAddr,signaller:Ft.signaller,localobj:nn,remoteobj:rn,turn:bt,widgets:s}},this.startCall=function(e){if(!e)return void webrtcdev.error(" [ initjs ] : Cannot initiate startcall without session object ");webrtcdev.log("[ initjs ] startwebrtcdev begin processing with ",e),webrtcdev.log("[ initjs ] : incoming ",e.incoming),webrtcdev.log("[ initjs ] : outgoing ",e.outgoing),e.incoming&&(vt=e.incoming.audio,yt=e.incoming.video,Ht=e.incoming.data),e.outgoing&&(St=e.outgoing.audio,Tt=e.outgoing.video,It=e.outgoing.data),webrtcdev.log(" [ initjs  ] : role ",An);let A=e.sessionid;webrtcdev.log(" [ initjs ] : sessionid : "+A+" and localStorage  ",localStorage),1<=localStorage.length&&localStorage.getItem("channel")!==A?(webrtcdev.log("[ intijs ] : Current Session ID "+A+" doesnt match cached channel id "+localStorage.getItem("channel")+"-> clearCaches()"),clearCaches()):webrtcdev.log(" [ initjs ] : no action taken on localStorage"),webrtcdev.log(" [ initjs ] : localobj ",nn),webrtcdev.log(" [ initjs ] : remoteobj ",rn),Nt=nn.video;let t=rn.videoarr;if(Tt&&(Rt=t[0]),!rn.dynamicVideos)for(let e=1;e<t.length;e++)Lt.push(t[e]);if(nn.hasOwnProperty("userdetails")){let e=nn.userdetails;webrtcdev.info("localobj userdetails ",e),wt=e.username||"LOCAL",ft=e.usercolor||"",ht=e.useremail||"",An=e.role||"participant"}else webrtcdev.warn("localobj has no userdetails ");return"inspector"==An&&resolve("done"),new Promise(e=>{aA().then(e=>{webrtcdev.log("Has Webcam: "+(e?"yes":"no")),e||(webrtcdev.error(" dont have access to webcam  "),alert(" you dont have access to webcam "),Tt=!1),Tt&&(webrtcdev.log(" get permission for video Access "),a())}).catch(e=>{webrtcdev.error(" dont have access to webcam  ",e)}),oA().then(e=>{webrtcdev.log("Has Mic: "+(e?"yes":"no")),e||(webrtcdev.error(" dont have access to mic  "),alert(" you dont have access to Mic "),St=!1),St&&(webrtcdev.log(" get permission for audio access "),s())}).catch(e=>{webrtcdev.error(" dont have access to mic  ",e)}),oe(),e(A)}).then(A=>{Wn(A,e)}).then(()=>{Yn(lt,e.widgets)}).then(()=>{At(lt,e.socketAddr,e.sessionid),on="started"}).catch(e=>{webrtcdev.error(" [ initjs ] : Promise rejected ",e)})},this.stopCall=stopCall=function(){webrtcdev.log(" stopCall "),lt.closeEntireSession(),localStorage.getItem("channel")||localStorage.removeItem("channel"),localStorage.getItem("userid")||localStorage.removeItem("userid"),localStorage.getItem("remoteUsers")||localStorage.removeItem("remoteUsers"),this.connectionStatus="closed"},Element.prototype.remove=function(){this.parentElement.removeChild(this)},NodeList.prototype.remove=HTMLCollection.prototype.remove=function(){for(var e=this.length-1;0<=e;e--)this[e]&&this[e].parentElement&&this[e].parentElement.removeChild(this[e])},this.showdesktopnotification=showdesktopnotification=function(e,A){if(!("Notification"in window))alert("This browser does not support desktop notification");else if("granted"===Notification.permission){new Notification(e,{body:A})}else"denied"!==Notification.permission&&webrtcdev.warn(" [notify.js] notification denied")};var dn=document.createElement("div"),ln;dn.id="saveButtonCanvasDraw",dn.setAttribute("data-toggle","modal"),dn.setAttribute("data-target","#saveModal"),dn.onclick=function(){Y("blobcanvas")},document.body.appendChild(dn),this.getWebrtcdevStats=getWebrtcdevStats=function(){for(let e in webrtcdev.info(" URL  : ",window.location.href),webrtcdev.info(" Bandwidth  : ",this.version),webrtcdev.info(" Browser  : ",lt.DetectRTC.browser),webrtcdev.info(" Network connection downlink : ",navigator.connection.downlink),webrtcdev.info(" Network connection effectiveType : ",navigator.connection.effectiveType),webrtcdev.info(" Network connection rtt : ",navigator.connection.rtt),webrtcdev.info(" Bandwidth  : ",lt.bandwidth),webrtcdev.info(" All active participants  : ",jA()),Te(),Bt)webrtcdev.info(" Peer   : ",e," - ",Bt[e]);return new Promise(function(e){for(let A in lt.peers)if(lt.peers[A].userid){let t=lt.peers[A].peer;webrtcdev.log(t),t.getStats(null).then(A=>{let t="";A.forEach(e=>{t+="Report:"+e.type+" <br/> ID:"+e.id+" <br/>Timestamp:"+e.timestamp+" <br/> ",Object.keys(e).forEach(A=>{"id"!==A&&"timestamp"!==A&&"type"!==A&&(t+=A+" : "+e[A]+" <br/> ")})}),webrtcdev.info("[stats] getWebrtcdevStats - self  ",ct,t),e(t)})}})},this.oldgetStats=function(e,A,t){function r(A){webrtcdev.log("peer ",a);a.getStats()&&(!navigator.mozGetUserMedia?a.getStats(function(e){var t=[];e.result().forEach(function(e){var A={};e.names().forEach(function(t){A[t]=e.stat(t)}),A.id=e.id,A.type=e.type,A.timestamp=e.timestamp,t.push(A)}),A(t)}):a.getStats(e,function(e){var t=[];e.forEach(function(e){t.push(e)}),A(t)},A))}var a=this;if(arguments[0]instanceof RTCMultiConnection){if(a=arguments[0],!navigator.mozGetUserMedia||(e=arguments[1],A=arguments[2],t=arguments[3]),!(e instanceof MediaStreamTrack)&&!!navigator.mozGetUserMedia)throw"2nd argument is not instance of MediaStreamTrack.";}else if(!(e instanceof MediaStreamTrack)&&!!navigator.mozGetUserMedia)throw"1st argument is not instance of MediaStreamTrack.";var s={audio:{},video:{}},d=!1;(function e(){r(function(r){for(var l={audio:{},video:{},results:r,nomore:function(){d=!0}},c=0,B;c<r.length;++c){if(B=r[c],B.datachannelid&&"datachannel"===B.type&&(l.datachannel={state:B.state}),"googLibjingleSession"===B.type&&(l.isOfferer=B.googInitiator),"googCertificate"==B.type&&(l.encryption=B.googFingerprintAlgorithm),"opus"==B.googCodecName&&B.bytesSent){var g=0;if(!!B.bytesSent){s.audio.prevBytesSent||(s.audio.prevBytesSent=B.bytesSent);var u=B.bytesSent-s.audio.prevBytesSent;s.audio.prevBytesSent=B.bytesSent,g=u/1024}l.audio||(l.audio=B),l.audio.availableBandwidth=g.toFixed(1)}if("VP8"==B.googCodecName){var g=0;if(!!B.bytesSent){s.video.prevBytesSent||(s.video.prevBytesSent=B.bytesSent);var u=B.bytesSent-s.video.prevBytesSent;s.video.prevBytesSent=B.bytesSent,g=u/1024}l.video||(l.video=B),l.video.availableBandwidth=g.toFixed(1),B.googFrameHeightReceived&&B.googFrameWidthReceived&&(l.resolutions={width:B.googFrameWidthReceived,height:B.googFrameHeightReceived})}"VideoBwe"==B.type&&(l.video.bandwidth={googActualEncBitrate:B.googActualEncBitrate,googAvailableSendBandwidth:B.googAvailableSendBandwidth,googAvailableReceiveBandwidth:B.googAvailableReceiveBandwidth,googRetransmitBitrate:B.googRetransmitBitrate,googTargetEncBitrate:B.googTargetEncBitrate,googBucketDelay:B.googBucketDelay,googTransmitBitrate:B.googTransmitBitrate}),"googCandidatePair"==B.type&&"true"==B.googActiveConnection&&(l.connectionType={local:{candidateType:B.googLocalCandidateType,ipAddress:B.googLocalAddress},remote:{candidateType:B.googRemoteCandidateType,ipAddress:B.googRemoteAddress},transport:B.googTransportType});var m=((navigator.connection||{}).type||"unknown").toString().toLowerCase();"localcandidate"===B.type&&(!l.connectionType&&(l.connectionType={}),l.connectionType.local={candidateType:B.candidateType,ipAddress:B.ipAddress+":"+B.portNumber,networkType:B.networkType||"unknown",transport:B.transport}),"remotecandidate"===B.type&&(!l.connectionType&&(l.connectionType={}),l.connectionType.local={candidateType:B.candidateType,ipAddress:B.ipAddress+":"+B.portNumber,networkType:B.networkType||m,transport:B.transport})}try{-1!==a.iceConnectionState.search(/failed|closed/gi)&&(d=!0)}catch(A){d=!0}!0===d&&(l.datachannel&&(l.datachannel.state="close"),l.ended=!0),A(l),!d&&typeof t!=null&&t&&setTimeout(e,t||1e3)})})()},"undefined"!=typeof module&&(module.exports=getStats),this.showRtcConn=function(){return lt?(webrtcdev.info(" ========================================================================="),webrtcdev.info("[stats] rtcConn : ",lt),webrtcdev.info(" =========================================================================")):webrtcdev.warn(" rtcConn doesnt exist "),lt},this.updateStats=function(){webrtcdev.info(" ============================ get Stats  =========================================="),en&&en.active&&(getStats(event.stream.getVideoTracks(),function(e){document.getElementById("network-stats-body").innerHTML=e},2e4),document.getElementById(en.statsConainer).innerHTML+=JSON.stringify(en),document.getElementById(en.statsConainer).innerHTML+=JSON.stringify(en.bandwidth),document.getElementById(en.statsConainer).innerHTML+=JSON.stringify(en.codecs))};var cn=null,Bn=null,gn,sn,un;this.showScrConn=function(){cn?(webrtcdev.info(" ========================================================================="),webrtcdev.info(" srcConn : ",cn),webrtcdev.info(" srcConn.peers.getAllParticipants() : ",cn.peers.getAllParticipants()),webrtcdev.info(" =========================================================================")):webrtcdev.debug(" Screen share is not active ")},"",function(){function e(){function e(e,A){function t(e,t,s){m=rt(t.byteLength/a);for(var d=0,l;d<m;d++)l=d*a,u[g]=t.slice(l,dt(l+a,t.byteLength)),A({uuid:r.uuid,buffer:u[g],currentPosition:g,maxChunks:B,size:r.size,name:r.name,lastModifiedDate:r.lastModifiedDate.toString(),type:r.type}),g++;g==B&&(p=!0),s()}A=A||function(e){postMessage(e)};var r=e.file;r.uuid||(r.uuid=(100*Math.random()).toString().replace(/\./g,""));var a=e.chunkSize||15000;e.extra&&e.extra.chunkSize&&(a=e.extra.chunkSize);var s=0,d=a,l=at(dt(1e8,d)/a),c=l*a,B=rt(r.size/a);r.maxChunks=B;var g=0,u=[],m,p;A({currentPosition:g,uuid:r.uuid,maxChunks:B,size:r.size,name:r.name,type:r.type,lastModifiedDate:r.lastModifiedDate.toString(),start:!0});var w=new FileReader,h;w.onloadend=function(e){e.target.readyState==FileReader.DONE&&t(r.name,e.target.result,function(){s++,(s+1)*c<r.size?(h=r.slice(s*c,(s+1)*c),w.readAsArrayBuffer(h)):s*c<r.size?(h=r.slice(s*c,r.size),w.readAsArrayBuffer(h)):(r.url=Qn.createObjectURL(r),A({currentPosition:g,uuid:r.uuid,maxChunks:B,size:r.size,name:r.name,lastModifiedDate:r.lastModifiedDate.toString(),url:Qn.createObjectURL(r),type:r.type,end:!0}))})},g+=1,h=r.slice(s*c,(s+1)*c),w.readAsArrayBuffer(h)}var A=this;A.readAsArrayBuffer=function(A,t){function r(e){A.chunks[e.uuid]||(A.chunks[e.uuid]={currentPosition:-1}),t.extra=t.extra||{userid:0},e.userid=t.userid||t.extra.userid||0,e.extra=t.extra,A.chunks[e.uuid][e.currentPosition]=e,e.end&&a&&(a(e.uuid),a=null),200<e.maxChunks&&200==e.currentPosition&&a&&(a(e.uuid),a=null)}var a=t.earlyCallback;delete t.earlyCallback;e(t,r)}}function A(e){function A(a,s){if(!a.uuid)return void e.convertToObject(a,function(e){A(e)});if(a.start&&!r.chunks[a.uuid]&&(r.chunks[a.uuid]={},e.onBegin&&e.onBegin(a)),!a.end&&a.buffer&&(r.chunks[a.uuid][a.currentPosition]=a.buffer),a.end){var d=r.chunks[a.uuid],l=[];Object.keys(d).forEach(function(e){l.push(d[e])});var c=new Blob(l,{type:a.type});c=t(c,a),c.url=Qn.createObjectURL(c),c.uuid=a.uuid,c.size||webrtcdev.error("Something went wrong. Blob Size is 0."),e.onEnd&&e.onEnd(c),delete r.chunks[a.uuid],delete r.chunksWaiters[a.uuid]}a.buffer&&e.onProgress&&e.onProgress(a),a.end||(s(a),r.chunksWaiters[a.uuid]=function(){function e(){a.buffer&&r.chunks[a.uuid]&&(a.currentPosition==a.maxChunks||r.chunks[a.uuid][a.currentPosition]||(s(a),setTimeout(e,5e3)))}setTimeout(e,5e3)},r.chunksWaiters[a.uuid]())}var r=this;r.chunks={},r.chunksWaiters={},r.receive=A}function t(e,A){if(e||(e={}),!A)return e;for(var t in A)try{e[t]=A[t]}catch(A){}return e}var r={ConvertToArrayBuffer:function(e,A){E.pack(e,function(e){A(e.buffer)})},ConvertToObject:function(e,A){E.unpack(e,A)}},a=!1,s=!1,d=Uint8Array.BYTES_PER_ELEMENT,l=Uint16Array.BYTES_PER_ELEMENT,c=Uint32Array.BYTES_PER_ELEMENT,B={NULL:0,UNDEFINED:1,STRING:2,NUMBER:3,BOOLEAN:4,ARRAY:5,OBJECT:6,INT8ARRAY:7,INT16ARRAY:8,INT32ARRAY:9,UINT8ARRAY:10,UINT16ARRAY:11,UINT32ARRAY:12,FLOAT32ARRAY:13,FLOAT64ARRAY:14,ARRAYBUFFER:15,BLOB:16,FILE:16,BUFFER:17};if(a)var g=["NULL","UNDEFINED","STRING","NUMBER","BOOLEAN","ARRAY","OBJECT","INT8ARRAY","INT16ARRAY","INT32ARRAY","UINT8ARRAY","UINT16ARRAY","UINT32ARRAY","FLOAT32ARRAY","FLOAT64ARRAY","ARRAYBUFFER","BLOB","BUFFER"];var u=[null,null,"Uint16","Float64","Uint8",null,null,"Int8","Int16","Int32","Uint8","Uint16","Uint32","Float32","Float64","Uint8","Uint8","Uint8"],m=function(e,A,t){var r=[];r[0]=[];for(var a=0;a<40;a++)r[0][a]=10>a?"0"+a.toString(10):a.toString(10);for(a=0;a<t;a++){var d=e.getUint8(A+a,s),l=~~(a/40)+1;"undefined"==typeof r[l]&&(r[l]=[]),r[l][a%40]=16>d?"0"+d.toString(16):d.toString(16)}for(webrtcdev.log("%c"+r[0].join(" "),"font-weight: bold;"),a=1;a<r.length;a++)webrtcdev.log(r[a].join(" "))},p=function(e){var A;if(e===void 0)A=B.UNDEFINED;else if(null===e)A=B.NULL;else{var t=e.constructor.name;if(t!==void 0)A=B[t.toUpperCase()];else switch(typeof e){case"string":A=B.STRING;break;case"number":A=B.NUMBER;break;case"boolean":A=B.BOOLEAN;break;case"object":e instanceof Array?A=B.ARRAY:e instanceof Int8Array?A=B.INT8ARRAY:e instanceof Int16Array?A=B.INT16ARRAY:e instanceof Int32Array?A=B.INT32ARRAY:e instanceof Uint8Array?A=B.UINT8ARRAY:e instanceof Uint16Array?A=B.UINT16ARRAY:e instanceof Uint32Array?A=B.UINT32ARRAY:e instanceof Float32Array?A=B.FLOAT32ARRAY:e instanceof Float64Array?A=B.FLOAT64ARRAY:e instanceof ArrayBuffer?A=B.ARRAYBUFFER:e instanceof Blob?A=B.BLOB:e instanceof Buffer?A=B.BUFFER:e instanceof Object&&(A=B.OBJECT);break;default:}}return A},w=function(e){var A=0,t=0,r=0,p=s,w=new ArrayBuffer(e[0].byte_length+e[0].header_size),h=new DataView(w);for(t=0;t<e.length;t++){var C=A,Q=e[t].header_size,U=e[t].type,E=e[t].length,F=e[t].value,b=e[t].byte_length,H=u[U],S=null===H?0:window[H+"Array"].BYTES_PER_ELEMENT;switch(U===B.BUFFER?h.setUint8(A,B.BLOB,p):h.setUint8(A,U,p),A+=d,a&&webrtcdev.info("Packing",U,g[U]),(U===B.ARRAY||U===B.OBJECT)&&(h.setUint16(A,E,p),A+=l,a&&webrtcdev.info("Content Length",E)),h.setUint32(A,b,p),A+=c,a&&(webrtcdev.info("Header Size",Q,"bytes"),webrtcdev.info("Byte Length",b,"bytes")),U){case B.NULL:case B.UNDEFINED:break;case B.STRING:for(a&&webrtcdev.info("Actual Content %c\""+F+"\"","font-weight:bold;"),r=0;r<E;r++,A+=S)h.setUint16(A,F.charCodeAt(r),p);break;case B.NUMBER:case B.BOOLEAN:a&&webrtcdev.info("%c"+F.toString(),"font-weight:bold;"),h["set"+H](A,F,p),A+=S;break;case B.INT8ARRAY:case B.INT16ARRAY:case B.INT32ARRAY:case B.UINT8ARRAY:case B.UINT16ARRAY:case B.UINT32ARRAY:case B.FLOAT32ARRAY:case B.FLOAT64ARRAY:var T=new Uint8Array(h.buffer,A,b);T.set(new Uint8Array(F.buffer)),A+=b;break;case B.ARRAYBUFFER:case B.BUFFER:var T=new Uint8Array(h.buffer,A,b);T.set(new Uint8Array(F)),A+=b;break;case B.BLOB:case B.ARRAY:case B.OBJECT:break;default:throw"TypeError: Unexpected type found.";}a&&m(h,C,A-C)}return h},h=function(e,A){var t=0,r=s,p=A,w,C,Q,U,E;w=e.getUint8(A,r),A+=d,a&&webrtcdev.info("Unpacking",w,g[w]),(w===B.ARRAY||w===B.OBJECT)&&(C=e.getUint16(A,r),A+=l,a&&webrtcdev.info("Content Length",C)),Q=e.getUint32(A,r),A+=c,a&&webrtcdev.info("Byte Length",Q,"bytes");var F=u[w],b=null===F?0:window[F+"Array"].BYTES_PER_ELEMENT;switch(w){case B.NULL:case B.UNDEFINED:a&&m(e,p,A-p),U=null;break;case B.STRING:C=Q/b;var H=[];for(t=0;t<C;t++){var S=e.getUint16(A,r);A+=b,H.push(ot(S))}U=H.join(""),a&&(webrtcdev.info("Actual Content %c\""+U+"\"","font-weight:bold;"),m(e,p,A-p));break;case B.NUMBER:U=e.getFloat64(A,r),A+=b,a&&(webrtcdev.info("Actual Content %c\""+U.toString()+"\"","font-weight:bold;"),m(e,p,A-p));break;case B.BOOLEAN:U=1===e.getUint8(A,r),A+=b,a&&(webrtcdev.info("Actual Content %c\""+U.toString()+"\"","font-weight:bold;"),m(e,p,A-p));break;case B.INT8ARRAY:case B.INT16ARRAY:case B.INT32ARRAY:case B.UINT8ARRAY:case B.UINT16ARRAY:case B.UINT32ARRAY:case B.FLOAT32ARRAY:case B.FLOAT64ARRAY:case B.ARRAYBUFFER:E=e.buffer.slice(A,A+Q),A+=Q,U=w===B.ARRAYBUFFER?E:new window[F+"Array"](E),a&&m(e,p,A-p);break;case B.BLOB:if(a&&m(e,p,A-p),window.Blob){var T=h(e,A),I=h(e,T.cursor);A=I.cursor,U=new Blob([I.value],{type:T.value})}else E=e.buffer.slice(A,A+Q),A+=Q,U=new Buffer(E);break;case B.ARRAY:for(a&&m(e,p,A-p),U=[],t=0;t<C;t++)E=h(e,A),A=E.cursor,U.push(E.value);break;case B.OBJECT:for(a&&m(e,p,A-p),U={},t=0;t<C;t++){var N=h(e,A),R=h(e,N.cursor);A=R.cursor,U[N.value]=R.value}break;default:throw"TypeError: Type not supported.";}return{value:U,cursor:A}},C=function(e,A){for(var t=e.length,r=[],a=0,s=0,d=0;d<e.length;d++)(function(d){Q(e[d],function(e){if(r[d]=e,s+=e[0].header_size+e[0].byte_length,++a===t){for(var l=[],c=0;c<r.length;c++)l=l.concat(r[c]);A(l,s)}})})(d)},Q=function(e,A){var t=1,r=d+c,a=0,s=0,g;switch(g=p(e),t=void 0===u[g]||null===u[g]?0:window[u[g]+"Array"].BYTES_PER_ELEMENT,g){case B.UNDEFINED:case B.NULL:break;case B.NUMBER:case B.BOOLEAN:a=t;break;case B.STRING:s=e.length,a+=s*t;break;case B.INT8ARRAY:case B.INT16ARRAY:case B.INT32ARRAY:case B.UINT8ARRAY:case B.UINT16ARRAY:case B.UINT32ARRAY:case B.FLOAT32ARRAY:case B.FLOAT64ARRAY:s=e.length,a+=s*t;break;case B.ARRAY:return void C(e,function(t,a){A([{type:g,length:e.length,header_size:r+l,byte_length:a,value:null}].concat(t))});case B.OBJECT:var m=[];for(var w in e)e.hasOwnProperty(w)&&(m.push(w),m.push(e[w]),s++);return void C(m,function(e,t){A([{type:g,length:s,header_size:r+l,byte_length:t,value:null}].concat(e))});case B.ARRAYBUFFER:a+=e.byteLength;break;case B.BLOB:var h=e.type,Q=new FileReader;return Q.onload=function(t){C([h,t.target.result],function(e,t){A([{type:g,length:s,header_size:r,byte_length:t,value:null}].concat(e))})},Q.onerror=function(A){throw"FileReader Error: "+A},void Q.readAsArrayBuffer(e);case B.BUFFER:a+=e.length;break;default:throw"TypeError: Type \""+e.constructor.name+"\" not supported.";}A([{type:g,length:s,header_size:r,byte_length:a,value:e}].concat([]))},U=function(e){var A=e instanceof DataView?e:new DataView(e),t=h(A,0);return t.value};a&&(window.Test={BIG_ENDIAN:s,LITTLE_ENDIAN:!0,Types:B,pack:w,unpack:h,serialize:Q,deserialize:U});var E={pack:function(e,A){try{a&&webrtcdev.info("%cPacking Start","font-weight: bold; color: red;",e),Q(e,function(e){a&&webrtcdev.info("Serialized Object",e),A(w(e))})}catch(A){throw A}},unpack:function(e,A){try{a&&webrtcdev.info("%cUnpacking Start","font-weight: bold; color: red;",e);var t=U(e);a&&webrtcdev.info("Deserialized Object",t),A(t)}catch(A){throw A}}};window.FileConverter=r,window.FileSelector=function(){function e(e,r){var a=document.createElement("input");a.type="file",r&&(a.multiple=!0),a.accept=t.accept,a.onchange=function(){return r?a.files.length?void e(a.files):void webrtcdev.error("No file selected."):a.files[0]?void(e(a.files[0]),a.parentNode.removeChild(a)):void webrtcdev.error("No file selected.")},a.style.display="none",(document.body||document.documentElement).appendChild(a),A(a)}function A(e){var A=new window.MouseEvent("click",{view:window,bubbles:!0,cancelable:!0,button:0,buttons:0,mozInputSource:1}),t=e.dispatchEvent(A)}var t=this;t.selectSingleFile=e,t.selectMultipleFiles=function(A){e(A,!0)},t.accept="*.*"},window.FileBufferReader=function(){function t(e,A){if(null==e||"object"!=typeof e)return e;if(e.constructor!=Object&&e.constructor!=Array)return e;if(e.constructor==Date||e.constructor==RegExp||e.constructor==Function||e.constructor==String||e.constructor==Number||e.constructor==Boolean)return new e.constructor(e);for(var r in A=A||new e.constructor,e)A[r]="undefined"==typeof A[r]?t(e[r],null):A[r];return A}var a=this,s=new e;a.chunks={},a.users={},a.readAsArrayBuffer=function(e,A,r){s.readAsArrayBuffer(a,{file:e,earlyCallback:function(e){A(t(e,{currentPosition:-1}))},extra:r||{userid:0}})},a.getNextChunk=function(e,A,r){try{for(x in Bt)if(Bt[x].userid==ct)for(y in Bt[x].filearray)Bt[x].filearray[y].pid||console.warn("[ fbr.getNextChunk ] pid does mot exist "),Bt[x].filearray[y].pid.includes(e)&&"stop"==Bt[x].filearray[y].status&&(Bt[x].filearray[y].status="stopped")}catch(A){webrtcdev.log(A)}var s;"undefined"!=typeof e.currentPosition&&(s=e.currentPosition,e=e.uuid);var d=a.chunks[e];if(d){"undefined"==typeof r?("undefined"!=typeof s&&(a.chunks[e].currentPosition=s),a.chunks[e].currentPosition++,s=a.chunks[e].currentPosition):(!a.users[r+""]&&(a.users[r+""]={fileUUID:e,userid:r,currentPosition:-1}),"undefined"!=typeof s&&(a.users[r+""].currentPosition=s),a.users[r+""].currentPosition++,s=a.users[r+""].currentPosition);var l=d[s];return l?void(l=t(l),"undefined"!=typeof r&&(l.remoteUserId=r+""),!!l.start&&a.onBegin(l),!!l.end&&a.onEnd(l),a.onProgress(l),a.convertToArrayBuffer(l,function(e){return l.currentPosition==l.maxChunks?void A(e,!0):void A(e,!1)})):(delete a.chunks[e],void a.convertToArrayBuffer({chunkMissing:!0,currentPosition:s,uuid:e},A))}};var d=new A(a);a.addChunk=function(e,A){e&&d.receive(e,function(e){a.convertToArrayBuffer({readyForNextChunk:!0,currentPosition:e.currentPosition,uuid:e.uuid},A)})},a.chunkMissing=function(e){delete d.chunks[e.uuid],delete d.chunksWaiters[e.uuid]},a.onBegin=function(){},a.onEnd=function(){},a.onProgress=function(){},a.convertToObject=r.ConvertToObject,a.convertToArrayBuffer=r.ConvertToArrayBuffer,a.setMultipleUsers=function(){}}}(),window.requestAnimationFrame||(hn=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame),window.cancelAnimationFrame||(fn=window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame),window.AudioContext||(window.AudioContext=window.webkitAudioContext||window.mozAudioContext),Qn=window.URL||window.webkitURL,navigator.getUserMedia=navigator.webkitGetUserMedia||navigator.mozGetUserMedia,window.webkitMediaStream&&(window.MediaStream=window.webkitMediaStream);var mn=!!navigator.webkitGetUserMedia,pn={AudioContext:window.AudioContext||window.webkitAudioContext},wn=function(){function e(e){for(var t=A(e),r=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:B(t.duration),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:25541},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:t.width,id:176},{data:t.height,id:186}]}]}]}]}],a=0,l=0;a<e.length;){var c=[],g=0;do c.push(e[a]),g+=e[a].duration,a++;while(a<e.length&&g<3e4);var u=0,m={id:524531317,data:[{data:l,id:231}].concat(c.map(function(e){var A=d({discardable:0,frame:e.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:it(u)});return u+=e.duration,{data:A,id:163}}))};r[1].data.push(m),l+=g}return s(r)}function A(e){if(!e[0])return void webrtcdev.warn("Something went wrong. Maybe WebP format is not supported in the current browser.");for(var A=e[0].width,t=e[0].height,r=e[0].duration,a=1;a<e.length;a++)r+=e[a].duration;return{duration:r,width:A,height:t}}function t(e){for(var A=[];0<e;)A.push(255&e),e>>=8;return new Uint8Array(A.reverse())}function r(e){return new Uint8Array(e.split("").map(function(A){return A.charCodeAt(0)}))}function a(e){var A=[],t=e.length%8?Array(9-e.length%8).join("0"):"";e=t+e;for(var r=0;r<e.length;r+=8)A.push(parseInt(e.substr(r,8),2));return new Uint8Array(A)}function s(e){for(var A=[],d=0,l;d<e.length;d++){l=e[d].data,"object"==typeof l&&(l=s(l)),"number"==typeof l&&(l=a(l.toString(2))),"string"==typeof l&&(l=r(l));var c=l.size||l.byteLength||l.length,B=rt(rt(nt(c)/nt(2))/8),g=c.toString(2),u=Array(7*B+7+1-g.length).join("0")+g,m=Array(B).join("0")+"1"+u;A.push(t(e[d].id)),A.push(a(m)),A.push(l)}return new Blob(A,{type:"video/webm"})}function d(e){var A=0;if(e.keyframe&&(A|=128),e.invisible&&(A|=8),e.lacing&&(A|=e.lacing<<1),e.discardable&&(A|=1),127<e.trackNum)throw"TrackNumber > 127 not supported";var t=[128|e.trackNum,e.timecode>>8,255&e.timecode,A].map(function(A){return ot(A)}).join("")+e.frame;return t}function l(e){for(var A=e.RIFF[0].WEBP[0],t=A.indexOf("\x9D\x01*"),r=0,a=[];4>r;r++)a[r]=A.charCodeAt(t+3+r);var s,d,l;return l=a[1]<<8|a[0],s=16383&l,l=a[3]<<8|a[2],d=16383&l,{width:s,height:d,data:A,riff:e}}function c(e){for(var A=0,t={};A<e.length;){var r=e.substr(A,4),a=parseInt(e.substr(A+4,4).split("").map(function(e){var A=e.charCodeAt(0).toString(2);return Array(8-A.length+1).join("0")+A}).join(""),2),s=e.substr(A+4+4,a);A+=8+a,t[r]=t[r]||[],"RIFF"==r||"LIST"==r?t[r].push(c(s)):t[r].push(s)}return t}function B(e){return[].slice.call(new Uint8Array(new Float64Array([e]).buffer),0).map(function(A){return ot(A)}).reverse().join("")}function g(e){this.frames=[],this.duration=e||1,this.quality=100}return g.prototype.add=function(e,A){if("canvas"in e&&(e=e.canvas),"toDataURL"in e&&(e=e.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/ig.test(e))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:e,duration:A||this.duration})},g.prototype.compile=function(){return new e(this.frames.map(function(e){var A=l(c(atob(e.image.slice(23))));return A.duration=e.duration,A}))},{Video:g,toWebM:e}}();"",ze.getFromDisk=function(e,A){if(!A)throw"callback is mandatory.";webrtcdev.log("Getting recorded "+("all"===e?"blobs":e+" blob ")+" from disk!"),yn.Fetch(function(t,r){"all"!==e&&r===e+"Blob"&&A&&A(t),"all"===e&&A&&A(t,r.replace("Blob",""))})},ze.writeToDisk=function(e){webrtcdev.log("Writing recorded blob(s) to disk!"),e=e||{},e.audio&&e.video&&e.gif?e.audio.getDataURL(function(A){e.video.getDataURL(function(t){e.gif.getDataURL(function(e){yn.Store({audioBlob:A,videoBlob:t,gifBlob:e})})})}):e.audio&&e.video?e.audio.getDataURL(function(A){e.video.getDataURL(function(e){yn.Store({audioBlob:A,videoBlob:e})})}):e.audio&&e.gif?e.audio.getDataURL(function(A){e.gif.getDataURL(function(e){yn.Store({audioBlob:A,gifBlob:e})})}):e.video&&e.gif?e.video.getDataURL(function(A){e.gif.getDataURL(function(e){yn.Store({videoBlob:A,gifBlob:e})})}):e.audio?e.audio.getDataURL(function(e){yn.Store({audioBlob:e})}):e.video?e.video.getDataURL(function(e){yn.Store({videoBlob:e})}):e.gif&&e.gif.getDataURL(function(e){yn.Store({gifBlob:e})})},"undefined"!=typeof module&&(module.exports=ze),"function"==typeof define&&define.amd&&define("RecordRTC",[],function(){return ze}),Je.getFromDisk=ze.getFromDisk,Je.writeToDisk=ze.writeToDisk,"undefined"!=typeof ze&&(ze.MRecordRTC=Je);(function(e){e&&"undefined"==typeof window&&"undefined"!=typeof global&&(global.navigator={userAgent:"Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",getUserMedia:function(){}},!global.webrtcdev&&(global.webrtcdev={}),"undefined"==typeof global.webrtcdev.debug&&(global.webrtcdev.debug=global.webrtcdev.info=global.webrtcdev.error=global.webrtcdev.log=global.webrtcdev.log||function(){webrtcdev.log(arguments)}),"undefined"==typeof document&&(e.document={},document.createElement=document.captureStream=document.mozCaptureStream=function(){var e={getContext:function(){return e},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""}};return e},e.HTMLVideoElement=function(){}),"undefined"==typeof location&&(e.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof sn&&(e.screen={width:0,height:0}),"undefined"==typeof Qn&&(e.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),e.window=global)})("undefined"==typeof global?null:global);var hn=window.requestAnimationFrame;"undefined"==typeof hn&&("undefined"!=typeof webkitRequestAnimationFrame&&(hn=webkitRequestAnimationFrame),"undefined"!=typeof mozRequestAnimationFrame&&(hn=mozRequestAnimationFrame));var fn=window.cancelAnimationFrame;"undefined"==typeof fn&&("undefined"!=typeof webkitCancelAnimationFrame&&(fn=webkitCancelAnimationFrame),"undefined"!=typeof mozCancelAnimationFrame&&(fn=mozCancelAnimationFrame));var Cn=window.AudioContext;"undefined"==typeof Cn&&("undefined"!=typeof webkitAudioContext&&(Cn=webkitAudioContext),"undefined"!=typeof mozAudioContext&&(Cn=mozAudioContext));var Qn=window.URL;"undefined"==typeof Qn&&"undefined"!=typeof webkitURL&&(Qn=webkitURL),"undefined"!=typeof navigator&&"undefined"==typeof navigator.getUserMedia&&("undefined"!=typeof navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),"undefined"!=typeof navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia));var Un=-1!==navigator.userAgent.indexOf("Edge")&&(!!navigator.msSaveBlob||!!navigator.msSaveOrOpenBlob),En=!!window.opera||-1!==navigator.userAgent.indexOf("OPR/"),Fn=!En&&!Un&&!!navigator.webkitGetUserMedia,bn=window.MediaStream;"undefined"==typeof bn&&"undefined"!=typeof webkitMediaStream&&(bn=webkitMediaStream),"undefined"!=typeof bn&&(!("getVideoTracks"in bn.prototype)&&(bn.prototype.getVideoTracks=function(){if(!this.getTracks)return[];var e=[];return this.getTracks.forEach(function(A){-1!==A.kind.toString().indexOf("video")&&e.push(A)}),e},bn.prototype.getAudioTracks=function(){if(!this.getTracks)return[];var e=[];return this.getTracks.forEach(function(A){-1!==A.kind.toString().indexOf("audio")&&e.push(A)}),e}),!("stop"in bn.prototype)&&(bn.prototype.stop=function(){this.getAudioTracks().forEach(function(e){!e.stop||e.stop()}),this.getVideoTracks().forEach(function(e){!e.stop||e.stop()})}));var vn={};"undefined"==typeof Cn?"undefined"!=typeof webkitAudioContext&&(vn.AudioContext=webkitAudioContext):vn.AudioContext=Cn,"undefined"!=typeof ze&&(ze.Storage=vn),"undefined"!=typeof ze&&(ze.MediaStreamRecorder=Oe),"undefined"!=typeof ze&&(ze.StereoAudioRecorder=Ke),"undefined"!=typeof ze&&(ze.CanvasRecorder=je),"undefined"!=typeof ze&&(ze.WhammyRecorder=Pe);var wn=function(){function e(e){this.frames=[],this.duration=e||1,this.quality=.8}function A(e){var A=Qn.createObjectURL(new Blob([e.toString(),"this.onmessage =  function (e) {"+e.name+"(e.data);}"],{type:"application/javascript"})),t=new Worker(A);return Qn.revokeObjectURL(A),t}function t(e){function A(e,A,t){return[{data:e,id:231}].concat(t.map(function(e){var t=l({discardable:0,frame:e.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:it(A)});return A+=e.duration,{data:t,id:163}}))}function t(e){if(!e[0])return void postMessage({error:"Something went wrong. Maybe WebP format is not supported in the current browser."});for(var A=e[0].width,t=e[0].height,r=e[0].duration,a=1;a<e.length;a++)r+=e[a].duration;return{duration:r,width:A,height:t}}function r(e){for(var A=[];0<e;)A.push(255&e),e>>=8;return new Uint8Array(A.reverse())}function a(e){return new Uint8Array(e.split("").map(function(A){return A.charCodeAt(0)}))}function s(e){var A=[],t=e.length%8?Array(9-e.length%8).join("0"):"";e=t+e;for(var r=0;r<e.length;r+=8)A.push(parseInt(e.substr(r,8),2));return new Uint8Array(A)}function d(e){for(var A=[],t=0,l;t<e.length;t++){l=e[t].data,"object"==typeof l&&(l=d(l)),"number"==typeof l&&(l=s(l.toString(2))),"string"==typeof l&&(l=a(l));var c=l.size||l.byteLength||l.length,B=rt(rt(nt(c)/nt(2))/8),g=c.toString(2),u=Array(7*B+7+1-g.length).join("0")+g,m=Array(B).join("0")+"1"+u;A.push(r(e[t].id)),A.push(s(m)),A.push(l)}return new Blob(A,{type:"video/webm"})}function l(e){var A=0;if(e.keyframe&&(A|=128),e.invisible&&(A|=8),e.lacing&&(A|=e.lacing<<1),e.discardable&&(A|=1),127<e.trackNum)throw"TrackNumber > 127 not supported";var t=[128|e.trackNum,e.timecode>>8,255&e.timecode,A].map(function(A){return ot(A)}).join("")+e.frame;return t}function c(e){for(var A=e.RIFF[0].WEBP[0],t=A.indexOf("\x9D\x01*"),r=0,a=[];4>r;r++)a[r]=A.charCodeAt(t+3+r);var s,d,l;return l=a[1]<<8|a[0],s=16383&l,l=a[3]<<8|a[2],d=16383&l,{width:s,height:d,data:A,riff:e}}function B(e,A){return parseInt(e.substr(A+4,4).split("").map(function(e){var A=e.charCodeAt(0).toString(2);return Array(8-A.length+1).join("0")+A}).join(""),2)}function g(e){for(var A=0,t={};A<e.length;){var r=e.substr(A,4),a=B(e,A),s=e.substr(A+4+4,a);A+=8+a,t[r]=t[r]||[],"RIFF"===r||"LIST"===r?t[r].push(g(s)):t[r].push(s)}return t}function u(e){return[].slice.call(new Uint8Array(new Float64Array([e]).buffer),0).map(function(A){return ot(A)}).reverse().join("")}var m=new function(e){var r=t(e);if(!r)return[];for(var a=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:u(r.duration),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:29637},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:r.width,id:176},{data:r.height,id:186}]}]}]}]}],s=0,l=0;s<e.length;){var c=[],B=0;do c.push(e[s]),B+=e[s].duration,s++;while(s<e.length&&B<3e4);var g={id:524531317,data:A(l,0,c)};a[1].data.push(g),l+=B}return d(a)}(e.map(function(e){var A=c(g(atob(e.image.slice(23))));return A.duration=e.duration,A}));postMessage(m)}return e.prototype.add=function(e,A){if("canvas"in e&&(e=e.canvas),"toDataURL"in e&&(e=e.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/ig.test(e))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:e,duration:A||this.duration})},e.prototype.compile=function(e){var r=A(t);r.onmessage=function(A){return A.data.error?void webrtcdev.error(A.data.error):void e(A.data)},r.postMessage(this.frames)},{Video:e}}();"undefined"!=typeof ze&&(ze.Whammy=wn);var yn={init:function(){function e(e){e.createObjectStore(t.dataStoreName)}function A(){function e(e){A.objectStore(t.dataStoreName).get(e).onsuccess=function(A){t.callback&&t.callback(A.target.result,e)}}var A=s.transaction([t.dataStoreName],"readwrite");t.videoBlob&&A.objectStore(t.dataStoreName).put(t.videoBlob,"videoBlob"),t.gifBlob&&A.objectStore(t.dataStoreName).put(t.gifBlob,"gifBlob"),t.audioBlob&&A.objectStore(t.dataStoreName).put(t.audioBlob,"audioBlob"),e("audioBlob"),e("videoBlob"),e("gifBlob")}var t=this;if("undefined"==typeof indexedDB||"undefined"==typeof indexedDB.open)return void webrtcdev.error("IndexedDB API are not available in this browser.");var r=this.dbName||location.href.replace(/\/|:|#|%|\.|\[|\]/g,""),a=indexedDB.open(r,1),s;a.onerror=t.onError,a.onsuccess=function(){if(s=a.result,s.onerror=t.onError,!s.setVersion)A();else if(1!==s.version){var r=s.setVersion(1);r.onsuccess=function(){e(s),A()}}else A()},a.onupgradeneeded=function(A){e(A.target.result)}},Fetch:function(e){return this.callback=e,this.init(),this},Store:function(e){return this.audioBlob=e.audioBlob,this.videoBlob=e.videoBlob,this.gifBlob=e.gifBlob,this.init(),this},onError:function(e){webrtcdev.error(JSON.stringify(e,null,"\t"))},dataStoreName:"recordRTC",dbName:null};"undefined"!=typeof ze&&(ze.DiskStorage=yn),"undefined"!=typeof ze&&(ze.GifRecorder=Ve);var Hn=0;Object.defineProperty(HTMLMediaElement.prototype,"playing",{get:function(){return!(!(0<this.currentTime)||this.paused||this.ended||!(2<this.readyState))}});var Sn={},Tn=null,In=null,Nn=[],Rn={},Ln=!1,Mn;this.getlisteninlink=function(){Ut||console.error("cant generate listenin link , no session id found ");try{webrtcdev.log(" Current Session ",window.origin);let e=window.origin+"/#"+Ut+"?appname=webrtcwebcall&role=inspector&audio=0&video=0";return e}catch(A){return webrtcdev.error("ListenIn :",A),!1}},this.sendlisteninlink=function(e,A,t,r){var a={apikey:A,senderuseremail:t,receiveruseremail:r,webrtcsessionid:webrtcdevobj.sessionid,connectiontype:1};return fetch(e,{method:"post",crossDomain:!0,headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Authorization:A,"Access-Control-Allow-Origin":window.location.origin,"Access-Control-Allow-Credentials":"true"},body:JSON.stringify(a)}).then(e=>e.json()).then(e=>console.log("Listenin API response ",e)).catch(e=>console.error("Listenin API response ",e))};var Dn="",On=null,kn,xn,Kn,_n,Pn,Vn;try{On=new Worker("js/timekeeper.js"),On.addEventListener("message",function(A){let e=d(A.data.remotetime);A.data.remotetime&&e&&(e.innerHTML=A.data.time)},!1)}catch(e){webrtcdev.error("[timerjs]",e)}var zn=function(){try{var e=[];for(x in Bt){let A=Bt[+x+1];if(!A)break;webrtcdev.debug(" [timer js] startPeersTime for ",A.userid),ye(A),e.push({zone:A.zone,userid:A.userid,remotetime:"remoteTime_"+A.userid}),Ot=!0}webrtcdev.info("[timerjs] Final tobj ",e),0<e.length&&On.postMessage(e)}catch(A){webrtcdev.error(A)}};this.getwebrtcdevlogs=function(){return webrtcdevlogs?webrtcdevlogs:null},this.sendwebrtcdevLogs=function(e,A,t){const r=new FormData;r.append("name",username||"no name"),document.getElementById($t.screenshotContainer)&&r.append("scimage",document.getElementById($t.screenshotContainer).src),document.getElementById($t.logsContainer)&&(document.getElementById($t.logsContainer).innerText=webrtcdevlogs),r.append("apikey",A),r.append("useremail",ht),r.append("sessionid",Ut),r.append("message",t);{r.append("logfileContent",webrtcdevlogs)}return fetch(e,{method:"POST",body:r})},this.showUserStats=showUserStats=function(){var e=" userid-"+ct+" Email-"+ht+" Audio-"+outgoing.audio+" Video-"+outgoing.video+" Role- "+An;document.getElementById("userstatus")?document.getElementById("userstatus").innerHTML=e:document.body.append("USER Status "+e)},this.getscreenshot=function(e){var A=document.querySelector(e);html2canvas(A).then(e=>e.toDataURL())};var Gn=function(e){for(x in Bt)if(Bt[x].userid==e)return Bt[x];return null},Xn=function(e){for(x in Bt)if(Bt[x].userid==e)return x;return null},Jn=function(e){for(x in webrtcdev.log("peerinfomanager] find perinfo SDP ",e),lt.peers)if(lt.peers[x].userid==e){webrtcdev.log("peerinfomanager] PeerInfo Remote ",lt.peers[x]);let e=lt.peers[x].peer.currentRemoteDescription;webrtcdev.log("peerinfomanager] PeerInfo Remote SDP ",e.type,e.sdp);let A=e.sdp.split("\n").map(e=>e.trim());A.forEach(function(e){if(0===e.indexOf("a=fingerprint:")){let A=e.substr(14).split(" ");console.log("algorithm - ",A[0]),console.log("fingerprint - ",A[1])}if(0===e.indexOf("m=audio")){let A=e.substr(8).split(" ");console.log("Audio codecs - ",A)}if(0===e.indexOf("m=video")){let A=e.substr(8).split(" ");console.log("Video codecs - ",A)}if(0===e.indexOf("c=IN IP4")){let A=e.substr(9).split(" ");console.log("Contact line - ",A)}})}return null};this.getwebcallpeers=function(){return Bt};var Yn=function(e,A){return webrtcdev.log(" [widgets] widgetsobj ",A),new Promise(function(A){if(kt.active?(webrtcdev.log(" chat objs ",kt.inputBox,kt.inputBox.text_id,document.getElementById(kt.inputBox.text_id)),kt.inputBox&&kt.inputBox.text_id?(webrtcdev.log("[sessionmanager] chatObj - Assign chat Box "),ge(kt)):(webrtcdev.log("[sessionmanager] chatobj - Create chat Box "),Be(kt)),webrtcdev.log("[sessionmanager] chat widget loaded ")):webrtcdev.log("[sessionmanager] chat widget deactivated  "),Kt&&Kt.active&&"inspector"!=An?(Kt.button.id&&document.getElementById(Kt.button.id)?(webrtcdev.log("[sessionmanager] Assign Screen Record Button "),le(Kt)):(webrtcdev.log("[sessionmanager] Create Screen Record Button "),ce(Kt)),webrtcdev.log(" [sessionmanager] Screen record widget loaded ")):Kt&&!Kt.active&&(Kt.button&&Kt.button.id&&document.getElementById(Kt.button.id)&&(document.getElementById(Kt.button.id).className="inactiveButton"),webrtcdev.warn("[sessionmanager] Screen record widget deactivated")),Zt.active?(Zt.button.shareButton.id&&d(Zt.button.shareButton.id)?(webrtcdev.log("[sessionmanager] Assign screenshare Button "),se(Zt.button.shareButton)):(webrtcdev.log("[sessionmanager] Create screenshare Button "),ie(Zt)),webrtcdev.log(" [sessionmanager]screen share widget loaded ")):webrtcdev.warn("[sessionmanager] screen share widget deactivated "),Jt&&Jt.active?(Jt.button.id&&document.getElementById(Jt.button.id)?(webrtcdev.log("[sessionmanager] Reconnect Button Assigned"),HA(Jt.button.id)):(webrtcdev.log("[sessionmanager]Rconnect Button created"),yA(Jt)),webrtcdev.log(" [sessionmanager]reconnect widget loaded ")):Jt&&!Jt.active&&(Jt.button&&Jt.button.id&&document.getElementById(Jt.button.id)&&(document.getElementById(Jt.button.id).className="inactiveButton"),webrtcdev.warn(" [sessionmanager] reconnect widget deactivated ")),Yt&&Yt.active?(B("cursor1"),B("cursor2"),webrtcdev.log(" [sessionmanager] cursor widget not loaded ")):webrtcdev.warn(" [sessionmanager] cursor widget deactivated "),qt&&qt.active?(qt.button.id&&document.getElementById(qt.button.id),webrtcdev.log("[widget js] listenin widget loaded ")):qt&&!qt.active&&(qt.button&&qt.button.id&&document.getElementById(qt.button.id)&&(document.getElementById(qt.button.id).className="inactiveButton"),webrtcdev.warn("[widget js] listenin widget deactivated ")),Dt&&Dt.active?(he(Dt),B(Dt.container.id)):Dt&&!Dt.active&&webrtcdev.warn("[widget js] timer widget deactivated "),Vt&&Vt.active?(Vt.container&&Vt.container.id&&document.getElementById(Vt.container.id)&&(document.getElementById(Vt.container.id).hidden=!0),Vt.button&&Vt.button.id&&document.getElementById(Vt.button.id)?we(Vt):pe(Vt),Mn=function(){function e(e){t&&t.contentWindow.postMessage({canvasDesignerSyncData:e},"*")}function A(){event.data&&event.data.canvasDesignerSyncData&&s(event.data.canvasDesignerSyncData)}var t;let r={line:!0,pencil:!0,dragSingle:!0,dragMultiple:!0,eraser:!0,rectangle:!0,arc:!0,bezier:!0,quadratic:!0,text:!0};var a="pencil",s=function(e){webrtcdev.log("[widget js] syncDataListener",e)},d=window.addEventListener?"addEventListener":"attachEvent",l=window[d],c="attachEvent"==d?"onmessage":"message";return l(c,function(A){webrtcdev.log(" [widget js] CanvasDesigner parent received message : ",A.data),A.data.modalpopup?dn.click():A.data||A.data.canvasDesignerSyncData?s(A.data.canvasDesignerSyncData):(!A.data||!A.data.canvasDesignerSyncData)&&webrtcdev.log("[widget js] parent received unexpected message")},!1),{appendTo:function(e){t=document.createElement("iframe"),t.id="drawboard",t.src="widget.html?tools="+JSON.stringify(r)+"&selectedIcon="+a,t.style.width="100%",t.style.height="100%",t.allowtransparency=!0,t.style.border=0,e.appendChild(t)},destroy:function(){t&&t.parentNode.removeChild(t),window.removeEventListener("message",A)},addSyncListener:function(e){s=e},syncData:e,setTools:function(e){r=e},setSelected:function(e){"undefined"!=typeof r[e]&&(a=e)}}}(),webrtcdev.log("[widget js] draw widget loaded ")):Vt&&!Vt.active&&(Vt.button&&Vt.button.id&&document.getElementById(Vt.button.id)&&(document.getElementById(Vt.button.id).className="inactiveButton"),webrtcdev.warn("[widget js] draw widget deactivated ")),zt.active&&_A(),Gt.active&&MA(),xt.active?(webrtcdev.log("[widget js] fileshareobj ",xt),e.enableFileSharing=!0,e.filesContainer=document.getElementById(xt.fileShareContainer),xt.button.id&&document.getElementById(xt.button.id)?E(xt):U(xt),webrtcdev.log(" [widget js] File sharing widget loaded ")):webrtcdev.warn("[widget js] File sharing widget not loaded "),en&&en.active)try{webrtcdev.log("[widget js]statisticsobj ",en),document.getElementById(en.statsConainer).innerHTML=""}catch(A){webrtcdev.error("[widget js] statisticsobj statsConainer not found",A)}if($t&&$t.active)try{webrtcdev.log("[widget js] helpobj ",$t,document.getElementById($t.helpContainer)),document.getElementById($t.helpContainer).innerHTML=""}catch(e){webrtcdev.error("[widget js] helpobj helpContainer not found",e)}A("success")})},Wn=function(e,t){return webrtcdev.log("[sessionmanager] setRtcConn - initiating RtcConn with signaller ",t),lt=new RTCMultiConnection,lt.channel=this.sessionid,lt.socketURL=t.signaller,lt.iceServers=t.turn.iceServers,lt.direction="many-to-many",lt.session={video:Tt||!0,audio:St||!0,data:It||!0},lt.sdpConstraints.mandatory={OfferToReceiveAudio:vt||!0,OfferToReceiveVideo:yt||!0},lt.dontCaptureUserMedia=!1,lt.dontGetRemoteStream=!1,lt.dontAttachStream=!1,webrtcdev.log("[sessionmanager] set dontCaptureUserMedia ",lt.dontCaptureUserMedia,", dontGetRemoteStream , ",lt.dontGetRemoteStream,", dontAttachStream ",lt.dontAttachStream),lt.isLowBandwidth=1>navigator.connection.downlink,lt.bandwidth={screen:!0,audio:!0,video:!0},lt.codecs={audio:"opus",video:"VP8"},lt.version="6.0.4",lt.onopen=function(A){webrtcdev.log("[sessionmanager] onopen - by ",A.userid,A);try{if(re(A.extra.name+" joined session ","info"),showdesktopnotification(document.title,A.extra.name+" joined session "),A.userid==ct)webrtcdev.log("[sessionmanager] onopen - selfuserid ",ct," joined the session "),webrtcdev.log("[sessionmanager] onopen - dispatch onLocalConnect"),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"session",action:"onLocalConnect"}}));else{if(webrtcdev.log(" SDP",Jn(A.userid)),"unlimited"!=rn.maxAllowed&&Bt.length<=rn.maxAllowed){webrtcdev.log("[sessionmanager] onopen: peer length "+Bt.length+" is less than max capacity of session  of the session "+rn.maxAllowed);let e=Gn(A.userid),t=A.extra.name,r=A.extra.color,a=A.extra.email,s=A.extra.role;e?(webrtcdev.log("[sessionmanager] onopen - PeerInfo was already present, this is s rejoin, update the peerinfo "),et(A.userid,t,r,a,s,"remote"),re(A.extra.role+" "+A.type)):(webrtcdev.log("[sessionmanager] onopen - create new peerinfo"),"LOCAL"==t&&(t="REMOTE"),et(A.userid,t,r,a,s,"remote"),re(A.extra.role+"  "+A.type)),u(e)}else webrtcdev.error("[sessionmanager] onopen - max capacity of session is reached ",rn.maxAllowed),ae("Another user is trying to join this channel but max count [ "+rn.maxAllowed+" ] is reached");webrtcdev.log("[sessionmanager] onopen - dispatch onSessionConnect"),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"session",action:"onSessionConnect"}}))}Mt||(!localStorage.getItem("userid")&&localStorage.setItem("userid",ct),!localStorage.getItem("channel")&&localStorage.setItem("channel",e))}catch(e){re("problem in session open ","warning"),webrtcdev.error("[sessionmanager] onopen - problem in session open",e)}},lt.onMediaError=function(e,A){webrtcdev.error("[sessionmanager] onMediaError - ",e," constraints ",A),webrtcdev.warn("[sessionmanager] onMediaError - Joining without camera Stream"),re(e.name+" Joining without camera Stream ","warning"),tn=!1;let t=Gn(ct);t.type="Local",t.stream="",t.streamid="",u(t)},lt.onstream=function(e){webrtcdev.log("[sessionmanager] onstream - event ",e),"local"==e.type&&(tn=!0);var A=Gn(e.userid);if(!A){webrtcdev.error("[sessionmanager] onstream - PeerInfo not present in webcallpeers "+e.userid+" creating it now ");let t=e.userid;et(t,e.extra.name,e.extra.color,e.extra.email,e.extra.role,e.type),qA(t,"stream",e.stream),qA(t,"streamid",e.stream.streamid),A=Gn(t),u(A),webrtcdev.log(" [sessionmanager] onstream - updated webcallview for ",t)}else"inspector"==An&&"local"==e.type?(webrtcdev.warn("[sessionmanager] onstream - ignore any incoming stream from inspector"),u(A)):(webrtcdev.error("[sessionmanager] onstream - PeerInfo updated with incoming stream and stream id "),qA(userid,"type",e.type),qA(userid,"stream",e.stream),qA(userid,"streamid",e.stream.streamid),A=Gn(userid),u(A),webrtcdev.log(" [sessionmanager] onstream - updated webcallview for ",A.userid))},lt.onstreamended=function(e){webrtcdev.warn("[sessionmanager] On streamEnded event ",e);let A=document.getElementById(e.streamid);A&&A.parentNode.removeChild(A)},lt.chunkSize=50000,lt.onmessage=function(t){if(webrtcdev.log("[sessionmanager] on message ",t),t.data.typing)ue(t.extra.name+" is typing ...");else if(t.data.stoppedTyping)ue("");else{let c=Gn(t.userid);switch(t.data.type){case"screenshare":if("startscreenshare"==t.data.message){let e=t.data.screenid;re("Starting screen share ",e);let A=document.getElementById(Zt.button.shareButton.id);A.className=Zt.button.shareButton.class_busy,A.innerHTML=Zt.button.shareButton.html_busy,A.disabled=!0,Re("join",e)}else if("screenshareStartedViewing"==t.data.message)de("","screenshareStartedViewing");else if("stoppedscreenshare"==t.data.message){re("Screenshare has stopped : "+t.data.screenStreamid);let e=document.getElementById(Zt.button.shareButton.id);e.className=Zt.button.shareButton.class_off,e.innerHTML=Zt.button.shareButton.html_off,e.disabled=!1,Me(t.data.screenStreamid)}else webrtcdev.warn("[sessionmanager] unrecognized screen-share message ",t.data.message);break;case"chat":ue(t.extra.name+" has send message"),nA({header:t.extra.name,message:t.data.message,userinfo:t.data.userinfo,color:t.extra.color}),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"chat",action:"onchat"}}));break;case"imagesnapshot":H(null,c,t.data.message,t.data.name,"imagesnapshot"),T(null,c,t.data.message,t.data.name,"imagesnapshot");break;case"videoRecording":H(null,c,t.data.message,t.data.name,"videoRecording"),T(null,c,t.data.message,t.data.name,"videoRecording");break;case"videoScreenRecording":H(null,c,t.data.message,t.data.name,"videoScreenRecording"),T(null,c,t.data.message,t.data.name,"videoScreenRecording");break;case"file":nA({header:t.extra.name,message:t.data.message,userinfo:A(lt.blobURLs[t.userid],"chat-message.png"),color:t.extra.color});break;case"canvas":t.data.draw?Mn.syncData(t.data.draw):t.data.board?(webrtcdev.log("[sessionmanager] Canvas : ",t.data),"remote"==t.data.board.from&&"open"==t.data.board.event&&!0!=Ln&&me(t.data.board)):webrtcdev.warn(" Board data mismatch",t.data);break;case"texteditor":VA(t.data.data);break;case"codeeditor":kA(t.data.data);break;case"pointer":var e=document.getElementById("cursor2");e?"startCursor"==t.data.action?(e.setAttribute("style","display:block"),TA(e,t.data.corX,t.data.corY)):"stopCursor"==t.data.action&&e.setAttribute("style","display:none"):alert(" Cursor for remote is not present ");break;case"timer":c&&(!c.time&&(c.time=t.data.time),!c.zone&&(c.zone=t.data.zone),webrtcdev.log("[sessionmanager] webcallpeers appended with zone and datetime ",c)),webrtcdev.log("[sessionmanager] peerTimerStarted, start peerTimeZone and startPeersTime"),WA(t.data.zone,t.userid),zn(t.data.time,t.data.zone,t.userid);break;case"buttonclick":var r=d(t.data.buttonName);r.getAttribute("lastClickedBy")!=lt.userid&&(r.setAttribute("lastClickedBy",t.userid),r.click());break;case"syncOldFiles":EA();break;case"shareFileRemove":webrtcdev.log(" [sessionmanager] shareFileRemove - remove file : ",t.data._filename);var a=t.data._element,s=t.data._filename;let g="removeButton"+a;if(document.getElementById("display"+s)&&B("display"+s),document.getElementById(a))B(a),M(a),webrtcdev.log(" [sessionmanager] shareFileRemove done");else return void webrtcdev.log(" [sessionmanager] shareFileRemove already done since ",a,"element doesnt exist ");document.getElementById(g).click(),B(g);break;case"shareFileStopUpload":var l=t.data._element;for(x in webrtcdev.log(" [sessionmanager] shareFileStopUpload",l),Bt)for(y in Bt[x].filearray)if(Bt[x].filearray[y].pid==l)return webrtcdev.log("[ sessionmanager ] shareFileStopUpload -  filepid ",Bt[x].filearray[y].pid," | status ",Bt[x].filearray[y].status),Bt[x].filearray[y].status="stopped",L(l),void M(l);break;case"sendstats":He();break;case"receivedstats":Se(t.userid,t.data.message);break;default:webrtcdev.warn("[sessionmanager] unrecognizable message from peer  ",t);}}},lt.sendMessage=function(e){webrtcdev.log("[session manager] sendMessage ",e),e.userid=lt.userid,e.extra=lt.extra,lt.sendCustomMessage(e)},lt.onleave=function(A){webrtcdev.log("[session manager] onleav -  ",A),webrtcdev.warn("[session manager] onleave - userid left ",A.userid);var e=Gn(A.userid);e&&(e.name&&(re(e.name+" left the conversation."),webrtcdev.log("[session manager] onleave - name ",e.name)),webrtcdev.warn("[session manager]  onleave -  remove peerinfo ",e," from webcallpeers ",Bt),h(e),$A(A.userid))},lt.onclose=function(A){webrtcdev.warn("[session manager] RTCConn on close  ",A)},lt.onEntireSessionClosed=function(A){webrtcdev.warn("[session manager]  on Entire sesion closed ",A),lt.attachStreams.forEach(function(e){e.stop()}),re("Session Disconnected")},lt.onFileStart=function(e){webrtcdev.log("[sessionmanager] onFileStart",e),wA(e)},lt.onFileProgress=function(e){hA(e)},lt.onFileEnd=function(e){fA(e)},lt.takeSnapshot=function(e,A){Ze({userid:e,connection:connection,callback:A})},lt.connectionType=null,lt.remoteUsers=[],lt.extra={uuid:lt.userid,name:wt||"",color:"undefined"==typeof rn.userdetails?"":rn.userdetails.usercolor,email:ht||"",role:An||"participant"},lt.socketMessageEvent="RTCMultiConnection-Message",lt.socketCustomEvent="RTCMultiConnection-Custom-Message",lt.enableFileSharing=!0,lt.filesContainer=document.body||document.documentElement,lt.onSocketDisconnect=function(A){webrtcdev.error("[sesionmanager ] on Socket Disconnected ",A),webrtcdev.log("[sesionmanager ] re-establish socket connection  with SDP "),lt.rejoin(lt.connectionDescription)},lt.onSocketError=function(A){webrtcdev.error("[sesionmanager ] on Socket Error ",A)},webrtcdev.log("[sessionmanager] rtcConn : ",lt),lt},jn=function(e,A,t){webrtcdev.info("[sessionmanager] - openWebRTC channel: ",e),socket.emit("open-channel",{channel:e,sender:A,maxAllowed:t}),re(" Making a new session ")},qn=function(e,A){re("Joining an existing session "+e),webrtcdev.info(" [sessionmanager] joinWebRTC channel: ",e),Mt&&showUserStats(),socket.emit("join-channel",{channel:e,sender:A,extra:{userid:A,name:wt||"",color:ft||"",email:ht||"",role:An||"participant"}})},Zn=function(e,A,t){var r=Gn(t);if("done'"==r.setup)return void webrtcdev.info(" [sessionmanager] setupCallView is laready done for peer",r);if(p(r),Mt&&showUserStats(),qt.active&&"inspector"==An&&(webrtcdev.info(" [sessionmanage] freezing screen for role inspector "),SA()),xt.active){if("single"==xt.props.fileShare)V(r),d(r.fileShare.outerbox).style.width="100%";else if("divided"==xt.props.fileShare){for(x in"inspector"==An?webrtcdev.log("[sessionmanager] Since it is an inspector's own session , not creating local File viewer and list"):(webrtcdev.log(" [sessionmanager] creating local file sharing"),V(r)),Bt)Bt[x].userid!=ct&&"inspector"!=Bt[x].role&&(webrtcdev.log("[sessionmanager] setupCallView - creating remote file sharing "),V(Bt[x]));xt.sendOldFiles&&UA()}else webrtcdev.error("[sessionmanager] fileshareobj.props.fileShare undefined ");"single"==xt.props.fileList?document.getElementById(r.fileList.outerbox).style.width="100%":"single"==xt.props.fileShare?webrtcdev.error("fileshareobj.props.fileShare undefined "):webrtcdev.log("No Separate div created for this peer since fileshare container is single")}en&&en.active&&getWebrtcdevStats(),Dt&&Dt.active&&(XA(Dt),YA(),be(),Ee())};window.onunload=function(){webrtcdev.log("[startjs] onunload ",localStorage.getItem("channel")),alert(" Refreshing the Page will loose the session data")},this.clearCaches=clearCaches=function(){localStorage.clear()}};"undefined"!=typeof module&&(module.exports=exports=webrtcdevcon);