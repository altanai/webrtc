<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../../../">
  <title data-ice="title">src/codemirror/mode/lua/lua.js | webrtcdevelopment</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="webrtc based communication and collaboration client. Contains lot of experiments modules "><meta property="twitter:card" content="summary"><meta property="twitter:title" content="webrtcdevelopment"><meta property="twitter:description" content="webrtc based communication and collaboration client. Contains lot of experiments modules "></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/altanai/webrtc"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#scripts">scripts</a><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-CanvasRecorder">CanvasRecorder</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-GetRecorderType">GetRecorderType</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-GifRecorder">GifRecorder</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-MRecordRTC">MRecordRTC</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-MediaStreamRecorder">MediaStreamRecorder</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-RecordRTC">RecordRTC</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-RecordRTCConfiguration">RecordRTCConfiguration</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-StereoAudioRecorder">StereoAudioRecorder</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Whammy">Whammy</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-WhammyRecorder">WhammyRecorder</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-createFileSharingDiv">createFileSharingDiv</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-_turn.js">_turn.js</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#scripts-rtcconn">scripts/rtcconn</a><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Whammy">Whammy</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/codemirror/mode/lua/lua.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">// CodeMirror, copyright (c) by Marijn Haverbeke and others
// Distributed under an MIT license: http://codemirror.net/LICENSE

// LUA mode. Ported to CodeMirror 2 from Franciszek Wawrzak&apos;s
// CodeMirror 1 mode.
// highlights keywords, strings, comments (no leveling supported! (&quot;[==[&quot;)), tokens, basic indenting

(function(mod) {
  if (typeof exports == &quot;object&quot; &amp;&amp; typeof module == &quot;object&quot;) // CommonJS
    mod(require(&quot;../../lib/codemirror&quot;));
  else if (typeof define == &quot;function&quot; &amp;&amp; define.amd) // AMD
    define([&quot;../../lib/codemirror&quot;], mod);
  else // Plain browser env
    mod(CodeMirror);
})(function(CodeMirror) {
&quot;use strict&quot;;

CodeMirror.defineMode(&quot;lua&quot;, function(config, parserConfig) {
  var indentUnit = config.indentUnit;

  function prefixRE(words) {
    return new RegExp(&quot;^(?:&quot; + words.join(&quot;|&quot;) + &quot;)&quot;, &quot;i&quot;);
  }
  function wordRE(words) {
    return new RegExp(&quot;^(?:&quot; + words.join(&quot;|&quot;) + &quot;)$&quot;, &quot;i&quot;);
  }
  var specials = wordRE(parserConfig.specials || []);

  // long list of standard functions from lua manual
  var builtins = wordRE([
    &quot;_G&quot;,&quot;_VERSION&quot;,&quot;assert&quot;,&quot;collectgarbage&quot;,&quot;dofile&quot;,&quot;error&quot;,&quot;getfenv&quot;,&quot;getmetatable&quot;,&quot;ipairs&quot;,&quot;load&quot;,
    &quot;loadfile&quot;,&quot;loadstring&quot;,&quot;module&quot;,&quot;next&quot;,&quot;pairs&quot;,&quot;pcall&quot;,&quot;print&quot;,&quot;rawequal&quot;,&quot;rawget&quot;,&quot;rawset&quot;,&quot;require&quot;,
    &quot;select&quot;,&quot;setfenv&quot;,&quot;setmetatable&quot;,&quot;tonumber&quot;,&quot;tostring&quot;,&quot;type&quot;,&quot;unpack&quot;,&quot;xpcall&quot;,

    &quot;coroutine.create&quot;,&quot;coroutine.resume&quot;,&quot;coroutine.running&quot;,&quot;coroutine.status&quot;,&quot;coroutine.wrap&quot;,&quot;coroutine.yield&quot;,

    &quot;debug.debug&quot;,&quot;debug.getfenv&quot;,&quot;debug.gethook&quot;,&quot;debug.getinfo&quot;,&quot;debug.getlocal&quot;,&quot;debug.getmetatable&quot;,
    &quot;debug.getregistry&quot;,&quot;debug.getupvalue&quot;,&quot;debug.setfenv&quot;,&quot;debug.sethook&quot;,&quot;debug.setlocal&quot;,&quot;debug.setmetatable&quot;,
    &quot;debug.setupvalue&quot;,&quot;debug.traceback&quot;,

    &quot;close&quot;,&quot;flush&quot;,&quot;lines&quot;,&quot;read&quot;,&quot;seek&quot;,&quot;setvbuf&quot;,&quot;write&quot;,

    &quot;io.close&quot;,&quot;io.flush&quot;,&quot;io.input&quot;,&quot;io.lines&quot;,&quot;io.open&quot;,&quot;io.output&quot;,&quot;io.popen&quot;,&quot;io.read&quot;,&quot;io.stderr&quot;,&quot;io.stdin&quot;,
    &quot;io.stdout&quot;,&quot;io.tmpfile&quot;,&quot;io.type&quot;,&quot;io.write&quot;,

    &quot;math.abs&quot;,&quot;math.acos&quot;,&quot;math.asin&quot;,&quot;math.atan&quot;,&quot;math.atan2&quot;,&quot;math.ceil&quot;,&quot;math.cos&quot;,&quot;math.cosh&quot;,&quot;math.deg&quot;,
    &quot;math.exp&quot;,&quot;math.floor&quot;,&quot;math.fmod&quot;,&quot;math.frexp&quot;,&quot;math.huge&quot;,&quot;math.ldexp&quot;,&quot;math.log&quot;,&quot;math.log10&quot;,&quot;math.max&quot;,
    &quot;math.min&quot;,&quot;math.modf&quot;,&quot;math.pi&quot;,&quot;math.pow&quot;,&quot;math.rad&quot;,&quot;math.random&quot;,&quot;math.randomseed&quot;,&quot;math.sin&quot;,&quot;math.sinh&quot;,
    &quot;math.sqrt&quot;,&quot;math.tan&quot;,&quot;math.tanh&quot;,

    &quot;os.clock&quot;,&quot;os.date&quot;,&quot;os.difftime&quot;,&quot;os.execute&quot;,&quot;os.exit&quot;,&quot;os.getenv&quot;,&quot;os.remove&quot;,&quot;os.rename&quot;,&quot;os.setlocale&quot;,
    &quot;os.time&quot;,&quot;os.tmpname&quot;,

    &quot;package.cpath&quot;,&quot;package.loaded&quot;,&quot;package.loaders&quot;,&quot;package.loadlib&quot;,&quot;package.path&quot;,&quot;package.preload&quot;,
    &quot;package.seeall&quot;,

    &quot;string.byte&quot;,&quot;string.char&quot;,&quot;string.dump&quot;,&quot;string.find&quot;,&quot;string.format&quot;,&quot;string.gmatch&quot;,&quot;string.gsub&quot;,
    &quot;string.len&quot;,&quot;string.lower&quot;,&quot;string.match&quot;,&quot;string.rep&quot;,&quot;string.reverse&quot;,&quot;string.sub&quot;,&quot;string.upper&quot;,

    &quot;table.concat&quot;,&quot;table.insert&quot;,&quot;table.maxn&quot;,&quot;table.remove&quot;,&quot;table.sort&quot;
  ]);
  var keywords = wordRE([&quot;and&quot;,&quot;break&quot;,&quot;elseif&quot;,&quot;false&quot;,&quot;nil&quot;,&quot;not&quot;,&quot;or&quot;,&quot;return&quot;,
                         &quot;true&quot;,&quot;function&quot;, &quot;end&quot;, &quot;if&quot;, &quot;then&quot;, &quot;else&quot;, &quot;do&quot;,
                         &quot;while&quot;, &quot;repeat&quot;, &quot;until&quot;, &quot;for&quot;, &quot;in&quot;, &quot;local&quot; ]);

  var indentTokens = wordRE([&quot;function&quot;, &quot;if&quot;,&quot;repeat&quot;,&quot;do&quot;, &quot;\\(&quot;, &quot;{&quot;]);
  var dedentTokens = wordRE([&quot;end&quot;, &quot;until&quot;, &quot;\\)&quot;, &quot;}&quot;]);
  var dedentPartial = prefixRE([&quot;end&quot;, &quot;until&quot;, &quot;\\)&quot;, &quot;}&quot;, &quot;else&quot;, &quot;elseif&quot;]);

  function readBracket(stream) {
    var level = 0;
    while (stream.eat(&quot;=&quot;)) ++level;
    stream.eat(&quot;[&quot;);
    return level;
  }

  function normal(stream, state) {
    var ch = stream.next();
    if (ch == &quot;-&quot; &amp;&amp; stream.eat(&quot;-&quot;)) {
      if (stream.eat(&quot;[&quot;) &amp;&amp; stream.eat(&quot;[&quot;))
        return (state.cur = bracketed(readBracket(stream), &quot;comment&quot;))(stream, state);
      stream.skipToEnd();
      return &quot;comment&quot;;
    }
    if (ch == &quot;\&quot;&quot; || ch == &quot;&apos;&quot;)
      return (state.cur = string(ch))(stream, state);
    if (ch == &quot;[&quot; &amp;&amp; /[\[=]/.test(stream.peek()))
      return (state.cur = bracketed(readBracket(stream), &quot;string&quot;))(stream, state);
    if (/\d/.test(ch)) {
      stream.eatWhile(/[\w.%]/);
      return &quot;number&quot;;
    }
    if (/[\w_]/.test(ch)) {
      stream.eatWhile(/[\w\\\-_.]/);
      return &quot;variable&quot;;
    }
    return null;
  }

  function bracketed(level, style) {
    return function(stream, state) {
      var curlev = null, ch;
      while ((ch = stream.next()) != null) {
        if (curlev == null) {if (ch == &quot;]&quot;) curlev = 0;}
        else if (ch == &quot;=&quot;) ++curlev;
        else if (ch == &quot;]&quot; &amp;&amp; curlev == level) { state.cur = normal; break; }
        else curlev = null;
      }
      return style;
    };
  }

  function string(quote) {
    return function(stream, state) {
      var escaped = false, ch;
      while ((ch = stream.next()) != null) {
        if (ch == quote &amp;&amp; !escaped) break;
        escaped = !escaped &amp;&amp; ch == &quot;\\&quot;;
      }
      if (!escaped) state.cur = normal;
      return &quot;string&quot;;
    };
  }

  return {
    startState: function(basecol) {
      return {basecol: basecol || 0, indentDepth: 0, cur: normal};
    },

    token: function(stream, state) {
      if (stream.eatSpace()) return null;
      var style = state.cur(stream, state);
      var word = stream.current();
      if (style == &quot;variable&quot;) {
        if (keywords.test(word)) style = &quot;keyword&quot;;
        else if (builtins.test(word)) style = &quot;builtin&quot;;
        else if (specials.test(word)) style = &quot;variable-2&quot;;
      }
      if ((style != &quot;comment&quot;) &amp;&amp; (style != &quot;string&quot;)){
        if (indentTokens.test(word)) ++state.indentDepth;
        else if (dedentTokens.test(word)) --state.indentDepth;
      }
      return style;
    },

    indent: function(state, textAfter) {
      var closing = dedentPartial.test(textAfter);
      return state.basecol + indentUnit * (state.indentDepth - (closing ? 1 : 0));
    },

    lineComment: &quot;--&quot;,
    blockCommentStart: &quot;--[[&quot;,
    blockCommentEnd: &quot;]]&quot;
  };
});

CodeMirror.defineMIME(&quot;text/x-lua&quot;, &quot;lua&quot;);

});
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
