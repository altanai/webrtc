<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../../../">
  <title data-ice="title">src/codemirror/mode/asterisk/asterisk.js | webrtcdevelopment</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="webrtc based communication and collaboration client. Contains lot of experiments modules "><meta property="twitter:card" content="summary"><meta property="twitter:title" content="webrtcdevelopment"><meta property="twitter:description" content="webrtc based communication and collaboration client. Contains lot of experiments modules "></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/altanai/webrtc"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#scripts">scripts</a><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-CanvasRecorder">CanvasRecorder</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-GetRecorderType">GetRecorderType</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-GifRecorder">GifRecorder</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-MRecordRTC">MRecordRTC</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-MediaStreamRecorder">MediaStreamRecorder</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-RecordRTC">RecordRTC</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-RecordRTCConfiguration">RecordRTCConfiguration</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-StereoAudioRecorder">StereoAudioRecorder</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Whammy">Whammy</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-WhammyRecorder">WhammyRecorder</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-createFileSharingDiv">createFileSharingDiv</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-_turn.js">_turn.js</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#scripts-rtcconn">scripts/rtcconn</a><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Whammy">Whammy</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/codemirror/mode/asterisk/asterisk.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">// CodeMirror, copyright (c) by Marijn Haverbeke and others
// Distributed under an MIT license: http://codemirror.net/LICENSE

/*
 * =====================================================================================
 *
 *       Filename:  mode/asterisk/asterisk.js
 *
 *    Description:  CodeMirror mode for Asterisk dialplan
 *
 *        Created:  05/17/2012 09:20:25 PM
 *       Revision:  none
 *
 *         Author:  Stas Kobzar (stas@modulis.ca),
 *        Company:  Modulis.ca Inc.
 *
 * =====================================================================================
 */

(function(mod) {
  if (typeof exports == &quot;object&quot; &amp;&amp; typeof module == &quot;object&quot;) // CommonJS
    mod(require(&quot;../../lib/codemirror&quot;));
  else if (typeof define == &quot;function&quot; &amp;&amp; define.amd) // AMD
    define([&quot;../../lib/codemirror&quot;], mod);
  else // Plain browser env
    mod(CodeMirror);
})(function(CodeMirror) {
&quot;use strict&quot;;

CodeMirror.defineMode(&quot;asterisk&quot;, function() {
  var atoms    = [&quot;exten&quot;, &quot;same&quot;, &quot;include&quot;,&quot;ignorepat&quot;,&quot;switch&quot;],
      dpcmd    = [&quot;#include&quot;,&quot;#exec&quot;],
      apps     = [
                  &quot;addqueuemember&quot;,&quot;adsiprog&quot;,&quot;aelsub&quot;,&quot;agentlogin&quot;,&quot;agentmonitoroutgoing&quot;,&quot;agi&quot;,
                  &quot;alarmreceiver&quot;,&quot;amd&quot;,&quot;answer&quot;,&quot;authenticate&quot;,&quot;background&quot;,&quot;backgrounddetect&quot;,
                  &quot;bridge&quot;,&quot;busy&quot;,&quot;callcompletioncancel&quot;,&quot;callcompletionrequest&quot;,&quot;celgenuserevent&quot;,
                  &quot;changemonitor&quot;,&quot;chanisavail&quot;,&quot;channelredirect&quot;,&quot;chanspy&quot;,&quot;clearhash&quot;,&quot;confbridge&quot;,
                  &quot;congestion&quot;,&quot;continuewhile&quot;,&quot;controlplayback&quot;,&quot;dahdiacceptr2call&quot;,&quot;dahdibarge&quot;,
                  &quot;dahdiras&quot;,&quot;dahdiscan&quot;,&quot;dahdisendcallreroutingfacility&quot;,&quot;dahdisendkeypadfacility&quot;,
                  &quot;datetime&quot;,&quot;dbdel&quot;,&quot;dbdeltree&quot;,&quot;deadagi&quot;,&quot;dial&quot;,&quot;dictate&quot;,&quot;directory&quot;,&quot;disa&quot;,
                  &quot;dumpchan&quot;,&quot;eagi&quot;,&quot;echo&quot;,&quot;endwhile&quot;,&quot;exec&quot;,&quot;execif&quot;,&quot;execiftime&quot;,&quot;exitwhile&quot;,&quot;extenspy&quot;,
                  &quot;externalivr&quot;,&quot;festival&quot;,&quot;flash&quot;,&quot;followme&quot;,&quot;forkcdr&quot;,&quot;getcpeid&quot;,&quot;gosub&quot;,&quot;gosubif&quot;,
                  &quot;goto&quot;,&quot;gotoif&quot;,&quot;gotoiftime&quot;,&quot;hangup&quot;,&quot;iax2provision&quot;,&quot;ices&quot;,&quot;importvar&quot;,&quot;incomplete&quot;,
                  &quot;ivrdemo&quot;,&quot;jabberjoin&quot;,&quot;jabberleave&quot;,&quot;jabbersend&quot;,&quot;jabbersendgroup&quot;,&quot;jabberstatus&quot;,
                  &quot;jack&quot;,&quot;log&quot;,&quot;macro&quot;,&quot;macroexclusive&quot;,&quot;macroexit&quot;,&quot;macroif&quot;,&quot;mailboxexists&quot;,&quot;meetme&quot;,
                  &quot;meetmeadmin&quot;,&quot;meetmechanneladmin&quot;,&quot;meetmecount&quot;,&quot;milliwatt&quot;,&quot;minivmaccmess&quot;,&quot;minivmdelete&quot;,
                  &quot;minivmgreet&quot;,&quot;minivmmwi&quot;,&quot;minivmnotify&quot;,&quot;minivmrecord&quot;,&quot;mixmonitor&quot;,&quot;monitor&quot;,&quot;morsecode&quot;,
                  &quot;mp3player&quot;,&quot;mset&quot;,&quot;musiconhold&quot;,&quot;nbscat&quot;,&quot;nocdr&quot;,&quot;noop&quot;,&quot;odbc&quot;,&quot;odbc&quot;,&quot;odbcfinish&quot;,
                  &quot;originate&quot;,&quot;ospauth&quot;,&quot;ospfinish&quot;,&quot;osplookup&quot;,&quot;ospnext&quot;,&quot;page&quot;,&quot;park&quot;,&quot;parkandannounce&quot;,
                  &quot;parkedcall&quot;,&quot;pausemonitor&quot;,&quot;pausequeuemember&quot;,&quot;pickup&quot;,&quot;pickupchan&quot;,&quot;playback&quot;,&quot;playtones&quot;,
                  &quot;privacymanager&quot;,&quot;proceeding&quot;,&quot;progress&quot;,&quot;queue&quot;,&quot;queuelog&quot;,&quot;raiseexception&quot;,&quot;read&quot;,&quot;readexten&quot;,
                  &quot;readfile&quot;,&quot;receivefax&quot;,&quot;receivefax&quot;,&quot;receivefax&quot;,&quot;record&quot;,&quot;removequeuemember&quot;,
                  &quot;resetcdr&quot;,&quot;retrydial&quot;,&quot;return&quot;,&quot;ringing&quot;,&quot;sayalpha&quot;,&quot;saycountedadj&quot;,&quot;saycountednoun&quot;,
                  &quot;saycountpl&quot;,&quot;saydigits&quot;,&quot;saynumber&quot;,&quot;sayphonetic&quot;,&quot;sayunixtime&quot;,&quot;senddtmf&quot;,&quot;sendfax&quot;,
                  &quot;sendfax&quot;,&quot;sendfax&quot;,&quot;sendimage&quot;,&quot;sendtext&quot;,&quot;sendurl&quot;,&quot;set&quot;,&quot;setamaflags&quot;,
                  &quot;setcallerpres&quot;,&quot;setmusiconhold&quot;,&quot;sipaddheader&quot;,&quot;sipdtmfmode&quot;,&quot;sipremoveheader&quot;,&quot;skel&quot;,
                  &quot;slastation&quot;,&quot;slatrunk&quot;,&quot;sms&quot;,&quot;softhangup&quot;,&quot;speechactivategrammar&quot;,&quot;speechbackground&quot;,
                  &quot;speechcreate&quot;,&quot;speechdeactivategrammar&quot;,&quot;speechdestroy&quot;,&quot;speechloadgrammar&quot;,&quot;speechprocessingsound&quot;,
                  &quot;speechstart&quot;,&quot;speechunloadgrammar&quot;,&quot;stackpop&quot;,&quot;startmusiconhold&quot;,&quot;stopmixmonitor&quot;,&quot;stopmonitor&quot;,
                  &quot;stopmusiconhold&quot;,&quot;stopplaytones&quot;,&quot;system&quot;,&quot;testclient&quot;,&quot;testserver&quot;,&quot;transfer&quot;,&quot;tryexec&quot;,
                  &quot;trysystem&quot;,&quot;unpausemonitor&quot;,&quot;unpausequeuemember&quot;,&quot;userevent&quot;,&quot;verbose&quot;,&quot;vmauthenticate&quot;,
                  &quot;vmsayname&quot;,&quot;voicemail&quot;,&quot;voicemailmain&quot;,&quot;wait&quot;,&quot;waitexten&quot;,&quot;waitfornoise&quot;,&quot;waitforring&quot;,
                  &quot;waitforsilence&quot;,&quot;waitmusiconhold&quot;,&quot;waituntil&quot;,&quot;while&quot;,&quot;zapateller&quot;
                 ];

  function basicToken(stream,state){
    var cur = &apos;&apos;;
    var ch  = &apos;&apos;;
    ch = stream.next();
    // comment
    if(ch == &quot;;&quot;) {
      stream.skipToEnd();
      return &quot;comment&quot;;
    }
    // context
    if(ch == &apos;[&apos;) {
      stream.skipTo(&apos;]&apos;);
      stream.eat(&apos;]&apos;);
      return &quot;header&quot;;
    }
    // string
    if(ch == &apos;&quot;&apos;) {
      stream.skipTo(&apos;&quot;&apos;);
      return &quot;string&quot;;
    }
    if(ch == &quot;&apos;&quot;) {
      stream.skipTo(&quot;&apos;&quot;);
      return &quot;string-2&quot;;
    }
    // dialplan commands
    if(ch == &apos;#&apos;) {
      stream.eatWhile(/\w/);
      cur = stream.current();
      if(dpcmd.indexOf(cur) !== -1) {
        stream.skipToEnd();
        return &quot;strong&quot;;
      }
    }
    // application args
    if(ch == &apos;$&apos;){
      var ch1 = stream.peek();
      if(ch1 == &apos;{&apos;){
        stream.skipTo(&apos;}&apos;);
        stream.eat(&apos;}&apos;);
        return &quot;variable-3&quot;;
      }
    }
    // extension
    stream.eatWhile(/\w/);
    cur = stream.current();
    if(atoms.indexOf(cur) !== -1) {
      state.extenStart = true;
      switch(cur) {
        case &apos;same&apos;: state.extenSame = true; break;
        case &apos;include&apos;:
        case &apos;switch&apos;:
        case &apos;ignorepat&apos;:
          state.extenInclude = true;break;
        default:break;
      }
      return &quot;atom&quot;;
    }
  }

  return {
    startState: function() {
      return {
        extenStart: false,
        extenSame:  false,
        extenInclude: false,
        extenExten: false,
        extenPriority: false,
        extenApplication: false
      };
    },
    token: function(stream, state) {

      var cur = &apos;&apos;;
      var ch  = &apos;&apos;;
      if(stream.eatSpace()) return null;
      // extension started
      if(state.extenStart){
        stream.eatWhile(/[^\s]/);
        cur = stream.current();
        if(/^=&gt;?$/.test(cur)){
          state.extenExten = true;
          state.extenStart = false;
          return &quot;strong&quot;;
        } else {
          state.extenStart = false;
          stream.skipToEnd();
          return &quot;error&quot;;
        }
      } else if(state.extenExten) {
        // set exten and priority
        state.extenExten = false;
        state.extenPriority = true;
        stream.eatWhile(/[^,]/);
        if(state.extenInclude) {
          stream.skipToEnd();
          state.extenPriority = false;
          state.extenInclude = false;
        }
        if(state.extenSame) {
          state.extenPriority = false;
          state.extenSame = false;
          state.extenApplication = true;
        }
        return &quot;tag&quot;;
      } else if(state.extenPriority) {
        state.extenPriority = false;
        state.extenApplication = true;
        ch = stream.next(); // get comma
        if(state.extenSame) return null;
        stream.eatWhile(/[^,]/);
        return &quot;number&quot;;
      } else if(state.extenApplication) {
        stream.eatWhile(/,/);
        cur = stream.current();
        if(cur === &apos;,&apos;) return null;
        stream.eatWhile(/\w/);
        cur = stream.current().toLowerCase();
        state.extenApplication = false;
        if(apps.indexOf(cur) !== -1){
          return &quot;def strong&quot;;
        }
      } else{
        return basicToken(stream,state);
      }

      return null;
    }
  };
});

CodeMirror.defineMIME(&quot;text/x-asterisk&quot;, &quot;asterisk&quot;);

});
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
